var U1=Object.defineProperty,B1=Object.defineProperties,j1=Object.getOwnPropertyDescriptors,uO=Object.getOwnPropertySymbols,H1=Object.prototype.hasOwnProperty,$1=Object.prototype.propertyIsEnumerable,cO=(ze,fe,F)=>fe in ze?U1(ze,fe,{enumerable:!0,configurable:!0,writable:!0,value:F}):ze[fe]=F,lO=(ze,fe)=>{for(var F in fe||(fe={}))H1.call(fe,F)&&cO(ze,F,fe[F]);if(uO)for(var F of uO(fe))$1.call(fe,F)&&cO(ze,F,fe[F]);return ze},dO=(ze,fe)=>B1(ze,j1(fe));(self.webpackChunkfirebase_demo=self.webpackChunkfirebase_demo||[]).push([[179],{8255:ze=>{function fe(F){return Promise.resolve().then(()=>{var p=new Error("Cannot find module '"+F+"'");throw p.code="MODULE_NOT_FOUND",p})}fe.keys=()=>[],fe.resolve=fe,fe.id=8255,ze.exports=fe},3018:(ze,fe,F)=>{"use strict";F.d(fe,{deG:()=>Um,tb:()=>RD,AFp:()=>AD,ip1:()=>M0,CZH:()=>Ed,hGG:()=>$0,z2F:()=>Xo,sBO:()=>DC,Sil:()=>mm,_Vd:()=>ja,EJc:()=>k0,SBq:()=>zo,qLn:()=>eo,vpe:()=>Pt,gxx:()=>bu,tBr:()=>cc,XFs:()=>Xe,OlP:()=>bn,zs3:()=>xn,ZZ4:()=>zg,aQg:()=>x_,soG:()=>pm,YKP:()=>hf,v3s:()=>kx,h0i:()=>Ou,PXZ:()=>lo,R0b:()=>uo,FiY:()=>Js,Lbi:()=>O0,g9A:()=>xD,Qsj:()=>_C,FYo:()=>Pc,JOm:()=>ls,Tiy:()=>S_,q3G:()=>Sn,tp0:()=>wa,EAV:()=>zD,Rgc:()=>Kg,dDg:()=>FD,DyG:()=>Ea,q4F:()=>kc,GfV:()=>Nu,s_b:()=>Yg,ifc:()=>At,eFA:()=>V0,G48:()=>BD,Gpc:()=>_e,X6Q:()=>_m,_c5:()=>eT,VLi:()=>VM,c2e:()=>P0,zSh:()=>Lo,wAp:()=>dt,vHH:()=>Ce,EiD:()=>Tp,mCW:()=>Cl,qzn:()=>qr,JVY:()=>Wm,pB0:()=>Ep,eBb:()=>Mv,L6k:()=>Zm,LAX:()=>Ta,cg1:()=>Ni,Tjo:()=>ri,kL8:()=>Qh,yhl:()=>lc,dqk:()=>Ke,sIi:()=>Lh,CqO:()=>Zl,QGY:()=>Tg,F4k:()=>LE,RDi:()=>Bi,AaK:()=>K,z3N:()=>Rs,qOj:()=>zy,TTD:()=>Vi,_Bn:()=>sf,xp6:()=>it,uIk:()=>RE,ekj:()=>$E,Suo:()=>sD,Xpm:()=>We,lG2:()=>ra,Yz7:()=>mt,cJS:()=>vs,oAB:()=>Dn,Yjl:()=>fo,Y36:()=>Gh,_UZ:()=>ps,qZA:()=>Tc,TgZ:()=>o_,EpF:()=>Ac,n5z:()=>is,Ikx:()=>eb,LFG:()=>kn,$8M:()=>Ss,NdJ:()=>VE,CRH:()=>oD,oxw:()=>Sg,ALo:()=>K_,lcZ:()=>o0,Q6J:()=>qh,DdM:()=>q_,VKq:()=>ZC,iGM:()=>QS,CHM:()=>eu,LSH:()=>Xs,kYT:()=>Ut,YNc:()=>he,_uU:()=>p_,Oqu:()=>Ng,hij:()=>Og,AsE:()=>g_});var p=F(9765),X=F(5319),L=F(8891),ie=F(6682),oe=F(2441);var le=F(1307);function ee(){return new p.xQ}function k(i){for(let s in i)if(i[s]===k)return s;throw Error("Could not find renamed property on target object.")}function Y(i,s){for(const o in s)s.hasOwnProperty(o)&&!i.hasOwnProperty(o)&&(i[o]=s[o])}function K(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(K).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const s=i.toString();if(null==s)return""+s;const o=s.indexOf("\n");return-1===o?s:s.substring(0,o)}function se(i,s){return null==i||""===i?null===s?"":s:null==s||""===s?i:i+" "+s}const ke=k({__forward_ref__:k});function _e(i){return i.__forward_ref__=_e,i.toString=function(){return K(this())},i}function ue(i){return Ne(i)?i():i}function Ne(i){return"function"==typeof i&&i.hasOwnProperty(ke)&&i.__forward_ref__===_e}class Ce extends Error{constructor(s,o){super(function(i,s){return`${i?`NG0${i}: `:""}${s}`}(s,o)),this.code=s}}function Be(i){return"string"==typeof i?i:null==i?"":String(i)}function Lt(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():Be(i)}function je(i,s){const o=s?` in ${s}`:"";throw new Ce("201",`No provider for ${Lt(i)} found${o}`)}function dn(i,s){null==i&&function(i,s,o,u){throw new Error(`ASSERTION ERROR: ${i}`+(null==u?"":` [Expected=> ${o} ${u} ${s} <=Actual]`))}(s,i,null,"!=")}function mt(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function vs(i){return{providers:i.providers||[],imports:i.imports||[]}}function Un(i){return Or(i,sn)||Or(i,Bs)}function Or(i,s){return i.hasOwnProperty(s)?i[s]:null}function Cn(i){return i&&(i.hasOwnProperty(_n)||i.hasOwnProperty(Es))?i[_n]:null}const sn=k({\u0275prov:k}),_n=k({\u0275inj:k}),Bs=k({ngInjectableDef:k}),Es=k({ngInjectorDef:k});var Xe=(()=>((Xe=Xe||{})[Xe.Default=0]="Default",Xe[Xe.Host=1]="Host",Xe[Xe.Self=2]="Self",Xe[Xe.SkipSelf=4]="SkipSelf",Xe[Xe.Optional=8]="Optional",Xe))();let Pr;function si(i){const s=Pr;return Pr=i,s}function hn(i,s,o){const u=Un(i);return u&&"root"==u.providedIn?void 0===u.value?u.value=u.factory():u.value:o&Xe.Optional?null:void 0!==s?s:void je(K(i),"Injector")}function tt(i){return{toString:i}.toString()}var Wn=(()=>((Wn=Wn||{})[Wn.OnPush=0]="OnPush",Wn[Wn.Default=1]="Default",Wn))(),At=(()=>((At=At||{})[At.Emulated=0]="Emulated",At[At.None=2]="None",At[At.ShadowDom=3]="ShadowDom",At))();const Kt="undefined"!=typeof globalThis&&globalThis,ho="undefined"!=typeof window&&window,on="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Ke=Kt||"undefined"!=typeof global&&global||ho||on,ve={},Ae=[],yt=k({\u0275cmp:k}),bt=k({\u0275dir:k}),Wt=k({\u0275pipe:k}),$=k({\u0275mod:k}),j=k({\u0275loc:k}),W=k({\u0275fac:k}),pe=k({__NG_ELEMENT_ID__:k});let ce=0;function We(i){return tt(()=>{const o={},u={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:o,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===Wn.OnPush,directiveDefs:null,pipeDefs:null,selectors:i.selectors||Ae,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||At.Emulated,id:"c",styles:i.styles||Ae,_:null,setInput:null,schemas:i.schemas||null,tView:null},l=i.directives,d=i.features,m=i.pipes;return u.id+=ce++,u.inputs=pr(i.inputs,o),u.outputs=pr(i.outputs),d&&d.forEach(v=>v(u)),u.directiveDefs=l?()=>("function"==typeof l?l():l).map(Xt):null,u.pipeDefs=m?()=>("function"==typeof m?m():m).map(Zn):null,u})}function Xt(i){return Nn(i)||function(i){return i[bt]||null}(i)}function Zn(i){return function(i){return i[Wt]||null}(i)}const Kn={};function Dn(i){return tt(()=>{const s={type:i.type,bootstrap:i.bootstrap||Ae,declarations:i.declarations||Ae,imports:i.imports||Ae,exports:i.exports||Ae,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null};return null!=i.id&&(Kn[i.id]=i.type),s})}function Ut(i,s){return tt(()=>{const o=Yn(i,!0);o.declarations=s.declarations||Ae,o.imports=s.imports||Ae,o.exports=s.exports||Ae})}function pr(i,s){if(null==i)return ve;const o={};for(const u in i)if(i.hasOwnProperty(u)){let l=i[u],d=l;Array.isArray(l)&&(d=l[1],l=l[0]),o[l]=u,s&&(s[l]=d)}return o}const ra=We;function fo(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,onDestroy:i.type.prototype.ngOnDestroy||null}}function Nn(i){return i[yt]||null}function Yn(i,s){const o=i[$]||null;if(!o&&!0===s)throw new Error(`Type ${K(i)} does not have '\u0275mod' property.`);return o}function Xi(i){return Array.isArray(i)&&"object"==typeof i[1]}function Tn(i){return Array.isArray(i)&&!0===i[1]}function Lu(i){return 0!=(8&i.flags)}function Vu(i){return 2==(2&i.flags)}function bs(i){return 1==(1&i.flags)}function Ci(i){return null!==i.template}function Uu(i){return 0!=(512&i[2])}function Ur(i,s){return i.hasOwnProperty(W)?i[W]:null}class es{constructor(s,o,u){this.previousValue=s,this.currentValue=o,this.firstChange=u}isFirstChange(){return this.firstChange}}function Vi(){return Bu}function Bu(i){return i.type.prototype.ngOnChanges&&(i.setInput=Xf),Bd}function Bd(){const i=Qa(this),s=null==i?void 0:i.current;if(s){const o=i.previous;if(o===ve)i.previous=s;else for(let u in s)o[u]=s[u];i.current=null,this.ngOnChanges(s)}}function Xf(i,s,o,u){const l=Qa(i)||function(i,s){return i[rl]=s}(i,{previous:ve,current:null}),d=l.current||(l.current={}),m=l.previous,v=this.declaredInputs[o],b=m[v];d[v]=new es(b&&b.currentValue,s,m===ve),i[u]=s}Vi.ngInherit=!0;const rl="__ngSimpleChanges__";function Qa(i){return i[rl]||null}let ua;function Bi(i){ua=i}function Yt(i){return!!i.listen}const ws={createRenderer:(i,s)=>void 0!==ua?ua:"undefined"!=typeof document?document:void 0};function Vt(i){for(;Array.isArray(i);)i=i[0];return i}function Is(i,s){return Vt(s[i])}function oi(i,s){return Vt(s[i.index])}function Cs(i,s){return i.data[s]}function ar(i,s){const o=s[i];return Xi(o)?o:o[0]}function Ir(i){return 4==(4&i[2])}function Ja(i){return 128==(128&i[2])}function ts(i,s){return null==s?null:i[s]}function _o(i){i[18]=0}function Xa(i,s){i[5]+=s;let o=i,u=i[3];for(;null!==u&&(1===s&&1===o[5]||-1===s&&0===o[5]);)u[5]+=s,o=u,u=u[3]}const ht={lFrame:pa(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function ca(){return ht.bindingsEnabled}function Ee(){return ht.lFrame.lView}function Bt(){return ht.lFrame.tView}function eu(i){return ht.lFrame.contextLView=i,i[8]}function gn(){let i=qu();for(;null!==i&&64===i.type;)i=i.parent;return i}function qu(){return ht.lFrame.currentTNode}function Di(i,s){const o=ht.lFrame;o.currentTNode=i,o.isParent=s}function la(){return ht.lFrame.isParent}function da(){return ht.isInCheckNoChangesMode}function ns(i){ht.isInCheckNoChangesMode=i}function ur(){const i=ht.lFrame;let s=i.bindingRootIndex;return-1===s&&(s=i.bindingRootIndex=i.tView.bindingStartIndex),s}function Br(){return ht.lFrame.bindingIndex}function Ws(){return ht.lFrame.bindingIndex++}function ji(i){const s=ht.lFrame,o=s.bindingIndex;return s.bindingIndex=s.bindingIndex+i,o}function al(i,s){const o=ht.lFrame;o.bindingIndex=o.bindingRootIndex=i,tu(s)}function tu(i){ht.lFrame.currentDirectiveIndex=i}function zd(){return ht.lFrame.currentQueryIndex}function Zu(i){ht.lFrame.currentQueryIndex=i}function tp(i){const s=i[1];return 2===s.type?s.declTNode:1===s.type?i[6]:null}function Ku(i,s,o){if(o&Xe.SkipSelf){let l=s,d=i;for(;!(l=l.parent,null!==l||o&Xe.Host||(l=tp(d),null===l||(d=d[15],10&l.type))););if(null===l)return!1;s=l,i=d}const u=ht.lFrame=Wd();return u.currentTNode=s,u.lView=i,!0}function Io(i){const s=Wd(),o=i[1];ht.lFrame=s,s.currentTNode=o.firstChild,s.lView=i,s.tView=o,s.contextLView=i,s.bindingIndex=o.bindingStartIndex,s.inI18n=!1}function Wd(){const i=ht.lFrame,s=null===i?null:i.child;return null===s?pa(i):s}function pa(i){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=s),s}function ul(){const i=ht.lFrame;return ht.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const Pm=ul;function Yu(){const i=ul();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function jr(){return ht.lFrame.selectedIndex}function ai(i){ht.lFrame.selectedIndex=i}function En(){const i=ht.lFrame;return Cs(i.tView,i.selectedIndex)}function ga(i,s){for(let o=s.directiveStart,u=s.directiveEnd;o<u;o++){const d=i.data[o].type.prototype,{ngAfterContentInit:m,ngAfterContentChecked:v,ngAfterViewInit:b,ngAfterViewChecked:C,ngOnDestroy:S}=d;m&&(i.contentHooks||(i.contentHooks=[])).push(-o,m),v&&((i.contentHooks||(i.contentHooks=[])).push(o,v),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(o,v)),b&&(i.viewHooks||(i.viewHooks=[])).push(-o,b),C&&((i.viewHooks||(i.viewHooks=[])).push(o,C),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(o,C)),null!=S&&(i.destroyHooks||(i.destroyHooks=[])).push(o,S)}}function Qu(i,s,o){Ju(i,s,3,o)}function cl(i,s,o,u){(3&i[2])===o&&Ju(i,s,o,u)}function iu(i,s){let o=i[2];(3&o)===s&&(o&=2047,o+=1,i[2]=o)}function Ju(i,s,o,u){const d=null!=u?u:-1,m=s.length-1;let v=0;for(let b=void 0!==u?65535&i[18]:0;b<m;b++)if("number"==typeof s[b+1]){if(v=s[b],null!=u&&v>=u)break}else s[b]<0&&(i[18]+=65536),(v<d||-1==d)&&(ll(i,o,s,b),i[18]=(4294901760&i[18])+b+2),b++}function ll(i,s,o,u){const l=o[u]<0,d=o[u+1],v=i[l?-o[u]:o[u]];if(l){if(i[2]>>11<i[18]>>16&&(3&i[2])===s){i[2]+=2048;try{d.call(v)}finally{}}}else try{d.call(v)}finally{}}class ma{constructor(s,o,u){this.factory=s,this.resolving=!1,this.canSeeViewProviders=o,this.injectImpl=u}}function su(i,s,o){const u=Yt(i);let l=0;for(;l<o.length;){const d=o[l];if("number"==typeof d){if(0!==d)break;l++;const m=o[l++],v=o[l++],b=o[l++];u?i.setAttribute(s,v,b,m):s.setAttributeNS(m,v,b)}else{const m=d,v=o[++l];ap(m)?u&&i.setProperty(s,m,v):u?i.setAttribute(s,m,v):s.setAttribute(m,v),l++}}return l}function Xu(i){return 3===i||4===i||6===i}function ap(i){return 64===i.charCodeAt(0)}function ec(i,s){if(null!==s&&0!==s.length)if(null===i||0===i.length)i=s.slice();else{let o=-1;for(let u=0;u<s.length;u++){const l=s[u];"number"==typeof l?o=l:0===o||up(i,o,l,null,-1===o||2===o?s[++u]:null)}}return i}function up(i,s,o,u,l){let d=0,m=i.length;if(-1===s)m=-1;else for(;d<i.length;){const v=i[d++];if("number"==typeof v){if(v===s){m=-1;break}if(v>s){m=d-1;break}}}for(;d<i.length;){const v=i[d];if("number"==typeof v)break;if(v===o){if(null===u)return void(null!==l&&(i[d+1]=l));if(u===i[d+1])return void(i[d+2]=l)}d++,null!==u&&d++,null!==l&&d++}-1!==m&&(i.splice(m,0,s),d=m+1),i.splice(d++,0,o),null!==u&&i.splice(d++,0,u),null!==l&&i.splice(d++,0,l)}function ya(i){return-1!==i}function Hi(i){return 32767&i}function ou(i,s){let o=function(i){return i>>16}(i),u=s;for(;o>0;)u=u[15],o--;return u}let tc=!0;function hl(i){const s=tc;return tc=i,s}let ft=0;function Do(i,s){const o=nc(i,s);if(-1!==o)return o;const u=s[1];u.firstCreatePass&&(i.injectorIndex=s.length,Cr(u.data,i),Cr(s,null),Cr(u.blueprint,null));const l=Zs(i,s),d=i.injectorIndex;if(ya(l)){const m=Hi(l),v=ou(l,s),b=v[1].data;for(let C=0;C<8;C++)s[d+C]=v[m+C]|b[m+C]}return s[d+8]=l,d}function Cr(i,s){i.push(0,0,0,0,0,0,0,0,s)}function nc(i,s){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===s[i.injectorIndex+8]?-1:i.injectorIndex}function Zs(i,s){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let o=0,u=null,l=s;for(;null!==l;){const d=l[1],m=d.type;if(u=2===m?d.declTNode:1===m?l[6]:null,null===u)return-1;if(o++,l=l[15],-1!==u.injectorIndex)return u.injectorIndex|o<<16}return-1}function li(i,s,o){!function(i,s,o){let u;"string"==typeof o?u=o.charCodeAt(0)||0:o.hasOwnProperty(pe)&&(u=o[pe]),null==u&&(u=o[pe]=ft++);const l=255&u;s.data[i+(l>>5)]|=1<<l}(i,s,o)}function Xd(i,s,o){if(o&Xe.Optional)return i;je(s,"NodeInjector")}function As(i,s,o,u){if(o&Xe.Optional&&void 0===u&&(u=null),0==(o&(Xe.Self|Xe.Host))){const l=i[9],d=si(void 0);try{return l?l.get(s,u,o&Xe.Optional):hn(s,u,o&Xe.Optional)}finally{si(d)}}return Xd(u,s,o)}function Hr(i,s,o,u=Xe.Default,l){if(null!==i){const d=function(i){if("string"==typeof i)return i.charCodeAt(0)||0;const s=i.hasOwnProperty(pe)?i[pe]:void 0;return"number"==typeof s?s>=0?255&s:To:s}(o);if("function"==typeof d){if(!Ku(s,i,u))return u&Xe.Host?Xd(l,o,u):As(s,o,u,l);try{const m=d(u);if(null!=m||u&Xe.Optional)return m;je(o)}finally{Pm()}}else if("number"==typeof d){let m=null,v=nc(i,s),b=-1,C=u&Xe.Host?s[16][6]:null;for((-1===v||u&Xe.SkipSelf)&&(b=-1===v?Zs(i,s):s[v+8],-1!==b&&Ks(u,!1)?(m=s[1],v=Hi(b),s=ou(b,s)):v=-1);-1!==v;){const S=s[1];if(ic(d,v,S.data)){const N=th(v,s,o,m,u,C);if(N!==eh)return N}b=s[v+8],-1!==b&&Ks(u,s[1].data[v+8]===C)&&ic(d,v,s)?(m=S,v=Hi(b),s=ou(b,s)):v=-1}}}return As(s,o,u,l)}const eh={};function To(){return new rs(gn(),Ee())}function th(i,s,o,u,l,d){const m=s[1],v=m.data[i+8],S=Qt(v,m,o,null==u?Vu(v)&&tc:u!=m&&0!=(3&v.type),l&Xe.Host&&d===v);return null!==S?_a(s,m,S,v):eh}function Qt(i,s,o,u,l){const d=i.providerIndexes,m=s.data,v=1048575&d,b=i.directiveStart,S=d>>20,P=l?v+S:i.directiveEnd;for(let H=u?v:v+S;H<P;H++){const z=m[H];if(H<b&&o===z||H>=b&&z.type===o)return H}if(l){const H=m[b];if(H&&Ci(H)&&H.type===o)return b}return null}function _a(i,s,o,u){let l=i[o];const d=s.data;if(function(i){return i instanceof ma}(l)){const m=l;m.resolving&&function(i,s){throw new Ce("200",`Circular dependency in DI detected for ${i}`)}(Lt(d[o]));const v=hl(m.canSeeViewProviders);m.resolving=!0;const b=m.injectImpl?si(m.injectImpl):null;Ku(i,u,Xe.Default);try{l=i[o]=m.factory(void 0,d,i,u),s.firstCreatePass&&o>=u.directiveStart&&function(i,s,o){const{ngOnChanges:u,ngOnInit:l,ngDoCheck:d}=s.type.prototype;if(u){const m=Bu(s);(o.preOrderHooks||(o.preOrderHooks=[])).push(i,m),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(i,m)}l&&(o.preOrderHooks||(o.preOrderHooks=[])).push(0-i,l),d&&((o.preOrderHooks||(o.preOrderHooks=[])).push(i,d),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(i,d))}(o,d[o],s)}finally{null!==b&&si(b),hl(v),m.resolving=!1,Pm()}}return l}function ic(i,s,o){return!!(o[s+(i>>5)]&1<<i)}function Ks(i,s){return!(i&Xe.Self||i&Xe.Host&&s)}class rs{constructor(s,o){this._tNode=s,this._lView=o}get(s,o,u){return Hr(this._tNode,this._lView,s,u,o)}}function is(i){return tt(()=>{const s=i.prototype.constructor,o=s[W]||Ys(s),u=Object.prototype;let l=Object.getPrototypeOf(i.prototype).constructor;for(;l&&l!==u;){const d=l[W]||Ys(l);if(d&&d!==o)return d;l=Object.getPrototypeOf(l)}return d=>new d})}function Ys(i){return Ne(i)?()=>{const s=Ys(ue(i));return s&&s()}:Ur(i)}function Ss(i){return function(i,s){if("class"===s)return i.classes;if("style"===s)return i.styles;const o=i.attrs;if(o){const u=o.length;let l=0;for(;l<u;){const d=o[l];if(Xu(d))break;if(0===d)l+=2;else if("number"==typeof d)for(l++;l<u&&"string"==typeof o[l];)l++;else{if(d===s)return o[l+1];l+=2}}}return null}(gn(),i)}const Ao="__parameters__";function $i(i,s,o){return tt(()=>{const u=function(i){return function(...o){if(i){const u=i(...o);for(const l in u)this[l]=u[l]}}}(s);function l(...d){if(this instanceof l)return u.apply(this,d),this;const m=new l(...d);return v.annotation=m,v;function v(b,C,S){const N=b.hasOwnProperty(Ao)?b[Ao]:Object.defineProperty(b,Ao,{value:[]})[Ao];for(;N.length<=S;)N.push(null);return(N[S]=N[S]||[]).push(m),b}}return o&&(l.prototype=Object.create(o.prototype)),l.prototype.ngMetadataName=i,l.annotationCls=l,l})}class bn{constructor(s,o){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof o?this.__NG_ELEMENT_ID__=o:void 0!==o&&(this.\u0275prov=mt({token:this,providedIn:o.providedIn||"root",factory:o.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Um=new bn("AnalyzeForEntryComponents"),Ea=Function;function Gr(i,s){void 0===s&&(s=i);for(let o=0;o<i.length;o++){let u=i[o];Array.isArray(u)?(s===i&&(s=i.slice(0,o)),Gr(u,s)):s!==i&&s.push(u)}return s}function hi(i,s){i.forEach(o=>Array.isArray(o)?hi(o,s):s(o))}function ml(i,s,o){s>=i.length?i.push(o):i.splice(s,0,o)}function ba(i,s){return s>=i.length-1?i.pop():i.splice(s,1)[0]}function $n(i,s,o){let u=On(i,s);return u>=0?i[1|u]=o:(u=~u,function(i,s,o,u){let l=i.length;if(l==s)i.push(o,u);else if(1===l)i.push(u,i[0]),i[0]=o;else{for(l--,i.push(i[l-1],i[l]);l>s;)i[l]=i[l-2],l--;i[s]=o,i[s+1]=u}}(i,u,s,o)),u}function lu(i,s){const o=On(i,s);if(o>=0)return i[1|o]}function On(i,s){return function(i,s,o){let u=0,l=i.length>>o;for(;l!==u;){const d=u+(l-u>>1),m=i[d<<o];if(s===m)return d<<o;m>s?l=d:u=d+1}return~(l<<o)}(i,s,1)}const re={},be="__NG_DI_FLAG__",Fe="ngTempTokenPath",_t=/\n/gm,at="__source",Xn=k({provide:String,useValue:k});let Ti;function as(i){const s=Ti;return Ti=i,s}function us(i,s=Xe.Default){if(void 0===Ti)throw new Error("inject() must be called from an injection context");return null===Ti?hn(i,void 0,s):Ti.get(i,s&Xe.Optional?null:void 0,s)}function kn(i,s=Xe.Default){return(Pr||us)(ue(i),s)}function yr(i){const s=[];for(let o=0;o<i.length;o++){const u=ue(i[o]);if(Array.isArray(u)){if(0===u.length)throw new Error("Arguments array must have arguments.");let l,d=Xe.Default;for(let m=0;m<u.length;m++){const v=u[m],b=gp(v);"number"==typeof b?-1===b?l=v.token:d|=b:l=v}s.push(kn(l,d))}else s.push(kn(u))}return s}function pi(i,s){return i[be]=s,i.prototype[be]=s,i}function gp(i){return i[be]}function er(i,s,o,u){const l=i[Fe];throw s[at]&&l.unshift(s[at]),i.message=function(i,s,o,u=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.substr(2):i;let l=K(s);if(Array.isArray(s))l=s.map(K).join(" -> ");else if("object"==typeof s){let d=[];for(let m in s)if(s.hasOwnProperty(m)){let v=s[m];d.push(m+":"+("string"==typeof v?JSON.stringify(v):K(v)))}l=`{${d.join(", ")}}`}return`${o}${u?"("+u+")":""}[${l}]: ${i.replace(_t,"\n  ")}`}("\n"+i.message,l,o,u),i.ngTokenPath=l,i[Fe]=null,i}const cc=pi($i("Inject",i=>({token:i})),-1),Js=pi($i("Optional"),8),wa=pi($i("SkipSelf"),4);let No;function Ca(i){var s;return(null===(s=function(){if(void 0===No&&(No=null,Ke.trustedTypes))try{No=Ke.trustedTypes.createPolicy("angular",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch(i){}return No}())||void 0===s?void 0:s.createHTML(i))||i}class mu{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Sv extends mu{getTypeName(){return"HTML"}}class xv extends mu{getTypeName(){return"Style"}}class Rv extends mu{getTypeName(){return"Script"}}class zm extends mu{getTypeName(){return"URL"}}class vp extends mu{getTypeName(){return"ResourceURL"}}function Rs(i){return i instanceof mu?i.changingThisBreaksApplicationSecurity:i}function qr(i,s){const o=lc(i);if(null!=o&&o!==s){if("ResourceURL"===o&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${o} (see https://g.co/ng/security#xss)`)}return o===s}function lc(i){return i instanceof mu&&i.getTypeName()||null}function Wm(i){return new Sv(i)}function Zm(i){return new xv(i)}function Mv(i){return new Rv(i)}function Ta(i){return new zm(i)}function Ep(i){return new vp(i)}class dh{constructor(s){this.inertDocumentHelper=s}getInertBodyElement(s){s="<body><remove></remove>"+s;try{const o=(new window.DOMParser).parseFromString(Ca(s),"text/html").body;return null===o?this.inertDocumentHelper.getInertBodyElement(s):(o.removeChild(o.firstChild),o)}catch(o){return null}}}class Ym{constructor(s){if(this.defaultDoc=s,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const o=this.inertDocument.createElement("html");this.inertDocument.appendChild(o);const u=this.inertDocument.createElement("body");o.appendChild(u)}}getInertBodyElement(s){const o=this.inertDocument.createElement("template");if("content"in o)return o.innerHTML=Ca(s),o;const u=this.inertDocument.createElement("body");return u.innerHTML=Ca(s),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(u),u}stripCustomNsAttrs(s){const o=s.attributes;for(let l=o.length-1;0<l;l--){const m=o.item(l).name;("xmlns:ns1"===m||0===m.indexOf("ns1:"))&&s.removeAttribute(m)}let u=s.firstChild;for(;u;)u.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(u),u=u.nextSibling}}const hh=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Il=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Cl(i){return(i=String(i)).match(hh)||i.match(Il)?i:"unsafe:"+i}function Ms(i){const s={};for(const o of i.split(","))s[o]=!0;return s}function yu(...i){const s={};for(const o of i)for(const u in o)o.hasOwnProperty(u)&&(s[u]=!0);return s}const Jm=Ms("area,br,col,hr,img,wbr"),wp=Ms("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),hc=Ms("rp,rt"),ph=yu(Jm,yu(wp,Ms("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),yu(hc,Ms("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),yu(hc,wp)),Ip=Ms("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),fc=Ms("srcset"),Aa=yu(Ip,fc,Ms("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Ms("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),ey=Ms("script,style,template");class gh{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(s){let o=s.firstChild,u=!0;for(;o;)if(o.nodeType===Node.ELEMENT_NODE?u=this.startElement(o):o.nodeType===Node.TEXT_NODE?this.chars(o.nodeValue):this.sanitizedSomething=!0,u&&o.firstChild)o=o.firstChild;else for(;o;){o.nodeType===Node.ELEMENT_NODE&&this.endElement(o);let l=this.checkClobberedElement(o,o.nextSibling);if(l){o=l;break}o=this.checkClobberedElement(o,o.parentNode)}return this.buf.join("")}startElement(s){const o=s.nodeName.toLowerCase();if(!ph.hasOwnProperty(o))return this.sanitizedSomething=!0,!ey.hasOwnProperty(o);this.buf.push("<"),this.buf.push(o);const u=s.attributes;for(let l=0;l<u.length;l++){const d=u.item(l),m=d.name,v=m.toLowerCase();if(!Aa.hasOwnProperty(v)){this.sanitizedSomething=!0;continue}let b=d.value;Ip[v]&&(b=Cl(b)),fc[v]&&(i=b,b=(i=String(i)).split(",").map(s=>Cl(s.trim())).join(", ")),this.buf.push(" ",m,'="',mh(b),'"')}var i;return this.buf.push(">"),!0}endElement(s){const o=s.nodeName.toLowerCase();ph.hasOwnProperty(o)&&!Jm.hasOwnProperty(o)&&(this.buf.push("</"),this.buf.push(o),this.buf.push(">"))}chars(s){this.buf.push(mh(s))}checkClobberedElement(s,o){if(o&&(s.compareDocumentPosition(o)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${s.outerHTML}`);return o}}const Cp=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Dp=/([^\#-~ |!])/g;function mh(i){return i.replace(/&/g,"&amp;").replace(Cp,function(s){return"&#"+(1024*(s.charCodeAt(0)-55296)+(s.charCodeAt(1)-56320)+65536)+";"}).replace(Dp,function(s){return"&#"+s.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Dl;function Tp(i,s){let o=null;try{Dl=Dl||function(i){const s=new Ym(i);return function(){try{return!!(new window.DOMParser).parseFromString(Ca(""),"text/html")}catch(i){return!1}}()?new dh(s):s}(i);let u=s?String(s):"";o=Dl.getInertBodyElement(u);let l=5,d=u;do{if(0===l)throw new Error("Failed to sanitize html because the input is unstable");l--,u=d,d=o.innerHTML,o=Dl.getInertBodyElement(u)}while(u!==d);return Ca((new gh).sanitizeChildren(Tl(o)||o))}finally{if(o){const u=Tl(o)||o;for(;u.firstChild;)u.removeChild(u.firstChild)}}}function Tl(i){return"content"in i&&function(i){return i.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===i.nodeName}(i)?i.content:null}var Sn=(()=>((Sn=Sn||{})[Sn.NONE=0]="NONE",Sn[Sn.HTML=1]="HTML",Sn[Sn.STYLE=2]="STYLE",Sn[Sn.SCRIPT=3]="SCRIPT",Sn[Sn.URL=4]="URL",Sn[Sn.RESOURCE_URL=5]="RESOURCE_URL",Sn))();function Xs(i){const s=function(){const i=Ee();return i&&i[12]}();return s?s.sanitize(Sn.URL,i)||"":qr(i,"URL")?Rs(i):Cl(Be(i))}const _h="__ngContext__";function un(i,s){i[_h]=s}function Sl(i){const s=function(i){return i[_h]||null}(i);return s?Array.isArray(s)?s:s.lView:null}function _c(i){return i.ngOriginalError}function gi(i,...s){i.error(...s)}class eo{constructor(){this._console=console}handleError(s){const o=this._findOriginalError(s),u=this._findContext(s),l=(i=s)&&i.ngErrorLogger||gi;var i;l(this._console,"ERROR",s),o&&l(this._console,"ORIGINAL ERROR",o),u&&l(this._console,"ERROR CONTEXT",u)}_findContext(s){return s?s.ngDebugContext||this._findContext(_c(s)):null}_findOriginalError(s){let o=s&&_c(s);for(;o&&_c(o);)o=_c(o);return o||null}}const Fp=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Ke))();function _r(i){return i instanceof Function?i():i}var ls=(()=>((ls=ls||{})[ls.Important=1]="Important",ls[ls.DashCase=2]="DashCase",ls))();function jp(i,s){return undefined(i,s)}function _(i){const s=i[3];return Tn(s)?s[3]:s}function E(i){return x(i[13])}function T(i){return x(i[4])}function x(i){for(;null!==i&&!Tn(i);)i=i[4];return i}function Q(i,s,o,u,l){if(null!=u){let d,m=!1;Tn(u)?d=u:Xi(u)&&(m=!0,u=u[0]);const v=Vt(u);0===i&&null!==o?null==l?fy(s,o,v):to(s,o,v,l||null,!0):1===i&&null!==o?to(s,o,v,l||null,!0):2===i?function(i,s,o){const u=py(i,s);u&&function(i,s,o,u){Yt(i)?i.removeChild(s,o,u):s.removeChild(o)}(i,u,s,o)}(s,v,m):3===i&&s.destroyNode(v),null!=d&&function(i,s,o,u,l){const d=o[7];d!==Vt(o)&&Q(s,i,u,d,l);for(let v=10;v<o.length;v++){const b=o[v];zp(b[1],b,i,s,u,d)}}(s,i,d,o,l)}}function Ye(i,s,o){return Yt(i)?i.createElement(s,o):null===o?i.createElement(s):i.createElementNS(o,s)}function Hp(i,s){const o=i[9],u=o.indexOf(s),l=s[3];1024&s[2]&&(s[2]&=-1025,Xa(l,-1)),o.splice(u,1)}function Ol(i,s){if(i.length<=10)return;const o=10+s,u=i[o];if(u){const l=u[17];null!==l&&l!==i&&Hp(l,u),s>0&&(i[o-1][4]=u[4]);const d=ba(i,10+s);!function(i,s){zp(i,s,s[11],2,null,null),s[0]=null,s[6]=null}(u[1],u);const m=d[19];null!==m&&m.detachView(d[1]),u[3]=null,u[4]=null,u[2]&=-129}return u}function $p(i,s){if(!(256&s[2])){const o=s[11];Yt(o)&&o.destroyNode&&zp(i,s,o,3,null,null),function(i){let s=i[13];if(!s)return Pl(i[1],i);for(;s;){let o=null;if(Xi(s))o=s[13];else{const u=s[10];u&&(o=u)}if(!o){for(;s&&!s[4]&&s!==i;)Xi(s)&&Pl(s[1],s),s=s[3];null===s&&(s=i),Xi(s)&&Pl(s[1],s),o=s&&s[4]}s=o}}(s)}}function Pl(i,s){if(!(256&s[2])){s[2]&=-129,s[2]|=256,function(i,s){let o;if(null!=i&&null!=(o=i.destroyHooks))for(let u=0;u<o.length;u+=2){const l=s[o[u]];if(!(l instanceof ma)){const d=o[u+1];if(Array.isArray(d))for(let m=0;m<d.length;m+=2){const v=l[d[m]],b=d[m+1];try{b.call(v)}finally{}}else try{d.call(l)}finally{}}}}(i,s),function(i,s){const o=i.cleanup,u=s[7];let l=-1;if(null!==o)for(let d=0;d<o.length-1;d+=2)if("string"==typeof o[d]){const m=o[d+1],v="function"==typeof m?m(s):Vt(s[m]),b=u[l=o[d+2]],C=o[d+3];"boolean"==typeof C?v.removeEventListener(o[d],b,C):C>=0?u[l=C]():u[l=-C].unsubscribe(),d+=2}else{const m=u[l=o[d+1]];o[d].call(m)}if(null!==u){for(let d=l+1;d<u.length;d++)u[d]();s[7]=null}}(i,s),1===s[1].type&&Yt(s[11])&&s[11].destroy();const o=s[17];if(null!==o&&Tn(s[3])){o!==s[3]&&Hp(o,s);const u=s[19];null!==u&&u.detachView(i)}}}function Dr(i,s,o){return function(i,s,o){let u=s;for(;null!==u&&40&u.type;)u=(s=u).parent;if(null===u)return o[0];if(2&u.flags){const l=i.data[u.directiveStart].encapsulation;if(l===At.None||l===At.Emulated)return null}return oi(u,o)}(i,s.parent,o)}function to(i,s,o,u,l){Yt(i)?i.insertBefore(s,o,u,l):s.insertBefore(o,u,l)}function fy(i,s,o){Yt(i)?i.appendChild(s,o):s.appendChild(o)}function Ra(i,s,o,u,l){null!==u?to(i,s,o,u,l):fy(i,s,o)}function py(i,s){return Yt(i)?i.parentNode(s):s.parentNode}let jv=function(i,s,o){return 40&i.type?oi(i,o):null};function qp(i,s,o,u){const l=Dr(i,u,s),d=s[11],v=function(i,s,o){return jv(i,s,o)}(u.parent||s[6],u,s);if(null!=l)if(Array.isArray(o))for(let b=0;b<o.length;b++)Ra(d,l,o[b],v,!1);else Ra(d,l,o,v,!1)}function Ah(i,s){if(null!==s){const o=s.type;if(3&o)return oi(s,i);if(4&o)return Eu(-1,i[s.index]);if(8&o){const u=s.child;if(null!==u)return Ah(i,u);{const l=i[s.index];return Tn(l)?Eu(-1,l):Vt(l)}}if(32&o)return jp(s,i)()||Vt(i[s.index]);{const u=BT(i,s);return null!==u?Array.isArray(u)?u[0]:Ah(_(i[16]),u):Ah(i,s.next)}}return null}function BT(i,s){return null!==s?i[16][6].projection[s.projection]:null}function Eu(i,s){const o=10+i+1;if(o<s.length){const u=s[o],l=u[1].firstChild;if(null!==l)return Ah(u,l)}return s[7]}function qv(i,s,o,u,l,d,m){for(;null!=o;){const v=u[o.index],b=o.type;if(m&&0===s&&(v&&un(Vt(v),u),o.flags|=4),64!=(64&o.flags))if(8&b)qv(i,s,o.child,u,l,d,!1),Q(s,i,l,v,d);else if(32&b){const C=jp(o,u);let S;for(;S=C();)Q(s,i,l,S,d);Q(s,i,l,v,d)}else 16&b?zv(i,s,u,o,l,d):Q(s,i,l,v,d);o=m?o.projectionNext:o.next}}function zp(i,s,o,u,l,d){qv(o,u,i.firstChild,s,l,d,!1)}function zv(i,s,o,u,l,d){const m=o[16],b=m[6].projection[u.projection];if(Array.isArray(b))for(let C=0;C<b.length;C++)Q(s,i,l,b[C],d);else qv(i,s,b,m[3],l,d,!0)}function _w(i,s,o){Yt(i)?i.setAttribute(s,"style",o):s.style.cssText=o}function my(i,s,o){Yt(i)?""===o?i.removeAttribute(s,"class"):i.setAttribute(s,"class",o):s.className=o}function vw(i,s,o){let u=i.length;for(;;){const l=i.indexOf(s,o);if(-1===l)return l;if(0===l||i.charCodeAt(l-1)<=32){const d=s.length;if(l+d===u||i.charCodeAt(l+d)<=32)return l}o=l+1}}const Ew="ng-template";function Wv(i,s,o){let u=0;for(;u<i.length;){let l=i[u++];if(o&&"class"===l){if(l=i[u],-1!==vw(l.toLowerCase(),s,0))return!0}else if(1===l){for(;u<i.length&&"string"==typeof(l=i[u++]);)if(l.toLowerCase()===s)return!0;return!1}}return!1}function bw(i){return 4===i.type&&i.value!==Ew}function GT(i,s,o){return s===(4!==i.type||o?i.value:Ew)}function ww(i,s,o){let u=4;const l=i.attrs||[],d=function(i){for(let s=0;s<i.length;s++)if(Xu(i[s]))return s;return i.length}(l);let m=!1;for(let v=0;v<s.length;v++){const b=s[v];if("number"!=typeof b){if(!m)if(4&u){if(u=2|1&u,""!==b&&!GT(i,b,o)||""===b&&1===s.length){if(ko(u))return!1;m=!0}}else{const C=8&u?b:s[++v];if(8&u&&null!==i.attrs){if(!Wv(i.attrs,C,o)){if(ko(u))return!1;m=!0}continue}const N=JR(8&u?"class":b,l,bw(i),o);if(-1===N){if(ko(u))return!1;m=!0;continue}if(""!==C){let P;P=N>d?"":l[N+1].toLowerCase();const H=8&u?P:null;if(H&&-1!==vw(H,C,0)||2&u&&C!==P){if(ko(u))return!1;m=!0}}}}else{if(!m&&!ko(u)&&!ko(b))return!1;if(m&&ko(b))continue;m=!1,u=b|1&u}}return ko(u)||m}function ko(i){return 0==(1&i)}function JR(i,s,o,u){if(null===s)return-1;let l=0;if(u||!o){let d=!1;for(;l<s.length;){const m=s[l];if(m===i)return l;if(3===m||6===m)d=!0;else{if(1===m||2===m){let v=s[++l];for(;"string"==typeof v;)v=s[++l];continue}if(4===m)break;if(0===m){l+=4;continue}}l+=d?1:2}return-1}return function(i,s){let o=i.indexOf(4);if(o>-1)for(o++;o<i.length;){const u=i[o];if("number"==typeof u)return-1;if(u===s)return o;o++}return-1}(s,i)}function Iw(i,s,o=!1){for(let u=0;u<s.length;u++)if(ww(i,s[u],o))return!0;return!1}function Wp(i,s){return i?":not("+s.trim()+")":s}function Ec(i){let s=i[0],o=1,u=2,l="",d=!1;for(;o<i.length;){let m=i[o];if("string"==typeof m)if(2&u){const v=i[++o];l+="["+m+(v.length>0?'="'+v+'"':"")+"]"}else 8&u?l+="."+m:4&u&&(l+=" "+m);else""!==l&&!ko(m)&&(s+=Wp(d,l),l=""),u=m,d=d||!ko(u);o++}return""!==l&&(s+=Wp(d,l)),s}const lt={};function it(i){yy(Bt(),Ee(),jr()+i,da())}function yy(i,s,o,u){if(!u)if(3==(3&s[2])){const d=i.preOrderCheckHooks;null!==d&&Qu(s,d,o)}else{const d=i.preOrderHooks;null!==d&&cl(s,d,0,o)}ai(o)}function It(i,s){return i<<17|s<<2}function ds(i){return i>>17&32767}function Zv(i){return 2|i}function Fo(i){return(131068&i)>>2}function Kv(i,s){return-131069&i|s<<2}function Yv(i){return 1|i}function eE(i,s){const o=i.contentQueries;if(null!==o)for(let u=0;u<o.length;u+=2){const l=o[u],d=o[u+1];if(-1!==d){const m=i.data[d];Zu(l),m.contentQueries(2,s[d],d)}}}function Ll(i,s,o,u,l,d,m,v,b,C){const S=s.blueprint.slice();return S[0]=l,S[2]=140|u,_o(S),S[3]=S[15]=i,S[8]=o,S[10]=m||i&&i[10],S[11]=v||i&&i[11],S[12]=b||i&&i[12]||null,S[9]=C||i&&i[9]||null,S[6]=d,S[16]=2==s.type?i[16]:S,S}function bc(i,s,o,u,l){let d=i.data[s];if(null===d)d=function(i,s,o,u,l){const d=qu(),m=la(),b=i.data[s]=function(i,s,o,u,l,d){return{type:o,index:u,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:l,attrs:d,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,m?d:d&&d.parent,o,s,u,l);return null===i.firstChild&&(i.firstChild=b),null!==d&&(m?null==d.child&&null!==b.parent&&(d.child=b):null===d.next&&(d.next=b)),b}(i,s,o,u,l),ht.lFrame.inI18n&&(d.flags|=64);else if(64&d.type){d.type=o,d.value=u,d.attrs=l;const m=function(){const i=ht.lFrame,s=i.currentTNode;return i.isParent?s:s.parent}();d.injectorIndex=null===m?-1:m.injectorIndex}return Di(d,!0),d}function wc(i,s,o,u){if(0===o)return-1;const l=s.length;for(let d=0;d<o;d++)s.push(u),i.blueprint.push(u),i.data.push(null);return l}function Sh(i,s,o){Io(s);try{const u=i.viewQuery;null!==u&&Oh(1,u,o);const l=i.template;null!==l&&tE(i,s,l,1,o),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&eE(i,s),i.staticViewQueries&&Oh(2,i.viewQuery,o);const d=i.components;null!==d&&function(i,s){for(let o=0;o<s.length;o++)sg(i,s[o])}(s,d)}catch(u){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),u}finally{s[2]&=-5,Yu()}}function Vl(i,s,o,u){const l=s[2];if(256==(256&l))return;Io(s);const d=da();try{_o(s),function(i){ht.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==o&&tE(i,s,o,2,u);const m=3==(3&l);if(!d)if(m){const C=i.preOrderCheckHooks;null!==C&&Qu(s,C,null)}else{const C=i.preOrderHooks;null!==C&&cl(s,C,0,null),iu(s,0)}if(function(i){for(let s=E(i);null!==s;s=T(s)){if(!s[2])continue;const o=s[9];for(let u=0;u<o.length;u++){const l=o[u],d=l[3];0==(1024&l[2])&&Xa(d,1),l[2]|=1024}}}(s),function(i){for(let s=E(i);null!==s;s=T(s))for(let o=10;o<s.length;o++){const u=s[o],l=u[1];Ja(u)&&Vl(l,u,l.template,u[8])}}(s),null!==i.contentQueries&&eE(i,s),!d)if(m){const C=i.contentCheckHooks;null!==C&&Qu(s,C)}else{const C=i.contentHooks;null!==C&&cl(s,C,1),iu(s,1)}!function(i,s){const o=i.hostBindingOpCodes;if(null!==o)try{for(let u=0;u<o.length;u++){const l=o[u];if(l<0)ai(~l);else{const d=l,m=o[++u],v=o[++u];al(m,d),v(2,s[d])}}}finally{ai(-1)}}(i,s);const v=i.components;null!==v&&function(i,s){for(let o=0;o<s.length;o++)zi(i,s[o])}(s,v);const b=i.viewQuery;if(null!==b&&Oh(2,b,u),!d)if(m){const C=i.viewCheckHooks;null!==C&&Qu(s,C)}else{const C=i.viewHooks;null!==C&&cl(s,C,2),iu(s,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),d||(s[2]&=-73),1024&s[2]&&(s[2]&=-1025,Xa(s[3],-1))}finally{Yu()}}function eA(i,s,o,u){const l=s[10],d=!da(),m=Ir(s);try{d&&!m&&l.begin&&l.begin(),m&&Sh(i,s,u),Vl(i,s,o,u)}finally{d&&!m&&l.end&&l.end()}}function tE(i,s,o,u,l){const d=jr(),m=2&u;try{ai(-1),m&&s.length>20&&yy(i,s,20,da()),o(u,l)}finally{ai(d)}}function ng(i,s,o){!ca()||(function(i,s,o,u){const l=o.directiveStart,d=o.directiveEnd;i.firstCreatePass||Do(o,s),un(u,s);const m=o.initialInputs;for(let v=l;v<d;v++){const b=i.data[v],C=Ci(b);C&&Nh(s,o,b);const S=_a(s,i,v,o);un(S,s),null!==m&&Ul(0,v-l,S,b,0,m),C&&(ar(o.index,s)[8]=S)}}(i,s,o,oi(o,s)),128==(128&o.flags)&&function(i,s,o){const u=o.directiveStart,l=o.directiveEnd,m=o.index,v=ht.lFrame.currentDirectiveIndex;try{ai(m);for(let b=u;b<l;b++){const C=i.data[b],S=s[b];tu(b),(null!==C.hostBindings||0!==C.hostVars||null!==C.hostAttrs)&&Mh(C,S)}}finally{ai(-1),tu(v)}}(i,s,o))}function Ty(i,s,o=oi){const u=s.localNames;if(null!==u){let l=s.index+1;for(let d=0;d<u.length;d+=2){const m=u[d+1],v=-1===m?o(s,i):i[m];i[l++]=v}}}function Pw(i){const s=i.tView;return null===s||s.incompleteFirstPass?i.tView=xh(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):s}function xh(i,s,o,u,l,d,m,v,b,C){const S=20+u,N=S+l,P=function(i,s){const o=[];for(let u=0;u<s;u++)o.push(u<i?null:lt);return o}(S,N),H="function"==typeof C?C():C;return P[1]={type:i,blueprint:P,template:o,queries:null,viewQuery:v,declTNode:s,data:P.slice().fill(null,S),bindingStartIndex:S,expandoStartIndex:N,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof d?d():d,pipeRegistry:"function"==typeof m?m():m,firstChild:null,schemas:b,consts:H,incompleteFirstPass:!1}}function rg(i,s,o,u){const l=Zw(s);null===o?l.push(u):(l.push(o),i.firstCreatePass&&Fy(i).push(u,l.length-1))}function kw(i,s,o){for(let u in i)if(i.hasOwnProperty(u)){const l=i[u];(o=null===o?{}:o).hasOwnProperty(u)?o[u].push(s,l):o[u]=[s,l]}return o}function Ns(i,s,o,u,l,d,m,v){const b=oi(s,o);let S,C=s.inputs;!v&&null!=C&&(S=C[u])?(hE(i,o,S,u,l),Vu(s)&&function(i,s){const o=ar(s,i);16&o[2]||(o[2]|=64)}(o,s.index)):3&s.type&&(u=function(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(u),l=null!=m?m(l,s.value||"",u):l,Yt(d)?d.setProperty(b,u,l):ap(u)||(b.setProperty?b.setProperty(u,l):b[u]=l))}function Rh(i,s,o,u){let l=!1;if(ca()){const d=function(i,s,o){const u=i.directiveRegistry;let l=null;if(u)for(let d=0;d<u.length;d++){const m=u[d];Iw(o,m.selectors,!1)&&(l||(l=[]),li(Do(o,s),i,m.type),Ci(m)?(oE(i,o),l.unshift(m)):l.push(m))}return l}(i,s,o),m=null===u?null:{"":-1};if(null!==d){l=!0,Hw(o,i.data.length,d.length);for(let S=0;S<d.length;S++){const N=d[S];N.providersResolver&&N.providersResolver(N)}let v=!1,b=!1,C=wc(i,s,d.length,null);for(let S=0;S<d.length;S++){const N=d[S];o.mergedAttrs=ec(o.mergedAttrs,N.hostAttrs),$w(i,o,s,C,N),Ry(C,N,m),null!==N.contentQueries&&(o.flags|=8),(null!==N.hostBindings||null!==N.hostAttrs||0!==N.hostVars)&&(o.flags|=128);const P=N.type.prototype;!v&&(P.ngOnChanges||P.ngOnInit||P.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(o.index),v=!0),!b&&(P.ngOnChanges||P.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(o.index),b=!0),C++}!function(i,s){const u=s.directiveEnd,l=i.data,d=s.attrs,m=[];let v=null,b=null;for(let C=s.directiveStart;C<u;C++){const S=l[C],N=S.inputs,P=null===d||bw(s)?null:Gw(N,d);m.push(P),v=kw(N,C,v),b=kw(S.outputs,C,b)}null!==v&&(v.hasOwnProperty("class")&&(s.flags|=16),v.hasOwnProperty("style")&&(s.flags|=32)),s.initialInputs=m,s.inputs=v,s.outputs=b}(i,o)}m&&function(i,s,o){if(s){const u=i.localNames=[];for(let l=0;l<s.length;l+=2){const d=o[s[l+1]];if(null==d)throw new Ce("301",`Export of name '${s[l+1]}' not found!`);u.push(s[l],d)}}}(o,u,m)}return o.mergedAttrs=ec(o.mergedAttrs,o.attrs),l}function xy(i,s,o,u,l,d){const m=d.hostBindings;if(m){let v=i.hostBindingOpCodes;null===v&&(v=i.hostBindingOpCodes=[]);const b=~s.index;(function(i){let s=i.length;for(;s>0;){const o=i[--s];if("number"==typeof o&&o<0)return o}return 0})(v)!=b&&v.push(b),v.push(u,l,m)}}function Mh(i,s){null!==i.hostBindings&&i.hostBindings(1,s)}function oE(i,s){s.flags|=2,(i.components||(i.components=[])).push(s.index)}function Ry(i,s,o){if(o){if(s.exportAs)for(let u=0;u<s.exportAs.length;u++)o[s.exportAs[u]]=i;Ci(s)&&(o[""]=i)}}function Hw(i,s,o){i.flags|=1,i.directiveStart=s,i.directiveEnd=s+o,i.providerIndexes=s}function $w(i,s,o,u,l){i.data[u]=l;const d=l.factory||(l.factory=Ur(l.type)),m=new ma(d,Ci(l),null);i.blueprint[u]=m,o[u]=m,xy(i,s,0,u,wc(i,o,l.hostVars,lt),l)}function Nh(i,s,o){const u=oi(s,i),l=Pw(o),d=i[10],m=og(i,Ll(i,l,null,o.onPush?64:16,u,s,d,d.createRenderer(u,o),null,null));i[s.index]=m}function Oa(i,s,o,u,l,d){const m=oi(i,s);!function(i,s,o,u,l,d,m){if(null==d)Yt(i)?i.removeAttribute(s,l,o):s.removeAttribute(l);else{const v=null==m?Be(d):m(d,u||"",l);Yt(i)?i.setAttribute(s,l,v,o):o?s.setAttributeNS(o,l,v):s.setAttribute(l,v)}}(s[11],m,d,i.value,o,u,l)}function Ul(i,s,o,u,l,d){const m=d[s];if(null!==m){const v=u.setInput;for(let b=0;b<m.length;){const C=m[b++],S=m[b++],N=m[b++];null!==v?u.setInput(o,N,C,S):o[S]=N}}}function Gw(i,s){let o=null,u=0;for(;u<s.length;){const l=s[u];if(0!==l)if(5!==l){if("number"==typeof l)break;i.hasOwnProperty(l)&&(null===o&&(o=[]),o.push(l,i[l],s[u+1])),u+=2}else u+=2;else u+=4}return o}function cE(i,s,o,u){return new Array(i,!0,!1,s,null,0,u,o,null,null)}function zi(i,s){const o=ar(s,i);if(Ja(o)){const u=o[1];80&o[2]?Vl(u,o,u.template,o[8]):o[5]>0&&My(o)}}function My(i){for(let u=E(i);null!==u;u=T(u))for(let l=10;l<u.length;l++){const d=u[l];if(1024&d[2]){const m=d[1];Vl(m,d,m.template,d[8])}else d[5]>0&&My(d)}const o=i[1].components;if(null!==o)for(let u=0;u<o.length;u++){const l=ar(o[u],i);Ja(l)&&l[5]>0&&My(l)}}function sg(i,s){const o=ar(s,i),u=o[1];(function(i,s){for(let o=s.length;o<i.blueprint.length;o++)s.push(i.blueprint[o])})(u,o),Sh(u,o,o[8])}function og(i,s){return i[13]?i[14][4]=s:i[13]=s,i[14]=s,s}function ag(i){for(;i;){i[2]|=64;const s=_(i);if(Uu(i)&&!s)return i;i=s}return null}function Bl(i,s,o){const u=s[10];u.begin&&u.begin();try{Vl(i,s,i.template,o)}catch(l){throw Ly(s,l),l}finally{u.end&&u.end()}}function Py(i){!function(i){for(let s=0;s<i.components.length;s++){const o=i.components[s],u=Sl(o),l=u[1];eA(l,u,l.template,o)}}(i[8])}function Oh(i,s,o){Zu(0),s(i,o)}const Ww=(()=>Promise.resolve(null))();function Zw(i){return i[7]||(i[7]=[])}function Fy(i){return i.cleanup||(i.cleanup=[])}function Ly(i,s){const o=i[9],u=o?o.get(eo,null):null;u&&u.handleError(s)}function hE(i,s,o,u,l){for(let d=0;d<o.length;){const m=o[d++],v=o[d++],b=s[m],C=i.data[m];null!==C.setInput?C.setInput(b,l,u,v):b[v]=l}}function Pa(i,s,o){const u=Is(s,i);!function(i,s,o){Yt(i)?i.setValue(s,o):s.textContent=o}(i[11],u,o)}function cg(i,s,o){let u=o?i.styles:null,l=o?i.classes:null,d=0;if(null!==s)for(let m=0;m<s.length;m++){const v=s[m];"number"==typeof v?d=v:1==d?l=se(l,v):2==d&&(u=se(u,v+": "+s[++m]+";"))}o?i.styles=u:i.stylesWithoutHost=u,o?i.classes=l:i.classesWithoutHost=l}const bu=new bn("INJECTOR",-1);class Ph{get(s,o=re){if(o===re){const u=new Error(`NullInjectorError: No provider for ${K(s)}!`);throw u.name="NullInjectorError",u}return o}}const Lo=new bn("Set Injector scope."),jl={},uA={};let fE;function pE(){return void 0===fE&&(fE=new Ph),fE}function Yw(i,s=null,o=null,u){return new Hl(i,o,s||pE(),u)}class Hl{constructor(s,o,u,l=null){this.parent=u,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const d=[];o&&hi(o,v=>this.processProvider(v,s,o)),hi([s],v=>this.processInjectorType(v,[],d)),this.records.set(bu,cn(void 0,this));const m=this.records.get(Lo);this.scope=null!=m?m.value:null,this.source=l||("object"==typeof s?null:K(s))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(s=>s.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(s,o=re,u=Xe.Default){this.assertNotDestroyed();const l=as(this),d=si(void 0);try{if(!(u&Xe.SkipSelf)){let v=this.records.get(s);if(void 0===v){const b=("function"==typeof(i=s)||"object"==typeof i&&i instanceof bn)&&Un(s);v=b&&this.injectableDefInScope(b)?cn(Vo(s),jl):null,this.records.set(s,v)}if(null!=v)return this.hydrate(s,v)}return(u&Xe.Self?pE():this.parent).get(s,o=u&Xe.Optional&&o===re?null:o)}catch(m){if("NullInjectorError"===m.name){if((m[Fe]=m[Fe]||[]).unshift(K(s)),l)throw m;return er(m,s,"R3InjectorError",this.source)}throw m}finally{si(d),as(l)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(s=>this.get(s))}toString(){const s=[];return this.records.forEach((u,l)=>s.push(K(l))),`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(s,o,u){if(!(s=ue(s)))return!1;let l=Cn(s);const d=null==l&&s.ngModule||void 0,m=void 0===d?s:d,v=-1!==u.indexOf(m);if(void 0!==d&&(l=Cn(d)),null==l)return!1;if(null!=l.imports&&!v){let S;u.push(m);try{hi(l.imports,N=>{this.processInjectorType(N,o,u)&&(void 0===S&&(S=[]),S.push(N))})}finally{}if(void 0!==S)for(let N=0;N<S.length;N++){const{ngModule:P,providers:H}=S[N];hi(H,z=>this.processProvider(z,P,H||Ae))}}this.injectorDefTypes.add(m);const b=Ur(m)||(()=>new m);this.records.set(m,cn(b,jl));const C=l.providers;if(null!=C&&!v){const S=s;hi(C,N=>this.processProvider(N,S,C))}return void 0!==d&&void 0!==s.providers}processProvider(s,o,u){let l=kh(s=ue(s))?s:ue(s&&s.provide);const d=(i=s,dg(i)?cn(void 0,i.useValue):cn(gE(i),jl));var i;if(kh(s)||!0!==s.multi)this.records.get(l);else{let m=this.records.get(l);m||(m=cn(void 0,jl,!0),m.factory=()=>yr(m.multi),this.records.set(l,m)),l=s,m.multi.push(s)}this.records.set(l,d)}hydrate(s,o){return o.value===jl&&(o.value=uA,o.value=o.factory()),"object"==typeof o.value&&o.value&&null!==(i=o.value)&&"object"==typeof i&&"function"==typeof i.ngOnDestroy&&this.onDestroy.add(o.value),o.value;var i}injectableDefInScope(s){if(!s.providedIn)return!1;const o=ue(s.providedIn);return"string"==typeof o?"any"===o||o===this.scope:this.injectorDefTypes.has(o)}}function Vo(i){const s=Un(i),o=null!==s?s.factory:Ur(i);if(null!==o)return o;if(i instanceof bn)throw new Error(`Token ${K(i)} is missing a \u0275prov definition.`);if(i instanceof Function)return function(i){const s=i.length;if(s>0){const u=function(i,s){const o=[];for(let u=0;u<i;u++)o.push(s);return o}(s,"?");throw new Error(`Can't resolve all parameters for ${K(i)}: (${u.join(", ")}).`)}const o=function(i){const s=i&&(i[sn]||i[Bs]);if(s){const o=function(i){if(i.hasOwnProperty("name"))return i.name;const s=(""+i).match(/^function\s*([^\s(]+)/);return null===s?"":s[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${o}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${o}" class.`),s}return null}(i);return null!==o?()=>o.factory(i):()=>new i}(i);throw new Error("unreachable")}function gE(i,s,o){let u;if(kh(i)){const l=ue(i);return Ur(l)||Vo(l)}if(dg(i))u=()=>ue(i.useValue);else if(function(i){return!(!i||!i.useFactory)}(i))u=()=>i.useFactory(...yr(i.deps||[]));else if(function(i){return!(!i||!i.useExisting)}(i))u=()=>kn(ue(i.useExisting));else{const l=ue(i&&(i.useClass||i.provide));if(!function(i){return!!i.deps}(i))return Ur(l)||Vo(l);u=()=>new l(...yr(i.deps))}return u}function cn(i,s,o=!1){return{factory:i,value:s,multi:o?[]:void 0}}function dg(i){return null!==i&&"object"==typeof i&&Xn in i}function kh(i){return"function"==typeof i}const wu=function(i,s,o){return function(i,s=null,o=null,u){const l=Yw(i,s,o,u);return l._resolveInjectorDefTypes(),l}({name:o},s,i,o)};let xn=(()=>{class i{static create(o,u){return Array.isArray(o)?wu(o,u,""):wu(o.providers,o.parent,o.name||"")}}return i.THROW_IF_NOT_FOUND=re,i.NULL=new Ph,i.\u0275prov=mt({token:i,providedIn:"any",factory:()=>kn(bu)}),i.__NG_ELEMENT_ID__=-1,i})();function sI(i,s){ga(Sl(i)[1],gn())}function zy(i){let s=function(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),o=!0;const u=[i];for(;s;){let l;if(Ci(i))l=s.\u0275cmp||s.\u0275dir;else{if(s.\u0275cmp)throw new Error("Directives cannot inherit Components");l=s.\u0275dir}if(l){if(o){u.push(l);const m=i;m.inputs=Wy(i.inputs),m.declaredInputs=Wy(i.declaredInputs),m.outputs=Wy(i.outputs);const v=l.hostBindings;v&&SE(i,v);const b=l.viewQuery,C=l.contentQueries;if(b&&aI(i,b),C&&AE(i,C),Y(i.inputs,l.inputs),Y(i.declaredInputs,l.declaredInputs),Y(i.outputs,l.outputs),Ci(l)&&l.data.animation){const S=i.data;S.animation=(S.animation||[]).concat(l.data.animation)}}const d=l.features;if(d)for(let m=0;m<d.length;m++){const v=d[m];v&&v.ngInherit&&v(i),v===zy&&(o=!1)}}s=Object.getPrototypeOf(s)}!function(i){let s=0,o=null;for(let u=i.length-1;u>=0;u--){const l=i[u];l.hostVars=s+=l.hostVars,l.hostAttrs=ec(l.hostAttrs,o=ec(o,l.hostAttrs))}}(u)}function Wy(i){return i===ve?{}:i===Ae?[]:i}function aI(i,s){const o=i.viewQuery;i.viewQuery=o?(u,l)=>{s(u,l),o(u,l)}:s}function AE(i,s){const o=i.contentQueries;i.contentQueries=o?(u,l,d)=>{s(u,l,d),o(u,l,d)}:s}function SE(i,s){const o=i.hostBindings;i.hostBindings=o?(u,l)=>{s(u,l),o(u,l)}:s}let Ig=null;function io(){if(!Ig){const i=Ke.Symbol;if(i&&i.iterator)Ig=i.iterator;else{const s=Object.getOwnPropertyNames(Map.prototype);for(let o=0;o<s.length;++o){const u=s[o];"entries"!==u&&"size"!==u&&Map.prototype[u]===Map.prototype.entries&&(Ig=u)}}}return Ig}class so{constructor(s){this.wrapped=s}static wrap(s){return new so(s)}static unwrap(s){return so.isWrapped(s)?s.wrapped:s}static isWrapped(s){return s instanceof so}}function Lh(i){return!!Wi(i)&&(Array.isArray(i)||!(i instanceof Map)&&io()in i)}function Wi(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function Uo(i,s,o){return i[s]=o}function lr(i,s,o){return!Object.is(i[s],o)&&(i[s]=o,!0)}function RE(i,s,o,u){const l=Ee();return lr(l,Ws(),s)&&(Bt(),Oa(En(),l,i,s,o,u)),RE}function Bh(i,s,o,u,l,d){const v=function(i,s,o,u){const l=lr(i,s,o);return lr(i,s+1,u)||l}(i,Br(),o,l);return ji(2),v?s+Be(o)+u+Be(l)+d:lt}function he(i,s,o,u,l,d,m,v){const b=Ee(),C=Bt(),S=i+20,N=C.firstCreatePass?function(i,s,o,u,l,d,m,v,b){const C=s.consts,S=bc(s,i,4,m||null,ts(C,v));Rh(s,o,S,ts(C,b)),ga(s,S);const N=S.tViews=xh(2,S,u,l,d,s.directiveRegistry,s.pipeRegistry,null,s.schemas,C);return null!==s.queries&&(s.queries.template(s,S),N.queries=s.queries.embeddedTView(S)),S}(S,C,b,s,o,u,l,d,m):C.data[S];Di(N,!1);const P=b[11].createComment("");qp(C,b,P,N),un(P,b),og(b,b[S]=cE(P,b,P,N)),bs(N)&&ng(C,b,N),null!=m&&Ty(b,N,v)}function Gh(i,s=Xe.Default){const o=Ee();return null===o?kn(i,s):Hr(gn(),o,ue(i),s)}function qh(i,s,o){const u=Ee();return lr(u,Ws(),s)&&Ns(Bt(),En(),u,i,s,u[11],o,!1),qh}function Ar(i,s,o,u,l){const m=l?"class":"style";hE(i,o,s.inputs[m],m,u)}function o_(i,s,o,u){const l=Ee(),d=Bt(),m=20+i,v=l[11],b=l[m]=Ye(v,s,ht.lFrame.currentNamespace),C=d.firstCreatePass?function(i,s,o,u,l,d,m){const v=s.consts,C=bc(s,i,2,l,ts(v,d));return Rh(s,o,C,ts(v,m)),null!==C.attrs&&cg(C,C.attrs,!1),null!==C.mergedAttrs&&cg(C,C.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,C),C}(m,d,l,0,s,o,u):d.data[m];Di(C,!0);const S=C.mergedAttrs;null!==S&&su(v,b,S);const N=C.classes;null!==N&&my(v,b,N);const P=C.styles;null!==P&&_w(v,b,P),64!=(64&C.flags)&&qp(d,l,b,C),0===ht.lFrame.elementDepthCount&&un(b,l),ht.lFrame.elementDepthCount++,bs(C)&&(ng(d,l,C),function(i,s,o){if(Lu(s)){const l=s.directiveEnd;for(let d=s.directiveStart;d<l;d++){const m=i.data[d];m.contentQueries&&m.contentQueries(1,o[d],d)}}}(d,C,l)),null!==u&&Ty(l,C)}function Tc(){let i=gn();la()?ht.lFrame.isParent=!1:(i=i.parent,Di(i,!1));const s=i;ht.lFrame.elementDepthCount--;const o=Bt();o.firstCreatePass&&(ga(o,i),Lu(i)&&o.queries.elementEnd(i)),null!=s.classesWithoutHost&&function(i){return 0!=(16&i.flags)}(s)&&Ar(o,s,Ee(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function(i){return 0!=(32&i.flags)}(s)&&Ar(o,s,Ee(),s.stylesWithoutHost,!1)}function ps(i,s,o,u){o_(i,s,o,u),Tc()}function Ac(){return Ee()}function Tg(i){return!!i&&"function"==typeof i.then}function LE(i){return!!i&&"function"==typeof i.subscribe}const Zl=LE;function VE(i,s,o,u){const l=Ee(),d=Bt(),m=gn();return function(i,s,o,u,l,d,m,v){const b=bs(u),S=i.firstCreatePass&&Fy(i),N=s[8],P=Zw(s);let H=!0;if(3&u.type||v){const J=oi(u,s),Me=v?v(J):J,ye=P.length,ut=v?vt=>v(Vt(vt[u.index])):u.index;if(Yt(o)){let vt=null;if(!v&&b&&(vt=function(i,s,o,u){const l=i.cleanup;if(null!=l)for(let d=0;d<l.length-1;d+=2){const m=l[d];if(m===o&&l[d+1]===u){const v=s[7],b=l[d+2];return v.length>b?v[b]:null}"string"==typeof m&&(d+=2)}return null}(i,s,l,u.index)),null!==vt)(vt.__ngLastListenerFn__||vt).__ngNextListenerFn__=d,vt.__ngLastListenerFn__=d,H=!1;else{d=ka(u,s,N,d,!1);const qt=o.listen(Me,l,d);P.push(d,qt),S&&S.push(l,ut,ye,ye+1)}}else d=ka(u,s,N,d,!0),Me.addEventListener(l,d,m),P.push(d),S&&S.push(l,ut,ye,m)}else d=ka(u,s,N,d,!1);const z=u.outputs;let de;if(H&&null!==z&&(de=z[l])){const J=de.length;if(J)for(let Me=0;Me<J;Me+=2){const fr=s[de[Me]][de[Me+1]].subscribe(d),ys=P.length;P.push(d,fr),S&&S.push(l,u.index,ys,-(ys+1))}}}(d,l,l[11],m,i,s,!!o,u),VE}function UE(i,s,o,u){try{return!1!==o(u)}catch(l){return Ly(i,l),!1}}function ka(i,s,o,u,l){return function d(m){if(m===Function)return u;const v=2&i.flags?ar(i.index,s):s;0==(32&s[2])&&ag(v);let b=UE(s,0,u,m),C=d.__ngNextListenerFn__;for(;C;)b=UE(s,0,C,m)&&b,C=C.__ngNextListenerFn__;return l&&!1===b&&(m.preventDefault(),m.returnValue=!1),b}}function Sg(i=1){return function(i){return(ht.lFrame.contextLView=function(i,s){for(;i>0;)s=s[15],i--;return s}(i,ht.lFrame.contextLView))[8]}(i)}function II(i,s,o,u,l){const d=i[o+1],m=null===s;let v=u?ds(d):Fo(d),b=!1;for(;0!==v&&(!1===b||m);){const S=i[v+1];CI(i[v],s)&&(b=!0,i[v+1]=u?Yv(S):Zv(S)),v=u?ds(S):Fo(S)}b&&(i[o+1]=u?Zv(d):Yv(d))}function CI(i,s){return null===i||null==s||(Array.isArray(i)?i[1]:i)===s||!(!Array.isArray(i)||"string"!=typeof s)&&On(i,s)>=0}function $E(i,s){return function(i,s,o,u){const l=Ee(),d=Bt(),m=ji(2);d.firstUpdatePass&&function(i,s,o,u){const l=i.data;if(null===l[o+1]){const d=l[jr()],m=function(i,s){return s>=i.expandoStartIndex}(i,o);(function(i,s){return 0!=(i.flags&(s?16:32))})(d,u)&&null===s&&!m&&(s=!1),s=function(i,s,o,u){const l=function(i){const s=ht.lFrame.currentDirectiveIndex;return-1===s?null:i[s]}(i);let d=u?s.residualClasses:s.residualStyles;if(null===l)0===(u?s.classBindings:s.styleBindings)&&(o=Zh(o=Rc(null,i,s,o,u),s.attrs,u),d=null);else{const m=s.directiveStylingLast;if(-1===m||i[m]!==l)if(o=Rc(l,i,s,o,u),null===d){let b=function(i,s,o){const u=o?s.classBindings:s.styleBindings;if(0!==Fo(u))return i[ds(u)]}(i,s,u);void 0!==b&&Array.isArray(b)&&(b=Rc(null,i,s,b[1],u),b=Zh(b,s.attrs,u),function(i,s,o,u){i[ds(o?s.classBindings:s.styleBindings)]=u}(i,s,u,b))}else d=function(i,s,o){let u;const l=s.directiveEnd;for(let d=1+s.directiveStylingLast;d<l;d++)u=Zh(u,i[d].hostAttrs,o);return Zh(u,s.attrs,o)}(i,s,u)}return void 0!==d&&(u?s.residualClasses=d:s.residualStyles=d),o}(l,d,s,u),function(i,s,o,u,l,d){let m=d?s.classBindings:s.styleBindings,v=ds(m),b=Fo(m);i[u]=o;let S,C=!1;if(Array.isArray(o)){const N=o;S=N[1],(null===S||On(N,S)>0)&&(C=!0)}else S=o;if(l)if(0!==b){const P=ds(i[v+1]);i[u+1]=It(P,v),0!==P&&(i[P+1]=Kv(i[P+1],u)),i[v+1]=function(i,s){return 131071&i|s<<17}(i[v+1],u)}else i[u+1]=It(v,0),0!==v&&(i[v+1]=Kv(i[v+1],u)),v=u;else i[u+1]=It(b,0),0===v?v=u:i[b+1]=Kv(i[b+1],u),b=u;C&&(i[u+1]=Zv(i[u+1])),II(i,S,u,!0),II(i,S,u,!1),function(i,s,o,u,l){const d=l?i.residualClasses:i.residualStyles;null!=d&&"string"==typeof s&&On(d,s)>=0&&(o[u+1]=Yv(o[u+1]))}(s,S,i,u,d),m=It(v,b),d?s.classBindings=m:s.styleBindings=m}(l,d,s,o,m,u)}}(d,i,m,u),s!==lt&&lr(l,m,s)&&function(i,s,o,u,l,d,m,v){if(!(3&s.type))return;const b=i.data,C=b[v+1];Xl(function(i){return 1==(1&i)}(C)?Mi(b,s,o,l,Fo(C),m):void 0)||(Xl(d)||function(i){return 2==(2&i)}(C)&&(d=Mi(b,null,o,l,v,m)),function(i,s,o,u,l){const d=Yt(i);if(s)l?d?i.addClass(o,u):o.classList.add(u):d?i.removeClass(o,u):o.classList.remove(u);else{let m=-1===u.indexOf("-")?void 0:ls.DashCase;if(null==l)d?i.removeStyle(o,u,m):o.style.removeProperty(u);else{const v="string"==typeof l&&l.endsWith("!important");v&&(l=l.slice(0,-10),m|=ls.Important),d?i.setStyle(o,u,l,m):o.style.setProperty(u,l,v?"important":"")}}}(u,m,Is(jr(),o),l,d))}(d,d.data[jr()],l,l[11],i,l[m+1]=function(i,s){return null==i||("string"==typeof s?i+=s:"object"==typeof i&&(i=K(Rs(i)))),i}(s,o),u,m)}(i,s,null,!0),$E}function Rc(i,s,o,u,l){let d=null;const m=o.directiveEnd;let v=o.directiveStylingLast;for(-1===v?v=o.directiveStart:v++;v<m&&(d=s[v],u=Zh(u,d.hostAttrs,l),d!==i);)v++;return null!==i&&(o.directiveStylingLast=v),u}function Zh(i,s,o){const u=o?1:2;let l=-1;if(null!==s)for(let d=0;d<s.length;d++){const m=s[d];"number"==typeof m?l=m:l===u&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),$n(i,m,!!o||s[++d]))}return void 0===i?null:i}function Mi(i,s,o,u,l,d){const m=null===s;let v;for(;l>0;){const b=i[l],C=Array.isArray(b),S=C?b[1]:b,N=null===S;let P=o[l+1];P===lt&&(P=N?Ae:void 0);let H=N?lu(P,u):S===u?P:void 0;if(C&&!Xl(H)&&(H=lu(b,u)),Xl(H)&&(v=H,m))return v;const z=i[l+1];l=m?ds(z):Fo(z)}if(null!==s){let b=d?s.residualClasses:s.residualStyles;null!=b&&(v=lu(b,u))}return v}function Xl(i){return void 0!==i}function p_(i,s=""){const o=Ee(),u=Bt(),l=i+20,d=u.firstCreatePass?bc(u,l,1,s,null):u.data[l],m=o[l]=function(i,s){return Yt(i)?i.createText(s):i.createTextNode(s)}(o[11],s);qp(u,o,m,d),Di(d,!1)}function Ng(i){return Og("",i,""),Ng}function Og(i,s,o){const u=Ee(),l=function(i,s,o,u){return lr(i,Ws(),o)?s+Be(o)+u:lt}(u,i,s,o);return l!==lt&&Pa(u,jr(),l),Og}function g_(i,s,o,u,l){const d=Ee(),m=Bh(d,i,s,o,u,l);return m!==lt&&Pa(d,jr(),m),g_}function eb(i,s,o){const u=Ee();return lr(u,Ws(),s)&&Ns(Bt(),En(),u,i,s,u[11],o,!0),eb}const Ht=void 0;var zI=["en",[["a","p"],["AM","PM"],Ht],[["AM","PM"],Ht,Ht],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ht,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ht,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ht,"{1} 'at' {0}",Ht],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(i){const s=Math.floor(Math.abs(i)),o=i.toString().replace(/^[^.]*\.?/,"").length;return 1===s&&0===o?1:5}];let ks={};function Ni(i){const s=function(i){return i.toLowerCase().replace(/_/g,"-")}(i);let o=tb(s);if(o)return o;const u=s.split("-")[0];if(o=tb(u),o)return o;if("en"===u)return zI;throw new Error(`Missing locale data for the locale "${i}".`)}function Qh(i){return Ni(i)[dt.PluralCase]}function tb(i){return i in ks||(ks[i]=Ke.ng&&Ke.ng.common&&Ke.ng.common.locales&&Ke.ng.common.locales[i]),ks[i]}var dt=(()=>((dt=dt||{})[dt.LocaleId=0]="LocaleId",dt[dt.DayPeriodsFormat=1]="DayPeriodsFormat",dt[dt.DayPeriodsStandalone=2]="DayPeriodsStandalone",dt[dt.DaysFormat=3]="DaysFormat",dt[dt.DaysStandalone=4]="DaysStandalone",dt[dt.MonthsFormat=5]="MonthsFormat",dt[dt.MonthsStandalone=6]="MonthsStandalone",dt[dt.Eras=7]="Eras",dt[dt.FirstDayOfWeek=8]="FirstDayOfWeek",dt[dt.WeekendRange=9]="WeekendRange",dt[dt.DateFormat=10]="DateFormat",dt[dt.TimeFormat=11]="TimeFormat",dt[dt.DateTimeFormat=12]="DateTimeFormat",dt[dt.NumberSymbols=13]="NumberSymbols",dt[dt.NumberFormats=14]="NumberFormats",dt[dt.CurrencyCode=15]="CurrencyCode",dt[dt.CurrencySymbol=16]="CurrencySymbol",dt[dt.CurrencyName=17]="CurrencyName",dt[dt.Currencies=18]="Currencies",dt[dt.Directionality=19]="Directionality",dt[dt.PluralCase=20]="PluralCase",dt[dt.ExtraData=21]="ExtraData",dt))();const Ot="en-US";let rb=Ot;function v_(i){dn(i,"Expected localeId to be defined"),"string"==typeof i&&(rb=i.toLowerCase().replace(/_/g,"-"))}function Hg(i,s,o,u,l){if(i=ue(i),Array.isArray(i))for(let d=0;d<i.length;d++)Hg(i[d],s,o,u,l);else{const d=Bt(),m=Ee();let v=kh(i)?i:ue(i.provide),b=gE(i);const C=gn(),S=1048575&C.providerIndexes,N=C.directiveStart,P=C.providerIndexes>>20;if(kh(i)||!i.multi){const H=new ma(b,l,Gh),z=I_(v,s,l?S:S+P,N);-1===z?(li(Do(C,m),d,v),$g(d,i,s.length),s.push(v),C.directiveStart++,C.directiveEnd++,l&&(C.providerIndexes+=1048576),o.push(H),m.push(H)):(o[z]=H,m[z]=H)}else{const H=I_(v,s,S+P,N),z=I_(v,s,S,S+P),de=H>=0&&o[H],J=z>=0&&o[z];if(l&&!J||!l&&!de){li(Do(C,m),d,v);const Me=function(i,s,o,u,l){const d=new ma(i,o,Gh);return d.multi=[],d.index=s,d.componentProviders=0,yb(d,l,u&&!o),d}(l?gC:eS,o.length,l,u,b);!l&&J&&(o[z].providerFactory=Me),$g(d,i,s.length,0),s.push(v),C.directiveStart++,C.directiveEnd++,l&&(C.providerIndexes+=1048576),o.push(Me),m.push(Me)}else $g(d,i,H>-1?H:z,yb(o[l?z:H],b,!l&&u));!l&&u&&J&&o[z].componentProviders++}}}function $g(i,s,o,u){const l=kh(s);if(l||function(i){return!!i.useClass}(s)){const m=(s.useClass||s).prototype.ngOnDestroy;if(m){const v=i.destroyHooks||(i.destroyHooks=[]);if(!l&&s.multi){const b=v.indexOf(o);-1===b?v.push(o,[u,m]):v[b+1].push(u,m)}else v.push(o,m)}}}function yb(i,s,o){return o&&i.componentProviders++,i.multi.push(s)-1}function I_(i,s,o,u){for(let l=o;l<u;l++)if(s[l]===i)return l;return-1}function eS(i,s,o,u){return C_(this.multi,[])}function gC(i,s,o,u){const l=this.multi;let d;if(this.providerFactory){const m=this.providerFactory.componentProviders,v=_a(o,o[1],this.providerFactory.index,u);d=v.slice(0,m),C_(l,d);for(let b=m;b<v.length;b++)d.push(v[b])}else d=[],C_(l,d);return d}function C_(i,s){for(let o=0;o<i.length;o++)s.push((0,i[o])());return s}function sf(i,s=[]){return o=>{o.providersResolver=(u,l)=>function(i,s,o){const u=Bt();if(u.firstCreatePass){const l=Ci(i);Hg(o,u.data,u.blueprint,l,!0),Hg(s,u.data,u.blueprint,l,!1)}}(u,l?l(i):i,s)}}class mC{}const yC="ngComponent";class tS{resolveComponentFactory(s){throw function(i){const s=Error(`No component factory found for ${K(i)}. Did you add it to @NgModule.entryComponents?`);return s[yC]=i,s}(s)}}let ja=(()=>{class i{}return i.NULL=new tS,i})();function Gg(...i){}function uf(i,s){return new zo(oi(i,s))}const rS=function(){return uf(gn(),Ee())};let zo=(()=>{class i{constructor(o){this.nativeElement=o}}return i.__NG_ELEMENT_ID__=rS,i})();function cf(i){return i instanceof zo?i.nativeElement:i}class Pc{}let _C=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>EC(),i})();const EC=function(){const i=Ee(),o=ar(gn().index,i);return function(i){return i[11]}(Xi(o)?o:i)};let S_=(()=>{class i{}return i.\u0275prov=mt({token:i,providedIn:"root",factory:()=>null}),i})();class Nu{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const kc=new Nu("12.2.16");class wb{constructor(){}supports(s){return Lh(s)}create(s){return new lf(s)}}const cd=(i,s)=>s;class lf{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||cd}forEachItem(s){let o;for(o=this._itHead;null!==o;o=o._next)s(o)}forEachOperation(s){let o=this._itHead,u=this._removalsHead,l=0,d=null;for(;o||u;){const m=!u||o&&o.currentIndex<wC(u,l,d)?o:u,v=wC(m,l,d),b=m.currentIndex;if(m===u)l--,u=u._nextRemoved;else if(o=o._next,null==m.previousIndex)l++;else{d||(d=[]);const C=v-l,S=b-l;if(C!=S){for(let P=0;P<C;P++){const H=P<d.length?d[P]:d[P]=0,z=H+P;S<=z&&z<C&&(d[P]=H+1)}d[m.previousIndex]=S-C}}v!==b&&s(m,v,b)}}forEachPreviousItem(s){let o;for(o=this._previousItHead;null!==o;o=o._nextPrevious)s(o)}forEachAddedItem(s){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)s(o)}forEachMovedItem(s){let o;for(o=this._movesHead;null!==o;o=o._nextMoved)s(o)}forEachRemovedItem(s){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)s(o)}forEachIdentityChange(s){let o;for(o=this._identityChangesHead;null!==o;o=o._nextIdentityChange)s(o)}diff(s){if(null==s&&(s=[]),!Lh(s))throw new Error(`Error trying to diff '${K(s)}'. Only arrays and iterables are allowed`);return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let l,d,m,o=this._itHead,u=!1;if(Array.isArray(s)){this.length=s.length;for(let v=0;v<this.length;v++)d=s[v],m=this._trackByFn(v,d),null!==o&&Object.is(o.trackById,m)?(u&&(o=this._verifyReinsertion(o,d,m,v)),Object.is(o.item,d)||this._addIdentityChange(o,d)):(o=this._mismatch(o,d,m,v),u=!0),o=o._next}else l=0,function(i,s){if(Array.isArray(i))for(let o=0;o<i.length;o++)s(i[o]);else{const o=i[io()]();let u;for(;!(u=o.next()).done;)s(u.value)}}(s,v=>{m=this._trackByFn(l,v),null!==o&&Object.is(o.trackById,m)?(u&&(o=this._verifyReinsertion(o,v,m,l)),Object.is(o.item,v)||this._addIdentityChange(o,v)):(o=this._mismatch(o,v,m,l),u=!0),o=o._next,l++}),this.length=l;return this._truncate(o),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,o,u,l){let d;return null===s?d=this._itTail:(d=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null))?(Object.is(s.item,o)||this._addIdentityChange(s,o),this._reinsertAfter(s,d,l)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(u,l))?(Object.is(s.item,o)||this._addIdentityChange(s,o),this._moveAfter(s,d,l)):s=this._addAfter(new bC(o,u),d,l),s}_verifyReinsertion(s,o,u,l){let d=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null);return null!==d?s=this._reinsertAfter(d,s._prev,l):s.currentIndex!=l&&(s.currentIndex=l,this._addToMoves(s,l)),s}_truncate(s){for(;null!==s;){const o=s._next;this._addToRemovals(this._unlink(s)),s=o}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,o,u){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const l=s._prevRemoved,d=s._nextRemoved;return null===l?this._removalsHead=d:l._nextRemoved=d,null===d?this._removalsTail=l:d._prevRemoved=l,this._insertAfter(s,o,u),this._addToMoves(s,u),s}_moveAfter(s,o,u){return this._unlink(s),this._insertAfter(s,o,u),this._addToMoves(s,u),s}_addAfter(s,o,u){return this._insertAfter(s,o,u),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,o,u){const l=null===o?this._itHead:o._next;return s._next=l,s._prev=o,null===l?this._itTail=s:l._prev=s,null===o?this._itHead=s:o._next=s,null===this._linkedRecords&&(this._linkedRecords=new Ib),this._linkedRecords.put(s),s.currentIndex=u,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const o=s._prev,u=s._next;return null===o?this._itHead=u:o._next=u,null===u?this._itTail=o:u._prev=o,s}_addToMoves(s,o){return s.previousIndex===o||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Ib),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,o){return s.item=o,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class bC{constructor(s,o){this.item=s,this.trackById=o,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Fc{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,o){let u;for(u=this._head;null!==u;u=u._nextDup)if((null===o||o<=u.currentIndex)&&Object.is(u.trackById,s))return u;return null}remove(s){const o=s._prevDup,u=s._nextDup;return null===o?this._head=u:o._nextDup=u,null===u?this._tail=o:u._prevDup=o,null===this._head}}class Ib{constructor(){this.map=new Map}put(s){const o=s.trackById;let u=this.map.get(o);u||(u=new Fc,this.map.set(o,u)),u.add(s)}get(s,o){const l=this.map.get(s);return l?l.get(s,o):null}remove(s){const o=s.trackById;return this.map.get(o).remove(s)&&this.map.delete(o),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function wC(i,s,o){const u=i.previousIndex;if(null===u)return u;let l=0;return o&&u<o.length&&(l=o[u]),u+s+l}class IC{constructor(){}supports(s){return s instanceof Map||Wi(s)}create(){return new iS}}class iS{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let o;for(o=this._mapHead;null!==o;o=o._next)s(o)}forEachPreviousItem(s){let o;for(o=this._previousMapHead;null!==o;o=o._nextPrevious)s(o)}forEachChangedItem(s){let o;for(o=this._changesHead;null!==o;o=o._nextChanged)s(o)}forEachAddedItem(s){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)s(o)}forEachRemovedItem(s){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)s(o)}diff(s){if(s){if(!(s instanceof Map||Wi(s)))throw new Error(`Error trying to diff '${K(s)}'. Only maps and objects are allowed`)}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let o=this._mapHead;if(this._appendAfter=null,this._forEach(s,(u,l)=>{if(o&&o.key===l)this._maybeAddToChanges(o,u),this._appendAfter=o,o=o._next;else{const d=this._getOrCreateRecordForKey(l,u);o=this._insertBeforeOrAppend(o,d)}}),o){o._prev&&(o._prev._next=null),this._removalsHead=o;for(let u=o;null!==u;u=u._nextRemoved)u===this._mapHead&&(this._mapHead=null),this._records.delete(u.key),u._nextRemoved=u._next,u.previousValue=u.currentValue,u.currentValue=null,u._prev=null,u._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,o){if(s){const u=s._prev;return o._next=s,o._prev=u,s._prev=o,u&&(u._next=o),s===this._mapHead&&(this._mapHead=o),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=o,o._prev=this._appendAfter):this._mapHead=o,this._appendAfter=o,null}_getOrCreateRecordForKey(s,o){if(this._records.has(s)){const l=this._records.get(s);this._maybeAddToChanges(l,o);const d=l._prev,m=l._next;return d&&(d._next=m),m&&(m._prev=d),l._next=null,l._prev=null,l}const u=new sS(s);return this._records.set(s,u),u.currentValue=o,this._addToAdditions(u),u}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,o){Object.is(o,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=o,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,o){s instanceof Map?s.forEach(o):Object.keys(s).forEach(u=>o(s[u],u))}}class sS{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function qg(){return new zg([new wb])}let zg=(()=>{class i{constructor(o){this.factories=o}static create(o,u){if(null!=u){const l=u.factories.slice();o=o.concat(l)}return new i(o)}static extend(o){return{provide:i,useFactory:u=>i.create(o,u||qg()),deps:[[i,new wa,new Js]]}}find(o){const u=this.factories.find(l=>l.supports(o));if(null!=u)return u;throw new Error(`Cannot find a differ supporting object '${o}' of type '${function(i){return i.name||typeof i}(o)}'`)}}return i.\u0275prov=mt({token:i,providedIn:"root",factory:qg}),i})();function Cb(){return new x_([new IC])}let x_=(()=>{class i{constructor(o){this.factories=o}static create(o,u){if(u){const l=u.factories.slice();o=o.concat(l)}return new i(o)}static extend(o){return{provide:i,useFactory:u=>i.create(o,u||Cb()),deps:[[i,new wa,new Js]]}}find(o){const u=this.factories.find(l=>l.supports(o));if(u)return u;throw new Error(`Cannot find a differ supporting object '${o}'`)}}return i.\u0275prov=mt({token:i,providedIn:"root",factory:Cb}),i})();function Wg(i,s,o,u,l=!1){for(;null!==o;){const d=s[o.index];if(null!==d&&u.push(Vt(d)),Tn(d))for(let v=10;v<d.length;v++){const b=d[v],C=b[1].firstChild;null!==C&&Wg(b[1],b,C,u)}const m=o.type;if(8&m)Wg(i,s,o.child,u);else if(32&m){const v=jp(o,s);let b;for(;b=v();)u.push(b)}else if(16&m){const v=BT(s,o);if(Array.isArray(v))u.push(...v);else{const b=_(s[16]);Wg(b[1],b,v,u,!0)}}o=l?o.projectionNext:o.next}return u}class Wo{constructor(s,o){this._lView=s,this._cdRefInjectingView=o,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const s=this._lView,o=s[1];return Wg(o,s,o.firstChild,[])}get context(){return this._lView[8]}set context(s){this._lView[8]=s}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[3];if(Tn(s)){const o=s[8],u=o?o.indexOf(this):-1;u>-1&&(Ol(s,u),ba(o,u))}this._attachedToViewContainer=!1}$p(this._lView[1],this._lView)}onDestroy(s){rg(this._lView[1],this._lView,null,s)}markForCheck(){ag(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Bl(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(i,s,o){ns(!0);try{Bl(i,s,o)}finally{ns(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var s;this._appRef=null,zp(this._lView[1],s=this._lView,s[11],2,null,null)}attachToAppRef(s){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=s}}class Zg extends Wo{constructor(s){super(s),this._view=s}detectChanges(){Py(this._view)}checkNoChanges(){!function(i){ns(!0);try{Py(i)}finally{ns(!1)}}(this._view)}get context(){return null}}const uS=function(i){return function(i,s,o){if(Vu(i)&&!o){const u=ar(i.index,s);return new Wo(u,u)}return 47&i.type?new Wo(s[16],s):null}(gn(),Ee(),16==(16&i))};let DC=(()=>{class i{}return i.__NG_ELEMENT_ID__=uS,i})();const Db=[new IC],dS=new zg([new wb]),hS=new x_(Db),TC=function(){return df(gn(),Ee())};let Kg=(()=>{class i{}return i.__NG_ELEMENT_ID__=TC,i})();const R_=Kg,pS=class extends R_{constructor(s,o,u){super(),this._declarationLView=s,this._declarationTContainer=o,this.elementRef=u}createEmbeddedView(s){const o=this._declarationTContainer.tViews,u=Ll(this._declarationLView,o,s,16,null,o.declTNode,null,null,null,null);u[17]=this._declarationLView[this._declarationTContainer.index];const d=this._declarationLView[19];return null!==d&&(u[19]=d.createEmbeddedView(o)),Sh(o,u,s),new Wo(u)}};function df(i,s){return 4&i.type?new pS(s,i,uf(i,s)):null}class Ou{}class hf{}const Tb=function(){return xb(gn(),Ee())};let Yg=(()=>{class i{}return i.__NG_ELEMENT_ID__=Tb,i})();const xC=Yg,Ab=class extends xC{constructor(s,o,u){super(),this._lContainer=s,this._hostTNode=o,this._hostLView=u}get element(){return uf(this._hostTNode,this._hostLView)}get injector(){return new rs(this._hostTNode,this._hostLView)}get parentInjector(){const s=Zs(this._hostTNode,this._hostLView);if(ya(s)){const o=ou(s,this._hostLView),u=Hi(s);return new rs(o[1].data[u+8],o)}return new rs(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const o=N_(this._lContainer);return null!==o&&o[s]||null}get length(){return this._lContainer.length-10}createEmbeddedView(s,o,u){const l=s.createEmbeddedView(o||{});return this.insert(l,u),l}createComponent(s,o,u,l,d){const m=u||this.parentInjector;if(!d&&null==s.ngModule&&m){const b=m.get(Ou,null);b&&(d=b)}const v=s.create(m,l,void 0,d);return this.insert(v.hostView,o),v}insert(s,o){const u=s._lView,l=u[1];if(Tn(u[3])){const S=this.indexOf(s);if(-1!==S)this.detach(S);else{const N=u[3],P=new Ab(N,N[6],N[3]);P.detach(P.indexOf(s))}}const d=this._adjustIndex(o),m=this._lContainer;!function(i,s,o,u){const l=10+u,d=o.length;u>0&&(o[l-1][4]=s),u<d-10?(s[4]=o[l],ml(o,10+u,s)):(o.push(s),s[4]=null),s[3]=o;const m=s[17];null!==m&&o!==m&&function(i,s){const o=i[9];s[16]!==s[3][3][16]&&(i[2]=!0),null===o?i[9]=[s]:o.push(s)}(m,s);const v=s[19];null!==v&&v.insertView(i),s[2]|=128}(l,u,m,d);const v=Eu(d,m),b=u[11],C=py(b,m[7]);return null!==C&&function(i,s,o,u,l,d){u[0]=l,u[6]=s,zp(i,u,o,1,l,d)}(l,m[6],b,u,C,v),s.attachToViewContainerRef(),ml(Sb(m),d,s),s}move(s,o){return this.insert(s,o)}indexOf(s){const o=N_(this._lContainer);return null!==o?o.indexOf(s):-1}remove(s){const o=this._adjustIndex(s,-1),u=Ol(this._lContainer,o);u&&(ba(Sb(this._lContainer),o),$p(u[1],u))}detach(s){const o=this._adjustIndex(s,-1),u=Ol(this._lContainer,o);return u&&null!=ba(Sb(this._lContainer),o)?new Wo(u):null}_adjustIndex(s,o=0){return null==s?this.length+o:s}};function N_(i){return i[8]}function Sb(i){return i[8]||(i[8]=[])}function xb(i,s){let o;const u=s[i.index];if(Tn(u))o=u;else{let l;if(8&i.type)l=Vt(u);else{const d=s[11];l=d.createComment("");const m=oi(i,s);to(d,py(d,m),l,function(i,s){return Yt(i)?i.nextSibling(s):s.nextSibling}(d,m),!1)}s[i.index]=o=cE(u,s,l,i),og(s,o)}return new Ab(o,i,s)}const Bc={};class H_ extends ja{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const o=Nn(s);return new $_(o,this.ngModule)}}function qC(i){const s=[];for(let o in i)i.hasOwnProperty(o)&&s.push({propName:i[o],templateName:o});return s}const GS=new bn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Fp});class $_ extends mC{constructor(s,o){super(),this.componentDef=s,this.ngModule=o,this.componentType=s.type,this.selector=s.selectors.map(Ec).join(","),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!o}get inputs(){return qC(this.componentDef.inputs)}get outputs(){return qC(this.componentDef.outputs)}create(s,o,u,l){const d=(l=l||this.ngModule)?function(i,s){return{get:(o,u,l)=>{const d=i.get(o,Bc,l);return d!==Bc||u===Bc?d:s.get(o,u,l)}}}(s,l.injector):s,m=d.get(Pc,ws),v=d.get(S_,null),b=m.createRenderer(null,this.componentDef),C=this.componentDef.selectors[0][0]||"div",S=u?function(i,s,o){if(Yt(i))return i.selectRootElement(s,o===At.ShadowDom);let u="string"==typeof s?i.querySelector(s):s;return u.textContent="",u}(b,u,this.componentDef.encapsulation):Ye(m.createRenderer(null,this.componentDef),C,function(i){const s=i.toLowerCase();return"svg"===s?"http://www.w3.org/2000/svg":"math"===s?"http://www.w3.org/1998/MathML/":null}(C)),N=this.componentDef.onPush?576:528,P=function(i,s){return{components:[],scheduler:i||Fp,clean:Ww,playerHandler:s||null,flags:0}}(),H=xh(0,null,null,1,0,null,null,null,null,null),z=Ll(null,H,P,N,null,null,m,b,v,d);let de,J;Io(z);try{const Me=function(i,s,o,u,l,d){const m=o[1];o[20]=i;const b=bc(m,20,2,"#host",null),C=b.mergedAttrs=s.hostAttrs;null!==C&&(cg(b,C,!0),null!==i&&(su(l,i,C),null!==b.classes&&my(l,i,b.classes),null!==b.styles&&_w(l,i,b.styles)));const S=u.createRenderer(i,s),N=Ll(o,Pw(s),null,s.onPush?64:16,o[20],b,u,S,d||null,null);return m.firstCreatePass&&(li(Do(b,o),m,s.type),oE(m,b),Hw(b,o.length,1)),og(o,N),o[20]=N}(S,this.componentDef,z,m,b);if(S)if(u)su(b,S,["ng-version",kc.full]);else{const{attrs:ye,classes:ut}=function(i){const s=[],o=[];let u=1,l=2;for(;u<i.length;){let d=i[u];if("string"==typeof d)2===l?""!==d&&s.push(d,i[++u]):8===l&&o.push(d);else{if(!ko(l))break;l=d}u++}return{attrs:s,classes:o}}(this.componentDef.selectors[0]);ye&&su(b,S,ye),ut&&ut.length>0&&my(b,S,ut.join(" "))}if(J=Cs(H,20),void 0!==o){const ye=J.projection=[];for(let ut=0;ut<this.ngContentSelectors.length;ut++){const vt=o[ut];ye.push(null!=vt?Array.from(vt):null)}}de=function(i,s,o,u,l){const d=o[1],m=function(i,s,o){const u=gn();i.firstCreatePass&&(o.providersResolver&&o.providersResolver(o),$w(i,u,s,wc(i,s,1,null),o));const l=_a(s,i,u.directiveStart,u);un(l,s);const d=oi(u,s);return d&&un(d,s),l}(d,o,s);if(u.components.push(m),i[8]=m,l&&l.forEach(b=>b(m,s)),s.contentQueries){const b=gn();s.contentQueries(1,m,b.directiveStart)}const v=gn();return!d.firstCreatePass||null===s.hostBindings&&null===s.hostAttrs||(ai(v.index),xy(o[1],v,0,v.directiveStart,v.directiveEnd,s),Mh(s,m)),m}(Me,this.componentDef,z,P,[sI]),Sh(H,z,null)}finally{Yu()}return new zC(this.componentType,de,uf(J,z),z,J)}}class zC extends class{}{constructor(s,o,u,l,d){super(),this.location=u,this._rootLView=l,this._tNode=d,this.instance=o,this.hostView=this.changeDetectorRef=new Zg(l),this.componentType=s}get injector(){return new rs(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}const Tf=new Map;class qS extends Ou{constructor(s,o){super(),this._parent=o,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new H_(this);const u=Yn(s),l=s[j]||null;l&&v_(l),this._bootstrapComponents=_r(u.bootstrap),this._r3Injector=Yw(s,o,[{provide:Ou,useValue:this},{provide:ja,useValue:this.componentFactoryResolver}],K(s)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(s)}get(s,o=xn.THROW_IF_NOT_FOUND,u=Xe.Default){return s===xn||s===Ou||s===bu?this:this._r3Injector.get(s,o,u)}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(o=>o()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class e0 extends hf{constructor(s){super(),this.moduleType=s,null!==Yn(s)&&function(i){const s=new Set;!function o(u){const l=Yn(u,!0),d=l.id;null!==d&&(function(i,s,o){if(s&&s!==o)throw new Error(`Duplicate module registered for ${i} - ${K(s)} vs ${K(s.name)}`)}(d,Tf.get(d),u),Tf.set(d,u));const m=_r(l.imports);for(const v of m)s.has(v)||(s.add(v),o(v))}(i)}(s)}create(s){return new qS(this.moduleType,s)}}function q_(i,s,o){const u=ur()+i,l=Ee();return l[u]===lt?Uo(l,u,o?s.call(o):s()):function(i,s){return i[s]}(l,u)}function ZC(i,s,o,u){return QC(Ee(),ur(),i,s,o,u)}function QC(i,s,o,u,l,d){const m=s+o;return lr(i,m,l)?Uo(i,m+1,d?u.call(d,l):u(l)):function(i,s){const o=i[s];return o===lt?void 0:o}(i,m+1)}function K_(i,s){const o=Bt();let u;const l=i+20;o.firstCreatePass?(u=function(i,s){if(s)for(let o=s.length-1;o>=0;o--){const u=s[o];if(i===u.name)return u}throw new Ce("302",`The pipe '${i}' could not be found!`)}(s,o.pipeRegistry),o.data[l]=u,u.onDestroy&&(o.destroyHooks||(o.destroyHooks=[])).push(l,u.onDestroy)):u=o.data[l];const d=u.factory||(u.factory=Ur(u.type)),m=si(Gh);try{const v=hl(!1),b=d();return hl(v),function(i,s,o,u){o>=i.data.length&&(i.data[o]=null,i.blueprint[o]=null),s[o]=u}(o,Ee(),l,b),b}finally{si(m)}}function o0(i,s,o){const u=i+20,l=Ee(),d=function(i,s){return i[s]}(l,u);return function(i,s){so.isWrapped(s)&&(s=so.unwrap(s),i[Br()]=lt);return s}(l,function(i,s){return i[1].data[s].pure}(l,u)?QC(l,ur(),s,d.transform,o,d):d.transform(o))}function xf(i){return s=>{setTimeout(i,void 0,s)}}const Pt=class extends p.xQ{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,o,u){var l,d,m;let v=s,b=o||(()=>null),C=u;if(s&&"object"==typeof s){const N=s;v=null===(l=N.next)||void 0===l?void 0:l.bind(N),b=null===(d=N.error)||void 0===d?void 0:d.bind(N),C=null===(m=N.complete)||void 0===m?void 0:m.bind(N)}this.__isAsync&&(b=xf(b),v&&(v=xf(v)),C&&(C=xf(C)));const S=super.subscribe({next:v,error:b,complete:C});return s instanceof X.w&&s.add(S),S}};function tD(){return this._results[io()]()}class cm{constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const o=io(),u=cm.prototype;u[o]||(u[o]=tD)}get changes(){return this._changes||(this._changes=new Pt)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,o){return this._results.reduce(s,o)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,o){const u=this;u.dirty=!1;const l=Gr(s);(this._changesDetected=!function(i,s,o){if(i.length!==s.length)return!1;for(let u=0;u<i.length;u++){let l=i[u],d=s[u];if(o&&(l=o(l),d=o(d)),d!==l)return!1}return!0}(u._results,l,o))&&(u._results=l,u.length=l.length,u.last=l[this.length-1],u.first=l[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class yn{constructor(s){this.queryList=s,this.matches=null}clone(){return new yn(this.queryList)}setDirty(){this.queryList.setDirty()}}class ni{constructor(s=[]){this.queries=s}createEmbeddedView(s){const o=s.queries;if(null!==o){const u=null!==s.contentQueries?s.contentQueries[0]:o.length,l=[];for(let d=0;d<u;d++){const m=o.getByIndex(d);l.push(this.queries[m.indexInDeclarationView].clone())}return new ni(l)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let o=0;o<this.queries.length;o++)null!==p0(s,o).matches&&this.queries[o].setDirty()}}class Qo{constructor(s,o,u=null){this.predicate=s,this.flags=o,this.read=u}}class Y_{constructor(s=[]){this.queries=s}elementStart(s,o){for(let u=0;u<this.queries.length;u++)this.queries[u].elementStart(s,o)}elementEnd(s){for(let o=0;o<this.queries.length;o++)this.queries[o].elementEnd(s)}embeddedTView(s){let o=null;for(let u=0;u<this.length;u++){const l=null!==o?o.length:0,d=this.getByIndex(u).embeddedTView(s,l);d&&(d.indexInDeclarationView=u,null!==o?o.push(d):o=[d])}return null!==o?new Y_(o):null}template(s,o){for(let u=0;u<this.queries.length;u++)this.queries[u].template(s,o)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class c0{constructor(s,o=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=o}elementStart(s,o){this.isApplyingToNode(o)&&this.matchTNode(s,o)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,o){this.elementStart(s,o)}embeddedTView(s,o){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,o),new c0(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const o=this._declarationNodeIndex;let u=s.parent;for(;null!==u&&8&u.type&&u.index!==o;)u=u.parent;return o===(null!==u?u.index:-1)}return this._appliesToNextNode}matchTNode(s,o){const u=this.metadata.predicate;if(Array.isArray(u))for(let l=0;l<u.length;l++){const d=u[l];this.matchTNodeWithReadOption(s,o,Q_(o,d)),this.matchTNodeWithReadOption(s,o,Qt(o,s,d,!1,!1))}else u===Kg?4&o.type&&this.matchTNodeWithReadOption(s,o,-1):this.matchTNodeWithReadOption(s,o,Qt(o,s,u,!1,!1))}matchTNodeWithReadOption(s,o,u){if(null!==u){const l=this.metadata.read;if(null!==l)if(l===zo||l===Yg||l===Kg&&4&o.type)this.addMatch(o.index,-2);else{const d=Qt(o,s,l,!1,!1);null!==d&&this.addMatch(o.index,d)}else this.addMatch(o.index,u)}}addMatch(s,o){null===this.matches?this.matches=[s,o]:this.matches.push(s,o)}}function Q_(i,s){const o=i.localNames;if(null!==o)for(let u=0;u<o.length;u+=2)if(o[u]===s)return o[u+1];return null}function l0(i,s,o,u){return-1===o?function(i,s){return 11&i.type?uf(i,s):4&i.type?df(i,s):null}(s,i):-2===o?function(i,s,o){return o===zo?uf(s,i):o===Kg?df(s,i):o===Yg?xb(s,i):void 0}(i,s,u):_a(i,i[1],o,s)}function dm(i,s,o,u){const l=s[19].queries[u];if(null===l.matches){const d=i.data,m=o.matches,v=[];for(let b=0;b<m.length;b+=2){const C=m[b];v.push(C<0?null:l0(s,d[C],m[b+1],o.metadata.read))}l.matches=v}return l.matches}function d0(i,s,o,u){const l=i.queries.getByIndex(o),d=l.matches;if(null!==d){const m=dm(i,s,l,o);for(let v=0;v<d.length;v+=2){const b=d[v];if(b>0)u.push(m[v/2]);else{const C=d[v+1],S=s[-b];for(let N=10;N<S.length;N++){const P=S[N];P[17]===P[3]&&d0(P[1],P,C,u)}if(null!==S[9]){const N=S[9];for(let P=0;P<N.length;P++){const H=N[P];d0(H[1],H,C,u)}}}}}return u}function QS(i){const s=Ee(),o=Bt(),u=zd();Zu(u+1);const l=p0(o,u);if(i.dirty&&Ir(s)===(2==(2&l.metadata.flags))){if(null===l.matches)i.reset([]);else{const d=l.crossesNgTemplate?d0(o,s,u,[]):dm(o,s,l,u);i.reset(d,cf),i.notifyOnChanges()}return!0}return!1}function sD(i,s,o,u){const l=Bt();if(l.firstCreatePass){const d=gn();(function(i,s,o){null===i.queries&&(i.queries=new Y_),i.queries.track(new c0(s,o))})(l,new Qo(s,o,u),d.index),function(i,s){const o=i.contentQueries||(i.contentQueries=[]);s!==(o.length?o[o.length-1]:-1)&&o.push(i.queries.length-1,s)}(l,i),2==(2&o)&&(l.staticContentQueries=!0)}!function(i,s,o){const u=new cm(4==(4&o));rg(i,s,u,u.destroy),null===s[19]&&(s[19]=new ni),s[19].queries.push(new yn(u))}(l,Ee(),o)}function oD(){return i=Ee(),s=zd(),i[19].queries[s].queryList;var i,s}function p0(i,s){return i.queries.getByIndex(s)}const M0=new bn("Application Initializer");let Ed=(()=>{class i{constructor(o){this.appInits=o,this.resolve=Gg,this.reject=Gg,this.initialized=!1,this.done=!1,this.donePromise=new Promise((u,l)=>{this.resolve=u,this.reject=l})}runInitializers(){if(this.initialized)return;const o=[],u=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let l=0;l<this.appInits.length;l++){const d=this.appInits[l]();if(Tg(d))o.push(d);else if(Zl(d)){const m=new Promise((v,b)=>{d.subscribe({complete:v,error:b})});o.push(m)}}Promise.all(o).then(()=>{u()}).catch(l=>{this.reject(l)}),0===o.length&&u(),this.initialized=!0}}return i.\u0275fac=function(o){return new(o||i)(kn(M0,8))},i.\u0275prov=mt({token:i,factory:i.\u0275fac}),i})();const AD=new bn("AppId"),SD={provide:AD,useFactory:function(){return`${N0()}${N0()}${N0()}`},deps:[]};function N0(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const xD=new bn("Platform Initializer"),O0=new bn("Platform ID"),RD=new bn("appBootstrapListener");let P0=(()=>{class i{log(o){console.log(o)}warn(o){console.warn(o)}}return i.\u0275fac=function(o){return new(o||i)},i.\u0275prov=mt({token:i,factory:i.\u0275fac}),i})();const pm=new bn("LocaleId"),k0=new bn("DefaultCurrencyCode");class gm{constructor(s,o){this.ngModuleFactory=s,this.componentFactories=o}}const sv=function(i){return new e0(i)},Ex=sv,bx=function(i){return Promise.resolve(sv(i))},ND=function(i){const s=sv(i),u=_r(Yn(i).declarations).reduce((l,d)=>{const m=Nn(d);return m&&l.push(new $_(m)),l},[]);return new gm(s,u)},wx=ND,Dx=function(i){return Promise.resolve(ND(i))};let mm=(()=>{class i{constructor(){this.compileModuleSync=Ex,this.compileModuleAsync=bx,this.compileModuleAndAllComponentsSync=wx,this.compileModuleAndAllComponentsAsync=Dx}clearCache(){}clearCacheFor(o){}getModuleId(o){}}return i.\u0275fac=function(o){return new(o||i)},i.\u0275prov=mt({token:i,factory:i.\u0275fac}),i})();const Pf=(()=>Promise.resolve(0))();function ym(i){"undefined"==typeof Zone?Pf.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class uo{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:o=!1,shouldCoalesceRunChangeDetection:u=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Pt(!1),this.onMicrotaskEmpty=new Pt(!1),this.onStable=new Pt(!1),this.onError=new Pt(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const l=this;l._nesting=0,l._outer=l._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(l._inner=l._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(l._inner=l._inner.fork(Zone.longStackTraceZoneSpec)),l.shouldCoalesceEventChangeDetection=!u&&o,l.shouldCoalesceRunChangeDetection=u,l.lastRequestAnimationFrameId=-1,l.nativeRequestAnimationFrame=function(){let i=Ke.requestAnimationFrame,s=Ke.cancelAnimationFrame;if("undefined"!=typeof Zone&&i&&s){const o=i[Zone.__symbol__("OriginalDelegate")];o&&(i=o);const u=s[Zone.__symbol__("OriginalDelegate")];u&&(s=u)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function(i){const s=()=>{!function(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(Ke,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,L0(i),i.isCheckStableRunning=!0,ov(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),L0(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(o,u,l,d,m,v)=>{try{return PD(i),o.invokeTask(l,d,m,v)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===d.type||i.shouldCoalesceRunChangeDetection)&&s(),kD(i)}},onInvoke:(o,u,l,d,m,v,b)=>{try{return PD(i),o.invoke(l,d,m,v,b)}finally{i.shouldCoalesceRunChangeDetection&&s(),kD(i)}},onHasTask:(o,u,l,d)=>{o.hasTask(l,d),u===l&&("microTask"==d.change?(i._hasPendingMicrotasks=d.microTask,L0(i),ov(i)):"macroTask"==d.change&&(i.hasPendingMacrotasks=d.macroTask))},onHandleError:(o,u,l,d)=>(o.handleError(l,d),i.runOutsideAngular(()=>i.onError.emit(d)),!1)})}(l)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!uo.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(uo.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(s,o,u){return this._inner.run(s,o,u)}runTask(s,o,u,l){const d=this._inner,m=d.scheduleEventTask("NgZoneEvent: "+l,s,Ax,Gg,Gg);try{return d.runTask(m,o,u)}finally{d.cancelTask(m)}}runGuarded(s,o,u){return this._inner.runGuarded(s,o,u)}runOutsideAngular(s){return this._outer.run(s)}}const Ax={};function ov(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function L0(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function PD(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function kD(i){i._nesting--,ov(i)}class xx{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Pt,this.onMicrotaskEmpty=new Pt,this.onStable=new Pt,this.onError=new Pt}run(s,o,u){return s.apply(o,u)}runGuarded(s,o,u){return s.apply(o,u)}runOutsideAngular(s){return s()}runTask(s,o,u,l){return s.apply(o,u)}}let FD=(()=>{class i{constructor(o){this._ngZone=o,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),o.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{uo.assertNotInAngularZone(),ym(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())ym(()=>{for(;0!==this._callbacks.length;){let o=this._callbacks.pop();clearTimeout(o.timeoutId),o.doneCb(this._didWork)}this._didWork=!1});else{let o=this.getPendingTasks();this._callbacks=this._callbacks.filter(u=>!u.updateCb||!u.updateCb(o)||(clearTimeout(u.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(o=>({source:o.source,creationLocation:o.creationLocation,data:o.data})):[]}addCallback(o,u,l){let d=-1;u&&u>0&&(d=setTimeout(()=>{this._callbacks=this._callbacks.filter(m=>m.timeoutId!==d),o(this._didWork,this.getPendingTasks())},u)),this._callbacks.push({doneCb:o,timeoutId:d,updateCb:l})}whenStable(o,u,l){if(l&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(o,u,l),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(o,u,l){return[]}}return i.\u0275fac=function(o){return new(o||i)(kn(uo))},i.\u0275prov=mt({token:i,factory:i.\u0275fac}),i})(),LD=(()=>{class i{constructor(){this._applications=new Map,av.addToWindow(this)}registerApplication(o,u){this._applications.set(o,u)}unregisterApplication(o){this._applications.delete(o)}unregisterAllApplications(){this._applications.clear()}getTestability(o){return this._applications.get(o)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(o,u=!0){return av.findTestabilityInTree(this,o,u)}}return i.\u0275fac=function(o){return new(o||i)},i.\u0275prov=mt({token:i,factory:i.\u0275fac}),i})();class LM{addToWindow(s){}findTestabilityInTree(s,o,u){return null}}function VM(i){av=i}let av=new LM,VD=!0,UD=!1;function _m(){return UD=!0,VD}function BD(){if(UD)throw new Error("Cannot enable prod mode after platform setup.");VD=!1}let co;const Hc=new bn("AllowMultipleToken");class lo{constructor(s,o){this.name=s,this.token=o}}function V0(i,s,o=[]){const u=`Platform: ${s}`,l=new bn(u);return(d=[])=>{let m=kf();if(!m||m.injector.get(Hc,!1))if(i)i(o.concat(d).concat({provide:l,useValue:!0}));else{const v=o.concat(d).concat({provide:l,useValue:!0},{provide:Lo,useValue:"platform"});!function(i){if(co&&!co.destroyed&&!co.injector.get(Hc,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");co=i.get(Oi);const s=i.get(xD,null);s&&s.forEach(o=>o())}(xn.create({providers:v,name:u}))}return function(i){const s=kf();if(!s)throw new Error("No platform exists!");if(!s.injector.get(i,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return s}(l)}}function kf(){return co&&!co.destroyed?co:null}let Oi=(()=>{class i{constructor(o){this._injector=o,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(o,u){const v=function(i,s){let o;return o="noop"===i?new xx:("zone.js"===i?void 0:i)||new uo({enableLongStackTrace:_m(),shouldCoalesceEventChangeDetection:!!(null==s?void 0:s.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==s?void 0:s.ngZoneRunCoalescing)}),o}(u?u.ngZone:void 0,{ngZoneEventCoalescing:u&&u.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:u&&u.ngZoneRunCoalescing||!1}),b=[{provide:uo,useValue:v}];return v.run(()=>{const C=xn.create({providers:b,parent:this.injector,name:o.moduleType.name}),S=o.create(C),N=S.injector.get(eo,null);if(!N)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return v.runOutsideAngular(()=>{const P=v.onError.subscribe({next:H=>{N.handleError(H)}});S.onDestroy(()=>{Em(this._modules,S),P.unsubscribe()})}),function(i,s,o){try{const u=o();return Tg(u)?u.catch(l=>{throw s.runOutsideAngular(()=>i.handleError(l)),l}):u}catch(u){throw s.runOutsideAngular(()=>i.handleError(u)),u}}(N,v,()=>{const P=S.injector.get(Ed);return P.runInitializers(),P.donePromise.then(()=>(v_(S.injector.get(pm,Ot)||Ot),this._moduleDoBootstrap(S),S))})})}bootstrapModule(o,u=[]){const l=Id({},u);return function(i,s,o){const u=new e0(o);return Promise.resolve(u)}(0,0,o).then(d=>this.bootstrapModuleFactory(d,l))}_moduleDoBootstrap(o){const u=o.injector.get(Xo);if(o._bootstrapComponents.length>0)o._bootstrapComponents.forEach(l=>u.bootstrap(l));else{if(!o.instance.ngDoBootstrap)throw new Error(`The module ${K(o.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);o.instance.ngDoBootstrap(u)}this._modules.push(o)}onDestroy(o){this._destroyListeners.push(o)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(o=>o.destroy()),this._destroyListeners.forEach(o=>o()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(o){return new(o||i)(kn(xn))},i.\u0275prov=mt({token:i,factory:i.\u0275fac}),i})();function Id(i,s){return Array.isArray(s)?s.reduce(Id,i):Object.assign(Object.assign({},i),s)}let Xo=(()=>{class i{constructor(o,u,l,d,m){this._zone=o,this._injector=u,this._exceptionHandler=l,this._componentFactoryResolver=d,this._initStatus=m,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const v=new L.y(C=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{C.next(this._stable),C.complete()})}),b=new L.y(C=>{let S;this._zone.runOutsideAngular(()=>{S=this._zone.onStable.subscribe(()=>{uo.assertNotInAngularZone(),ym(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,C.next(!0))})})});const N=this._zone.onUnstable.subscribe(()=>{uo.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{C.next(!1)}))});return()=>{S.unsubscribe(),N.unsubscribe()}});this.isStable=(0,ie.T)(v,b.pipe(i=>(0,le.x)()(function(i,s){return function(u){let l;l="function"==typeof i?i:function(){return i};const d=Object.create(u,oe.N);return d.source=u,d.subjectFactory=l,d}}(ee)(i))))}bootstrap(o,u){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let l;l=o instanceof mC?o:this._componentFactoryResolver.resolveComponentFactory(o),this.componentTypes.push(l.componentType);const d=function(i){return i.isBoundToModule}(l)?void 0:this._injector.get(Ou),v=l.create(xn.NULL,[],u||l.selector,d),b=v.location.nativeElement,C=v.injector.get(FD,null),S=C&&v.injector.get(LD);return C&&S&&S.registerApplication(b,C),v.onDestroy(()=>{this.detachView(v.hostView),Em(this.components,v),S&&S.unregisterApplication(b)}),this._loadComponent(v),v}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let o of this._views)o.detectChanges()}catch(o){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(o))}finally{this._runningTick=!1}}attachView(o){const u=o;this._views.push(u),u.attachToAppRef(this)}detachView(o){const u=o;Em(this._views,u),u.detachFromAppRef()}_loadComponent(o){this.attachView(o.hostView),this.tick(),this.components.push(o),this._injector.get(RD,[]).concat(this._bootstrapListeners).forEach(l=>l(o))}ngOnDestroy(){this._views.slice().forEach(o=>o.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return i.\u0275fac=function(o){return new(o||i)(kn(uo),kn(xn),kn(eo),kn(ja),kn(Ed))},i.\u0275prov=mt({token:i,factory:i.\u0275fac}),i})();function Em(i,s){const o=i.indexOf(s);o>-1&&i.splice(o,1)}class kx{}class Lx{}const Vx={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let zD=(()=>{class i{constructor(o,u){this._compiler=o,this._config=u||Vx}load(o){return this.loadAndCompile(o)}loadAndCompile(o){let[u,l]=o.split("#");return void 0===l&&(l="default"),F(8255)(u).then(d=>d[l]).then(d=>WD(d,u,l)).then(d=>this._compiler.compileModuleAsync(d))}loadFactory(o){let[u,l]=o.split("#"),d="NgFactory";return void 0===l&&(l="default",d=""),F(8255)(this._config.factoryPathPrefix+u+this._config.factoryPathSuffix).then(m=>m[l+d]).then(m=>WD(m,u,l))}}return i.\u0275fac=function(o){return new(o||i)(kn(mm),kn(Lx,8))},i.\u0275prov=mt({token:i,factory:i.\u0275fac}),i})();function WD(i,s,o){if(!i)throw new Error(`Cannot find '${o}' in '${s}'`);return i}const ri=function(i){return null},eT=V0(null,"core",[{provide:O0,useValue:"unknown"},{provide:Oi,deps:[xn]},{provide:LD,deps:[]},{provide:P0,deps:[]}]),dv=[{provide:Xo,useClass:Xo,deps:[uo,xn,eo,ja,Ed]},{provide:GS,deps:[uo],useFactory:function(i){let s=[];return i.onStable.subscribe(()=>{for(;s.length;)s.pop()()}),function(o){s.push(o)}}},{provide:Ed,useClass:Ed,deps:[[new Js,M0]]},{provide:mm,useClass:mm,deps:[]},SD,{provide:zg,useFactory:function(){return dS},deps:[]},{provide:x_,useFactory:function(){return hS},deps:[]},{provide:pm,useFactory:function(i){return v_(i=i||"undefined"!=typeof $localize&&$localize.locale||Ot),i},deps:[[new cc(pm),new Js,new wa]]},{provide:k0,useValue:"USD"}];let $0=(()=>{class i{constructor(o){}}return i.\u0275fac=function(o){return new(o||i)(kn(Xo))},i.\u0275mod=Dn({type:i}),i.\u0275inj=vs({providers:dv}),i})()},8939:(ze,fe,F)=>{"use strict";F.d(fe,{hO:()=>K,xv:()=>ee,Dh:()=>le,GT:()=>ne,cc:()=>se,on:()=>V,pX:()=>oe});var p=F(3018),X=F(7841),L=F(9173);ze=F.hmd(ze);const ie=["ngOnDestroy"],oe=(Ne,Le,Ce,Je={})=>new Proxy(Ne,{get:(ot,Be)=>Ce.runOutsideAngular(()=>{var Lt;if(Ne[Be])return(null===(Lt=null==Je?void 0:Je.spy)||void 0===Lt?void 0:Lt.get)&&Je.spy.get(Be,Ne[Be]),Ne[Be];if(ie.indexOf(Be)>-1)return()=>{};const Et=Le.toPromise().then(Oe=>{const Re=Oe&&Oe[Be];return"function"==typeof Re?Re.bind(Oe):Re&&Re.then?Re.then(je=>Ce.run(()=>je)):Ce.run(()=>Re)});return new Proxy(()=>{},{get:(Oe,Re)=>Et[Re],apply:(Oe,Re,je)=>Et.then(et=>{var rt;const Tt=et&&et(...je);return(null===(rt=null==Je?void 0:Je.spy)||void 0===rt?void 0:rt.apply)&&Je.spy.apply(Be,je,Tt),Tt})})})}),ne=(Ne,Le)=>{Le.forEach(Ce=>{Object.getOwnPropertyNames(Ce.prototype||Ce).forEach(Je=>{Object.defineProperty(Ne.prototype,Je,Object.getOwnPropertyDescriptor(Ce.prototype||Ce,Je))})})};class me{constructor(Le){return Le}}const le=new p.OlP("angularfire2.app.options"),ee=new p.OlP("angularfire2.app.name");function V(Ne,Le,Ce){const ot="object"==typeof Ce&&Ce||{};ot.name=ot.name||"string"==typeof Ce&&Ce||"[DEFAULT]";const Lt=X.Z.apps.filter(Et=>Et&&Et.name===ot.name)[0]||Le.runOutsideAngular(()=>X.Z.initializeApp(Ne,ot));try{JSON.stringify(Ne)!==JSON.stringify(Lt.options)&&k("error",`${Lt.name} Firebase App already initialized with different options${ze.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(Et){}return new me(Lt)}const k=(Ne,...Le)=>{(0,p.X6Q)()&&"undefined"!=typeof console&&console[Ne](...Le)},Y={provide:me,useFactory:V,deps:[le,p.R0b,[new p.FiY,ee]]};let K=(()=>{class Ne{constructor(Ce){X.Z.registerVersion("angularfire",L.q4.full,"core"),X.Z.registerVersion("angularfire",L.q4.full,"app-compat"),X.Z.registerVersion("angular",p.q4F.full,Ce.toString())}static initializeApp(Ce,Je){return{ngModule:Ne,providers:[{provide:le,useValue:Ce},{provide:ee,useValue:Je}]}}}return Ne.\u0275fac=function(Ce){return new(Ce||Ne)(p.LFG(p.Lbi))},Ne.\u0275mod=p.oAB({type:Ne}),Ne.\u0275inj=p.cJS({providers:[Y]}),Ne})();function se(Ne,Le,Ce,Je,ot){const[,Be,Lt]=globalThis.\u0275AngularfireInstanceCache.find(Et=>Et[0]===Ne)||[];if(Be)return function(Ne,Le){try{return Ne.toString()===Le.toString()}catch(Ce){return Ne===Le}}(ot,Lt)||(ue("error",`${Le} was already initialized on the ${Ce} Firebase App with different settings.${_e?" You may need to reload as Firebase is not HMR aware.":""}`),ue("warn",{is:ot,was:Lt})),Be;{const Et=Je();return globalThis.\u0275AngularfireInstanceCache.push([Ne,Et,ot]),Et}}const _e=!!ze.hot,ue=(Ne,...Le)=>{(0,p.X6Q)()&&"undefined"!=typeof console&&console[Ne](...Le)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},9173:(ze,fe,F)=>{"use strict";F.d(fe,{q4:()=>cu,iC:()=>du,HU:()=>ac,vb:()=>Ro,JM:()=>rh});var p=F(3018),X=F(2329),L=F(8239),ie=F(8026),oe=F(3854),ne=F(3910),me=F(5422),le=F(4359);const ee="@firebase/installations",V="0.5.15",Y=`w:${V}`,K="FIS_v2",Le=new oe.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Ce(I){return I instanceof oe.ZR&&I.code.includes("request-failed")}function Je({projectId:I}){return`https://firebaseinstallations.googleapis.com/v1/projects/${I}/installations`}function ot(I){return{token:I.token,requestStatus:2,expiresIn:et(I.expiresIn),creationTime:Date.now()}}function Be(I,A){return Lt.apply(this,arguments)}function Lt(){return(Lt=(0,L.Z)(function*(I,A){const U=(yield A.json()).error;return Le.create("request-failed",{requestName:I,serverCode:U.code,serverMessage:U.message,serverStatus:U.status})})).apply(this,arguments)}function Et({apiKey:I}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I})}function Oe(I,{refreshToken:A}){const M=Et(I);return M.append("Authorization",function(I){return`${K} ${I}`}(A)),M}function Re(I){return je.apply(this,arguments)}function je(){return(je=(0,L.Z)(function*(I){const A=yield I();return A.status>=500&&A.status<600?I():A})).apply(this,arguments)}function et(I){return Number(I.replace("s","000"))}function Tt(I,A){return Ge.apply(this,arguments)}function Ge(){return(Ge=(0,L.Z)(function*({appConfig:I,heartbeatServiceProvider:A},{fid:M}){const U=Je(I),Z=Et(I),re=A.getImmediate({optional:!0});if(re){const _t=yield re.getHeartbeatsHeader();_t&&Z.append("x-firebase-client",_t)}const Fe={method:"POST",headers:Z,body:JSON.stringify({fid:M,authVersion:K,appId:I.appId,sdkVersion:Y})},ct=yield Re(()=>fetch(U,Fe));if(ct.ok){const _t=yield ct.json();return{fid:_t.fid||M,registrationStatus:2,refreshToken:_t.refreshToken,authToken:ot(_t.authToken)}}throw yield Be("Create Installation",ct)})).apply(this,arguments)}function Mn(I){return new Promise(A=>{setTimeout(A,I)})}const ki=/^[cdef][\w-]{21}$/;function Yc(){try{const I=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(I),I[0]=112+I[0]%16;const M=function(I){return function(I){return btoa(String.fromCharCode(...I)).replace(/\+/g,"-").replace(/\//g,"_")}(I).substr(0,22)}(I);return ki.test(M)?M:""}catch(I){return""}}function Er(I){return`${I.appName}!${I.appId}`}const Ei=new Map;function Us(I,A){const M=Er(I);Nr(M,A),function(I,A){const M=(!Fi&&"BroadcastChannel"in self&&(Fi=new BroadcastChannel("[Firebase] FID Change"),Fi.onmessage=I=>{Nr(I.data.key,I.data.fid)}),Fi);M&&M.postMessage({key:I,fid:A}),0===Ei.size&&Fi&&(Fi.close(),Fi=null)}(M,A)}function Nr(I,A){const M=Ei.get(I);if(M)for(const U of M)U(A)}let Fi=null;const Or="firebase-installations-store";let Te=null;function br(){return Te||(Te=(0,le.X3)("firebase-installations-database",1,{upgrade:(I,A)=>{0===A&&I.createObjectStore(Or)}})),Te}function Cn(I,A){return sn.apply(this,arguments)}function sn(){return(sn=(0,L.Z)(function*(I,A){const M=Er(I),Z=(yield br()).transaction(Or,"readwrite"),re=Z.objectStore(Or),be=yield re.get(M);return yield re.put(A,M),yield Z.done,(!be||be.fid!==A.fid)&&Us(I,A.fid),A})).apply(this,arguments)}function _n(I){return Bs.apply(this,arguments)}function Bs(){return(Bs=(0,L.Z)(function*(I){const A=Er(I),U=(yield br()).transaction(Or,"readwrite");yield U.objectStore(Or).delete(A),yield U.done})).apply(this,arguments)}function Es(I,A){return Xe.apply(this,arguments)}function Xe(){return(Xe=(0,L.Z)(function*(I,A){const M=Er(I),Z=(yield br()).transaction(Or,"readwrite"),re=Z.objectStore(Or),be=yield re.get(M),Fe=A(be);return void 0===Fe?yield re.delete(M):yield re.put(Fe,M),yield Z.done,Fe&&(!be||be.fid!==Fe.fid)&&Us(I,Fe.fid),Fe})).apply(this,arguments)}function Pr(I){return kr.apply(this,arguments)}function kr(){return(kr=(0,L.Z)(function*(I){let A;const M=yield Es(I.appConfig,U=>{const Z=si(U),re=hn(I,Z);return A=re.registrationPromise,re.installationEntry});return""===M.fid?{installationEntry:yield A}:{installationEntry:M,registrationPromise:A}})).apply(this,arguments)}function si(I){return At(I||{fid:Yc(),registrationStatus:0})}function hn(I,A){if(0===A.registrationStatus){if(!navigator.onLine)return{installationEntry:A,registrationPromise:Promise.reject(Le.create("app-offline"))};const M={fid:A.fid,registrationStatus:1,registrationTime:Date.now()},U=function(I,A){return tt.apply(this,arguments)}(I,M);return{installationEntry:M,registrationPromise:U}}return 1===A.registrationStatus?{installationEntry:A,registrationPromise:Wn(I)}:{installationEntry:A}}function tt(){return(tt=(0,L.Z)(function*(I,A){try{const M=yield Tt(I,A);return Cn(I.appConfig,M)}catch(M){throw Ce(M)&&409===M.customData.serverCode?yield _n(I.appConfig):yield Cn(I.appConfig,{fid:A.fid,registrationStatus:0}),M}})).apply(this,arguments)}function Wn(I){return bi.apply(this,arguments)}function bi(){return(bi=(0,L.Z)(function*(I){let A=yield wi(I.appConfig);for(;1===A.registrationStatus;)yield Mn(100),A=yield wi(I.appConfig);if(0===A.registrationStatus){const{installationEntry:M,registrationPromise:U}=yield Pr(I);return U||M}return A})).apply(this,arguments)}function wi(I){return Es(I,A=>{if(!A)throw Le.create("installation-not-found");return At(A)})}function At(I){return function(I){return 1===I.registrationStatus&&I.registrationTime+1e4<Date.now()}(I)?{fid:I.fid,registrationStatus:0}:I}function ho(I,A){return on.apply(this,arguments)}function on(){return(on=(0,L.Z)(function*({appConfig:I,heartbeatServiceProvider:A},M){const U=za(I,M),Z=Oe(I,M),re=A.getImmediate({optional:!0});if(re){const _t=yield re.getHeartbeatsHeader();_t&&Z.append("x-firebase-client",_t)}const Fe={method:"POST",headers:Z,body:JSON.stringify({installation:{sdkVersion:Y,appId:I.appId}})},ct=yield Re(()=>fetch(U,Fe));if(ct.ok)return ot(yield ct.json());throw yield Be("Generate Auth Token",ct)})).apply(this,arguments)}function za(I,{fid:A}){return`${Je(I)}/${A}/authTokens:generate`}function Ke(I){return js.apply(this,arguments)}function js(){return(js=(0,L.Z)(function*(I,A=!1){let M;const U=yield Es(I.appConfig,re=>{if(!Wt(re))throw Le.create("not-registered");const be=re.authToken;if(!A&&$(be))return re;if(1===be.requestStatus)return M=qe(I,A),re;{if(!navigator.onLine)throw Le.create("app-offline");const Fe=W(re);return M=yt(I,Fe),Fe}});return M?yield M:U.authToken})).apply(this,arguments)}function qe(I,A){return ve.apply(this,arguments)}function ve(){return(ve=(0,L.Z)(function*(I,A){let M=yield Ae(I.appConfig);for(;1===M.authToken.requestStatus;)yield Mn(100),M=yield Ae(I.appConfig);const U=M.authToken;return 0===U.requestStatus?Ke(I,A):U})).apply(this,arguments)}function Ae(I){return Es(I,A=>{if(!Wt(A))throw Le.create("not-registered");return function(I){return 1===I.requestStatus&&I.requestTime+1e4<Date.now()}(A.authToken)?Object.assign(Object.assign({},A),{authToken:{requestStatus:0}}):A})}function yt(I,A){return bt.apply(this,arguments)}function bt(){return(bt=(0,L.Z)(function*(I,A){try{const M=yield ho(I,A),U=Object.assign(Object.assign({},A),{authToken:M});return yield Cn(I.appConfig,U),M}catch(M){if(!Ce(M)||401!==M.customData.serverCode&&404!==M.customData.serverCode){const U=Object.assign(Object.assign({},A),{authToken:{requestStatus:0}});yield Cn(I.appConfig,U)}else yield _n(I.appConfig);throw M}})).apply(this,arguments)}function Wt(I){return void 0!==I&&2===I.registrationStatus}function $(I){return 2===I.requestStatus&&!function(I){const A=Date.now();return A<I.creationTime||I.creationTime+I.expiresIn<A+36e5}(I)}function W(I){const A={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},I),{authToken:A})}function We(){return(We=(0,L.Z)(function*(I){const A=I,{installationEntry:M,registrationPromise:U}=yield Pr(A);return U?U.catch(console.error):Ke(A).catch(console.error),M.fid})).apply(this,arguments)}function Xt(){return(Xt=(0,L.Z)(function*(I,A=!1){const M=I;return yield Zn(M),(yield Ke(M,A)).token})).apply(this,arguments)}function Zn(I){return Kn.apply(this,arguments)}function Kn(){return(Kn=(0,L.Z)(function*(I){const{registrationPromise:A}=yield Pr(I);A&&(yield A)})).apply(this,arguments)}function Yn(I){return Le.create("missing-app-config-values",{valueName:I})}const xd="installations";(0,ie._registerComponent)(new ne.wA(xd,I=>{const A=I.getProvider("app").getImmediate(),M=function(I){if(!I||!I.options)throw Yn("App Configuration");if(!I.name)throw Yn("App Name");const A=["projectId","apiKey","appId"];for(const M of A)if(!I.options[M])throw Yn(M);return{appName:I.name,projectId:I.options.projectId,apiKey:I.options.apiKey,appId:I.options.appId}}(A);return{app:A,appConfig:M,heartbeatServiceProvider:(0,ie._getProvider)(A,"heartbeat"),_delete:()=>Promise.resolve()}},"PUBLIC")),(0,ie._registerComponent)(new ne.wA("installations-internal",I=>{const A=I.getProvider("app").getImmediate(),M=(0,ie._getProvider)(A,xd).getImmediate();return{getId:()=>function(I){return We.apply(this,arguments)}(M),getToken:Z=>function(I){return Xt.apply(this,arguments)}(M,Z)}},"PRIVATE")),(0,ie.registerVersion)(ee,V),(0,ie.registerVersion)(ee,V,"esm2017");const vn="@firebase/remote-config",fn=new oe.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Rd{constructor(A,M,U,Z){this.client=A,this.storage=M,this.storageCache=U,this.logger=Z}isCachedDataFresh(A,M){if(!M)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const U=Date.now()-M,Z=U<=A;return this.logger.debug(`Config fetch cache check. Cache age millis: ${U}. Cache max age millis (minimumFetchIntervalMillis setting): ${A}. Is cache hit: ${Z}.`),Z}fetch(A){var M=this;return(0,L.Z)(function*(){const[U,Z]=yield Promise.all([M.storage.getLastSuccessfulFetchTimestampMillis(),M.storage.getLastSuccessfulFetchResponse()]);if(Z&&M.isCachedDataFresh(A.cacheMaxAgeMillis,U))return Z;A.eTag=Z&&Z.eTag;const re=yield M.client.fetch(A),be=[M.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===re.status&&be.push(M.storage.setLastSuccessfulFetchResponse(re)),yield Promise.all(be),re})()}}function Xi(I=navigator){return I.languages&&I.languages[0]||I.language}class Tn{constructor(A,M,U,Z,re,be){this.firebaseInstallations=A,this.sdkVersion=M,this.namespace=U,this.projectId=Z,this.apiKey=re,this.appId=be}fetch(A){var M=this;return(0,L.Z)(function*(){var U,Z,re;const[be,Fe]=yield Promise.all([M.firebaseInstallations.getId(),M.firebaseInstallations.getToken()]),_t=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${M.projectId}/namespaces/${M.namespace}:fetch?key=${M.apiKey}`,Ue={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":A.eTag||"*"},at={sdk_version:M.sdkVersion,app_instance_id:be,app_instance_id_token:Fe,app_id:M.appId,language_code:Xi()},Pn={method:"POST",headers:Ue,body:JSON.stringify(at)},Xn=fetch(_t,Pn),Ti=new Promise((yr,pi)=>{A.signal.addEventListener(()=>{const gp=new Error("The operation was aborted.");gp.name="AbortError",pi(gp)})});let as;try{yield Promise.race([Xn,Ti]),as=yield Xn}catch(yr){let pi="fetch-client-network";throw"AbortError"===(null===(U=yr)||void 0===U?void 0:U.name)&&(pi="fetch-timeout"),fn.create(pi,{originalErrorMessage:null===(Z=yr)||void 0===Z?void 0:Z.message})}let us=as.status;const kn=as.headers.get("ETag")||void 0;let fi,Mo;if(200===as.status){let yr;try{yr=yield as.json()}catch(pi){throw fn.create("fetch-client-parse",{originalErrorMessage:null===(re=pi)||void 0===re?void 0:re.message})}fi=yr.entries,Mo=yr.state}if("INSTANCE_STATE_UNSPECIFIED"===Mo?us=500:"NO_CHANGE"===Mo?us=304:("NO_TEMPLATE"===Mo||"EMPTY_CONFIG"===Mo)&&(fi={}),304!==us&&200!==us)throw fn.create("fetch-status",{httpStatus:us});return{status:us,eTag:kn,config:fi}})()}}class bs{constructor(A,M){this.client=A,this.storage=M}fetch(A){var M=this;return(0,L.Z)(function*(){const U=(yield M.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return M.attemptFetch(A,U)})()}attemptFetch(A,{throttleEndTimeMillis:M,backoffCount:U}){var Z=this;return(0,L.Z)(function*(){yield function(I,A){return new Promise((M,U)=>{const Z=Math.max(A-Date.now(),0),re=setTimeout(M,Z);I.addEventListener(()=>{clearTimeout(re),U(fn.create("fetch-throttle",{throttleEndTimeMillis:A}))})})}(A.signal,M);try{const re=yield Z.client.fetch(A);return yield Z.storage.deleteThrottleMetadata(),re}catch(re){if(!function(I){if(!(I instanceof oe.ZR&&I.customData))return!1;const A=Number(I.customData.httpStatus);return 429===A||500===A||503===A||504===A}(re))throw re;const be={throttleEndTimeMillis:Date.now()+(0,oe.$s)(U),backoffCount:U+1};return yield Z.storage.setThrottleMetadata(be),Z.attemptFetch(A,be)}})()}}class Qf{constructor(A,M,U,Z,re){this.app=A,this._client=M,this._storageCache=U,this._storage=Z,this._logger=re,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function aa(I,A){var M;const U=I.target.error||void 0;return fn.create(A,{originalErrorMessage:U&&(null===(M=U)||void 0===M?void 0:M.message)})}const go="app_namespace_store";class tl{constructor(A,M,U,Z=function(){return new Promise((I,A)=>{var M;try{const U=indexedDB.open("firebase_remote_config",1);U.onerror=Z=>{A(aa(Z,"storage-open"))},U.onsuccess=Z=>{I(Z.target.result)},U.onupgradeneeded=Z=>{0===Z.oldVersion&&Z.target.result.createObjectStore(go,{keyPath:"compositeKey"})}}catch(U){A(fn.create("storage-open",{originalErrorMessage:null===(M=U)||void 0===M?void 0:M.message}))}})}()){this.appId=A,this.appName=M,this.namespace=U,this.openDbPromise=Z}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(A){return this.set("last_fetch_status",A)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(A){return this.set("last_successful_fetch_timestamp_millis",A)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(A){return this.set("last_successful_fetch_response",A)}getActiveConfig(){return this.get("active_config")}setActiveConfig(A){return this.set("active_config",A)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(A){return this.set("active_config_etag",A)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(A){return this.set("throttle_metadata",A)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(A){var M=this;return(0,L.Z)(function*(){const U=yield M.openDbPromise;return new Promise((Z,re)=>{var be;const ct=U.transaction([go],"readonly").objectStore(go),_t=M.createCompositeKey(A);try{const Ue=ct.get(_t);Ue.onerror=at=>{re(aa(at,"storage-get"))},Ue.onsuccess=at=>{const Pn=at.target.result;Z(Pn?Pn.value:void 0)}}catch(Ue){re(fn.create("storage-get",{originalErrorMessage:null===(be=Ue)||void 0===be?void 0:be.message}))}})})()}set(A,M){var U=this;return(0,L.Z)(function*(){const Z=yield U.openDbPromise;return new Promise((re,be)=>{var Fe;const _t=Z.transaction([go],"readwrite").objectStore(go),Ue=U.createCompositeKey(A);try{const at=_t.put({compositeKey:Ue,value:M});at.onerror=Pn=>{be(aa(Pn,"storage-set"))},at.onsuccess=()=>{re()}}catch(at){be(fn.create("storage-set",{originalErrorMessage:null===(Fe=at)||void 0===Fe?void 0:Fe.message}))}})})()}delete(A){var M=this;return(0,L.Z)(function*(){const U=yield M.openDbPromise;return new Promise((Z,re)=>{var be;const ct=U.transaction([go],"readwrite").objectStore(go),_t=M.createCompositeKey(A);try{const Ue=ct.delete(_t);Ue.onerror=at=>{re(aa(at,"storage-delete"))},Ue.onsuccess=()=>{Z()}}catch(Ue){re(fn.create("storage-delete",{originalErrorMessage:null===(be=Ue)||void 0===be?void 0:be.message}))}})})()}createCompositeKey(A){return[this.appId,this.appName,this.namespace,A].join()}}class Od{constructor(A){this.storage=A}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var A=this;return(0,L.Z)(function*(){const M=A.storage.getLastFetchStatus(),U=A.storage.getLastSuccessfulFetchTimestampMillis(),Z=A.storage.getActiveConfig(),re=yield M;re&&(A.lastFetchStatus=re);const be=yield U;be&&(A.lastSuccessfulFetchTimestampMillis=be);const Fe=yield Z;Fe&&(A.activeConfig=Fe)})()}setLastFetchStatus(A){return this.lastFetchStatus=A,this.storage.setLastFetchStatus(A)}setLastSuccessfulFetchTimestampMillis(A){return this.lastSuccessfulFetchTimestampMillis=A,this.storage.setLastSuccessfulFetchTimestampMillis(A)}setActiveConfig(A){return this.activeConfig=A,this.storage.setActiveConfig(A)}}function nl(){return kd.apply(this,arguments)}function kd(){return(kd=(0,L.Z)(function*(){if(!(0,oe.hl)())return!1;try{return yield(0,oe.eu)()}catch(I){return!1}})).apply(this,arguments)}(0,ie._registerComponent)(new ne.wA("remote-config",function(A,{instanceIdentifier:M}){const U=A.getProvider("app").getImmediate(),Z=A.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw fn.create("registration-window");if(!(0,oe.hl)())throw fn.create("indexed-db-unavailable");const{projectId:re,apiKey:be,appId:Fe}=U.options;if(!re)throw fn.create("registration-project-id");if(!be)throw fn.create("registration-api-key");if(!Fe)throw fn.create("registration-app-id");const ct=new tl(Fe,U.name,M=M||"firebase"),_t=new Od(ct),Ue=new me.Yd(vn);Ue.logLevel=me.in.ERROR;const at=new Tn(Z,ie.SDK_VERSION,M,re,be,Fe),Pn=new bs(at,ct),Xn=new Rd(Pn,ct,_t,Ue),Ti=new Qf(U,Xn,_t,ct,Ue);return function(I){const A=(0,oe.m9)(I);A._initializePromise||(A._initializePromise=A._storageCache.loadFromStorage().then(()=>{A._isInitializationComplete=!0}))}(Ti),Ti},"PUBLIC").setMultipleInstances(!0)),(0,ie.registerVersion)(vn,"0.3.14"),(0,ie.registerVersion)(vn,"0.3.14","esm2017");const Fd="/firebase-messaging-sw.js",Nm="/firebase-cloud-messaging-push-scope",Za="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Ka="google.c.a.c_id",Vd="google.c.a.c_l",Ud="google.c.a.ts",Ya="google.c.a.e";var Ur=(()=>{return(I=Ur||(Ur={})).PUSH_RECEIVED="push-received",I.NOTIFICATION_CLICKED="notification-clicked",Ur;var I})();function es(I){const A=new Uint8Array(I);return btoa(String.fromCharCode(...A)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Vi(I){const M=(I+"=".repeat((4-I.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),U=atob(M),Z=new Uint8Array(U.length);for(let re=0;re<U.length;++re)Z[re]=U.charCodeAt(re);return Z}const Bu="fcm_token_details_db",Xf="fcm_token_object_Store";function rl(I){return Qa.apply(this,arguments)}function Qa(){return Qa=(0,L.Z)(function*(I){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(re=>re.name).includes(Bu))return null;let A=null;return(yield(0,le.X3)(Bu,5,{upgrade:(U=(0,L.Z)(function*(Z,re,be,Fe){var ct;if(re<2||!Z.objectStoreNames.contains(Xf))return;const _t=Fe.objectStore(Xf),Ue=yield _t.index("fcmSenderId").get(I);if(yield _t.clear(),Ue)if(2===re){const at=Ue;if(!at.auth||!at.p256dh||!at.endpoint)return;A={token:at.fcmToken,createTime:null!==(ct=at.createTime)&&void 0!==ct?ct:Date.now(),subscriptionOptions:{auth:at.auth,p256dh:at.p256dh,endpoint:at.endpoint,swScope:at.swScope,vapidKey:"string"==typeof at.vapidKey?at.vapidKey:es(at.vapidKey)}}}else if(3===re){const at=Ue;A={token:at.fcmToken,createTime:at.createTime,subscriptionOptions:{auth:es(at.auth),p256dh:es(at.p256dh),endpoint:at.endpoint,swScope:at.swScope,vapidKey:es(at.vapidKey)}}}else if(4===re){const at=Ue;A={token:at.fcmToken,createTime:at.createTime,subscriptionOptions:{auth:es(at.auth),p256dh:es(at.p256dh),endpoint:at.endpoint,swScope:at.swScope,vapidKey:es(at.vapidKey)}}}}),function(re,be,Fe,ct){return U.apply(this,arguments)})})).close(),yield(0,le.Lj)(Bu),yield(0,le.Lj)("fcm_vapid_details_db"),yield(0,le.Lj)("undefined"),il(A)?A:null;var U}),Qa.apply(this,arguments)}function il(I){if(!I||!I.subscriptionOptions)return!1;const{subscriptionOptions:A}=I;return"number"==typeof I.createTime&&I.createTime>0&&"string"==typeof I.token&&I.token.length>0&&"string"==typeof A.auth&&A.auth.length>0&&"string"==typeof A.p256dh&&A.p256dh.length>0&&"string"==typeof A.endpoint&&A.endpoint.length>0&&"string"==typeof A.swScope&&A.swScope.length>0&&"string"==typeof A.vapidKey&&A.vapidKey.length>0}const jn="firebase-messaging-store";let Ui=null;function Hu(){return Ui||(Ui=(0,le.X3)("firebase-messaging-database",1,{upgrade:(I,A)=>{0===A&&I.createObjectStore(jn)}})),Ui}function ua(I){return Bi.apply(this,arguments)}function Bi(){return(Bi=(0,L.Z)(function*(I){const A=ws(I),U=yield(yield Hu()).transaction(jn).objectStore(jn).get(A);if(U)return U;{const Z=yield rl(I.appConfig.senderId);if(Z)return yield $u(I,Z),Z}})).apply(this,arguments)}function $u(I,A){return yo.apply(this,arguments)}function yo(){return(yo=(0,L.Z)(function*(I,A){const M=ws(I),Z=(yield Hu()).transaction(jn,"readwrite");return yield Z.objectStore(jn).put(A,M),yield Z.done,A})).apply(this,arguments)}function Yt(I){return Gs.apply(this,arguments)}function Gs(){return(Gs=(0,L.Z)(function*(I){const A=ws(I),U=(yield Hu()).transaction(jn,"readwrite");yield U.objectStore(jn).delete(A),yield U.done})).apply(this,arguments)}function ws({appConfig:I}){return I.appId}const Vt=new oe.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Hd(I,A){return $d.apply(this,arguments)}function $d(){return($d=(0,L.Z)(function*(I,A){var M;const U=yield ar(I),Z=Ja(A),re={method:"POST",headers:U,body:JSON.stringify(Z)};let be;try{be=yield(yield fetch(qs(I.appConfig),re)).json()}catch(Fe){throw Vt.create("token-subscribe-failed",{errorInfo:null===(M=Fe)||void 0===M?void 0:M.toString()})}if(be.error)throw Vt.create("token-subscribe-failed",{errorInfo:be.error.message});if(!be.token)throw Vt.create("token-subscribe-no-token");return be.token})).apply(this,arguments)}function Is(I,A){return oi.apply(this,arguments)}function oi(){return(oi=(0,L.Z)(function*(I,A){var M;const U=yield ar(I),Z=Ja(A.subscriptionOptions),re={method:"PATCH",headers:U,body:JSON.stringify(Z)};let be;try{be=yield(yield fetch(`${qs(I.appConfig)}/${A.token}`,re)).json()}catch(Fe){throw Vt.create("token-update-failed",{errorInfo:null===(M=Fe)||void 0===M?void 0:M.toString()})}if(be.error)throw Vt.create("token-update-failed",{errorInfo:be.error.message});if(!be.token)throw Vt.create("token-update-no-token");return be.token})).apply(this,arguments)}function Gu(I,A){return Cs.apply(this,arguments)}function Cs(){return(Cs=(0,L.Z)(function*(I,A){var M;const Z={method:"DELETE",headers:yield ar(I)};try{const be=yield(yield fetch(`${qs(I.appConfig)}/${A}`,Z)).json();if(be.error)throw Vt.create("token-unsubscribe-failed",{errorInfo:be.error.message})}catch(re){throw Vt.create("token-unsubscribe-failed",{errorInfo:null===(M=re)||void 0===M?void 0:M.toString()})}})).apply(this,arguments)}function qs({projectId:I}){return`https://fcmregistrations.googleapis.com/v1/projects/${I}/registrations`}function ar(I){return Ir.apply(this,arguments)}function Ir(){return(Ir=(0,L.Z)(function*({appConfig:I,installations:A}){const M=yield A.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I.apiKey,"x-goog-firebase-installations-auth":`FIS ${M}`})})).apply(this,arguments)}function Ja({p256dh:I,auth:A,endpoint:M,vapidKey:U}){const Z={web:{endpoint:M,auth:A,p256dh:I}};return U!==Za&&(Z.web.applicationPubKey=U),Z}const Gd=6048e5;function ts(I){return _o.apply(this,arguments)}function _o(){return(_o=(0,L.Z)(function*(I){const A=yield ca(I.swRegistration,I.vapidKey),M={vapidKey:I.vapidKey,swScope:I.swRegistration.scope,endpoint:A.endpoint,auth:es(A.getKey("auth")),p256dh:es(A.getKey("p256dh"))},U=yield ua(I.firebaseDependencies);if(U){if(sl(U.subscriptionOptions,M))return Date.now()>=U.createTime+Gd?Om(I,{token:U.token,createTime:Date.now(),subscriptionOptions:M}):U.token;try{yield Gu(I.firebaseDependencies,U.token)}catch(Z){console.warn(Z)}return vo(I.firebaseDependencies,M)}return vo(I.firebaseDependencies,M)})).apply(this,arguments)}function Xa(I){return ht.apply(this,arguments)}function ht(){return(ht=(0,L.Z)(function*(I){const A=yield ua(I.firebaseDependencies);A&&(yield Gu(I.firebaseDependencies,A.token),yield Yt(I.firebaseDependencies));const M=yield I.swRegistration.pushManager.getSubscription();return!M||M.unsubscribe()})).apply(this,arguments)}function Om(I,A){return Ds.apply(this,arguments)}function Ds(){return(Ds=(0,L.Z)(function*(I,A){try{const M=yield Is(I.firebaseDependencies,A),U=Object.assign(Object.assign({},A),{token:M,createTime:Date.now()});return yield $u(I.firebaseDependencies,U),M}catch(M){throw yield Xa(I),M}})).apply(this,arguments)}function vo(I,A){return Eo.apply(this,arguments)}function Eo(){return(Eo=(0,L.Z)(function*(I,A){const U={token:yield Hd(I,A),createTime:Date.now(),subscriptionOptions:A};return yield $u(I,U),U.token})).apply(this,arguments)}function ca(I,A){return Ts.apply(this,arguments)}function Ts(){return(Ts=(0,L.Z)(function*(I,A){return(yield I.pushManager.getSubscription())||I.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Vi(A)})})).apply(this,arguments)}function sl(I,A){return A.vapidKey===I.vapidKey&&A.endpoint===I.endpoint&&A.auth===I.auth&&A.p256dh===I.p256dh}function Ee(I){const A={from:I.from,collapseKey:I.collapse_key,messageId:I.fcmMessageId};return function(I,A){if(!A.notification)return;I.notification={};const M=A.notification.title;M&&(I.notification.title=M);const U=A.notification.body;U&&(I.notification.body=U);const Z=A.notification.image;Z&&(I.notification.image=Z)}(A,I),function(I,A){!A.data||(I.data=A.data)}(A,I),function(I,A){var M,U,Z,re,be;if(!A.fcmOptions&&!(null===(M=A.notification)||void 0===M?void 0:M.click_action))return;I.fcmOptions={};const Fe=null!==(Z=null===(U=A.fcmOptions)||void 0===U?void 0:U.link)&&void 0!==Z?Z:null===(re=A.notification)||void 0===re?void 0:re.click_action;Fe&&(I.fcmOptions.link=Fe);const ct=null===(be=A.fcmOptions)||void 0===be?void 0:be.analytics_label;ct&&(I.fcmOptions.analyticsLabel=ct)}(A,I),A}function qu(I){return"object"==typeof I&&!!I&&Ka in I}function bo(I,A){const M=[];for(let U=0;U<I.length;U++)M.push(I.charAt(U)),U<A.length&&M.push(A.charAt(U));return M.join("")}function la(I){return Vt.create("missing-app-config-values",{valueName:I})}bo("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),bo("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class zs{constructor(A,M,U){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Z=function(I){if(!I||!I.options)throw la("App Configuration Object");if(!I.name)throw la("App Name");const A=["projectId","apiKey","appId","messagingSenderId"],{options:M}=I;for(const U of A)if(!M[U])throw la(U);return{appName:I.name,projectId:M.projectId,apiKey:M.apiKey,appId:M.appId,senderId:M.messagingSenderId}}(A);this.firebaseDependencies={app:A,appConfig:Z,installations:M,analyticsProvider:U}}_delete(){return Promise.resolve()}}function qd(I){return zu.apply(this,arguments)}function zu(){return(zu=(0,L.Z)(function*(I){var A;try{I.swRegistration=yield navigator.serviceWorker.register(Fd,{scope:Nm}),I.swRegistration.update().catch(()=>{})}catch(M){throw Vt.create("failed-service-worker-registration",{browserErrorMessage:null===(A=M)||void 0===A?void 0:A.message})}})).apply(this,arguments)}function da(I,A){return ns.apply(this,arguments)}function ns(){return(ns=(0,L.Z)(function*(I,A){if(!A&&!I.swRegistration&&(yield qd(I)),A||!I.swRegistration){if(!(A instanceof ServiceWorkerRegistration))throw Vt.create("invalid-sw-registration");I.swRegistration=A}})).apply(this,arguments)}function ur(I,A){return Br.apply(this,arguments)}function Br(){return(Br=(0,L.Z)(function*(I,A){A?I.vapidKey=A:I.vapidKey||(I.vapidKey=Za)})).apply(this,arguments)}function Ws(){return(Ws=(0,L.Z)(function*(I,A){if(!navigator)throw Vt.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Vt.create("permission-blocked");return yield ur(I,null==A?void 0:A.vapidKey),yield da(I,null==A?void 0:A.serviceWorkerRegistration),ts(I)})).apply(this,arguments)}function ji(I,A,M){return ol.apply(this,arguments)}function ol(){return(ol=(0,L.Z)(function*(I,A,M){const U=Wu(A);(yield I.firebaseDependencies.analyticsProvider.get()).logEvent(U,{message_id:M[Ka],message_name:M[Vd],message_time:M[Ud],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Wu(I){switch(I){case Ur.NOTIFICATION_CLICKED:return"notification_open";case Ur.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function ha(){return(ha=(0,L.Z)(function*(I,A){const M=A.data;if(!M.isFirebaseMessaging)return;I.onMessageHandler&&M.messageType===Ur.PUSH_RECEIVED&&("function"==typeof I.onMessageHandler?I.onMessageHandler(Ee(M)):I.onMessageHandler.next(Ee(M)));const U=M.data;qu(U)&&"1"===U[Ya]&&(yield ji(I,M.messageType,U))})).apply(this,arguments)}const tu="@firebase/messaging";function Ku(){return Io.apply(this,arguments)}function Io(){return(Io=(0,L.Z)(function*(){try{yield(0,oe.eu)()}catch(I){return!1}return"undefined"!=typeof window&&(0,oe.hl)()&&(0,oe.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}(0,ie._registerComponent)(new ne.wA("messaging",I=>{const A=new zs(I.getProvider("app").getImmediate(),I.getProvider("installations-internal").getImmediate(),I.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",M=>function(I,A){return ha.apply(this,arguments)}(A,M)),A},"PUBLIC")),(0,ie._registerComponent)(new ne.wA("messaging-internal",I=>{const A=I.getProvider("messaging").getImmediate();return{getToken:U=>function(I,A){return Ws.apply(this,arguments)}(A,U)}},"PRIVATE")),(0,ie.registerVersion)(tu,"0.9.19"),(0,ie.registerVersion)(tu,"0.9.19","esm2017");const ai="analytics",En="firebase_id",ru="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Kd="https://www.googletagmanager.com/gtag/js",Hn=new me.Yd("@firebase/analytics");function Yd(I){return Promise.all(I.map(A=>A.catch(M=>M)))}function ga(I,A){const M=document.createElement("script");M.src=`${Kd}?l=${I}&id=${A}`,M.async=!0,document.head.appendChild(M)}function cl(I,A,M,U,Z,re){return iu.apply(this,arguments)}function iu(){return(iu=(0,L.Z)(function*(I,A,M,U,Z,re){const be=U[Z];try{if(be)yield A[be];else{const ct=(yield Yd(M)).find(_t=>_t.measurementId===Z);ct&&(yield A[ct.appId])}}catch(Fe){Hn.error(Fe)}I("config",Z,re)})).apply(this,arguments)}function Ju(I,A,M,U,Z){return ll.apply(this,arguments)}function ll(){return(ll=(0,L.Z)(function*(I,A,M,U,Z){try{let re=[];if(Z&&Z.send_to){let be=Z.send_to;Array.isArray(be)||(be=[be]);const Fe=yield Yd(M);for(const ct of be){const _t=Fe.find(at=>at.measurementId===ct),Ue=_t&&A[_t.appId];if(!Ue){re=[];break}re.push(Ue)}}0===re.length&&(re=Object.values(A)),yield Promise.all(re),I("event",U,Z||{})}catch(re){Hn.error(re)}})).apply(this,arguments)}function km(I){const A=window.document.getElementsByTagName("script");for(const M of Object.values(A))if(M.src&&M.src.includes(Kd)&&M.src.includes(I))return M;return null}const mr=new oe.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),op=new class{constructor(A={},M=1e3){this.throttleMetadata=A,this.intervalMillis=M}getThrottleMetadata(A){return this.throttleMetadata[A]}setThrottleMetadata(A,M){this.throttleMetadata[A]=M}deleteThrottleMetadata(A){delete this.throttleMetadata[A]}};function Fm(I){return new Headers({Accept:"application/json","x-goog-api-key":I})}function su(I){return Xu.apply(this,arguments)}function Xu(){return(Xu=(0,L.Z)(function*(I){var A;const{appId:M,apiKey:U}=I,Z={method:"GET",headers:Fm(U)},re=ru.replace("{app-id}",M),be=yield fetch(re,Z);if(200!==be.status&&304!==be.status){let Fe="";try{const ct=yield be.json();(null===(A=ct.error)||void 0===A?void 0:A.message)&&(Fe=ct.error.message)}catch(ct){}throw mr.create("config-fetch-failed",{httpStatus:be.status,responseMessage:Fe})}return be.json()})).apply(this,arguments)}function ap(I){return ec.apply(this,arguments)}function ec(){return(ec=(0,L.Z)(function*(I,A=op,M){const{appId:U,apiKey:Z,measurementId:re}=I.options;if(!U)throw mr.create("no-app-id");if(!Z){if(re)return{measurementId:re,appId:U};throw mr.create("no-api-key")}const be=A.getThrottleMetadata(U)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Fe=new ou;return setTimeout((0,L.Z)(function*(){Fe.abort()}),void 0!==M?M:6e4),up({appId:U,apiKey:Z,measurementId:re},be,Fe,A)})).apply(this,arguments)}function up(I,A,M){return ya.apply(this,arguments)}function ya(){return(ya=(0,L.Z)(function*(I,{throttleEndTimeMillis:A,backoffCount:M},U,Z=op){var re,be;const{appId:Fe,measurementId:ct}=I;try{yield Hi(U,A)}catch(_t){if(ct)return Hn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ct} provided in the "measurementId" field in the local Firebase config. [${null===(re=_t)||void 0===re?void 0:re.message}]`),{appId:Fe,measurementId:ct};throw _t}try{const _t=yield su(I);return Z.deleteThrottleMetadata(Fe),_t}catch(_t){const Ue=_t;if(!dl(Ue)){if(Z.deleteThrottleMetadata(Fe),ct)return Hn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ct} provided in the "measurementId" field in the local Firebase config. [${null==Ue?void 0:Ue.message}]`),{appId:Fe,measurementId:ct};throw _t}const at=503===Number(null===(be=null==Ue?void 0:Ue.customData)||void 0===be?void 0:be.httpStatus)?(0,oe.$s)(M,Z.intervalMillis,30):(0,oe.$s)(M,Z.intervalMillis),Pn={throttleEndTimeMillis:Date.now()+at,backoffCount:M+1};return Z.setThrottleMetadata(Fe,Pn),Hn.debug(`Calling attemptFetch again in ${at} millis`),up(I,Pn,U,Z)}})).apply(this,arguments)}function Hi(I,A){return new Promise((M,U)=>{const Z=Math.max(A-Date.now(),0),re=setTimeout(M,Z);I.addEventListener(()=>{clearTimeout(re),U(mr.create("fetch-throttle",{throttleEndTimeMillis:A}))})})}function dl(I){if(!(I instanceof oe.ZR&&I.customData))return!1;const A=Number(I.customData.httpStatus);return 429===A||500===A||503===A||504===A}class ou{constructor(){this.listeners=[]}addEventListener(A){this.listeners.push(A)}abort(){this.listeners.forEach(A=>A())}}let tc,li;function Jd(){return(Jd=(0,L.Z)(function*(I,A,M,U,Z){if(Z&&Z.global)I("event",M,U);else{const re=yield A;I("event",M,Object.assign(Object.assign({},U),{send_to:re}))}})).apply(this,arguments)}function au(I){li=I}function Xd(I){tc=I}function As(){return Hr.apply(this,arguments)}function Hr(){return(Hr=(0,L.Z)(function*(){var I;if(!(0,oe.hl)())return Hn.warn(mr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,oe.eu)()}catch(A){return Hn.warn(mr.create("indexeddb-unavailable",{errorInfo:null===(I=A)||void 0===I?void 0:I.toString()}).message),!1}return!0})).apply(this,arguments)}function To(){return(To=(0,L.Z)(function*(I,A,M,U,Z,re,be){var Fe;const ct=ap(I);ct.then(Xn=>{M[Xn.measurementId]=Xn.appId,I.options.measurementId&&Xn.measurementId!==I.options.measurementId&&Hn.warn(`The measurement ID in the local Firebase config (${I.options.measurementId}) does not match the measurement ID fetched from the server (${Xn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Xn=>Hn.error(Xn)),A.push(ct);const _t=As().then(Xn=>{if(Xn)return U.getId()}),[Ue,at]=yield Promise.all([ct,_t]);km(re)||ga(re,Ue.measurementId),li&&(Z("consent","default",li),au(void 0)),Z("js",new Date);const Pn=null!==(Fe=null==be?void 0:be.config)&&void 0!==Fe?Fe:{};return Pn.origin="firebase",Pn.update=!0,null!=at&&(Pn[En]=at),Z("config",Ue.measurementId,Pn),tc&&(Z("set",tc),Xd(void 0)),Ue.measurementId})).apply(this,arguments)}class th{constructor(A){this.app=A}_delete(){return delete Qt[this.app.options.appId],Promise.resolve()}}let Qt={},_a=[];const rc={};let rs,is,ic="dataLayer",Ys=!1;function Ao(I,A,M){!function(){const I=[];if((0,oe.ru)()&&I.push("This is a browser extension environment."),(0,oe.zI)()||I.push("Cookies are not available."),I.length>0){const A=I.map((U,Z)=>`(${Z+1}) ${U}`).join(" "),M=mr.create("invalid-analytics-context",{errorInfo:A});Hn.warn(M.message)}}();const U=I.options.appId;if(!U)throw mr.create("no-app-id");if(!I.options.apiKey){if(!I.options.measurementId)throw mr.create("no-api-key");Hn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${I.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Qt[U])throw mr.create("already-exists",{id:U});if(!Ys){!function(I){let A=[];Array.isArray(window[I])?A=window[I]:window[I]=A}(ic);const{wrappedGtag:re,gtagCore:be}=function(I,A,M,U,Z){let re=function(...be){window[U].push(arguments)};return window[Z]&&"function"==typeof window[Z]&&(re=window[Z]),window[Z]=function(I,A,M,U){function re(){return(re=(0,L.Z)(function*(be,Fe,ct){try{"event"===be?yield Ju(I,A,M,Fe,ct):"config"===be?yield cl(I,A,M,U,Fe,ct):"consent"===be?I("consent","update",ct):I("set",Fe)}catch(_t){Hn.error(_t)}})).apply(this,arguments)}return function(be,Fe,ct){return re.apply(this,arguments)}}(re,I,A,M),{gtagCore:re,wrappedGtag:window[Z]}}(Qt,_a,rc,ic,"gtag");is=re,rs=be,Ys=!0}return Qt[U]=function(I,A,M,U,Z,re,be){return To.apply(this,arguments)}(I,_a,rc,A,rs,ic,M),new th(I)}function Qn(){return $i.apply(this,arguments)}function $i(){return($i=(0,L.Z)(function*(){if((0,oe.ru)()||!(0,oe.zI)()||!(0,oe.hl)())return!1;try{return yield(0,oe.eu)()}catch(I){return!1}})).apply(this,arguments)}const pl="@firebase/analytics";(0,ie._registerComponent)(new ne.wA(ai,(A,{options:M})=>Ao(A.getProvider("app").getImmediate(),A.getProvider("installations-internal").getImmediate(),M),"PUBLIC")),(0,ie._registerComponent)(new ne.wA("analytics-internal",function(A){try{const M=A.getProvider(ai).getImmediate();return{logEvent:(U,Z,re)=>function(I,A,M,U){I=(0,oe.m9)(I),function(I,A,M,U,Z){return Jd.apply(this,arguments)}(is,Qt[I.app.options.appId],A,M,U).catch(Z=>Hn.error(Z))}(M,U,Z,re)}}catch(M){throw mr.create("interop-component-reg-failed",{reason:M})}},"PRIVATE")),(0,ie.registerVersion)(pl,"0.8.3"),(0,ie.registerVersion)(pl,"0.8.3","esm2017");var So=F(6465);const nh=new(F(6102).v)(So.o);var dp=F(7771),hp=F(3342),$r=F(3101),os=F(309);const cu=new p.GfV("7.4.1"),An="__angularfire_symbol__analyticsIsSupportedValue",Ea="__angularfire_symbol__analyticsIsSupported",xo="__angularfire_symbol__remoteConfigIsSupportedValue",oc="__angularfire_symbol__remoteConfigIsSupported",gl="__angularfire_symbol__messagingIsSupportedValue",Gr="__angularfire_symbol__messagingIsSupported";function rh(I,A,M){if(A){if(1===A.length)return A[0];const re=A.filter(be=>be.app===M);if(1===re.length)return re[0]}return M.container.getProvider(I).getImmediate({optional:!0})}globalThis[Ea]||(globalThis[Ea]=Qn().then(I=>globalThis[An]=I).catch(()=>globalThis[An]=!1)),globalThis[Gr]||(globalThis[Gr]=Ku().then(I=>globalThis[gl]=I).catch(()=>globalThis[gl]=!1)),globalThis[oc]||(globalThis[oc]=nl().then(I=>globalThis[xo]=I).catch(()=>globalThis[xo]=!1));const Ro=(I,A)=>{const M=A?[A]:(0,X.C6)(),U=[];return M.forEach(Z=>{Z.container.getProvider(I).instances.forEach(be=>{U.includes(be)||U.push(be)})}),U};function Jn(){}class yl{constructor(A,M=dp.N){this.zone=A,this.delegate=M}now(){return this.delegate.now()}schedule(A,M,U){const Z=this.zone;return this.delegate.schedule(function(be){Z.runGuarded(()=>{A.apply(this,[be])})},M,U)}}class fp{constructor(A){this.zone=A,this.task=null}call(A,M){const U=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Jn,{},Jn,Jn)),M.pipe((0,hp.b)({next:U,complete:U,error:U})).subscribe(A).add(U)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let ac=(()=>{class I{constructor(M){this.ngZone=M,this.outsideAngular=M.runOutsideAngular(()=>new yl(Zone.current)),this.insideAngular=M.run(()=>new yl(Zone.current,nh)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return I.\u0275fac=function(M){return new(M||I)(p.LFG(p.R0b))},I.\u0275prov=p.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();function $n(){const I=globalThis.\u0275AngularFireScheduler;if(!I)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return I}function du(I){return $n(),function(I){return function(M){return(M=M.lift(new fp(I.ngZone))).pipe((0,$r.R)(I.outsideAngular),(0,os.QV)(I.insideAngular))}}($n())(I)}},3854:(ze,fe,F)=>{"use strict";F.d(fe,{BH:()=>Mr,LL:()=>Ei,ZR:()=>Er,zI:()=>Oe,US:()=>ne,tV:()=>ee,L:()=>le,$s:()=>Ae,r3:()=>Un,Sg:()=>Yc,ne:()=>kr,vZ:()=>Cn,ZB:()=>k,pd:()=>Xe,aH:()=>ii,Pz:()=>ki,m9:()=>Wt,z$:()=>K,jU:()=>_e,ru:()=>ue,xb:()=>Te,w1:()=>Ce,hl:()=>Lt,uI:()=>se,UG:()=>ke,b$:()=>Ne,G6:()=>Be,xO:()=>Bs,zd:()=>Es,eu:()=>Et});const ie=function($){const j=[];let W=0;for(let pe=0;pe<$.length;pe++){let ce=$.charCodeAt(pe);ce<128?j[W++]=ce:ce<2048?(j[W++]=ce>>6|192,j[W++]=63&ce|128):55296==(64512&ce)&&pe+1<$.length&&56320==(64512&$.charCodeAt(pe+1))?(ce=65536+((1023&ce)<<10)+(1023&$.charCodeAt(++pe)),j[W++]=ce>>18|240,j[W++]=ce>>12&63|128,j[W++]=ce>>6&63|128,j[W++]=63&ce|128):(j[W++]=ce>>12|224,j[W++]=ce>>6&63|128,j[W++]=63&ce|128)}return j},ne={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray($,j){if(!Array.isArray($))throw Error("encodeByteArray takes an array as a parameter");this.init_();const W=j?this.byteToCharMapWebSafe_:this.byteToCharMap_,pe=[];for(let ce=0;ce<$.length;ce+=3){const We=$[ce],xt=ce+1<$.length,Xt=xt?$[ce+1]:0,Zn=ce+2<$.length,Kn=Zn?$[ce+2]:0;let pr=(15&Xt)<<2|Kn>>6,ra=63&Kn;Zn||(ra=64,xt||(pr=64)),pe.push(W[We>>2],W[(3&We)<<4|Xt>>4],W[pr],W[ra])}return pe.join("")},encodeString($,j){return this.HAS_NATIVE_SUPPORT&&!j?btoa($):this.encodeByteArray(ie($),j)},decodeString($,j){return this.HAS_NATIVE_SUPPORT&&!j?atob($):function($){const j=[];let W=0,pe=0;for(;W<$.length;){const ce=$[W++];if(ce<128)j[pe++]=String.fromCharCode(ce);else if(ce>191&&ce<224){const We=$[W++];j[pe++]=String.fromCharCode((31&ce)<<6|63&We)}else if(ce>239&&ce<365){const Zn=((7&ce)<<18|(63&$[W++])<<12|(63&$[W++])<<6|63&$[W++])-65536;j[pe++]=String.fromCharCode(55296+(Zn>>10)),j[pe++]=String.fromCharCode(56320+(1023&Zn))}else{const We=$[W++],xt=$[W++];j[pe++]=String.fromCharCode((15&ce)<<12|(63&We)<<6|63&xt)}}return j.join("")}(this.decodeStringToByteArray($,j))},decodeStringToByteArray($,j){this.init_();const W=j?this.charToByteMapWebSafe_:this.charToByteMap_,pe=[];for(let ce=0;ce<$.length;){const We=W[$.charAt(ce++)],Xt=ce<$.length?W[$.charAt(ce)]:0;++ce;const Kn=ce<$.length?W[$.charAt(ce)]:64;++ce;const Ut=ce<$.length?W[$.charAt(ce)]:64;if(++ce,null==We||null==Xt||null==Kn||null==Ut)throw Error();pe.push(We<<2|Xt>>4),64!==Kn&&(pe.push(Xt<<4&240|Kn>>2),64!==Ut&&pe.push(Kn<<6&192|Ut))}return pe},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let $=0;$<this.ENCODED_VALS.length;$++)this.byteToCharMap_[$]=this.ENCODED_VALS.charAt($),this.charToByteMap_[this.byteToCharMap_[$]]=$,this.byteToCharMapWebSafe_[$]=this.ENCODED_VALS_WEBSAFE.charAt($),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[$]]=$,$>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt($)]=$,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt($)]=$)}}},le=function($){return function($){const j=ie($);return ne.encodeByteArray(j,!0)}($).replace(/\./g,"")},ee=function($){try{return ne.decodeString($,!0)}catch(j){console.error("base64Decode failed: ",j)}return null};function k($,j){if(!(j instanceof Object))return j;switch(j.constructor){case Date:return new Date(j.getTime());case Object:void 0===$&&($={});break;case Array:$=[];break;default:return j}for(const W in j)!j.hasOwnProperty(W)||!Y(W)||($[W]=k($[W],j[W]));return $}function Y($){return"__proto__"!==$}function K(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function se(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(K())}function ke(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch($){return!1}}function _e(){return"object"==typeof self&&self.self===self}function ue(){const $="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof $&&void 0!==$.id}function Ne(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ce(){const $=K();return $.indexOf("MSIE ")>=0||$.indexOf("Trident/")>=0}function Be(){return!ke()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Lt(){return"object"==typeof indexedDB}function Et(){return new Promise(($,j)=>{try{let W=!0;const pe="validate-browser-context-for-indexeddb-analytics-module",ce=self.indexedDB.open(pe);ce.onsuccess=()=>{ce.result.close(),W||self.indexedDB.deleteDatabase(pe),$(!0)},ce.onupgradeneeded=()=>{W=!1},ce.onerror=()=>{var We;j((null===(We=ce.error)||void 0===We?void 0:We.message)||"")}}catch(W){j(W)}})}function Oe(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}const Tt=()=>{try{return function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if("undefined"==typeof process||void 0===process.env)return;const $=process.env.__FIREBASE_DEFAULTS__;return $?JSON.parse($):void 0})()||(()=>{if("undefined"==typeof document)return;let $;try{$=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(W){return}const j=$&&ee($[1]);return j&&JSON.parse(j)})()}catch($){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${$}`)}},ii=()=>{var $;return null===($=Tt())||void 0===$?void 0:$.config},ki=$=>{var j;return null===(j=Tt())||void 0===j?void 0:j[`_${$}`]};class Mr{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((j,W)=>{this.resolve=j,this.reject=W})}wrapCallback(j){return(W,pe)=>{W?this.reject(W):this.resolve(pe),"function"==typeof j&&(this.promise.catch(()=>{}),1===j.length?j(W):j(W,pe))}}}function Yc($,j){if($.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const pe=j||"demo-project",ce=$.iat||0,We=$.sub||$.user_id;if(!We)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const xt=Object.assign({iss:`https://securetoken.google.com/${pe}`,aud:pe,iat:ce,exp:ce+3600,auth_time:ce,sub:We,user_id:We,firebase:{sign_in_provider:"custom",identities:{}}},$);return[le(JSON.stringify({alg:"none",type:"JWT"})),le(JSON.stringify(xt)),""].join(".")}class Er extends Error{constructor(j,W,pe){super(W),this.code=j,this.customData=pe,this.name="FirebaseError",Object.setPrototypeOf(this,Er.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ei.prototype.create)}}class Ei{constructor(j,W,pe){this.service=j,this.serviceName=W,this.errors=pe}create(j,...W){const pe=W[0]||{},ce=`${this.service}/${j}`,We=this.errors[j],xt=We?function($,j){return $.replace(dn,(W,pe)=>{const ce=j[pe];return null!=ce?String(ce):`<${pe}?>`})}(We,pe):"Error";return new Er(ce,`${this.serviceName}: ${xt} (${ce}).`,pe)}}const dn=/\{\$([^}]+)}/g;function Un($,j){return Object.prototype.hasOwnProperty.call($,j)}function Te($){for(const j in $)if(Object.prototype.hasOwnProperty.call($,j))return!1;return!0}function Cn($,j){if($===j)return!0;const W=Object.keys($),pe=Object.keys(j);for(const ce of W){if(!pe.includes(ce))return!1;const We=$[ce],xt=j[ce];if(sn(We)&&sn(xt)){if(!Cn(We,xt))return!1}else if(We!==xt)return!1}for(const ce of pe)if(!W.includes(ce))return!1;return!0}function sn($){return null!==$&&"object"==typeof $}function Bs($){const j=[];for(const[W,pe]of Object.entries($))Array.isArray(pe)?pe.forEach(ce=>{j.push(encodeURIComponent(W)+"="+encodeURIComponent(ce))}):j.push(encodeURIComponent(W)+"="+encodeURIComponent(pe));return j.length?"&"+j.join("&"):""}function Es($){const j={};return $.replace(/^\?/,"").split("&").forEach(pe=>{if(pe){const[ce,We]=pe.split("=");j[decodeURIComponent(ce)]=decodeURIComponent(We)}}),j}function Xe($){const j=$.indexOf("?");if(!j)return"";const W=$.indexOf("#",j);return $.substring(j,W>0?W:void 0)}function kr($,j){const W=new si($,j);return W.subscribe.bind(W)}class si{constructor(j,W){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=W,this.task.then(()=>{j(this)}).catch(pe=>{this.error(pe)})}next(j){this.forEachObserver(W=>{W.next(j)})}error(j){this.forEachObserver(W=>{W.error(j)}),this.close(j)}complete(){this.forEachObserver(j=>{j.complete()}),this.close()}subscribe(j,W,pe){let ce;if(void 0===j&&void 0===W&&void 0===pe)throw new Error("Missing Observer.");ce=function($,j){if("object"!=typeof $||null===$)return!1;for(const W of["next","error","complete"])if(W in $&&"function"==typeof $[W])return!0;return!1}(j)?j:{next:j,error:W,complete:pe},void 0===ce.next&&(ce.next=tt),void 0===ce.error&&(ce.error=tt),void 0===ce.complete&&(ce.complete=tt);const We=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?ce.error(this.finalError):ce.complete()}catch(xt){}}),this.observers.push(ce),We}unsubscribeOne(j){void 0===this.observers||void 0===this.observers[j]||(delete this.observers[j],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(j){if(!this.finalized)for(let W=0;W<this.observers.length;W++)this.sendOne(W,j)}sendOne(j,W){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[j])try{W(this.observers[j])}catch(pe){"undefined"!=typeof console&&console.error&&console.error(pe)}})}close(j){this.finalized||(this.finalized=!0,void 0!==j&&(this.finalError=j),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function tt(){}function Ae($,j=1e3,W=2){const pe=j*Math.pow(W,$),ce=Math.round(.5*pe*(Math.random()-.5)*2);return Math.min(144e5,pe+ce)}function Wt($){return $&&$._delegate?$._delegate:$}},2329:(ze,fe,F)=>{"use strict";F.d(fe,{Mq:()=>p.getApp,C6:()=>p.getApps});var p=F(8026);(0,p.registerVersion)("firebase","9.12.1","app")},7841:(ze,fe,F)=>{"use strict";F.d(fe,{Z:()=>p.Z});var p=F(3394);p.Z.registerVersion("firebase","9.12.1","app-compat")},8241:(ze,fe,F)=>{"use strict";F.r(fe);var p=F(8239),X=F(3394),L=F(3854),ie=F(8026),oe=F(5422);function ee(_,f){var g={};for(var E in _)Object.prototype.hasOwnProperty.call(_,E)&&f.indexOf(E)<0&&(g[E]=_[E]);if(null!=_&&"function"==typeof Object.getOwnPropertySymbols){var T=0;for(E=Object.getOwnPropertySymbols(_);T<E.length;T++)f.indexOf(E[T])<0&&Object.prototype.propertyIsEnumerable.call(_,E[T])&&(g[E[T]]=_[E[T]])}return g}var Mn=F(3910);const Us=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},dn=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},$t=new L.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Qi=new oe.Yd("@firebase/auth");function Fi(_,...f){Qi.logLevel<=oe.in.ERROR&&Qi.error(`Auth (${ie.SDK_VERSION}): ${_}`,...f)}function mt(_,...f){throw Or(_,...f)}function Vn(_,...f){return Or(_,...f)}function vs(_,f,g){const E=Object.assign(Object.assign({},dn()),{[f]:g});return new L.LL("auth","Firebase",E).create(f,{appName:_.name})}function Un(_,f,g){if(!(f instanceof g))throw g.name!==f.constructor.name&&mt(_,"argument-error"),vs(_,"argument-error",`Type of ${f.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Or(_,...f){if("string"!=typeof _){const g=f[0],E=[...f.slice(1)];return E[0]&&(E[0].appName=_.name),_._errorFactory.create(g,...E)}return $t.create(_,...f)}function Te(_,f,...g){if(!_)throw Or(f,...g)}function br(_){const f="INTERNAL ASSERTION FAILED: "+_;throw Fi(f),new Error(f)}function Cn(_,f){_||br(f)}const sn=new Map;function _n(_){Cn(_ instanceof Function,"Expected a class definition");let f=sn.get(_);return f?(Cn(f instanceof _,"Instance stored in cache mismatched with class"),f):(f=new _,sn.set(_,f),f)}function Xe(){var _;return"undefined"!=typeof self&&(null===(_=self.location)||void 0===_?void 0:_.href)||""}function Pr(){return"http:"===kr()||"https:"===kr()}function kr(){var _;return"undefined"!=typeof self&&(null===(_=self.location)||void 0===_?void 0:_.protocol)||null}class nt{constructor(f,g){this.shortDelay=f,this.longDelay=g,Cn(g>f,"Short delay should be less than long delay!"),this.isMobile=(0,L.uI)()||(0,L.b$)()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Pr()||(0,L.ru)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function tt(_,f){Cn(_.emulator,"Emulator should always be set here");const{url:g}=_.emulator;return f?`${g}${f.startsWith("/")?f.slice(1):f}`:g}class Wn{static initialize(f,g,E){this.fetchImpl=f,g&&(this.headersImpl=g),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void br("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void br("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void br("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const bi={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},wi=new nt(3e4,6e4);function At(_,f){return _.tenantId&&!f.tenantId?Object.assign(Object.assign({},f),{tenantId:_.tenantId}):f}function Kt(_,f,g,E){return ho.apply(this,arguments)}function ho(){return(ho=(0,p.Z)(function*(_,f,g,E,T={}){return on(_,T,(0,p.Z)(function*(){let x={},B={};E&&("GET"===f?B=E:x={body:JSON.stringify(E)});const Q=(0,L.xO)(Object.assign({key:_.config.apiKey},B)).slice(1),De=yield _._getAdditionalHeaders();return De["Content-Type"]="application/json",_.languageCode&&(De["X-Firebase-Locale"]=_.languageCode),Wn.fetch()(qe(_,_.config.apiHost,g,Q),Object.assign({method:f,headers:De,referrerPolicy:"no-referrer"},x))}))})).apply(this,arguments)}function on(_,f,g){return za.apply(this,arguments)}function za(){return(za=(0,p.Z)(function*(_,f,g){_._canInitEmulator=!1;const E=Object.assign(Object.assign({},bi),f);try{const T=new ve(_),x=yield Promise.race([g(),T.promise]);T.clearNetworkTimeout();const B=yield x.json();if("needConfirmation"in B)throw Ae(_,"account-exists-with-different-credential",B);if(x.ok&&!("errorMessage"in B))return B;{const Q=x.ok?B.errorMessage:B.error.message,[De,we]=Q.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===De)throw Ae(_,"credential-already-in-use",B);if("EMAIL_EXISTS"===De)throw Ae(_,"email-already-in-use",B);if("USER_DISABLED"===De)throw Ae(_,"user-disabled",B);const Ze=E[De]||De.toLowerCase().replace(/[_\s]+/g,"-");if(we)throw vs(_,Ze,we);mt(_,Ze)}}catch(T){if(T instanceof L.ZR)throw T;mt(_,"network-request-failed")}})).apply(this,arguments)}function Ke(_,f,g,E){return js.apply(this,arguments)}function js(){return(js=(0,p.Z)(function*(_,f,g,E,T={}){const x=yield Kt(_,f,g,E,T);return"mfaPendingCredential"in x&&mt(_,"multi-factor-auth-required",{_serverResponse:x}),x})).apply(this,arguments)}function qe(_,f,g,E){const T=`${f}${g}?${E}`;return _.config.emulator?tt(_.config,T):`${_.config.apiScheme}://${T}`}class ve{constructor(f){this.auth=f,this.timer=null,this.promise=new Promise((g,E)=>{this.timer=setTimeout(()=>E(Vn(this.auth,"network-request-failed")),wi.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ae(_,f,g){const E={appName:_.name};g.email&&(E.email=g.email),g.phoneNumber&&(E.phoneNumber=g.phoneNumber);const T=Vn(_,f,E);return T.customData._tokenResponse=g,T}function bt(){return(bt=(0,p.Z)(function*(_,f){return Kt(_,"POST","/v1/accounts:delete",f)})).apply(this,arguments)}function Wt(_,f){return $.apply(this,arguments)}function $(){return($=(0,p.Z)(function*(_,f){return Kt(_,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function j(_,f){return W.apply(this,arguments)}function W(){return(W=(0,p.Z)(function*(_,f){return Kt(_,"POST","/v1/accounts:lookup",f)})).apply(this,arguments)}function pe(_){if(_)try{const f=new Date(Number(_));if(!isNaN(f.getTime()))return f.toUTCString()}catch(f){}}function xt(){return(xt=(0,p.Z)(function*(_,f=!1){const g=(0,L.m9)(_),E=yield g.getIdToken(f),T=Zn(E);Te(T&&T.exp&&T.auth_time&&T.iat,g.auth,"internal-error");const x="object"==typeof T.firebase?T.firebase:void 0,B=null==x?void 0:x.sign_in_provider;return{claims:T,token:E,authTime:pe(Xt(T.auth_time)),issuedAtTime:pe(Xt(T.iat)),expirationTime:pe(Xt(T.exp)),signInProvider:B||null,signInSecondFactor:(null==x?void 0:x.sign_in_second_factor)||null}})).apply(this,arguments)}function Xt(_){return 1e3*Number(_)}function Zn(_){var f;const[g,E,T]=_.split(".");if(void 0===g||void 0===E||void 0===T)return Fi("JWT malformed, contained fewer than 3 sections"),null;try{const x=(0,L.tV)(E);return x?JSON.parse(x):(Fi("Failed to decode base64 JWT payload"),null)}catch(x){return Fi("Caught error parsing JWT payload as JSON",null===(f=x)||void 0===f?void 0:f.toString()),null}}function Dn(_,f){return Ut.apply(this,arguments)}function Ut(){return(Ut=(0,p.Z)(function*(_,f,g=!1){if(g)return f;try{return yield f}catch(E){throw E instanceof L.ZR&&pr(E)&&_.auth.currentUser===_&&(yield _.auth.signOut()),E}})).apply(this,arguments)}function pr({code:_}){return"auth/user-disabled"===_||"auth/user-token-expired"===_}class ra{constructor(f){this.user=f,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(f){var g;if(f){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const T=(null!==(g=this.user.stsTokenManager.expirationTime)&&void 0!==g?g:0)-Date.now()-3e5;return Math.max(0,T)}}schedule(f=!1){var g=this;if(!this.isRunning)return;const E=this.getInterval(f);this.timerId=setTimeout((0,p.Z)(function*(){yield g.iteration()}),E)}iteration(){var f=this;return(0,p.Z)(function*(){var g;try{yield f.user.getIdToken(!0)}catch(E){return void("auth/network-request-failed"===(null===(g=E)||void 0===g?void 0:g.code)&&f.schedule(!0))}f.schedule()})()}}class fo{constructor(f,g){this.createdAt=f,this.lastLoginAt=g,this._initializeTime()}_initializeTime(){this.lastSignInTime=pe(this.lastLoginAt),this.creationTime=pe(this.createdAt)}_copy(f){this.createdAt=f.createdAt,this.lastLoginAt=f.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Nn(_){return Ji.apply(this,arguments)}function Ji(){return(Ji=(0,p.Z)(function*(_){var f;const g=_.auth,E=yield _.getIdToken(),T=yield Dn(_,j(g,{idToken:E}));Te(null==T?void 0:T.users.length,g,"internal-error");const x=T.users[0];_._notifyReloadListener(x);const B=(null===(f=x.providerUserInfo)||void 0===f?void 0:f.length)?Ii(x.providerUserInfo):[],Q=xd(_.providerData,B),Ze=!!_.isAnonymous&&!(_.email&&x.passwordHash||(null==Q?void 0:Q.length)),Ye={uid:x.localId,displayName:x.displayName||null,photoURL:x.photoUrl||null,email:x.email||null,emailVerified:x.emailVerified||!1,phoneNumber:x.phoneNumber||null,tenantId:x.tenantId||null,providerData:Q,metadata:new fo(x.createdAt,x.lastLoginAt),isAnonymous:Ze};Object.assign(_,Ye)})).apply(this,arguments)}function Yn(){return(Yn=(0,p.Z)(function*(_){const f=(0,L.m9)(_);yield Nn(f),yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)})).apply(this,arguments)}function xd(_,f){return[..._.filter(E=>!f.some(T=>T.providerId===E.providerId)),...f]}function Ii(_){return _.map(f=>{var{providerId:g}=f,E=ee(f,["providerId"]);return{providerId:g,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}function Rt(){return(Rt=(0,p.Z)(function*(_,f){const g=yield on(_,{},(0,p.Z)(function*(){const E=(0,L.xO)({grant_type:"refresh_token",refresh_token:f}).slice(1),{tokenApiHost:T,apiKey:x}=_.config,B=qe(_,T,"/v1/token",`key=${x}`),Q=yield _._getAdditionalHeaders();return Q["Content-Type"]="application/x-www-form-urlencoded",Wn.fetch()(B,{method:"POST",headers:Q,body:E})}));return{accessToken:g.access_token,expiresIn:g.expires_in,refreshToken:g.refresh_token}})).apply(this,arguments)}class en{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(f){Te(f.idToken,"internal-error"),Te(void 0!==f.idToken,"internal-error"),Te(void 0!==f.refreshToken,"internal-error");const g="expiresIn"in f&&void 0!==f.expiresIn?Number(f.expiresIn):function(_){const f=Zn(_);return Te(f,"internal-error"),Te(void 0!==f.exp,"internal-error"),Te(void 0!==f.iat,"internal-error"),Number(f.exp)-Number(f.iat)}(f.idToken);this.updateTokensAndExpiration(f.idToken,f.refreshToken,g)}getToken(f,g=!1){var E=this;return(0,p.Z)(function*(){return Te(!E.accessToken||E.refreshToken,f,"user-token-expired"),g||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(f,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(f,g){var E=this;return(0,p.Z)(function*(){const{accessToken:T,refreshToken:x,expiresIn:B}=yield function(_,f){return Rt.apply(this,arguments)}(f,g);E.updateTokensAndExpiration(T,x,Number(B))})()}updateTokensAndExpiration(f,g,E){this.refreshToken=g||null,this.accessToken=f||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(f,g){const{refreshToken:E,accessToken:T,expirationTime:x}=g,B=new en;return E&&(Te("string"==typeof E,"internal-error",{appName:f}),B.refreshToken=E),T&&(Te("string"==typeof T,"internal-error",{appName:f}),B.accessToken=T),x&&(Te("number"==typeof x,"internal-error",{appName:f}),B.expirationTime=x),B}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(f){this.accessToken=f.accessToken,this.refreshToken=f.refreshToken,this.expirationTime=f.expirationTime}_clone(){return Object.assign(new en,this.toJSON())}_performRefresh(){return br("not implemented")}}function vn(_,f){Te("string"==typeof _||void 0===_,"internal-error",{appName:f})}class Fr{constructor(f){var{uid:g,auth:E,stsTokenManager:T}=f,x=ee(f,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ra(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=g,this.auth=E,this.stsTokenManager=T,this.accessToken=T.accessToken,this.displayName=x.displayName||null,this.email=x.email||null,this.emailVerified=x.emailVerified||!1,this.phoneNumber=x.phoneNumber||null,this.photoURL=x.photoURL||null,this.isAnonymous=x.isAnonymous||!1,this.tenantId=x.tenantId||null,this.providerData=x.providerData?[...x.providerData]:[],this.metadata=new fo(x.createdAt||void 0,x.lastLoginAt||void 0)}getIdToken(f){var g=this;return(0,p.Z)(function*(){const E=yield Dn(g,g.stsTokenManager.getToken(g.auth,f));return Te(E,g.auth,"internal-error"),g.accessToken!==E&&(g.accessToken=E,yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)),E})()}getIdTokenResult(f){return function(_){return xt.apply(this,arguments)}(this,f)}reload(){return function(_){return Yn.apply(this,arguments)}(this)}_assign(f){this!==f&&(Te(this.uid===f.uid,this.auth,"internal-error"),this.displayName=f.displayName,this.photoURL=f.photoURL,this.email=f.email,this.emailVerified=f.emailVerified,this.phoneNumber=f.phoneNumber,this.isAnonymous=f.isAnonymous,this.tenantId=f.tenantId,this.providerData=f.providerData.map(g=>Object.assign({},g)),this.metadata._copy(f.metadata),this.stsTokenManager._assign(f.stsTokenManager))}_clone(f){return new Fr(Object.assign(Object.assign({},this),{auth:f,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(f){Te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=f,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(f){this.reloadListener?this.reloadListener(f):this.reloadUserInfo=f}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(f,g=!1){var E=this;return(0,p.Z)(function*(){let T=!1;f.idToken&&f.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(f),T=!0),g&&(yield Nn(E)),yield E.auth._persistUserIfCurrent(E),T&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var f=this;return(0,p.Z)(function*(){const g=yield f.getIdToken();return yield Dn(f,function(_,f){return bt.apply(this,arguments)}(f.auth,{idToken:g})),f.stsTokenManager.clearRefreshToken(),f.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(f=>Object.assign({},f)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(f,g){var E,T,x,B,Q,De,we,Ze;const Ye=null!==(E=g.displayName)&&void 0!==E?E:void 0,Gt=null!==(T=g.email)&&void 0!==T?T:void 0,tr=null!==(x=g.phoneNumber)&&void 0!==x?x:void 0,Po=null!==(B=g.photoURL)&&void 0!==B?B:void 0,Ch=null!==(Q=g.tenantId)&&void 0!==Q?Q:void 0,xa=null!==(De=g._redirectEventId)&&void 0!==De?De:void 0,dy=null!==(we=g.createdAt)&&void 0!==we?we:void 0,Hp=null!==(Ze=g.lastLoginAt)&&void 0!==Ze?Ze:void 0,{uid:Ol,emailVerified:$p,isAnonymous:Pl,providerData:Gp,stsTokenManager:hy}=g;Te(Ol&&hy,f,"internal-error");const Dr=en.fromJSON(this.name,hy);Te("string"==typeof Ol,f,"internal-error"),vn(Ye,f.name),vn(Gt,f.name),Te("boolean"==typeof $p,f,"internal-error"),Te("boolean"==typeof Pl,f,"internal-error"),vn(tr,f.name),vn(Po,f.name),vn(Ch,f.name),vn(xa,f.name),vn(dy,f.name),vn(Hp,f.name);const Dh=new Fr({uid:Ol,auth:f,email:Gt,emailVerified:$p,displayName:Ye,isAnonymous:Pl,photoURL:Po,phoneNumber:tr,tenantId:Ch,stsTokenManager:Dr,createdAt:dy,lastLoginAt:Hp});return Gp&&Array.isArray(Gp)&&(Dh.providerData=Gp.map(to=>Object.assign({},to))),xa&&(Dh._redirectEventId=xa),Dh}static _fromIdTokenResponse(f,g,E=!1){return(0,p.Z)(function*(){const T=new en;T.updateFromServerResponse(g);const x=new Fr({uid:g.localId,auth:f,stsTokenManager:T,isAnonymous:E});return yield Nn(x),x})()}}const gr=(()=>{class _{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,p.Z)(function*(){return!0})()}_set(g,E){var T=this;return(0,p.Z)(function*(){T.storage[g]=E})()}_get(g){var E=this;return(0,p.Z)(function*(){const T=E.storage[g];return void 0===T?null:T})()}_remove(g){var E=this;return(0,p.Z)(function*(){delete E.storage[g]})()}_addListener(g,E){}_removeListener(g,E){}}return _.type="NONE",_})();function tn(_,f,g){return`firebase:${_}:${f}:${g}`}class fn{constructor(f,g,E){this.persistence=f,this.auth=g,this.userKey=E;const{config:T,name:x}=this.auth;this.fullUserKey=tn(this.userKey,T.apiKey,x),this.fullPersistenceKey=tn("persistence",T.apiKey,x),this.boundEventHandler=g._onStorageEvent.bind(g),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(f){return this.persistence._set(this.fullUserKey,f.toJSON())}getCurrentUser(){var f=this;return(0,p.Z)(function*(){const g=yield f.persistence._get(f.fullUserKey);return g?Fr._fromJSON(f.auth,g):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(f){var g=this;return(0,p.Z)(function*(){if(g.persistence===f)return;const E=yield g.getCurrentUser();return yield g.removeCurrentUser(),g.persistence=f,E?g.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(f,g,E="authUser"){return(0,p.Z)(function*(){if(!g.length)return new fn(_n(gr),f,E);const T=(yield Promise.all(g.map(function(){var we=(0,p.Z)(function*(Ze){if(yield Ze._isAvailable())return Ze});return function(Ze){return we.apply(this,arguments)}}()))).filter(we=>we);let x=T[0]||_n(gr);const B=tn(E,f.config.apiKey,f.name);let Q=null;for(const we of g)try{const Ze=yield we._get(B);if(Ze){const Ye=Fr._fromJSON(f,Ze);we!==x&&(Q=Ye),x=we;break}}catch(Ze){}const De=T.filter(we=>we._shouldAllowMigration);return x._shouldAllowMigration&&De.length?(x=De[0],Q&&(yield x._set(B,Q.toJSON())),yield Promise.all(g.map(function(){var we=(0,p.Z)(function*(Ze){if(Ze!==x)try{yield Ze._remove(B)}catch(Ye){}});return function(Ze){return we.apply(this,arguments)}}())),new fn(x,f,E)):new fn(x,f,E)})()}}function ia(_){const f=_.toLowerCase();if(f.includes("opera/")||f.includes("opr/")||f.includes("opios/"))return"Opera";if(Fu(f))return"IEMobile";if(f.includes("msie")||f.includes("trident/"))return"IE";if(f.includes("edge/"))return"Edge";if(St(f))return"Firefox";if(f.includes("silk/"))return"Silk";if(wr(f))return"Blackberry";if(oa(f))return"Webos";if(sa(f))return"Safari";if((f.includes("chrome/")||Hs(f))&&!f.includes("edge/"))return"Chrome";if(Lr(f))return"Android";{const E=_.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==E?void 0:E.length))return E[1]}return"Other"}function St(_=(0,L.z$)()){return/firefox\//i.test(_)}function sa(_=(0,L.z$)()){const f=_.toLowerCase();return f.includes("safari/")&&!f.includes("chrome/")&&!f.includes("crios/")&&!f.includes("android")}function Hs(_=(0,L.z$)()){return/crios\//i.test(_)}function Fu(_=(0,L.z$)()){return/iemobile/i.test(_)}function Lr(_=(0,L.z$)()){return/android/i.test(_)}function wr(_=(0,L.z$)()){return/blackberry/i.test(_)}function oa(_=(0,L.z$)()){return/webos/i.test(_)}function Vr(_=(0,L.z$)()){return/iphone|ipad|ipod/i.test(_)||/macintosh/i.test(_)&&/mobile/i.test(_)}function Qc(_=(0,L.z$)()){return Vr(_)||Lr(_)||oa(_)||wr(_)||/windows phone/i.test(_)||Fu(_)}function Xc(_,f=[]){let g;switch(_){case"Browser":g=ia((0,L.z$)());break;case"Worker":g=`${ia((0,L.z$)())}-${_}`;break;default:g=_}const E=f.length?f.join(","):"FirebaseCore-web";return`${g}/JsCore/${ie.SDK_VERSION}/${E}`}class el{constructor(f){this.auth=f,this.queue=[]}pushCallback(f,g){const E=x=>new Promise((B,Q)=>{try{B(f(x))}catch(De){Q(De)}});E.onAbort=g,this.queue.push(E);const T=this.queue.length-1;return()=>{this.queue[T]=()=>Promise.resolve()}}runMiddleware(f){var g=this;return(0,p.Z)(function*(){var E;if(g.auth.currentUser===f)return;const T=[];try{for(const x of g.queue)yield x(f),x.onAbort&&T.push(x.onAbort)}catch(x){T.reverse();for(const B of T)try{B()}catch(Q){}throw g.auth._errorFactory.create("login-blocked",{originalMessage:null===(E=x)||void 0===E?void 0:E.message})}})()}}class $s{constructor(f,g,E){this.app=f,this.heartbeatServiceProvider=g,this.config=E,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new or(this),this.idTokenSubscription=new or(this),this.beforeStateQueue=new el(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=$t,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=f.name,this.clientVersion=E.sdkClientVersion}_initializeWithPersistence(f,g){var E=this;return g&&(this._popupRedirectResolver=_n(g)),this._initializationPromise=this.queue((0,p.Z)(function*(){var T,x;if(!E._deleted&&(E.persistenceManager=yield fn.create(E,f),!E._deleted)){if(null===(T=E._popupRedirectResolver)||void 0===T?void 0:T._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch(B){}yield E.initializeCurrentUser(g),E.lastNotifiedUid=(null===(x=E.currentUser)||void 0===x?void 0:x.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var f=this;return(0,p.Z)(function*(){if(f._deleted)return;const g=yield f.assertedPersistence.getCurrentUser();if(f.currentUser||g){if(f.currentUser&&g&&f.currentUser.uid===g.uid)return f._currentUser._assign(g),void(yield f.currentUser.getIdToken());yield f._updateCurrentUser(g,!0)}})()}initializeCurrentUser(f){var g=this;return(0,p.Z)(function*(){var E;const T=yield g.assertedPersistence.getCurrentUser();let x=T,B=!1;if(f&&g.config.authDomain){yield g.getOrInitRedirectPersistenceManager();const Q=null===(E=g.redirectUser)||void 0===E?void 0:E._redirectEventId,De=null==x?void 0:x._redirectEventId,we=yield g.tryRedirectSignIn(f);(!Q||Q===De)&&(null==we?void 0:we.user)&&(x=we.user,B=!0)}if(!x)return g.directlySetCurrentUser(null);if(!x._redirectEventId){if(B)try{yield g.beforeStateQueue.runMiddleware(x)}catch(Q){x=T,g._popupRedirectResolver._overrideRedirectResult(g,()=>Promise.reject(Q))}return x?g.reloadAndSetCurrentUserOrClear(x):g.directlySetCurrentUser(null)}return Te(g._popupRedirectResolver,g,"argument-error"),yield g.getOrInitRedirectPersistenceManager(),g.redirectUser&&g.redirectUser._redirectEventId===x._redirectEventId?g.directlySetCurrentUser(x):g.reloadAndSetCurrentUserOrClear(x)})()}tryRedirectSignIn(f){var g=this;return(0,p.Z)(function*(){let E=null;try{E=yield g._popupRedirectResolver._completeRedirectFn(g,f,!0)}catch(T){yield g._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(f){var g=this;return(0,p.Z)(function*(){var E;try{yield Nn(f)}catch(T){if("auth/network-request-failed"!==(null===(E=T)||void 0===E?void 0:E.code))return g.directlySetCurrentUser(null)}return g.directlySetCurrentUser(f)})()}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const _=navigator;return _.languages&&_.languages[0]||_.language||null}()}_delete(){var f=this;return(0,p.Z)(function*(){f._deleted=!0})()}updateCurrentUser(f){var g=this;return(0,p.Z)(function*(){const E=f?(0,L.m9)(f):null;return E&&Te(E.auth.config.apiKey===g.config.apiKey,g,"invalid-user-token"),g._updateCurrentUser(E&&E._clone(g))})()}_updateCurrentUser(f,g=!1){var E=this;return(0,p.Z)(function*(){if(!E._deleted)return f&&Te(E.tenantId===f.tenantId,E,"tenant-id-mismatch"),g||(yield E.beforeStateQueue.runMiddleware(f)),E.queue((0,p.Z)(function*(){yield E.directlySetCurrentUser(f),E.notifyAuthListeners()}))})()}signOut(){var f=this;return(0,p.Z)(function*(){return yield f.beforeStateQueue.runMiddleware(null),(f.redirectPersistenceManager||f._popupRedirectResolver)&&(yield f._setRedirectUser(null)),f._updateCurrentUser(null,!0)})()}setPersistence(f){var g=this;return this.queue((0,p.Z)(function*(){yield g.assertedPersistence.setPersistence(_n(f))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(f){this._errorFactory=new L.LL("auth","Firebase",f())}onAuthStateChanged(f,g,E){return this.registerStateListener(this.authStateSubscription,f,g,E)}beforeAuthStateChanged(f,g){return this.beforeStateQueue.pushCallback(f,g)}onIdTokenChanged(f,g,E){return this.registerStateListener(this.idTokenSubscription,f,g,E)}toJSON(){var f;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(f=this._currentUser)||void 0===f?void 0:f.toJSON()}}_setRedirectUser(f,g){var E=this;return(0,p.Z)(function*(){const T=yield E.getOrInitRedirectPersistenceManager(g);return null===f?T.removeCurrentUser():T.setCurrentUser(f)})()}getOrInitRedirectPersistenceManager(f){var g=this;return(0,p.Z)(function*(){if(!g.redirectPersistenceManager){const E=f&&_n(f)||g._popupRedirectResolver;Te(E,g,"argument-error"),g.redirectPersistenceManager=yield fn.create(g,[_n(E._redirectPersistence)],"redirectUser"),g.redirectUser=yield g.redirectPersistenceManager.getCurrentUser()}return g.redirectPersistenceManager})()}_redirectUserForId(f){var g=this;return(0,p.Z)(function*(){var E,T;return g._isInitialized&&(yield g.queue((0,p.Z)(function*(){}))),(null===(E=g._currentUser)||void 0===E?void 0:E._redirectEventId)===f?g._currentUser:(null===(T=g.redirectUser)||void 0===T?void 0:T._redirectEventId)===f?g.redirectUser:null})()}_persistUserIfCurrent(f){var g=this;return(0,p.Z)(function*(){if(f===g.currentUser)return g.queue((0,p.Z)(function*(){return g.directlySetCurrentUser(f)}))})()}_notifyListenersIfCurrent(f){f===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var f,g;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(g=null===(f=this.currentUser)||void 0===f?void 0:f.uid)&&void 0!==g?g:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(f,g,E,T){if(this._deleted)return()=>{};const x="function"==typeof g?g:g.next.bind(g),B=this._isInitialized?Promise.resolve():this._initializationPromise;return Te(B,this,"internal-error"),B.then(()=>x(this.currentUser)),"function"==typeof g?f.addObserver(g,E,T):f.addObserver(g)}directlySetCurrentUser(f){var g=this;return(0,p.Z)(function*(){g.currentUser&&g.currentUser!==f&&g._currentUser._stopProactiveRefresh(),f&&g.isProactiveRefreshEnabled&&f._startProactiveRefresh(),g.currentUser=f,f?yield g.assertedPersistence.setCurrentUser(f):yield g.assertedPersistence.removeCurrentUser()})()}queue(f){return this.operations=this.operations.then(f,f),this.operations}get assertedPersistence(){return Te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(f){!f||this.frameworks.includes(f)||(this.frameworks.push(f),this.frameworks.sort(),this.clientVersion=Xc(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var f=this;return(0,p.Z)(function*(){var g;const E={"X-Client-Version":f.clientVersion};f.app.options.appId&&(E["X-Firebase-gmpid"]=f.app.options.appId);const T=yield null===(g=f.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getHeartbeatsHeader();return T&&(E["X-Firebase-Client"]=T),E})()}}function pn(_){return(0,L.m9)(_)}class or{constructor(f){this.auth=f,this.observer=null,this.addObserver=(0,L.ne)(g=>this.observer=g)}get next(){return Te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Xi(_){const f=_.indexOf(":");return f<0?"":_.substr(0,f+1)}function Lu(_){if(!_)return null;const f=Number(_);return isNaN(f)?null:f}class bs{constructor(f,g){this.providerId=f,this.signInMethod=g}toJSON(){return br("not implemented")}_getIdTokenResponse(f){return br("not implemented")}_linkToIdToken(f,g){return br("not implemented")}_getReauthenticationResolver(f){return br("not implemented")}}function Ci(_,f){return Uu.apply(this,arguments)}function Uu(){return(Uu=(0,p.Z)(function*(_,f){return Kt(_,"POST","/v1/accounts:resetPassword",At(_,f))})).apply(this,arguments)}function Qf(_,f){return aa.apply(this,arguments)}function aa(){return(aa=(0,p.Z)(function*(_,f){return Kt(_,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function go(_,f){return Md.apply(this,arguments)}function Md(){return(Md=(0,p.Z)(function*(_,f){return Kt(_,"POST","/v1/accounts:update",At(_,f))})).apply(this,arguments)}function Nd(){return(Nd=(0,p.Z)(function*(_,f){return Ke(_,"POST","/v1/accounts:signInWithPassword",At(_,f))})).apply(this,arguments)}function tl(_,f){return Od.apply(this,arguments)}function Od(){return(Od=(0,p.Z)(function*(_,f){return Kt(_,"POST","/v1/accounts:sendOobCode",At(_,f))})).apply(this,arguments)}function Mm(_,f){return Jf.apply(this,arguments)}function Jf(){return(Jf=(0,p.Z)(function*(_,f){return tl(_,f)})).apply(this,arguments)}function Pd(_,f){return nl.apply(this,arguments)}function nl(){return(nl=(0,p.Z)(function*(_,f){return tl(_,f)})).apply(this,arguments)}function kd(_,f){return Fd.apply(this,arguments)}function Fd(){return(Fd=(0,p.Z)(function*(_,f){return tl(_,f)})).apply(this,arguments)}function Nm(_,f){return Za.apply(this,arguments)}function Za(){return(Za=(0,p.Z)(function*(_,f){return tl(_,f)})).apply(this,arguments)}function Ka(){return(Ka=(0,p.Z)(function*(_,f){return Ke(_,"POST","/v1/accounts:signInWithEmailLink",At(_,f))})).apply(this,arguments)}function Ud(){return(Ud=(0,p.Z)(function*(_,f){return Ke(_,"POST","/v1/accounts:signInWithEmailLink",At(_,f))})).apply(this,arguments)}class Ya extends bs{constructor(f,g,E,T=null){super("password",E),this._email=f,this._password=g,this._tenantId=T}static _fromEmailAndPassword(f,g){return new Ya(f,g,"password")}static _fromEmailAndCode(f,g,E=null){return new Ya(f,g,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f;if((null==g?void 0:g.email)&&(null==g?void 0:g.password)){if("password"===g.signInMethod)return this._fromEmailAndPassword(g.email,g.password);if("emailLink"===g.signInMethod)return this._fromEmailAndCode(g.email,g.password,g.tenantId)}return null}_getIdTokenResponse(f){var g=this;return(0,p.Z)(function*(){switch(g.signInMethod){case"password":return function(_,f){return Nd.apply(this,arguments)}(f,{returnSecureToken:!0,email:g._email,password:g._password});case"emailLink":return function(_,f){return Ka.apply(this,arguments)}(f,{email:g._email,oobCode:g._password});default:mt(f,"internal-error")}})()}_linkToIdToken(f,g){var E=this;return(0,p.Z)(function*(){switch(E.signInMethod){case"password":return Qf(f,{idToken:g,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function(_,f){return Ud.apply(this,arguments)}(f,{idToken:g,email:E._email,oobCode:E._password});default:mt(f,"internal-error")}})()}_getReauthenticationResolver(f){return this._getIdTokenResponse(f)}}function mo(_,f){return Ur.apply(this,arguments)}function Ur(){return(Ur=(0,p.Z)(function*(_,f){return Ke(_,"POST","/v1/accounts:signInWithIdp",At(_,f))})).apply(this,arguments)}class Vi extends bs{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(f){const g=new Vi(f.providerId,f.signInMethod);return f.idToken||f.accessToken?(f.idToken&&(g.idToken=f.idToken),f.accessToken&&(g.accessToken=f.accessToken),f.nonce&&!f.pendingToken&&(g.nonce=f.nonce),f.pendingToken&&(g.pendingToken=f.pendingToken)):f.oauthToken&&f.oauthTokenSecret?(g.accessToken=f.oauthToken,g.secret=f.oauthTokenSecret):mt("argument-error"),g}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f,{providerId:E,signInMethod:T}=g,x=ee(g,["providerId","signInMethod"]);if(!E||!T)return null;const B=new Vi(E,T);return B.idToken=x.idToken||void 0,B.accessToken=x.accessToken||void 0,B.secret=x.secret,B.nonce=x.nonce,B.pendingToken=x.pendingToken||null,B}_getIdTokenResponse(f){return mo(f,this.buildRequest())}_linkToIdToken(f,g){const E=this.buildRequest();return E.idToken=g,mo(f,E)}_getReauthenticationResolver(f){const g=this.buildRequest();return g.autoCreate=!1,mo(f,g)}buildRequest(){const f={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)f.pendingToken=this.pendingToken;else{const g={};this.idToken&&(g.id_token=this.idToken),this.accessToken&&(g.access_token=this.accessToken),this.secret&&(g.oauth_token_secret=this.secret),g.providerId=this.providerId,this.nonce&&!this.pendingToken&&(g.nonce=this.nonce),f.postBody=(0,L.xO)(g)}return f}}function Bu(_,f){return Bd.apply(this,arguments)}function Bd(){return(Bd=(0,p.Z)(function*(_,f){return Kt(_,"POST","/v1/accounts:sendVerificationCode",At(_,f))})).apply(this,arguments)}function rl(){return(rl=(0,p.Z)(function*(_,f){return Ke(_,"POST","/v1/accounts:signInWithPhoneNumber",At(_,f))})).apply(this,arguments)}function il(){return(il=(0,p.Z)(function*(_,f){const g=yield Ke(_,"POST","/v1/accounts:signInWithPhoneNumber",At(_,f));if(g.temporaryProof)throw Ae(_,"account-exists-with-different-credential",g);return g})).apply(this,arguments)}const ju={USER_NOT_FOUND:"user-not-found"};function jn(){return(jn=(0,p.Z)(function*(_,f){return Ke(_,"POST","/v1/accounts:signInWithPhoneNumber",At(_,Object.assign(Object.assign({},f),{operation:"REAUTH"})),ju)})).apply(this,arguments)}class Ui extends bs{constructor(f){super("phone","phone"),this.params=f}static _fromVerification(f,g){return new Ui({verificationId:f,verificationCode:g})}static _fromTokenResponse(f,g){return new Ui({phoneNumber:f,temporaryProof:g})}_getIdTokenResponse(f){return function(_,f){return rl.apply(this,arguments)}(f,this._makeVerificationRequest())}_linkToIdToken(f,g){return function(_,f){return il.apply(this,arguments)}(f,Object.assign({idToken:g},this._makeVerificationRequest()))}_getReauthenticationResolver(f){return function(_,f){return jn.apply(this,arguments)}(f,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:f,phoneNumber:g,verificationId:E,verificationCode:T}=this.params;return f&&g?{temporaryProof:f,phoneNumber:g}:{sessionInfo:E,code:T}}toJSON(){const f={providerId:this.providerId};return this.params.phoneNumber&&(f.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(f.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(f.verificationCode=this.params.verificationCode),this.params.verificationId&&(f.verificationId=this.params.verificationId),f}static fromJSON(f){"string"==typeof f&&(f=JSON.parse(f));const{verificationId:g,verificationCode:E,phoneNumber:T,temporaryProof:x}=f;return E||g||T||x?new Ui({verificationId:g,verificationCode:E,phoneNumber:T,temporaryProof:x}):null}}class Bi{constructor(f){var g,E,T,x,B,Q;const De=(0,L.zd)((0,L.pd)(f)),we=null!==(g=De.apiKey)&&void 0!==g?g:null,Ze=null!==(E=De.oobCode)&&void 0!==E?E:null,Ye=function(_){switch(_){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(T=De.mode)&&void 0!==T?T:null);Te(we&&Ze&&Ye,"argument-error"),this.apiKey=we,this.operation=Ye,this.code=Ze,this.continueUrl=null!==(x=De.continueUrl)&&void 0!==x?x:null,this.languageCode=null!==(B=De.languageCode)&&void 0!==B?B:null,this.tenantId=null!==(Q=De.tenantId)&&void 0!==Q?Q:null}static parseLink(f){const g=function(_){const f=(0,L.zd)((0,L.pd)(_)).link,g=f?(0,L.zd)((0,L.pd)(f)).deep_link_id:null,E=(0,L.zd)((0,L.pd)(_)).deep_link_id;return(E?(0,L.zd)((0,L.pd)(E)).link:null)||E||g||f||_}(f);try{return new Bi(g)}catch(E){return null}}}let yo=(()=>{class _{constructor(){this.providerId=_.PROVIDER_ID}static credential(g,E){return Ya._fromEmailAndPassword(g,E)}static credentialWithLink(g,E){const T=Bi.parseLink(E);return Te(T,"argument-error"),Ya._fromEmailAndCode(g,T.code,T.tenantId)}}return _.PROVIDER_ID="password",_.EMAIL_PASSWORD_SIGN_IN_METHOD="password",_.EMAIL_LINK_SIGN_IN_METHOD="emailLink",_})();class Yt{constructor(f){this.providerId=f,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(f){this.defaultLanguageCode=f}setCustomParameters(f){return this.customParameters=f,this}getCustomParameters(){return this.customParameters}}class Gs extends Yt{constructor(){super(...arguments),this.scopes=[]}addScope(f){return this.scopes.includes(f)||this.scopes.push(f),this}getScopes(){return[...this.scopes]}}class ws extends Gs{static credentialFromJSON(f){const g="string"==typeof f?JSON.parse(f):f;return Te("providerId"in g&&"signInMethod"in g,"argument-error"),Vi._fromParams(g)}credential(f){return this._credential(Object.assign(Object.assign({},f),{nonce:f.rawNonce}))}_credential(f){return Te(f.idToken||f.accessToken,"argument-error"),Vi._fromParams(Object.assign(Object.assign({},f),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(f){return ws.oauthCredentialFromTaggedObject(f)}static credentialFromError(f){return ws.oauthCredentialFromTaggedObject(f.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:g,oauthAccessToken:E,oauthTokenSecret:T,pendingToken:x,nonce:B,providerId:Q}=f;if(!E&&!T&&!g&&!x||!Q)return null;try{return new ws(Q)._credential({idToken:g,accessToken:E,nonce:B,pendingToken:x})}catch(De){return null}}}let jd=(()=>{class _ extends Gs{constructor(){super("facebook.com")}static credential(g){return Vi._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.FACEBOOK_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return _.credentialFromTaggedObject(g)}static credentialFromError(g){return _.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return _.credential(g.oauthAccessToken)}catch(E){return null}}}return _.FACEBOOK_SIGN_IN_METHOD="facebook.com",_.PROVIDER_ID="facebook.com",_})(),Vt=(()=>{class _ extends Gs{constructor(){super("google.com"),this.addScope("profile")}static credential(g,E){return Vi._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.GOOGLE_SIGN_IN_METHOD,idToken:g,accessToken:E})}static credentialFromResult(g){return _.credentialFromTaggedObject(g)}static credentialFromError(g){return _.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:E,oauthAccessToken:T}=g;if(!E&&!T)return null;try{return _.credential(E,T)}catch(x){return null}}}return _.GOOGLE_SIGN_IN_METHOD="google.com",_.PROVIDER_ID="google.com",_})(),Hd=(()=>{class _ extends Gs{constructor(){super("github.com")}static credential(g){return Vi._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.GITHUB_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return _.credentialFromTaggedObject(g)}static credentialFromError(g){return _.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return _.credential(g.oauthAccessToken)}catch(E){return null}}}return _.GITHUB_SIGN_IN_METHOD="github.com",_.PROVIDER_ID="github.com",_})();class Is extends bs{constructor(f,g){super(f,f),this.pendingToken=g}_getIdTokenResponse(f){return mo(f,this.buildRequest())}_linkToIdToken(f,g){const E=this.buildRequest();return E.idToken=g,mo(f,E)}_getReauthenticationResolver(f){const g=this.buildRequest();return g.autoCreate=!1,mo(f,g)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f,{providerId:E,signInMethod:T,pendingToken:x}=g;return E&&T&&x&&E===T?new Is(E,x):null}static _create(f,g){return new Is(f,g)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Gu extends Yt{constructor(f){Te(f.startsWith("saml."),"argument-error"),super(f)}static credentialFromResult(f){return Gu.samlCredentialFromTaggedObject(f)}static credentialFromError(f){return Gu.samlCredentialFromTaggedObject(f.customData||{})}static credentialFromJSON(f){const g=Is.fromJSON(f);return Te(g,"argument-error"),g}static samlCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{pendingToken:g,providerId:E}=f;if(!g||!E)return null;try{return Is._create(E,g)}catch(T){return null}}}let Cs=(()=>{class _ extends Gs{constructor(){super("twitter.com")}static credential(g,E){return Vi._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.TWITTER_SIGN_IN_METHOD,oauthToken:g,oauthTokenSecret:E})}static credentialFromResult(g){return _.credentialFromTaggedObject(g)}static credentialFromError(g){return _.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthAccessToken:E,oauthTokenSecret:T}=g;if(!E||!T)return null;try{return _.credential(E,T)}catch(x){return null}}}return _.TWITTER_SIGN_IN_METHOD="twitter.com",_.PROVIDER_ID="twitter.com",_})();function qs(_,f){return ar.apply(this,arguments)}function ar(){return(ar=(0,p.Z)(function*(_,f){return Ke(_,"POST","/v1/accounts:signUp",At(_,f))})).apply(this,arguments)}class Ir{constructor(f){this.user=f.user,this.providerId=f.providerId,this._tokenResponse=f._tokenResponse,this.operationType=f.operationType}static _fromIdTokenResponse(f,g,E,T=!1){return(0,p.Z)(function*(){const x=yield Fr._fromIdTokenResponse(f,E,T),B=Ja(E);return new Ir({user:x,providerId:B,_tokenResponse:E,operationType:g})})()}static _forOperation(f,g,E){return(0,p.Z)(function*(){yield f._updateTokensIfNecessary(E,!0);const T=Ja(E);return new Ir({user:f,providerId:T,_tokenResponse:E,operationType:g})})()}}function Ja(_){return _.providerId?_.providerId:"phoneNumber"in _?"phone":null}function ts(){return(ts=(0,p.Z)(function*(_){var f;const g=pn(_);if(yield g._initializationPromise,null===(f=g.currentUser)||void 0===f?void 0:f.isAnonymous)return new Ir({user:g.currentUser,providerId:null,operationType:"signIn"});const E=yield qs(g,{returnSecureToken:!0}),T=yield Ir._fromIdTokenResponse(g,"signIn",E,!0);return yield g._updateCurrentUser(T.user),T})).apply(this,arguments)}class _o extends L.ZR{constructor(f,g,E,T){var x;super(g.code,g.message),this.operationType=E,this.user=T,Object.setPrototypeOf(this,_o.prototype),this.customData={appName:f.name,tenantId:null!==(x=f.tenantId)&&void 0!==x?x:void 0,_serverResponse:g.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(f,g,E,T){return new _o(f,g,E,T)}}function Xa(_,f,g,E){return("reauthenticate"===f?g._getReauthenticationResolver(_):g._getIdTokenResponse(_)).catch(x=>{throw"auth/multi-factor-auth-required"===x.code?_o._fromErrorAndOperation(_,x,f,E):x})}function ht(_){return new Set(_.map(({providerId:f})=>f).filter(f=>!!f))}function Ds(){return(Ds=(0,p.Z)(function*(_,f){const g=(0,L.m9)(_);yield ca(!0,g,f);const{providerUserInfo:E}=yield Wt(g.auth,{idToken:yield g.getIdToken(),deleteProvider:[f]}),T=ht(E||[]);return g.providerData=g.providerData.filter(x=>T.has(x.providerId)),T.has("phone")||(g.phoneNumber=null),yield g.auth._persistUserIfCurrent(g),g})).apply(this,arguments)}function vo(_,f){return Eo.apply(this,arguments)}function Eo(){return(Eo=(0,p.Z)(function*(_,f,g=!1){const E=yield Dn(_,f._linkToIdToken(_.auth,yield _.getIdToken()),g);return Ir._forOperation(_,"link",E)})).apply(this,arguments)}function ca(_,f,g){return Ts.apply(this,arguments)}function Ts(){return(Ts=(0,p.Z)(function*(_,f,g){yield Nn(f);const T=!1===_?"provider-already-linked":"no-such-provider";Te(ht(f.providerData).has(g)===_,f.auth,T)})).apply(this,arguments)}function sl(_,f){return Ee.apply(this,arguments)}function Ee(){return(Ee=(0,p.Z)(function*(_,f,g=!1){var E;const{auth:T}=_,x="reauthenticate";try{const B=yield Dn(_,Xa(T,x,f,_),g);Te(B.idToken,T,"internal-error");const Q=Zn(B.idToken);Te(Q,T,"internal-error");const{sub:De}=Q;return Te(_.uid===De,T,"user-mismatch"),Ir._forOperation(_,x,B)}catch(B){throw"auth/user-not-found"===(null===(E=B)||void 0===E?void 0:E.code)&&mt(T,"user-mismatch"),B}})).apply(this,arguments)}function Bt(_,f){return eu.apply(this,arguments)}function eu(){return(eu=(0,p.Z)(function*(_,f,g=!1){const E="signIn",T=yield Xa(_,E,f),x=yield Ir._fromIdTokenResponse(_,E,T);return g||(yield _._updateCurrentUser(x.user)),x})).apply(this,arguments)}function gn(_,f){return qu.apply(this,arguments)}function qu(){return(qu=(0,p.Z)(function*(_,f){return Bt(pn(_),f)})).apply(this,arguments)}function bo(_,f){return Di.apply(this,arguments)}function Di(){return(Di=(0,p.Z)(function*(_,f){const g=(0,L.m9)(_);return yield ca(!1,g,f.providerId),vo(g,f)})).apply(this,arguments)}function la(_,f){return zs.apply(this,arguments)}function zs(){return(zs=(0,p.Z)(function*(_,f){return sl((0,L.m9)(_),f)})).apply(this,arguments)}function qd(_,f){return zu.apply(this,arguments)}function zu(){return(zu=(0,p.Z)(function*(_,f){return Ke(_,"POST","/v1/accounts:signInWithCustomToken",At(_,f))})).apply(this,arguments)}function ns(){return(ns=(0,p.Z)(function*(_,f){const g=pn(_),E=yield qd(g,{token:f,returnSecureToken:!0}),T=yield Ir._fromIdTokenResponse(g,"signIn",E);return yield g._updateCurrentUser(T.user),T})).apply(this,arguments)}class ur{constructor(f,g){this.factorId=f,this.uid=g.mfaEnrollmentId,this.enrollmentTime=new Date(g.enrolledAt).toUTCString(),this.displayName=g.displayName}static _fromServerResponse(f,g){return"phoneInfo"in g?Br._fromServerResponse(f,g):mt(f,"internal-error")}}class Br extends ur{constructor(f){super("phone",f),this.phoneNumber=f.phoneInfo}static _fromServerResponse(f,g){return new Br(g)}}function wo(_,f,g){var E;Te((null===(E=g.url)||void 0===E?void 0:E.length)>0,_,"invalid-continue-uri"),Te(void 0===g.dynamicLinkDomain||g.dynamicLinkDomain.length>0,_,"invalid-dynamic-link-domain"),f.continueUrl=g.url,f.dynamicLinkDomain=g.dynamicLinkDomain,f.canHandleCodeInApp=g.handleCodeInApp,g.iOS&&(Te(g.iOS.bundleId.length>0,_,"missing-ios-bundle-id"),f.iOSBundleId=g.iOS.bundleId),g.android&&(Te(g.android.packageName.length>0,_,"missing-android-pkg-name"),f.androidInstallApp=g.android.installApp,f.androidMinimumVersionCode=g.android.minimumVersion,f.androidPackageName=g.android.packageName)}function ji(){return(ji=(0,p.Z)(function*(_,f,g){const E=(0,L.m9)(_),T={requestType:"PASSWORD_RESET",email:f};g&&wo(E,T,g),yield Pd(E,T)})).apply(this,arguments)}function Wu(){return(Wu=(0,p.Z)(function*(_,f,g){yield Ci((0,L.m9)(_),{oobCode:f,newPassword:g})})).apply(this,arguments)}function ha(){return(ha=(0,p.Z)(function*(_,f){yield go((0,L.m9)(_),{oobCode:f})})).apply(this,arguments)}function tu(_,f){return fa.apply(this,arguments)}function fa(){return(fa=(0,p.Z)(function*(_,f){const g=(0,L.m9)(_),E=yield Ci(g,{oobCode:f}),T=E.requestType;switch(Te(T,g,"internal-error"),T){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Te(E.newEmail,g,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Te(E.mfaInfo,g,"internal-error");default:Te(E.email,g,"internal-error")}let x=null;return E.mfaInfo&&(x=ur._fromServerResponse(pn(g),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:x},operation:T}})).apply(this,arguments)}function Zu(){return(Zu=(0,p.Z)(function*(_,f){const{data:g}=yield tu((0,L.m9)(_),f);return g.email})).apply(this,arguments)}function Ku(){return(Ku=(0,p.Z)(function*(_,f,g){const E=pn(_),T=yield qs(E,{returnSecureToken:!0,email:f,password:g}),x=yield Ir._fromIdTokenResponse(E,"signIn",T);return yield E._updateCurrentUser(x.user),x})).apply(this,arguments)}function pa(){return(pa=(0,p.Z)(function*(_,f,g){const E=(0,L.m9)(_),T={requestType:"EMAIL_SIGNIN",email:f};Te(g.handleCodeInApp,E,"argument-error"),g&&wo(E,T,g),yield kd(E,T)})).apply(this,arguments)}function Yu(){return(Yu=(0,p.Z)(function*(_,f,g){const E=(0,L.m9)(_),T=yo.credentialWithLink(f,g||Xe());return Te(T._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),gn(E,T)})).apply(this,arguments)}function Zd(_,f){return np.apply(this,arguments)}function np(){return(np=(0,p.Z)(function*(_,f){return Kt(_,"POST","/v1/accounts:createAuthUri",At(_,f))})).apply(this,arguments)}function ai(){return(ai=(0,p.Z)(function*(_,f){const E={identifier:f,continueUri:Pr()?Xe():"http://localhost"},{signinMethods:T}=yield Zd((0,L.m9)(_),E);return T||[]})).apply(this,arguments)}function nu(){return(nu=(0,p.Z)(function*(_,f){const g=(0,L.m9)(_),T={requestType:"VERIFY_EMAIL",idToken:yield _.getIdToken()};f&&wo(g.auth,T,f);const{email:x}=yield Mm(g.auth,T);x!==_.email&&(yield _.reload())})).apply(this,arguments)}function ru(){return(ru=(0,p.Z)(function*(_,f,g){const E=(0,L.m9)(_),x={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield _.getIdToken(),newEmail:f};g&&wo(E.auth,x,g);const{email:B}=yield Nm(E.auth,x);B!==_.email&&(yield _.reload())})).apply(this,arguments)}function Kd(_,f){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,p.Z)(function*(_,f){return Kt(_,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function ga(){return(ga=(0,p.Z)(function*(_,{displayName:f,photoURL:g}){if(void 0===f&&void 0===g)return;const E=(0,L.m9)(_),x={idToken:yield E.getIdToken(),displayName:f,photoUrl:g,returnSecureToken:!0},B=yield Dn(E,Kd(E.auth,x));E.displayName=B.displayName||null,E.photoURL=B.photoUrl||null;const Q=E.providerData.find(({providerId:De})=>"password"===De);Q&&(Q.displayName=E.displayName,Q.photoURL=E.photoURL),yield E._updateTokensIfNecessary(B)})).apply(this,arguments)}function iu(_,f,g){return Ju.apply(this,arguments)}function Ju(){return(Ju=(0,p.Z)(function*(_,f,g){const{auth:E}=_,x={idToken:yield _.getIdToken(),returnSecureToken:!0};f&&(x.email=f),g&&(x.password=g);const B=yield Dn(_,Qf(E,x));yield _._updateTokensIfNecessary(B,!0)})).apply(this,arguments)}class ui{constructor(f,g,E={}){this.isNewUser=f,this.providerId=g,this.profile=E}}class ma extends ui{constructor(f,g,E,T){super(f,g,E),this.username=T}}class km extends ui{constructor(f,g){super(f,"facebook.com",g)}}class ip extends ma{constructor(f,g){super(f,"github.com",g,"string"==typeof(null==g?void 0:g.login)?null==g?void 0:g.login:null)}}class mr extends ui{constructor(f,g){super(f,"google.com",g)}}class Qd extends ma{constructor(f,g,E){super(f,"twitter.com",g,E)}}function sp(_){const{user:f,_tokenResponse:g}=_;return f.isAnonymous&&!g?{providerId:null,isNewUser:!1,profile:null}:function(_){var f,g;if(!_)return null;const{providerId:E}=_,T=_.rawUserInfo?JSON.parse(_.rawUserInfo):{},x=_.isNewUser||"identitytoolkit#SignupNewUserResponse"===_.kind;if(!E&&(null==_?void 0:_.idToken)){const B=null===(g=null===(f=Zn(_.idToken))||void 0===f?void 0:f.firebase)||void 0===g?void 0:g.sign_in_provider;if(B)return new ui(x,"anonymous"!==B&&"custom"!==B?B:null)}if(!E)return null;switch(E){case"facebook.com":return new km(x,T);case"github.com":return new ip(x,T);case"google.com":return new mr(x,T);case"twitter.com":return new Qd(x,T,_.screenName||null);case"custom":case"anonymous":return new ui(x,null);default:return new ui(x,E,T)}}(g)}class Hi{constructor(f,g,E){this.type=f,this.credential=g,this.auth=E}static _fromIdtoken(f,g){return new Hi("enroll",f,g)}static _fromMfaPendingCredential(f){return new Hi("signin",f)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(f){var g,E;if(null==f?void 0:f.multiFactorSession){if(null===(g=f.multiFactorSession)||void 0===g?void 0:g.pendingCredential)return Hi._fromMfaPendingCredential(f.multiFactorSession.pendingCredential);if(null===(E=f.multiFactorSession)||void 0===E?void 0:E.idToken)return Hi._fromIdtoken(f.multiFactorSession.idToken)}return null}}class dl{constructor(f,g,E){this.session=f,this.hints=g,this.signInResolver=E}static _fromError(f,g){const E=pn(f),T=g.customData._serverResponse,x=(T.mfaInfo||[]).map(Q=>ur._fromServerResponse(E,Q));Te(T.mfaPendingCredential,E,"internal-error");const B=Hi._fromMfaPendingCredential(T.mfaPendingCredential);return new dl(B,x,function(){var Q=(0,p.Z)(function*(De){const we=yield De._process(E,B);delete T.mfaInfo,delete T.mfaPendingCredential;const Ze=Object.assign(Object.assign({},T),{idToken:we.idToken,refreshToken:we.refreshToken});switch(g.operationType){case"signIn":const Ye=yield Ir._fromIdTokenResponse(E,g.operationType,Ze);return yield E._updateCurrentUser(Ye.user),Ye;case"reauthenticate":return Te(g.user,E,"internal-error"),Ir._forOperation(g.user,g.operationType,Ze);default:mt(E,"internal-error")}});return function(De){return Q.apply(this,arguments)}}())}resolveSignIn(f){var g=this;return(0,p.Z)(function*(){return g.signInResolver(f)})()}}function tc(_,f){return Kt(_,"POST","/v2/accounts/mfaEnrollment:start",At(_,f))}class fl{constructor(f){this.user=f,this.enrolledFactors=[],f._onReload(g=>{g.mfaInfo&&(this.enrolledFactors=g.mfaInfo.map(E=>ur._fromServerResponse(f.auth,E)))})}static _fromUser(f){return new fl(f)}getSession(){var f=this;return(0,p.Z)(function*(){return Hi._fromIdtoken(yield f.user.getIdToken(),f.user.auth)})()}enroll(f,g){var E=this;return(0,p.Z)(function*(){const T=f,x=yield E.getSession(),B=yield Dn(E.user,T._process(E.user.auth,x,g));return yield E.user._updateTokensIfNecessary(B),E.user.reload()})()}unenroll(f){var g=this;return(0,p.Z)(function*(){var E;const T="string"==typeof f?f:f.uid,x=yield g.user.getIdToken(),B=yield Dn(g.user,function(_,f){return Kt(_,"POST","/v2/accounts/mfaEnrollment:withdraw",At(_,f))}(g.user.auth,{idToken:x,mfaEnrollmentId:T}));g.enrolledFactors=g.enrolledFactors.filter(({uid:Q})=>Q!==T),yield g.user._updateTokensIfNecessary(B);try{yield g.user.reload()}catch(Q){if("auth/user-token-expired"!==(null===(E=Q)||void 0===E?void 0:E.code))throw Q}})()}}const mn=new WeakMap,ci="__sak";class Do{constructor(f,g){this.storageRetriever=f,this.type=g}_isAvailable(){try{return this.storage?(this.storage.setItem(ci,"1"),this.storage.removeItem(ci),Promise.resolve(!0)):Promise.resolve(!1)}catch(f){return Promise.resolve(!1)}}_set(f,g){return this.storage.setItem(f,JSON.stringify(g)),Promise.resolve()}_get(f){const g=this.storage.getItem(f);return Promise.resolve(g?JSON.parse(g):null)}_remove(f){return this.storage.removeItem(f),Promise.resolve()}get storage(){return this.storageRetriever()}}const au=(()=>{class _ extends Do{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(g,E)=>this.onStorageEvent(g,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const _=(0,L.z$)();return sa(_)||Vr(_)}()&&function(){try{return!(!window||window===window.top)}catch(_){return!1}}(),this.fallbackToPolling=Qc(),this._shouldAllowMigration=!0}forAllChangedKeys(g){for(const E of Object.keys(this.listeners)){const T=this.storage.getItem(E),x=this.localCache[E];T!==x&&g(E,x,T)}}onStorageEvent(g,E=!1){if(!g.key)return void this.forAllChangedKeys((Q,De,we)=>{this.notifyListeners(Q,we)});const T=g.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Q=this.storage.getItem(T);if(g.newValue!==Q)null!==g.newValue?this.storage.setItem(T,g.newValue):this.storage.removeItem(T);else if(this.localCache[T]===g.newValue&&!E)return}const x=()=>{const Q=this.storage.getItem(T);!E&&this.localCache[T]===Q||this.notifyListeners(T,Q)},B=this.storage.getItem(T);(0,L.w1)()&&10===document.documentMode&&B!==g.newValue&&g.newValue!==g.oldValue?setTimeout(x,10):x()}notifyListeners(g,E){this.localCache[g]=E;const T=this.listeners[g];if(T)for(const x of Array.from(T))x(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((g,E,T)=>{this.onStorageEvent(new StorageEvent("storage",{key:g,oldValue:E,newValue:T}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(g,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[g]||(this.listeners[g]=new Set,this.localCache[g]=this.storage.getItem(g)),this.listeners[g].add(E)}_removeListener(g,E){this.listeners[g]&&(this.listeners[g].delete(E),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(g,E){var T=()=>super._set,x=this;return(0,p.Z)(function*(){yield T().call(x,g,E),x.localCache[g]=JSON.stringify(E)})()}_get(g){var E=()=>super._get,T=this;return(0,p.Z)(function*(){const x=yield E().call(T,g);return T.localCache[g]=JSON.stringify(x),x})()}_remove(g){var E=()=>super._remove,T=this;return(0,p.Z)(function*(){yield E().call(T,g),delete T.localCache[g]})()}}return _.type="LOCAL",_})(),As=(()=>{class _ extends Do{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(g,E){}_removeListener(g,E){}}return _.type="SESSION",_})();let eh=(()=>{class _{constructor(g){this.eventTarget=g,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(g){const E=this.receivers.find(x=>x.isListeningto(g));if(E)return E;const T=new _(g);return this.receivers.push(T),T}isListeningto(g){return this.eventTarget===g}handleEvent(g){var E=this;return(0,p.Z)(function*(){const T=g,{eventId:x,eventType:B,data:Q}=T.data,De=E.handlersMap[B];if(!(null==De?void 0:De.size))return;T.ports[0].postMessage({status:"ack",eventId:x,eventType:B});const we=Array.from(De).map(function(){var Ye=(0,p.Z)(function*(Gt){return Gt(T.origin,Q)});return function(Gt){return Ye.apply(this,arguments)}}()),Ze=yield function(_){return Promise.all(_.map(function(){var f=(0,p.Z)(function*(g){try{return{fulfilled:!0,value:yield g}}catch(E){return{fulfilled:!1,reason:E}}});return function(g){return f.apply(this,arguments)}}()))}(we);T.ports[0].postMessage({status:"done",eventId:x,eventType:B,response:Ze})})()}_subscribe(g,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[g]||(this.handlersMap[g]=new Set),this.handlersMap[g].add(E)}_unsubscribe(g,E){this.handlersMap[g]&&E&&this.handlersMap[g].delete(E),(!E||0===this.handlersMap[g].size)&&delete this.handlersMap[g],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return _.receivers=[],_})();function To(_="",f=10){let g="";for(let E=0;E<f;E++)g+=Math.floor(10*Math.random());return _+g}class th{constructor(f){this.target=f,this.handlers=new Set}removeMessageHandler(f){f.messageChannel&&(f.messageChannel.port1.removeEventListener("message",f.onMessage),f.messageChannel.port1.close()),this.handlers.delete(f)}_send(f,g,E=50){var T=this;return(0,p.Z)(function*(){const x="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!x)throw new Error("connection_unavailable");let B,Q;return new Promise((De,we)=>{const Ze=To("",20);x.port1.start();const Ye=setTimeout(()=>{we(new Error("unsupported_event"))},E);Q={messageChannel:x,onMessage(Gt){const tr=Gt;if(tr.data.eventId===Ze)switch(tr.data.status){case"ack":clearTimeout(Ye),B=setTimeout(()=>{we(new Error("timeout"))},3e3);break;case"done":clearTimeout(B),De(tr.data.response);break;default:clearTimeout(Ye),clearTimeout(B),we(new Error("invalid_response"))}}},T.handlers.add(Q),x.port1.addEventListener("message",Q.onMessage),T.target.postMessage({eventType:f,eventId:Ze,data:g},[x.port2])}).finally(()=>{Q&&T.removeMessageHandler(Q)})})()}}function Qt(){return window}function rc(){return void 0!==Qt().WorkerGlobalScope&&"function"==typeof Qt().importScripts}function Ks(){return(Ks=(0,p.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(_){return null}})).apply(this,arguments)}const Ys="firebaseLocalStorageDb",ss="firebaseLocalStorage",Ao="fbase_key";class wt{constructor(f){this.request=f}toPromise(){return new Promise((f,g)=>{this.request.addEventListener("success",()=>{f(this.request.result)}),this.request.addEventListener("error",()=>{g(this.request.error)})})}}function di(_,f){return _.transaction([ss],f?"readwrite":"readonly").objectStore(ss)}function $i(){const _=indexedDB.open(Ys,1);return new Promise((f,g)=>{_.addEventListener("error",()=>{g(_.error)}),_.addEventListener("upgradeneeded",()=>{const E=_.result;try{E.createObjectStore(ss,{keyPath:Ao})}catch(T){g(T)}}),_.addEventListener("success",(0,p.Z)(function*(){const E=_.result;E.objectStoreNames.contains(ss)?f(E):(E.close(),yield function(){const _=indexedDB.deleteDatabase(Ys);return new wt(_).toPromise()}(),f(yield $i()))}))})}function Lm(_,f,g){return Vm.apply(this,arguments)}function Vm(){return(Vm=(0,p.Z)(function*(_,f,g){const E=di(_,!0).put({[Ao]:f,value:g});return new wt(E).toPromise()})).apply(this,arguments)}function sc(){return(sc=(0,p.Z)(function*(_,f){const g=di(_,!1).get(f),E=yield new wt(g).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function lp(_,f){const g=di(_,!0).delete(f);return new wt(g).toPromise()}const va=(()=>{class _{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var g=this;return(0,p.Z)(function*(){return g.db||(g.db=yield $i()),g.db})()}_withRetries(g){var E=this;return(0,p.Z)(function*(){let T=0;for(;;)try{const x=yield E._openDb();return yield g(x)}catch(x){if(T++>3)throw x;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var g=this;return(0,p.Z)(function*(){return rc()?g.initializeReceiver():g.initializeSender()})()}initializeReceiver(){var g=this;return(0,p.Z)(function*(){g.receiver=eh._getInstance(rc()?self:null),g.receiver._subscribe("keyChanged",function(){var E=(0,p.Z)(function*(T,x){return{keyProcessed:(yield g._poll()).includes(x.key)}});return function(T,x){return E.apply(this,arguments)}}()),g.receiver._subscribe("ping",function(){var E=(0,p.Z)(function*(T,x){return["keyChanged"]});return function(T,x){return E.apply(this,arguments)}}())})()}initializeSender(){var g=this;return(0,p.Z)(function*(){var E,T;if(g.activeServiceWorker=yield function(){return Ks.apply(this,arguments)}(),!g.activeServiceWorker)return;g.sender=new th(g.activeServiceWorker);const x=yield g.sender._send("ping",{},800);!x||(null===(E=x[0])||void 0===E?void 0:E.fulfilled)&&(null===(T=x[0])||void 0===T?void 0:T.value.includes("keyChanged"))&&(g.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(g){var E=this;return(0,p.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function(){var _;return(null===(_=null==navigator?void 0:navigator.serviceWorker)||void 0===_?void 0:_.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:g},E.serviceWorkerReceiverAvailable?800:50)}catch(T){}})()}_isAvailable(){return(0,p.Z)(function*(){try{if(!indexedDB)return!1;const g=yield $i();return yield Lm(g,ci,"1"),yield lp(g,ci),!0}catch(g){}return!1})()}_withPendingWrite(g){var E=this;return(0,p.Z)(function*(){E.pendingWrites++;try{yield g()}finally{E.pendingWrites--}})()}_set(g,E){var T=this;return(0,p.Z)(function*(){return T._withPendingWrite((0,p.Z)(function*(){return yield T._withRetries(x=>Lm(x,g,E)),T.localCache[g]=E,T.notifyServiceWorker(g)}))})()}_get(g){var E=this;return(0,p.Z)(function*(){const T=yield E._withRetries(x=>function(_,f){return sc.apply(this,arguments)}(x,g));return E.localCache[g]=T,T})()}_remove(g){var E=this;return(0,p.Z)(function*(){return E._withPendingWrite((0,p.Z)(function*(){return yield E._withRetries(T=>lp(T,g)),delete E.localCache[g],E.notifyServiceWorker(g)}))})()}_poll(){var g=this;return(0,p.Z)(function*(){const E=yield g._withRetries(B=>{const Q=di(B,!1).getAll();return new wt(Q).toPromise()});if(!E)return[];if(0!==g.pendingWrites)return[];const T=[],x=new Set;for(const{fbase_key:B,value:Q}of E)x.add(B),JSON.stringify(g.localCache[B])!==JSON.stringify(Q)&&(g.notifyListeners(B,Q),T.push(B));for(const B of Object.keys(g.localCache))g.localCache[B]&&!x.has(B)&&(g.notifyListeners(B,null),T.push(B));return T})()}notifyListeners(g,E){this.localCache[g]=E;const T=this.listeners[g];if(T)for(const x of Array.from(T))x(E)}startPolling(){var g=this;this.stopPolling(),this.pollTimer=setInterval((0,p.Z)(function*(){return g._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(g,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[g]||(this.listeners[g]=new Set,this._get(g)),this.listeners[g].add(E)}_removeListener(g,E){this.listeners[g]&&(this.listeners[g].delete(E),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return _.type="LOCAL",_})();function Bm(_,f){return Kt(_,"POST","/v2/accounts/mfaSignIn:start",At(_,f))}function nh(){return(nh=(0,p.Z)(function*(_){return(yield Kt(_,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function dp(_){return new Promise((f,g)=>{const E=document.createElement("script");E.setAttribute("src",_),E.onload=f,E.onerror=T=>{const x=Vn("internal-error");x.customData=T,g(x)},E.type="text/javascript",E.charset="UTF-8",function(){var _,f;return null!==(f=null===(_=document.getElementsByTagName("head"))||void 0===_?void 0:_[0])&&void 0!==f?f:document}().appendChild(E)})}function hp(_){return`__${_}${Math.floor(1e6*Math.random())}`}const cu=1e12;class An{constructor(f){this.auth=f,this.counter=cu,this._widgets=new Map}render(f,g){const E=this.counter;return this._widgets.set(E,new Ea(f,this.auth.name,g||{})),this.counter++,E}reset(f){var g;const E=f||cu;null===(g=this._widgets.get(E))||void 0===g||g.delete(),this._widgets.delete(E)}getResponse(f){var g;return(null===(g=this._widgets.get(f||cu))||void 0===g?void 0:g.getResponse())||""}execute(f){var g=this;return(0,p.Z)(function*(){var E;return null===(E=g._widgets.get(f||cu))||void 0===E||E.execute(),""})()}}class Ea{constructor(f,g,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const T="string"==typeof f?document.getElementById(f):f;Te(T,"argument-error",{appName:g}),this.container=T,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function(_){const f=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<50;E++)f.push(g.charAt(Math.floor(Math.random()*g.length)));return f.join("")}();const{callback:f,"expired-callback":g}=this.params;if(f)try{f(this.responseToken)}catch(E){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,g)try{g()}catch(E){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const oc=hp("rcb"),gl=new nt(3e4,6e4);class hi{constructor(){var f;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(f=Qt().grecaptcha)||void 0===f?void 0:f.render)}load(f,g=""){return Te((_=g).length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(_),f,"argument-error"),this.shouldResolveImmediately(g)?Promise.resolve(Qt().grecaptcha):new Promise((E,T)=>{const x=Qt().setTimeout(()=>{T(Vn(f,"network-request-failed"))},gl.get());Qt()[oc]=()=>{Qt().clearTimeout(x),delete Qt()[oc];const Q=Qt().grecaptcha;if(!Q)return void T(Vn(f,"internal-error"));const De=Q.render;Q.render=(we,Ze)=>{const Ye=De(we,Ze);return this.counter++,Ye},this.hostLanguage=g,E(Q)},dp(`https://www.google.com/recaptcha/api.js??${(0,L.xO)({onload:oc,render:"explicit",hl:g})}`).catch(()=>{clearTimeout(x),T(Vn(f,"internal-error"))})});var _}clearedOneInstance(){this.counter--}shouldResolveImmediately(f){var g;return!!(null===(g=Qt().grecaptcha)||void 0===g?void 0:g.render)&&(f===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class ba{load(f){return(0,p.Z)(function*(){return new An(f)})()}clearedOneInstance(){}}const xs="recaptcha",rh={theme:"light",type:"image"};class Ro{constructor(f,g=Object.assign({},rh),E){this.parameters=g,this.type=xs,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=pn(E),this.isInvisible="invisible"===this.parameters.size,Te("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const T="string"==typeof f?document.getElementById(f):f;Te(T,this.auth,"argument-error"),this.container=T,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new ba:new hi,this.validateStartingState()}verify(){var f=this;return(0,p.Z)(function*(){f.assertNotDestroyed();const g=yield f.render(),E=f.getAssertedRecaptcha();return E.getResponse(g)||new Promise(x=>{const B=Q=>{!Q||(f.tokenChangeListeners.delete(B),x(Q))};f.tokenChangeListeners.add(B),f.isInvisible&&E.execute(g)})})()}render(){try{this.assertNotDestroyed()}catch(f){return Promise.reject(f)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(f=>{throw this.renderPromise=null,f})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(f=>{this.container.removeChild(f)})}validateStartingState(){Te(!this.parameters.sitekey,this.auth,"argument-error"),Te(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Te("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(f){return g=>{if(this.tokenChangeListeners.forEach(E=>E(g)),"function"==typeof f)f(g);else if("string"==typeof f){const E=Qt()[f];"function"==typeof E&&E(g)}}}assertNotDestroyed(){Te(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var f=this;return(0,p.Z)(function*(){if(yield f.init(),!f.widgetId){let g=f.container;if(!f.isInvisible){const E=document.createElement("div");g.appendChild(E),g=E}f.widgetId=f.getAssertedRecaptcha().render(g,f.parameters)}return f.widgetId})()}init(){var f=this;return(0,p.Z)(function*(){Te(Pr()&&!rc(),f.auth,"internal-error"),yield function(){let _=null;return new Promise(f=>{"complete"!==document.readyState?(_=()=>f(),window.addEventListener("load",_)):f()}).catch(f=>{throw _&&window.removeEventListener("load",_),f})}(),f.recaptcha=yield f._recaptchaLoader.load(f.auth,f.auth.languageCode||void 0);const g=yield function(_){return nh.apply(this,arguments)}(f.auth);Te(g,f.auth,"internal-error"),f.parameters.sitekey=g})()}getAssertedRecaptcha(){return Te(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class yl{constructor(f,g){this.verificationId=f,this.onConfirmation=g}confirm(f){const g=Ui._fromVerification(this.verificationId,f);return this.onConfirmation(g)}}function ac(){return(ac=(0,p.Z)(function*(_,f,g){const E=pn(_),T=yield Qs(E,f,(0,L.m9)(g));return new yl(T,x=>gn(E,x))})).apply(this,arguments)}function lu(){return(lu=(0,p.Z)(function*(_,f,g){const E=(0,L.m9)(_);yield ca(!1,E,"phone");const T=yield Qs(E.auth,f,(0,L.m9)(g));return new yl(T,x=>bo(E,x))})).apply(this,arguments)}function _l(){return(_l=(0,p.Z)(function*(_,f,g){const E=(0,L.m9)(_),T=yield Qs(E.auth,f,(0,L.m9)(g));return new yl(T,x=>la(E,x))})).apply(this,arguments)}function Qs(_,f,g){return du.apply(this,arguments)}function du(){return(du=(0,p.Z)(function*(_,f,g){var E;const T=yield g.verify();try{let x;if(Te("string"==typeof T,_,"argument-error"),Te(g.type===xs,_,"argument-error"),x="string"==typeof f?{phoneNumber:f}:f,"session"in x){const B=x.session;if("phoneNumber"in x)return Te("enroll"===B.type,_,"internal-error"),(yield tc(_,{idToken:B.credential,phoneEnrollmentInfo:{phoneNumber:x.phoneNumber,recaptchaToken:T}})).phoneSessionInfo.sessionInfo;{Te("signin"===B.type,_,"internal-error");const Q=(null===(E=x.multiFactorHint)||void 0===E?void 0:E.uid)||x.multiFactorUid;return Te(Q,_,"missing-multi-factor-info"),(yield Bm(_,{mfaPendingCredential:B.credential,mfaEnrollmentId:Q,phoneSignInInfo:{recaptchaToken:T}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:B}=yield Bu(_,{phoneNumber:x.phoneNumber,recaptchaToken:T});return B}}finally{g._reset()}})).apply(this,arguments)}function vl(){return(vl=(0,p.Z)(function*(_,f){yield vo((0,L.m9)(_),f)})).apply(this,arguments)}let uc=(()=>{class _{constructor(g){this.providerId=_.PROVIDER_ID,this.auth=pn(g)}verifyPhoneNumber(g,E){return Qs(this.auth,g,(0,L.m9)(E))}static credential(g,E){return Ui._fromVerification(g,E)}static credentialFromResult(g){return _.credentialFromTaggedObject(g)}static credentialFromError(g){return _.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{phoneNumber:E,temporaryProof:T}=g;return E&&T?Ui._fromTokenResponse(E,T):null}}return _.PROVIDER_ID="phone",_.PHONE_SIGN_IN_METHOD="phone",_})();function I(_,f){return f?_n(f):(Te(_._popupRedirectResolver,_,"argument-error"),_._popupRedirectResolver)}class A extends bs{constructor(f){super("custom","custom"),this.params=f}_getIdTokenResponse(f){return mo(f,this._buildIdpRequest())}_linkToIdToken(f,g){return mo(f,this._buildIdpRequest(g))}_getReauthenticationResolver(f){return mo(f,this._buildIdpRequest())}_buildIdpRequest(f){const g={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return f&&(g.idToken=f),g}}function M(_){return Bt(_.auth,new A(_),_.bypassAuthState)}function U(_){const{auth:f,user:g}=_;return Te(g,f,"internal-error"),sl(g,new A(_),_.bypassAuthState)}function Z(_){return re.apply(this,arguments)}function re(){return(re=(0,p.Z)(function*(_){const{auth:f,user:g}=_;return Te(g,f,"internal-error"),vo(g,new A(_),_.bypassAuthState)})).apply(this,arguments)}class be{constructor(f,g,E,T,x=!1){this.auth=f,this.resolver=E,this.user=T,this.bypassAuthState=x,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(g)?g:[g]}execute(){var f=this;return new Promise(function(){var g=(0,p.Z)(function*(E,T){f.pendingPromise={resolve:E,reject:T};try{f.eventManager=yield f.resolver._initialize(f.auth),yield f.onExecution(),f.eventManager.registerConsumer(f)}catch(x){f.reject(x)}});return function(E,T){return g.apply(this,arguments)}}())}onAuthEvent(f){var g=this;return(0,p.Z)(function*(){const{urlResponse:E,sessionId:T,postBody:x,tenantId:B,error:Q,type:De}=f;if(Q)return void g.reject(Q);const we={auth:g.auth,requestUri:E,sessionId:T,tenantId:B||void 0,postBody:x||void 0,user:g.user,bypassAuthState:g.bypassAuthState};try{g.resolve(yield g.getIdpTask(De)(we))}catch(Ze){g.reject(Ze)}})()}onError(f){this.reject(f)}getIdpTask(f){switch(f){case"signInViaPopup":case"signInViaRedirect":return M;case"linkViaPopup":case"linkViaRedirect":return Z;case"reauthViaPopup":case"reauthViaRedirect":return U;default:mt(this.auth,"internal-error")}}resolve(f){Cn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(f),this.unregisterAndCleanUp()}reject(f){Cn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(f),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Fe=new nt(2e3,1e4);function _t(){return(_t=(0,p.Z)(function*(_,f,g){const E=pn(_);Un(_,f,Yt);const T=I(E,g);return new Ti(E,"signInViaPopup",f,T).executeNotNull()})).apply(this,arguments)}function at(){return(at=(0,p.Z)(function*(_,f,g){const E=(0,L.m9)(_);Un(E.auth,f,Yt);const T=I(E.auth,g);return new Ti(E.auth,"reauthViaPopup",f,T,E).executeNotNull()})).apply(this,arguments)}function Xn(){return(Xn=(0,p.Z)(function*(_,f,g){const E=(0,L.m9)(_);Un(E.auth,f,Yt);const T=I(E.auth,g);return new Ti(E.auth,"linkViaPopup",f,T,E).executeNotNull()})).apply(this,arguments)}let Ti=(()=>{class _ extends be{constructor(g,E,T,x,B){super(g,E,x,B),this.provider=T,this.authWindow=null,this.pollId=null,_.currentPopupAction&&_.currentPopupAction.cancel(),_.currentPopupAction=this}executeNotNull(){var g=this;return(0,p.Z)(function*(){const E=yield g.execute();return Te(E,g.auth,"internal-error"),E})()}onExecution(){var g=this;return(0,p.Z)(function*(){Cn(1===g.filter.length,"Popup operations only handle one event");const E=To();g.authWindow=yield g.resolver._openPopup(g.auth,g.provider,g.filter[0],E),g.authWindow.associatedEvent=E,g.resolver._originValidation(g.auth).catch(T=>{g.reject(T)}),g.resolver._isIframeWebStorageSupported(g.auth,T=>{T||g.reject(Vn(g.auth,"web-storage-unsupported"))}),g.pollUserCancellation()})()}get eventId(){var g;return(null===(g=this.authWindow)||void 0===g?void 0:g.associatedEvent)||null}cancel(){this.reject(Vn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,_.currentPopupAction=null}pollUserCancellation(){const g=()=>{var E,T;this.pollId=(null===(T=null===(E=this.authWindow)||void 0===E?void 0:E.window)||void 0===T?void 0:T.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Vn(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(g,Fe.get())};g()}}return _.currentPopupAction=null,_})();const us=new Map;class kn extends be{constructor(f,g,E=!1){super(f,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,E),this.eventId=null}execute(){var f=()=>super.execute,g=this;return(0,p.Z)(function*(){let E=us.get(g.auth._key());if(!E){try{const x=(yield function(_,f){return Mo.apply(this,arguments)}(g.resolver,g.auth))?yield f().call(g):null;E=()=>Promise.resolve(x)}catch(T){E=()=>Promise.reject(T)}us.set(g.auth._key(),E)}return g.bypassAuthState||us.set(g.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(f){var g=()=>super.onAuthEvent,E=this;return(0,p.Z)(function*(){if("signInViaRedirect"===f.type)return g().call(E,f);if("unknown"!==f.type){if(f.eventId){const T=yield E.auth._redirectUserForId(f.eventId);if(T)return E.user=T,g().call(E,f);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,p.Z)(function*(){})()}cleanUp(){}}function Mo(){return(Mo=(0,p.Z)(function*(_,f){const g=Dv(f),E=cs(_);if(!(yield E._isAvailable()))return!1;const T="true"===(yield E._get(g));return yield E._remove(g),T})).apply(this,arguments)}function yr(_,f){return pi.apply(this,arguments)}function pi(){return(pi=(0,p.Z)(function*(_,f){return cs(_)._set(Dv(f),"true")})).apply(this,arguments)}function er(_,f){us.set(_._key(),f)}function cs(_){return _n(_._redirectPersistence)}function Dv(_){return tn("pendingRedirect",_.config.apiKey,_.name)}function hu(){return(hu=(0,p.Z)(function*(_,f,g){const E=pn(_);Un(_,f,Yt);const T=I(E,g);return yield yr(T,E),T._openRedirect(E,f,"signInViaRedirect")})).apply(this,arguments)}function ih(){return(ih=(0,p.Z)(function*(_,f,g){const E=(0,L.m9)(_);Un(E.auth,f,Yt);const T=I(E.auth,g);yield yr(T,E.auth);const x=yield Ia(E);return T._openRedirect(E.auth,f,"reauthViaRedirect",x)})).apply(this,arguments)}function fu(){return(fu=(0,p.Z)(function*(_,f,g){const E=(0,L.m9)(_);Un(E.auth,f,Yt);const T=I(E.auth,g);yield ca(!1,E,f.providerId),yield yr(T,E.auth);const x=yield Ia(E);return T._openRedirect(E.auth,f,"linkViaRedirect",x)})).apply(this,arguments)}function jt(){return(jt=(0,p.Z)(function*(_,f){return yield pn(_)._initializationPromise,Gi(_,f,!1)})).apply(this,arguments)}function Gi(_,f){return gu.apply(this,arguments)}function gu(){return(gu=(0,p.Z)(function*(_,f,g=!1){const E=pn(_),T=I(E,f),B=yield new kn(E,T,g).execute();return B&&!g&&(delete B.user._redirectEventId,yield E._persistUserIfCurrent(B.user),yield E._setRedirectUser(null,f)),B})).apply(this,arguments)}function Ia(_){return $m.apply(this,arguments)}function $m(){return($m=(0,p.Z)(function*(_){const f=To(`${_.uid}:::`);return _._redirectEventId=f,yield _.auth._setRedirectUser(_),yield _.auth._persistUserIfCurrent(_),f})).apply(this,arguments)}class mp{constructor(f){this.auth=f,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(f){this.consumers.add(f),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,f)&&(this.sendToConsumer(this.queuedRedirectEvent,f),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(f){this.consumers.delete(f)}onEvent(f){if(this.hasEventBeenHandled(f))return!1;let g=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(f,E)&&(g=!0,this.sendToConsumer(f,E),this.saveEventToCache(f))}),this.hasHandledPotentialRedirect||!function(_){switch(_.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return bl(_);default:return!1}}(f)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=f,g=!0)),g}sendToConsumer(f,g){var E;if(f.error&&!bl(f)){const T=(null===(E=f.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";g.onError(Vn(this.auth,T))}else g.onAuthEvent(f)}isEventForConsumer(f,g){const E=null===g.eventId||!!f.eventId&&f.eventId===g.eventId;return g.filter.includes(f.type)&&E}hasEventBeenHandled(f){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Tv(f))}saveEventToCache(f){this.cachedEventUids.add(Tv(f)),this.lastProcessedEventTime=Date.now()}}function Tv(_){return[_.type,_.eventId,_.sessionId,_.tenantId].filter(f=>f).join("-")}function bl({type:_,error:f}){return"unknown"===_&&"auth/no-auth-event"===(null==f?void 0:f.code)}function yp(_){return No.apply(this,arguments)}function No(){return(No=(0,p.Z)(function*(_,f={}){return Kt(_,"GET","/v1/projects",f)})).apply(this,arguments)}const _p=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ca=/^https?/;function uh(){return(uh=(0,p.Z)(function*(_){if(_.config.emulator)return;const{authorizedDomains:f}=yield yp(_);for(const g of f)try{if(Av(g))return}catch(E){}mt(_,"unauthorized-domain")})).apply(this,arguments)}function Av(_){const f=Xe(),{protocol:g,hostname:E}=new URL(f);if(_.startsWith("chrome-extension://")){const B=new URL(_);return""===B.hostname&&""===E?"chrome-extension:"===g&&_.replace("chrome-extension://","")===f.replace("chrome-extension://",""):"chrome-extension:"===g&&B.hostname===E}if(!Ca.test(g))return!1;if(_p.test(_))return E===_;const T=_.replace(/\./g,"\\.");return new RegExp("^(.+\\."+T+"|"+T+")$","i").test(E)}const ch=new nt(3e4,6e4);function lh(){const _=Qt().___jsl;if(null==_?void 0:_.H)for(const f of Object.keys(_.H))if(_.H[f].r=_.H[f].r||[],_.H[f].L=_.H[f].L||[],_.H[f].r=[..._.H[f].L],_.CP)for(let g=0;g<_.CP.length;g++)_.CP[g]=null}let Da=null;function qm(_){return Da=Da||function(_){return new Promise((f,g)=>{var E,T,x;function B(){lh(),gapi.load("gapi.iframes",{callback:()=>{f(gapi.iframes.getContext())},ontimeout:()=>{lh(),g(Vn(_,"network-request-failed"))},timeout:ch.get()})}if(null===(T=null===(E=Qt().gapi)||void 0===E?void 0:E.iframes)||void 0===T?void 0:T.Iframe)f(gapi.iframes.getContext());else{if(!(null===(x=Qt().gapi)||void 0===x?void 0:x.load)){const Q=hp("iframefcb");return Qt()[Q]=()=>{gapi.load?B():g(Vn(_,"network-request-failed"))},dp(`https://apis.google.com/js/api.js?onload=${Q}`).catch(De=>g(De))}B()}}).catch(f=>{throw Da=null,f})}(_),Da}const mu=new nt(5e3,15e3),Rv={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},zm=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function vp(_){const f=_.config;Te(f.authDomain,_,"auth-domain-config-required");const g=f.emulator?tt(f,"emulator/auth/iframe"):`https://${_.config.authDomain}/__/auth/iframe`,E={apiKey:f.apiKey,appName:_.name,v:ie.SDK_VERSION},T=zm.get(_.config.apiHost);T&&(E.eid=T);const x=_._getFrameworks();return x.length&&(E.fw=x.join(",")),`${g}?${(0,L.xO)(E).slice(1)}`}function qr(){return qr=(0,p.Z)(function*(_){const f=yield qm(_),g=Qt().gapi;return Te(g,_,"internal-error"),f.open({where:document.body,url:vp(_),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Rv,dontclear:!0},E=>new Promise(function(){var T=(0,p.Z)(function*(x,B){yield E.restyle({setHideOnLeave:!1});const Q=Vn(_,"network-request-failed"),De=Qt().setTimeout(()=>{B(Q)},mu.get());function we(){Qt().clearTimeout(De),x(E)}E.ping(we).then(we,()=>{B(Q)})});return function(x,B){return T.apply(this,arguments)}}()))}),qr.apply(this,arguments)}const lc={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Ep{constructor(f){this.window=f,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(f){}}}function hh(_,f,g,E,T,x){Te(_.config.authDomain,_,"auth-domain-config-required"),Te(_.config.apiKey,_,"invalid-api-key");const B={apiKey:_.config.apiKey,appName:_.name,authType:g,redirectUrl:E,v:ie.SDK_VERSION,eventId:T};if(f instanceof Yt){f.setDefaultLanguage(_.languageCode),B.providerId=f.providerId||"",(0,L.xb)(f.getCustomParameters())||(B.customParameters=JSON.stringify(f.getCustomParameters()));for(const[De,we]of Object.entries(x||{}))B[De]=we}if(f instanceof Gs){const De=f.getScopes().filter(we=>""!==we);De.length>0&&(B.scopes=De.join(","))}_.tenantId&&(B.tid=_.tenantId);const Q=B;for(const De of Object.keys(Q))void 0===Q[De]&&delete Q[De];return`${function({config:_}){return _.emulator?tt(_,"emulator/auth/handler"):`https://${_.authDomain}/__/auth/handler`}(_)}?${(0,L.xO)(Q).slice(1)}`}const Il="webStorageSupport";class yu extends class{constructor(f){this.factorId=f}_process(f,g,E){switch(g.type){case"enroll":return this._finalizeEnroll(f,g.credential,E);case"signin":return this._finalizeSignIn(f,g.credential);default:return br("unexpected MultiFactorSessionType")}}}{constructor(f){super("phone"),this.credential=f}static _fromCredential(f){return new yu(f)}_finalizeEnroll(f,g,E){return function(_,f){return Kt(_,"POST","/v2/accounts/mfaEnrollment:finalize",At(_,f))}(f,{idToken:g,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(f,g){return function(_,f){return Kt(_,"POST","/v2/accounts/mfaSignIn:finalize",At(_,f))}(f,{mfaPendingCredential:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Jm=(()=>{class _{constructor(){}static assertion(g){return yu._fromCredential(g)}}return _.FACTOR_ID="phone",_})();var _,wp="@firebase/auth",hc="0.20.10";class fh{constructor(f){this.auth=f,this.internalListeners=new Map}getUid(){var f;return this.assertAuthConfigured(),(null===(f=this.auth.currentUser)||void 0===f?void 0:f.uid)||null}getToken(f){var g=this;return(0,p.Z)(function*(){return g.assertAuthConfigured(),yield g.auth._initializationPromise,g.auth.currentUser?{accessToken:yield g.auth.currentUser.getIdToken(f)}:null})()}addAuthTokenListener(f){if(this.assertAuthConfigured(),this.internalListeners.has(f))return;const g=this.auth.onIdTokenChanged(E=>{var T;f((null===(T=E)||void 0===T?void 0:T.stsTokenManager.accessToken)||null)});this.internalListeners.set(f,g),this.updateProactiveRefresh()}removeAuthTokenListener(f){this.assertAuthConfigured();const g=this.internalListeners.get(f);!g||(this.internalListeners.delete(f),g(),this.updateProactiveRefresh())}assertAuthConfigured(){Te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Aa(){return window}function Cp(){return Cp=(0,p.Z)(function*(_,f,g){var E;const{BuildInfo:T}=Aa();Cn(f.sessionId,"AuthEvent did not contain a session ID");const x=yield Sn(f.sessionId),B={};return Vr()?B.ibi=T.packageName:Lr()?B.apn=T.packageName:mt(_,"operation-not-supported-in-this-environment"),T.displayName&&(B.appDisplayName=T.displayName),B.sessionId=x,hh(_,g,f.type,void 0,null!==(E=f.eventId)&&void 0!==E?E:void 0,B)}),Cp.apply(this,arguments)}function mh(){return mh=(0,p.Z)(function*(_){const{BuildInfo:f}=Aa(),g={};Vr()?g.iosBundleId=f.packageName:Lr()?g.androidPackageName=f.packageName:mt(_,"operation-not-supported-in-this-environment"),yield yp(_,g)}),mh.apply(this,arguments)}function Tl(){return Tl=(0,p.Z)(function*(_,f,g){const{cordova:E}=Aa();let T=()=>{};try{yield new Promise((x,B)=>{let Q=null;function De(){var Ye;x();const Gt=null===(Ye=E.plugins.browsertab)||void 0===Ye?void 0:Ye.close;"function"==typeof Gt&&Gt(),"function"==typeof(null==g?void 0:g.close)&&g.close()}function we(){Q||(Q=window.setTimeout(()=>{B(Vn(_,"redirect-cancelled-by-user"))},2e3))}function Ze(){"visible"===(null==document?void 0:document.visibilityState)&&we()}f.addPassiveListener(De),document.addEventListener("resume",we,!1),Lr()&&document.addEventListener("visibilitychange",Ze,!1),T=()=>{f.removePassiveListener(De),document.removeEventListener("resume",we,!1),document.removeEventListener("visibilitychange",Ze,!1),Q&&window.clearTimeout(Q)}})}finally{T()}}),Tl.apply(this,arguments)}function Sn(_){return Ap.apply(this,arguments)}function Ap(){return Ap=(0,p.Z)(function*(_){const f=Sp(_),g=yield crypto.subtle.digest("SHA-256",f);return Array.from(new Uint8Array(g)).map(T=>T.toString(16).padStart(2,"0")).join("")}),Ap.apply(this,arguments)}function Sp(_){if(Cn(/[0-9a-zA-Z]+/.test(_),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(_);const f=new ArrayBuffer(_.length),g=new Uint8Array(f);for(let E=0;E<_.length;E++)g[E]=_.charCodeAt(E);return g}(0,L.Pz)("authIdTokenMaxAge"),_="Browser",(0,ie._registerComponent)(new Mn.wA("auth",(f,{options:g})=>{const E=f.getProvider("app").getImmediate(),T=f.getProvider("heartbeat"),{apiKey:x,authDomain:B}=E.options;return((Q,De)=>{Te(x&&!x.includes(":"),"invalid-api-key",{appName:Q.name}),Te(!(null==B?void 0:B.includes(":")),"argument-error",{appName:Q.name});const we={apiKey:x,authDomain:B,clientPlatform:_,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Xc(_)},Ze=new $s(Q,De,we);return function(_,f){const g=(null==f?void 0:f.persistence)||[],E=(Array.isArray(g)?g:[g]).map(_n);(null==f?void 0:f.errorMap)&&_._updateErrorMap(f.errorMap),_._initializeWithPersistence(E,null==f?void 0:f.popupRedirectResolver)}(Ze,g),Ze})(E,T)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((f,g,E)=>{f.getProvider("auth-internal").initialize()})),(0,ie._registerComponent)(new Mn.wA("auth-internal",f=>{const g=pn(f.getProvider("auth").getImmediate());return new fh(g)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ie.registerVersion)(wp,hc,void 0),(0,ie.registerVersion)(wp,hc,"esm2017");class ty extends mp{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(f=>{this.resolveInialized=f})}addPassiveListener(f){this.passiveListeners.add(f)}removePassiveListener(f){this.passiveListeners.delete(f)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(f){return this.resolveInialized(),this.passiveListeners.forEach(g=>g(f)),super.onEvent(f)}initialized(){var f=this;return(0,p.Z)(function*(){yield f.initPromise})()}}function ny(_){return xp.apply(this,arguments)}function xp(){return xp=(0,p.Z)(function*(_){const f=yield pc()._get(Sa(_));return f&&(yield pc()._remove(Sa(_))),f}),xp.apply(this,arguments)}function yh(){const _=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let g=0;g<20;g++){const E=Math.floor(Math.random()*f.length);_.push(f.charAt(E))}return _.join("")}function pc(){return _n(au)}function Sa(_){return tn("authEvent",_.config.apiKey,_.name)}function Al(_){if(!(null==_?void 0:_.includes("?")))return{};const[f,...g]=_.split("?");return(0,L.zd)(g.join("?"))}function Sl(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Vn("no-auth-event")}}function mc(){var _;return(null===(_=null==self?void 0:self.location)||void 0===_?void 0:_.protocol)||null}function yc(_=(0,L.z$)()){return!("file:"!==mc()&&"ionic:"!==mc()&&"capacitor:"!==mc()||!_.toLowerCase().match(/iphone|ipad|ipod|android/))}function vu(){try{const _=self.localStorage,f=To();if(_)return _.setItem(f,"1"),_.removeItem(f),!function(_=(0,L.z$)()){return(0,L.w1)()&&11===(null==document?void 0:document.documentMode)||function(_=(0,L.z$)()){return/Edge\/\d+/.test(_)}(_)}()||(0,L.hl)()}catch(_){return Rl()&&(0,L.hl)()}return!1}function Rl(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Np(){return("http:"===mc()||"https:"===mc()||(0,L.ru)()||yc())&&!((0,L.b$)()||(0,L.UG)())&&vu()&&!Rl()}function Vv(){return yc()&&"undefined"!=typeof document}function _c(){return _c=(0,p.Z)(function*(){return!!Vv()&&new Promise(_=>{const f=setTimeout(()=>{_(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(f),_(!0)})})}),_c.apply(this,arguments)}const gi={LOCAL:"local",NONE:"none",SESSION:"session"},eo=Te,Op="persistence";function Pp(_){return kp.apply(this,arguments)}function kp(){return kp=(0,p.Z)(function*(_){yield _._initializationPromise;const f=Ml(),g=tn(Op,_.config.apiKey,_.name);f&&f.setItem(g,_._getPersistence())}),kp.apply(this,arguments)}function Ml(){var _;try{return(null===(_="undefined"!=typeof window?window:null)||void 0===_?void 0:_.sessionStorage)||null}catch(f){return null}}const Wr=Te;class Oo{constructor(){this.browserResolver=_n(class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=As,this._completeRedirectFn=Gi,this._overrideRedirectResult=er}_openPopup(f,g,E,T){var x=this;return(0,p.Z)(function*(){var B;Cn(null===(B=x.eventManagers[f._key()])||void 0===B?void 0:B.manager,"_initialize() not called before _openPopup()");const Q=hh(f,g,E,Xe(),T);return function(_,f,g,E=500,T=600){const x=Math.max((window.screen.availHeight-T)/2,0).toString(),B=Math.max((window.screen.availWidth-E)/2,0).toString();let Q="";const De=Object.assign(Object.assign({},lc),{width:E.toString(),height:T.toString(),top:x,left:B}),we=(0,L.z$)().toLowerCase();g&&(Q=Hs(we)?"_blank":g),St(we)&&(f=f||"http://localhost",De.scrollbars="yes");const Ze=Object.entries(De).reduce((Gt,[tr,Po])=>`${Gt}${tr}=${Po},`,"");if(function(_=(0,L.z$)()){var f;return Vr(_)&&!!(null===(f=window.navigator)||void 0===f?void 0:f.standalone)}(we)&&"_self"!==Q)return function(_,f){const g=document.createElement("a");g.href=_,g.target=f;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),g.dispatchEvent(E)}(f||"",Q),new Ep(null);const Ye=window.open(f||"",Q,Ze);Te(Ye,_,"popup-blocked");try{Ye.focus()}catch(Gt){}return new Ep(Ye)}(f,Q,To())})()}_openRedirect(f,g,E,T){var x=this;return(0,p.Z)(function*(){return yield x._originValidation(f),_=hh(f,g,E,Xe(),T),Qt().location.href=_,new Promise(()=>{});var _})()}_initialize(f){const g=f._key();if(this.eventManagers[g]){const{manager:T,promise:x}=this.eventManagers[g];return T?Promise.resolve(T):(Cn(x,"If manager is not set, promise should be"),x)}const E=this.initAndGetManager(f);return this.eventManagers[g]={promise:E},E.catch(()=>{delete this.eventManagers[g]}),E}initAndGetManager(f){var g=this;return(0,p.Z)(function*(){const E=yield function(_){return qr.apply(this,arguments)}(f),T=new mp(f);return E.register("authEvent",x=>(Te(null==x?void 0:x.authEvent,f,"invalid-auth-event"),{status:T.onEvent(x.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),g.eventManagers[f._key()]={manager:T},g.iframes[f._key()]=E,T})()}_isIframeWebStorageSupported(f,g){this.iframes[f._key()].send(Il,{type:Il},T=>{var x;const B=null===(x=null==T?void 0:T[0])||void 0===x?void 0:x[Il];void 0!==B&&g(!!B),mt(f,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(f){const g=f._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function(_){return uh.apply(this,arguments)}(f)),this.originValidationPromises[g]}get _shouldInitProactively(){return Qc()||sa()||Vr()}}),this.cordovaResolver=_n(class{constructor(){this._redirectPersistence=As,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Gi,this._overrideRedirectResult=er}_initialize(f){var g=this;return(0,p.Z)(function*(){const E=f._key();let T=g.eventManagers.get(E);return T||(T=new ty(f),g.eventManagers.set(E,T),g.attachCallbackListeners(f,T)),T})()}_openPopup(f){mt(f,"operation-not-supported-in-this-environment")}_openRedirect(f,g,E,T){var x=this;return(0,p.Z)(function*(){!function(_){var f,g,E,T,x,B,Q,De,we,Ze;const Ye=Aa();Te("function"==typeof(null===(f=null==Ye?void 0:Ye.universalLinks)||void 0===f?void 0:f.subscribe),_,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Te(void 0!==(null===(g=null==Ye?void 0:Ye.BuildInfo)||void 0===g?void 0:g.packageName),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Te("function"==typeof(null===(x=null===(T=null===(E=null==Ye?void 0:Ye.cordova)||void 0===E?void 0:E.plugins)||void 0===T?void 0:T.browsertab)||void 0===x?void 0:x.openUrl),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Te("function"==typeof(null===(De=null===(Q=null===(B=null==Ye?void 0:Ye.cordova)||void 0===B?void 0:B.plugins)||void 0===Q?void 0:Q.browsertab)||void 0===De?void 0:De.isAvailable),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Te("function"==typeof(null===(Ze=null===(we=null==Ye?void 0:Ye.cordova)||void 0===we?void 0:we.InAppBrowser)||void 0===Ze?void 0:Ze.open),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(f);const B=yield x._initialize(f);yield B.initialized(),B.resetRedirect(),us.clear(),yield x._originValidation(f);const Q=function(_,f,g=null){return{type:f,eventId:g,urlResponse:null,sessionId:yh(),postBody:null,tenantId:_.tenantId,error:Vn(_,"no-auth-event")}}(f,E,T);yield function(_,f){return pc()._set(Sa(_),f)}(f,Q);const De=yield function(_,f,g){return Cp.apply(this,arguments)}(f,Q,g),we=yield function(_){const{cordova:f}=Aa();return new Promise(g=>{f.plugins.browsertab.isAvailable(E=>{let T=null;E?f.plugins.browsertab.openUrl(_):T=f.InAppBrowser.open(_,function(_=(0,L.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(_)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(_)}()?"_blank":"_system","location=yes"),g(T)})})}(De);return function(_,f,g){return Tl.apply(this,arguments)}(f,B,we)})()}_isIframeWebStorageSupported(f,g){throw new Error("Method not implemented.")}_originValidation(f){const g=f._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function(_){return mh.apply(this,arguments)}(f)),this.originValidationPromises[g]}attachCallbackListeners(f,g){const{universalLinks:E,handleOpenURL:T,BuildInfo:x}=Aa(),B=setTimeout((0,p.Z)(function*(){yield ny(f),g.onEvent(Sl())}),500),Q=function(){var Ze=(0,p.Z)(function*(Ye){clearTimeout(B);const Gt=yield ny(f);let tr=null;Gt&&(null==Ye?void 0:Ye.url)&&(tr=function(_,f){var g,E;const T=function(_){const f=Al(_),g=f.link?decodeURIComponent(f.link):void 0,E=Al(g).link,T=f.deep_link_id?decodeURIComponent(f.deep_link_id):void 0;return Al(T).link||T||E||g||_}(f);if(T.includes("/__/auth/callback")){const x=Al(T),B=x.firebaseError?function(_){try{return JSON.parse(_)}catch(f){return null}}(decodeURIComponent(x.firebaseError)):null,Q=null===(E=null===(g=null==B?void 0:B.code)||void 0===g?void 0:g.split("auth/"))||void 0===E?void 0:E[1],De=Q?Vn(Q):null;return De?{type:_.type,eventId:_.eventId,tenantId:_.tenantId,error:De,urlResponse:null,sessionId:null,postBody:null}:{type:_.type,eventId:_.eventId,tenantId:_.tenantId,sessionId:_.sessionId,urlResponse:T,postBody:null}}return null}(Gt,Ye.url)),g.onEvent(tr||Sl())});return function(Gt){return Ze.apply(this,arguments)}}();void 0!==E&&"function"==typeof E.subscribe&&E.subscribe(null,Q);const De=T,we=`${x.packageName.toLowerCase()}://`;Aa().handleOpenURL=function(){var Ze=(0,p.Z)(function*(Ye){if(Ye.toLowerCase().startsWith(we)&&Q({url:Ye}),"function"==typeof De)try{De(Ye)}catch(Gt){console.error(Gt)}});return function(Ye){return Ze.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=As,this._completeRedirectFn=Gi,this._overrideRedirectResult=er}_initialize(f){var g=this;return(0,p.Z)(function*(){return yield g.selectUnderlyingResolver(),g.assertedUnderlyingResolver._initialize(f)})()}_openPopup(f,g,E,T){var x=this;return(0,p.Z)(function*(){return yield x.selectUnderlyingResolver(),x.assertedUnderlyingResolver._openPopup(f,g,E,T)})()}_openRedirect(f,g,E,T){var x=this;return(0,p.Z)(function*(){return yield x.selectUnderlyingResolver(),x.assertedUnderlyingResolver._openRedirect(f,g,E,T)})()}_isIframeWebStorageSupported(f,g){this.assertedUnderlyingResolver._isIframeWebStorageSupported(f,g)}_originValidation(f){return this.assertedUnderlyingResolver._originValidation(f)}get _shouldInitProactively(){return Vv()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Wr(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var f=this;return(0,p.Z)(function*(){if(f.underlyingResolver)return;const g=yield function(){return _c.apply(this,arguments)}();f.underlyingResolver=g?f.cordovaResolver:f.browserResolver})()}}function ay(_){return _.unwrap()}function uy(_){return Fp(_)}function Fp(_){const{_tokenResponse:f}=_ instanceof L.ZR?_.customData:_;if(!f)return null;if(!(_ instanceof L.ZR)&&"temporaryProof"in f&&"phoneNumber"in f)return uc.credentialFromResult(_);const g=f.providerId;if(!g||"password"===g)return null;let E;switch(g){case"google.com":E=Vt;break;case"facebook.com":E=jd;break;case"github.com":E=Hd;break;case"twitter.com":E=Cs;break;default:const{oauthIdToken:T,oauthAccessToken:x,oauthTokenSecret:B,pendingToken:Q,nonce:De}=f;return x||B||T||Q?Q?g.startsWith("saml.")?Is._create(g,Q):Vi._fromParams({providerId:g,signInMethod:g,pendingToken:Q,idToken:T,accessToken:x}):new ws(g).credential({idToken:T,accessToken:x,rawNonce:De}):null}return _ instanceof L.ZR?E.credentialFromError(_):E.credentialFromResult(_)}function Ai(_,f){return f.catch(g=>{throw g instanceof L.ZR&&function(_,f){var g,E;const T=null===(g=f.customData)||void 0===g?void 0:g._tokenResponse;if("auth/multi-factor-auth-required"===(null===(E=f)||void 0===E?void 0:E.code))f.resolver=new vc(_,function(_,f){var g;const E=(0,L.m9)(_),T=f;return Te(f.customData.operationType,E,"argument-error"),Te(null===(g=T.customData._serverResponse)||void 0===g?void 0:g.mfaPendingCredential,E,"argument-error"),dl._fromError(E,T)}(_,f));else if(T){const x=Fp(f),B=f;x&&(B.credential=x,B.tenantId=T.tenantId||void 0,B.email=T.email||void 0,B.phoneNumber=T.phoneNumber||void 0)}}(_,g),g}).then(g=>{const T=g.user;return{operationType:g.operationType,credential:uy(g),additionalUserInfo:sp(g),user:_r.getOrCreate(T)}})}function Lp(_,f){return Vp.apply(this,arguments)}function Vp(){return Vp=(0,p.Z)(function*(_,f){const g=yield f;return{verificationId:g.verificationId,confirm:E=>Ai(_,g.confirm(E))}}),Vp.apply(this,arguments)}class vc{constructor(f,g){this.resolver=g,this.auth=function(_){return _.wrapped()}(f)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(f){return Ai(ay(this.auth),this.resolver.resolveSignIn(f))}}class _r{constructor(f){this._delegate=f,this.multiFactor=function(_){const f=(0,L.m9)(_);return mn.has(f)||mn.set(f,fl._fromUser(f)),mn.get(f)}(f)}static getOrCreate(f){return _r.USER_MAP.has(f)||_r.USER_MAP.set(f,new _r(f)),_r.USER_MAP.get(f)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(f){return this._delegate.getIdTokenResult(f)}getIdToken(f){return this._delegate.getIdToken(f)}linkAndRetrieveDataWithCredential(f){return this.linkWithCredential(f)}linkWithCredential(f){var g=this;return(0,p.Z)(function*(){return Ai(g.auth,bo(g._delegate,f))})()}linkWithPhoneNumber(f,g){var E=this;return(0,p.Z)(function*(){return Lp(E.auth,function(_,f,g){return lu.apply(this,arguments)}(E._delegate,f,g))})()}linkWithPopup(f){var g=this;return(0,p.Z)(function*(){return Ai(g.auth,function(_,f,g){return Xn.apply(this,arguments)}(g._delegate,f,Oo))})()}linkWithRedirect(f){var g=this;return(0,p.Z)(function*(){return yield Pp(pn(g.auth)),function(_,f,g){return function(_,f,g){return fu.apply(this,arguments)}(_,f,g)}(g._delegate,f,Oo)})()}reauthenticateAndRetrieveDataWithCredential(f){return this.reauthenticateWithCredential(f)}reauthenticateWithCredential(f){var g=this;return(0,p.Z)(function*(){return Ai(g.auth,la(g._delegate,f))})()}reauthenticateWithPhoneNumber(f,g){return Lp(this.auth,function(_,f,g){return _l.apply(this,arguments)}(this._delegate,f,g))}reauthenticateWithPopup(f){return Ai(this.auth,function(_,f,g){return at.apply(this,arguments)}(this._delegate,f,Oo))}reauthenticateWithRedirect(f){var g=this;return(0,p.Z)(function*(){return yield Pp(pn(g.auth)),function(_,f,g){return function(_,f,g){return ih.apply(this,arguments)}(_,f,g)}(g._delegate,f,Oo)})()}sendEmailVerification(f){return function(_,f){return nu.apply(this,arguments)}(this._delegate,f)}unlink(f){var g=this;return(0,p.Z)(function*(){return yield function(_,f){return Ds.apply(this,arguments)}(g._delegate,f),g})()}updateEmail(f){return function(_,f){return iu((0,L.m9)(_),f,null)}(this._delegate,f)}updatePassword(f){return function(_,f){return iu((0,L.m9)(_),null,f)}(this._delegate,f)}updatePhoneNumber(f){return function(_,f){return vl.apply(this,arguments)}(this._delegate,f)}updateProfile(f){return function(_,f){return ga.apply(this,arguments)}(this._delegate,f)}verifyBeforeUpdateEmail(f,g){return function(_,f,g){return ru.apply(this,arguments)}(this._delegate,f,g)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}_r.USER_MAP=new WeakMap;const Ih=Te;let cy=(()=>{class _{constructor(g,E){if(this.app=g,E.isInitialized())return this._delegate=E.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:T}=g.options;Ih(T,"invalid-api-key",{appName:g.name}),Ih(T,"invalid-api-key",{appName:g.name});const x="undefined"!=typeof window?Oo:void 0;this._delegate=E.initialize({options:{persistence:mw(T,g.name),popupRedirectResolver:x}}),this._delegate._updateErrorMap(Us),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?_r.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(g){this._delegate.languageCode=g}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(g){this._delegate.tenantId=g}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(g,E){!function(_,f,g){const E=pn(_);Te(E._canInitEmulator,E,"emulator-config-failed"),Te(/^https?:\/\//.test(f),E,"invalid-emulator-scheme");const T=!!(null==g?void 0:g.disableWarnings),x=Xi(f),{host:B,port:Q}=function(_){const f=Xi(_),g=/(\/\/)?([^?#/]+)/.exec(_.substr(f.length));if(!g)return{host:"",port:null};const E=g[2].split("@").pop()||"",T=/^(\[[^\]]+\])(:|$)/.exec(E);if(T){const x=T[1];return{host:x,port:Lu(E.substr(x.length+1))}}{const[x,B]=E.split(":");return{host:x,port:Lu(B)}}}(f);E.config.emulator={url:`${x}//${B}${null===Q?"":`:${Q}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:B,port:Q,protocol:x.replace(":",""),options:Object.freeze({disableWarnings:T})}),T||function(){function _(){const f=document.createElement("p"),g=f.style;f.innerText="Running in emulator mode. Do not use with production credentials.",g.position="fixed",g.width="100%",g.backgroundColor="#ffffff",g.border=".1em solid #000000",g.color="#b50000",g.bottom="0px",g.left="0px",g.margin="0px",g.zIndex="10000",g.textAlign="center",f.classList.add("firebase-emulator-warning"),document.body.appendChild(f)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",_):_())}()}(this._delegate,g,E)}applyActionCode(g){return function(_,f){return ha.apply(this,arguments)}(this._delegate,g)}checkActionCode(g){return tu(this._delegate,g)}confirmPasswordReset(g,E){return function(_,f,g){return Wu.apply(this,arguments)}(this._delegate,g,E)}createUserWithEmailAndPassword(g,E){var T=this;return(0,p.Z)(function*(){return Ai(T._delegate,function(_,f,g){return Ku.apply(this,arguments)}(T._delegate,g,E))})()}fetchProvidersForEmail(g){return this.fetchSignInMethodsForEmail(g)}fetchSignInMethodsForEmail(g){return function(_,f){return ai.apply(this,arguments)}(this._delegate,g)}isSignInWithEmailLink(g){return function(_,f){const g=Bi.parseLink(f);return"EMAIL_SIGNIN"===(null==g?void 0:g.operation)}(0,g)}getRedirectResult(){var g=this;return(0,p.Z)(function*(){Ih(Np(),g._delegate,"operation-not-supported-in-this-environment");const E=yield function(_,f){return jt.apply(this,arguments)}(g._delegate,Oo);return E?Ai(g._delegate,Promise.resolve(E)):{credential:null,user:null}})()}addFrameworkForLogging(g){!function(_,f){pn(_)._logFramework(f)}(this._delegate,g)}onAuthStateChanged(g,E,T){const{next:x,error:B,complete:Q}=Up(g,E,T);return this._delegate.onAuthStateChanged(x,B,Q)}onIdTokenChanged(g,E,T){const{next:x,error:B,complete:Q}=Up(g,E,T);return this._delegate.onIdTokenChanged(x,B,Q)}sendSignInLinkToEmail(g,E){return function(_,f,g){return pa.apply(this,arguments)}(this._delegate,g,E)}sendPasswordResetEmail(g,E){return function(_,f,g){return ji.apply(this,arguments)}(this._delegate,g,E||void 0)}setPersistence(g){var E=this;return(0,p.Z)(function*(){let T;switch(function(_,f){eo(Object.values(gi).includes(f),_,"invalid-persistence-type"),(0,L.b$)()?eo(f!==gi.SESSION,_,"unsupported-persistence-type"):(0,L.UG)()?eo(f===gi.NONE,_,"unsupported-persistence-type"):Rl()?eo(f===gi.NONE||f===gi.LOCAL&&(0,L.hl)(),_,"unsupported-persistence-type"):eo(f===gi.NONE||vu(),_,"unsupported-persistence-type")}(E._delegate,g),g){case gi.SESSION:T=As;break;case gi.LOCAL:T=(yield _n(va)._isAvailable())?va:au;break;case gi.NONE:T=gr;break;default:return mt("argument-error",{appName:E._delegate.name})}return E._delegate.setPersistence(T)})()}signInAndRetrieveDataWithCredential(g){return this.signInWithCredential(g)}signInAnonymously(){return Ai(this._delegate,function(_){return ts.apply(this,arguments)}(this._delegate))}signInWithCredential(g){return Ai(this._delegate,gn(this._delegate,g))}signInWithCustomToken(g){return Ai(this._delegate,function(_,f){return ns.apply(this,arguments)}(this._delegate,g))}signInWithEmailAndPassword(g,E){return Ai(this._delegate,function(_,f,g){return gn((0,L.m9)(_),yo.credential(f,g))}(this._delegate,g,E))}signInWithEmailLink(g,E){return Ai(this._delegate,function(_,f,g){return Yu.apply(this,arguments)}(this._delegate,g,E))}signInWithPhoneNumber(g,E){return Lp(this._delegate,function(_,f,g){return ac.apply(this,arguments)}(this._delegate,g,E))}signInWithPopup(g){var E=this;return(0,p.Z)(function*(){return Ih(Np(),E._delegate,"operation-not-supported-in-this-environment"),Ai(E._delegate,function(_,f,g){return _t.apply(this,arguments)}(E._delegate,g,Oo))})()}signInWithRedirect(g){var E=this;return(0,p.Z)(function*(){return Ih(Np(),E._delegate,"operation-not-supported-in-this-environment"),yield Pp(E._delegate),function(_,f,g){return function(_,f,g){return hu.apply(this,arguments)}(_,f,g)}(E._delegate,g,Oo)})()}updateCurrentUser(g){return this._delegate.updateCurrentUser(g)}verifyPasswordResetCode(g){return function(_,f){return Zu.apply(this,arguments)}(this._delegate,g)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return _.Persistence=gi,_})();function Up(_,f,g){let E=_;"function"!=typeof _&&({next:E,error:f,complete:g}=_);const T=E;return{next:B=>T(B&&_r.getOrCreate(B)),error:f,complete:g}}function mw(_,f){const g=function(_,f){const g=Ml();if(!g)return[];const E=tn(Op,_,f);switch(g.getItem(E)){case gi.NONE:return[gr];case gi.LOCAL:return[va,As];case gi.SESSION:return[As];default:return[]}}(_,f);if("undefined"!=typeof self&&!g.includes(va)&&g.push(va),"undefined"!=typeof window)for(const E of[au,As])g.includes(E)||g.push(E);return g.includes(gr)||g.push(gr),g}class ls{constructor(){this.providerId="phone",this._delegate=new uc(ay(X.Z.auth()))}static credential(f,g){return uc.credential(f,g)}verifyPhoneNumber(f,g){return this._delegate.verifyPhoneNumber(f,g)}unwrap(){return this._delegate}}ls.PHONE_SIGN_IN_METHOD=uc.PHONE_SIGN_IN_METHOD,ls.PROVIDER_ID=uc.PROVIDER_ID;const Bp=Te;class jp{constructor(f,g,E=X.Z.app()){var T;Bp(null===(T=E.options)||void 0===T?void 0:T.apiKey,"invalid-api-key",{appName:E.name}),this._delegate=new Ro(f,g,E.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function(_){_.INTERNAL.registerComponent(new Mn.wA("auth-compat",f=>{const g=f.getProvider("app-compat").getImmediate(),E=f.getProvider("auth");return new cy(g,E)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:yo,FacebookAuthProvider:jd,GithubAuthProvider:Hd,GoogleAuthProvider:Vt,OAuthProvider:ws,SAMLAuthProvider:Gu,PhoneAuthProvider:ls,PhoneMultiFactorGenerator:Jm,RecaptchaVerifier:jp,TwitterAuthProvider:Cs,Auth:cy,AuthCredential:bs,Error:L.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),_.registerVersion("@firebase/auth-compat","0.2.23")}(X.Z)},8891:(ze,fe,F)=>{"use strict";F.d(fe,{y:()=>ee});var p=F(7393),L=F(9181),ie=F(6490),ne=F(6554),me=F(4022),le=F(2494);let ee=(()=>{class k{constructor(K){this._isScalar=!1,K&&(this._subscribe=K)}lift(K){const se=new k;return se.source=this,se.operator=K,se}subscribe(K,se,ke){const{operator:_e}=this,ue=function(k,Y,K){if(k){if(k instanceof p.L)return k;if(k[L.b])return k[L.b]()}return k||Y||K?new p.L(k,Y,K):new p.L(ie.c)}(K,se,ke);if(ue.add(_e?_e.call(ue,this.source):this.source||le.v.useDeprecatedSynchronousErrorHandling&&!ue.syncErrorThrowable?this._subscribe(ue):this._trySubscribe(ue)),le.v.useDeprecatedSynchronousErrorHandling&&ue.syncErrorThrowable&&(ue.syncErrorThrowable=!1,ue.syncErrorThrown))throw ue.syncErrorValue;return ue}_trySubscribe(K){try{return this._subscribe(K)}catch(se){le.v.useDeprecatedSynchronousErrorHandling&&(K.syncErrorThrown=!0,K.syncErrorValue=se),function(k){for(;k;){const{closed:Y,destination:K,isStopped:se}=k;if(Y||se)return!1;k=K&&K instanceof p.L?K:null}return!0}(K)?K.error(se):console.warn(se)}}forEach(K,se){return new(se=V(se))((ke,_e)=>{let ue;ue=this.subscribe(Ne=>{try{K(Ne)}catch(Le){_e(Le),ue&&ue.unsubscribe()}},_e,ke)})}_subscribe(K){const{source:se}=this;return se&&se.subscribe(K)}[ne.L](){return this}pipe(...K){return 0===K.length?this:(0,me.U)(K)(this)}toPromise(K){return new(K=V(K))((se,ke)=>{let _e;this.subscribe(ue=>_e=ue,ue=>ke(ue),()=>se(_e))})}}return k.create=Y=>new k(Y),k})();function V(k){if(k||(k=le.v.Promise||Promise),!k)throw new Error("no Promise impl found");return k}},6490:(ze,fe,F)=>{"use strict";F.d(fe,{c:()=>L});var p=F(2494),X=F(4449);const L={closed:!0,next(ie){},error(ie){if(p.v.useDeprecatedSynchronousErrorHandling)throw ie;(0,X.z)(ie)},complete(){}}},9765:(ze,fe,F)=>{"use strict";F.d(fe,{Yc:()=>me,xQ:()=>le});var p=F(8891),X=F(7393),L=F(5319),ie=F(7971),oe=F(8858),ne=F(9181);class me extends X.L{constructor(k){super(k),this.destination=k}}let le=(()=>{class V extends p.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[ne.b](){return new me(this)}lift(Y){const K=new ee(this,this);return K.operator=Y,K}next(Y){if(this.closed)throw new ie.N;if(!this.isStopped){const{observers:K}=this,se=K.length,ke=K.slice();for(let _e=0;_e<se;_e++)ke[_e].next(Y)}}error(Y){if(this.closed)throw new ie.N;this.hasError=!0,this.thrownError=Y,this.isStopped=!0;const{observers:K}=this,se=K.length,ke=K.slice();for(let _e=0;_e<se;_e++)ke[_e].error(Y);this.observers.length=0}complete(){if(this.closed)throw new ie.N;this.isStopped=!0;const{observers:Y}=this,K=Y.length,se=Y.slice();for(let ke=0;ke<K;ke++)se[ke].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(Y){if(this.closed)throw new ie.N;return super._trySubscribe(Y)}_subscribe(Y){if(this.closed)throw new ie.N;return this.hasError?(Y.error(this.thrownError),L.w.EMPTY):this.isStopped?(Y.complete(),L.w.EMPTY):(this.observers.push(Y),new oe.W(this,Y))}asObservable(){const Y=new p.y;return Y.source=this,Y}}return V.create=(k,Y)=>new ee(k,Y),V})();class ee extends le{constructor(k,Y){super(),this.destination=k,this.source=Y}next(k){const{destination:Y}=this;Y&&Y.next&&Y.next(k)}error(k){const{destination:Y}=this;Y&&Y.error&&this.destination.error(k)}complete(){const{destination:k}=this;k&&k.complete&&this.destination.complete()}_subscribe(k){const{source:Y}=this;return Y?this.source.subscribe(k):L.w.EMPTY}}},8858:(ze,fe,F)=>{"use strict";F.d(fe,{W:()=>X});var p=F(5319);class X extends p.w{constructor(ie,oe){super(),this.subject=ie,this.subscriber=oe,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const ie=this.subject,oe=ie.observers;if(this.subject=null,!oe||0===oe.length||ie.isStopped||ie.closed)return;const ne=oe.indexOf(this.subscriber);-1!==ne&&oe.splice(ne,1)}}},7393:(ze,fe,F)=>{"use strict";F.d(fe,{L:()=>me});var p=F(9105),X=F(6490),L=F(5319),ie=F(9181),oe=F(2494),ne=F(4449);class me extends L.w{constructor(V,k,Y){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=X.c;break;case 1:if(!V){this.destination=X.c;break}if("object"==typeof V){V instanceof me?(this.syncErrorThrowable=V.syncErrorThrowable,this.destination=V,V.add(this)):(this.syncErrorThrowable=!0,this.destination=new le(this,V));break}default:this.syncErrorThrowable=!0,this.destination=new le(this,V,k,Y)}}[ie.b](){return this}static create(V,k,Y){const K=new me(V,k,Y);return K.syncErrorThrowable=!1,K}next(V){this.isStopped||this._next(V)}error(V){this.isStopped||(this.isStopped=!0,this._error(V))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(V){this.destination.next(V)}_error(V){this.destination.error(V),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:V}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=V,this}}class le extends me{constructor(V,k,Y,K){super(),this._parentSubscriber=V;let se,ke=this;(0,p.m)(k)?se=k:k&&(se=k.next,Y=k.error,K=k.complete,k!==X.c&&(ke=Object.create(k),(0,p.m)(ke.unsubscribe)&&this.add(ke.unsubscribe.bind(ke)),ke.unsubscribe=this.unsubscribe.bind(this))),this._context=ke,this._next=se,this._error=Y,this._complete=K}next(V){if(!this.isStopped&&this._next){const{_parentSubscriber:k}=this;oe.v.useDeprecatedSynchronousErrorHandling&&k.syncErrorThrowable?this.__tryOrSetError(k,this._next,V)&&this.unsubscribe():this.__tryOrUnsub(this._next,V)}}error(V){if(!this.isStopped){const{_parentSubscriber:k}=this,{useDeprecatedSynchronousErrorHandling:Y}=oe.v;if(this._error)Y&&k.syncErrorThrowable?(this.__tryOrSetError(k,this._error,V),this.unsubscribe()):(this.__tryOrUnsub(this._error,V),this.unsubscribe());else if(k.syncErrorThrowable)Y?(k.syncErrorValue=V,k.syncErrorThrown=!0):(0,ne.z)(V),this.unsubscribe();else{if(this.unsubscribe(),Y)throw V;(0,ne.z)(V)}}}complete(){if(!this.isStopped){const{_parentSubscriber:V}=this;if(this._complete){const k=()=>this._complete.call(this._context);oe.v.useDeprecatedSynchronousErrorHandling&&V.syncErrorThrowable?(this.__tryOrSetError(V,k),this.unsubscribe()):(this.__tryOrUnsub(k),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(V,k){try{V.call(this._context,k)}catch(Y){if(this.unsubscribe(),oe.v.useDeprecatedSynchronousErrorHandling)throw Y;(0,ne.z)(Y)}}__tryOrSetError(V,k,Y){if(!oe.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{k.call(this._context,Y)}catch(K){return oe.v.useDeprecatedSynchronousErrorHandling?(V.syncErrorValue=K,V.syncErrorThrown=!0,!0):((0,ne.z)(K),!0)}return!1}_unsubscribe(){const{_parentSubscriber:V}=this;this._context=null,this._parentSubscriber=null,V.unsubscribe()}}},5319:(ze,fe,F)=>{"use strict";F.d(fe,{w:()=>ne});var p=F(9796),X=F(1555),L=F(9105);const oe=(()=>{function le(ee){return Error.call(this),this.message=ee?`${ee.length} errors occurred during unsubscription:\n${ee.map((V,k)=>`${k+1}) ${V.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=ee,this}return le.prototype=Object.create(Error.prototype),le})();class ne{constructor(ee){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,ee&&(this._ctorUnsubscribe=!0,this._unsubscribe=ee)}unsubscribe(){let ee;if(this.closed)return;let{_parentOrParents:V,_ctorUnsubscribe:k,_unsubscribe:Y,_subscriptions:K}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,V instanceof ne)V.remove(this);else if(null!==V)for(let se=0;se<V.length;++se)V[se].remove(this);if((0,L.m)(Y)){k&&(this._unsubscribe=void 0);try{Y.call(this)}catch(se){ee=se instanceof oe?me(se.errors):[se]}}if((0,p.k)(K)){let se=-1,ke=K.length;for(;++se<ke;){const _e=K[se];if((0,X.K)(_e))try{_e.unsubscribe()}catch(ue){ee=ee||[],ue instanceof oe?ee=ee.concat(me(ue.errors)):ee.push(ue)}}}if(ee)throw new oe(ee)}add(ee){let V=ee;if(!ee)return ne.EMPTY;switch(typeof ee){case"function":V=new ne(ee);case"object":if(V===this||V.closed||"function"!=typeof V.unsubscribe)return V;if(this.closed)return V.unsubscribe(),V;if(!(V instanceof ne)){const K=V;V=new ne,V._subscriptions=[K]}break;default:throw new Error("unrecognized teardown "+ee+" added to Subscription.")}let{_parentOrParents:k}=V;if(null===k)V._parentOrParents=this;else if(k instanceof ne){if(k===this)return V;V._parentOrParents=[k,this]}else{if(-1!==k.indexOf(this))return V;k.push(this)}const Y=this._subscriptions;return null===Y?this._subscriptions=[V]:Y.push(V),V}remove(ee){const V=this._subscriptions;if(V){const k=V.indexOf(ee);-1!==k&&V.splice(k,1)}}}var le;function me(le){return le.reduce((ee,V)=>ee.concat(V instanceof oe?V.errors:V),[])}ne.EMPTY=((le=new ne).closed=!0,le)},2494:(ze,fe,F)=>{"use strict";F.d(fe,{v:()=>X});let p=!1;const X={Promise:void 0,set useDeprecatedSynchronousErrorHandling(L){if(L){const ie=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+ie.stack)}else p&&console.log("RxJS: Back to a better error behavior. Thank you. <3");p=L},get useDeprecatedSynchronousErrorHandling(){return p}}},5345:(ze,fe,F)=>{"use strict";F.d(fe,{IY:()=>ie,Ds:()=>ne,ft:()=>le});var p=F(7393),X=F(8891),L=F(7444);class ie extends p.L{constructor(V){super(),this.parent=V}_next(V){this.parent.notifyNext(V)}_error(V){this.parent.notifyError(V),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class ne extends p.L{notifyNext(V){this.destination.next(V)}notifyError(V){this.destination.error(V)}notifyComplete(){this.destination.complete()}}function le(ee,V){if(V.closed)return;if(ee instanceof X.y)return ee.subscribe(V);let k;try{k=(0,L.s)(ee)(V)}catch(Y){V.error(Y)}return k}},2441:(ze,fe,F)=>{"use strict";F.d(fe,{c:()=>oe,N:()=>ne});var p=F(9765),X=F(8891),L=F(5319),ie=F(1307);class oe extends X.y{constructor(k,Y){super(),this.source=k,this.subjectFactory=Y,this._refCount=0,this._isComplete=!1}_subscribe(k){return this.getSubject().subscribe(k)}getSubject(){const k=this._subject;return(!k||k.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let k=this._connection;return k||(this._isComplete=!1,k=this._connection=new L.w,k.add(this.source.subscribe(new me(this.getSubject(),this))),k.closed&&(this._connection=null,k=L.w.EMPTY)),k}refCount(){return(0,ie.x)()(this)}}const ne=(()=>{const V=oe.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:V._subscribe},_isComplete:{value:V._isComplete,writable:!0},getSubject:{value:V.getSubject},connect:{value:V.connect},refCount:{value:V.refCount}}})();class me extends p.Yc{constructor(k,Y){super(k),this.connectable=Y}_error(k){this._unsubscribe(),super._error(k)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const k=this.connectable;if(k){this.connectable=null;const Y=k._connection;k._refCount=0,k._subject=null,k._connection=null,Y&&Y.unsubscribe()}}}},9193:(ze,fe,F)=>{"use strict";F.d(fe,{E:()=>X,c:()=>L});var p=F(8891);const X=new p.y(oe=>oe.complete());function L(oe){return oe?function(oe){return new p.y(ne=>oe.schedule(()=>ne.complete()))}(oe):X}},4402:(ze,fe,F)=>{"use strict";F.d(fe,{D:()=>ke});var p=F(8891),X=F(7444),L=F(5319),ie=F(6554),me=F(4087),le=F(377),k=F(4072),Y=F(9489);function ke(_e,ue){return ue?function(_e,ue){if(null!=_e){if(function(_e){return _e&&"function"==typeof _e[ie.L]}(_e))return function(_e,ue){return new p.y(Ne=>{const Le=new L.w;return Le.add(ue.schedule(()=>{const Ce=_e[ie.L]();Le.add(Ce.subscribe({next(Je){Le.add(ue.schedule(()=>Ne.next(Je)))},error(Je){Le.add(ue.schedule(()=>Ne.error(Je)))},complete(){Le.add(ue.schedule(()=>Ne.complete()))}}))})),Le})}(_e,ue);if((0,k.t)(_e))return function(_e,ue){return new p.y(Ne=>{const Le=new L.w;return Le.add(ue.schedule(()=>_e.then(Ce=>{Le.add(ue.schedule(()=>{Ne.next(Ce),Le.add(ue.schedule(()=>Ne.complete()))}))},Ce=>{Le.add(ue.schedule(()=>Ne.error(Ce)))}))),Le})}(_e,ue);if((0,Y.z)(_e))return(0,me.r)(_e,ue);if(function(_e){return _e&&"function"==typeof _e[le.hZ]}(_e)||"string"==typeof _e)return function(_e,ue){if(!_e)throw new Error("Iterable cannot be null");return new p.y(Ne=>{const Le=new L.w;let Ce;return Le.add(()=>{Ce&&"function"==typeof Ce.return&&Ce.return()}),Le.add(ue.schedule(()=>{Ce=_e[le.hZ](),Le.add(ue.schedule(function(){if(Ne.closed)return;let Je,ot;try{const Be=Ce.next();Je=Be.value,ot=Be.done}catch(Be){return void Ne.error(Be)}ot?Ne.complete():(Ne.next(Je),this.schedule())}))})),Le})}(_e,ue)}throw new TypeError((null!==_e&&typeof _e||_e)+" is not observable")}(_e,ue):_e instanceof p.y?_e:new p.y((0,X.s)(_e))}},6693:(ze,fe,F)=>{"use strict";F.d(fe,{n:()=>ie});var p=F(8891),X=F(5015),L=F(4087);function ie(oe,ne){return ne?(0,L.r)(oe,ne):new p.y((0,X.V)(oe))}},6682:(ze,fe,F)=>{"use strict";F.d(fe,{T:()=>oe});var p=F(8891),X=F(4869),L=F(3282),ie=F(6693);function oe(...ne){let me=Number.POSITIVE_INFINITY,le=null,ee=ne[ne.length-1];return(0,X.K)(ee)?(le=ne.pop(),ne.length>1&&"number"==typeof ne[ne.length-1]&&(me=ne.pop())):"number"==typeof ee&&(me=ne.pop()),null===le&&1===ne.length&&ne[0]instanceof p.y?ne[0]:(0,L.J)(me)((0,ie.n)(ne,le))}},5917:(ze,fe,F)=>{"use strict";F.d(fe,{of:()=>ie});var p=F(4869),X=F(6693),L=F(4087);function ie(...oe){let ne=oe[oe.length-1];return(0,p.K)(ne)?(oe.pop(),(0,L.r)(oe,ne)):(0,X.n)(oe)}},8002:(ze,fe,F)=>{"use strict";F.d(fe,{U:()=>X});var p=F(7393);function X(oe,ne){return function(le){if("function"!=typeof oe)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return le.lift(new L(oe,ne))}}class L{constructor(ne,me){this.project=ne,this.thisArg=me}call(ne,me){return me.subscribe(new ie(ne,this.project,this.thisArg))}}class ie extends p.L{constructor(ne,me,le){super(ne),this.project=me,this.count=0,this.thisArg=le||this}_next(ne){let me;try{me=this.project.call(this.thisArg,ne,this.count++)}catch(le){return void this.destination.error(le)}this.destination.next(me)}}},3282:(ze,fe,F)=>{"use strict";F.d(fe,{J:()=>L});var p=F(9773),X=F(4487);function L(ie=Number.POSITIVE_INFINITY){return(0,p.zg)(X.y,ie)}},9773:(ze,fe,F)=>{"use strict";F.d(fe,{zg:()=>ie});var p=F(8002),X=F(4402),L=F(5345);function ie(le,ee,V=Number.POSITIVE_INFINITY){return"function"==typeof ee?k=>k.pipe(ie((Y,K)=>(0,X.D)(le(Y,K)).pipe((0,p.U)((se,ke)=>ee(Y,se,K,ke))),V)):("number"==typeof ee&&(V=ee),k=>k.lift(new oe(le,V)))}class oe{constructor(ee,V=Number.POSITIVE_INFINITY){this.project=ee,this.concurrent=V}call(ee,V){return V.subscribe(new ne(ee,this.project,this.concurrent))}}class ne extends L.Ds{constructor(ee,V,k=Number.POSITIVE_INFINITY){super(ee),this.project=V,this.concurrent=k,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(ee){this.active<this.concurrent?this._tryNext(ee):this.buffer.push(ee)}_tryNext(ee){let V;const k=this.index++;try{V=this.project(ee,k)}catch(Y){return void this.destination.error(Y)}this.active++,this._innerSub(V)}_innerSub(ee){const V=new L.IY(this),k=this.destination;k.add(V);const Y=(0,L.ft)(ee,V);Y!==V&&k.add(Y)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(ee){this.destination.next(ee)}notifyComplete(){const ee=this.buffer;this.active--,ee.length>0?this._next(ee.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},309:(ze,fe,F)=>{"use strict";F.d(fe,{ht:()=>k,QV:()=>ee});var p=F(7393),X=F(9193),L=F(5917),ie=F(8891);class le{constructor(se,ke,_e){this.kind=se,this.value=ke,this.error=_e,this.hasValue="N"===se}observe(se){switch(this.kind){case"N":return se.next&&se.next(this.value);case"E":return se.error&&se.error(this.error);case"C":return se.complete&&se.complete()}}do(se,ke,_e){switch(this.kind){case"N":return se&&se(this.value);case"E":return ke&&ke(this.error);case"C":return _e&&_e()}}accept(se,ke,_e){return se&&"function"==typeof se.next?this.observe(se):this.do(se,ke,_e)}toObservable(){switch(this.kind){case"N":return(0,L.of)(this.value);case"E":return K=this.error,new ie.y(ke=>ke.error(K));case"C":return(0,X.c)()}var K;throw new Error("unexpected notification kind value")}static createNext(se){return void 0!==se?new le("N",se):le.undefinedValueNotification}static createError(se){return new le("E",void 0,se)}static createComplete(){return le.completeNotification}}function ee(K,se=0){return function(_e){return _e.lift(new V(K,se))}}le.completeNotification=new le("C"),le.undefinedValueNotification=new le("N",void 0);class V{constructor(se,ke=0){this.scheduler=se,this.delay=ke}call(se,ke){return ke.subscribe(new k(se,this.scheduler,this.delay))}}class k extends p.L{constructor(se,ke,_e=0){super(se),this.scheduler=ke,this.delay=_e}static dispatch(se){const{notification:ke,destination:_e}=se;ke.observe(_e),this.unsubscribe()}scheduleMessage(se){this.destination.add(this.scheduler.schedule(k.dispatch,this.delay,new Y(se,this.destination)))}_next(se){this.scheduleMessage(le.createNext(se))}_error(se){this.scheduleMessage(le.createError(se)),this.unsubscribe()}_complete(){this.scheduleMessage(le.createComplete()),this.unsubscribe()}}class Y{constructor(se,ke){this.notification=se,this.destination=ke}}},1307:(ze,fe,F)=>{"use strict";F.d(fe,{x:()=>X});var p=F(7393);function X(){return function(ne){return ne.lift(new L(ne))}}class L{constructor(ne){this.connectable=ne}call(ne,me){const{connectable:le}=this;le._refCount++;const ee=new ie(ne,le),V=me.subscribe(ee);return ee.closed||(ee.connection=le.connect()),V}}class ie extends p.L{constructor(ne,me){super(ne),this.connectable=me}_unsubscribe(){const{connectable:ne}=this;if(!ne)return void(this.connection=null);this.connectable=null;const me=ne._refCount;if(me<=0)return void(this.connection=null);if(ne._refCount=me-1,me>1)return void(this.connection=null);const{connection:le}=this,ee=ne._connection;this.connection=null,ee&&(!le||ee===le)&&ee.unsubscribe()}}},3101:(ze,fe,F)=>{"use strict";F.d(fe,{R:()=>ue});var p=F(8891);let X=1;const L=Promise.resolve(),ie={};function oe(Le){return Le in ie&&(delete ie[Le],!0)}const ne={setImmediate(Le){const Ce=X++;return ie[Ce]=!0,L.then(()=>oe(Ce)&&Le()),Ce},clearImmediate(Le){oe(Le)}};var le=F(6465),V=F(6102);const K=new class extends V.v{flush(Ce){this.active=!0,this.scheduled=void 0;const{actions:Je}=this;let ot,Be=-1,Lt=Je.length;Ce=Ce||Je.shift();do{if(ot=Ce.execute(Ce.state,Ce.delay))break}while(++Be<Lt&&(Ce=Je.shift()));if(this.active=!1,ot){for(;++Be<Lt&&(Ce=Je.shift());)Ce.unsubscribe();throw ot}}}(class extends le.o{constructor(Ce,Je){super(Ce,Je),this.scheduler=Ce,this.work=Je}requestAsyncId(Ce,Je,ot=0){return null!==ot&&ot>0?super.requestAsyncId(Ce,Je,ot):(Ce.actions.push(this),Ce.scheduled||(Ce.scheduled=ne.setImmediate(Ce.flush.bind(Ce,null))))}recycleAsyncId(Ce,Je,ot=0){if(null!==ot&&ot>0||null===ot&&this.delay>0)return super.recycleAsyncId(Ce,Je,ot);0===Ce.actions.length&&(ne.clearImmediate(Je),Ce.scheduled=void 0)}});var se=F(9796);class _e extends p.y{constructor(Ce,Je=0,ot=K){var Le;super(),this.source=Ce,this.delayTime=Je,this.scheduler=ot,(!(!(0,se.k)(Le=Je)&&Le-parseFloat(Le)+1>=0)||Je<0)&&(this.delayTime=0),(!ot||"function"!=typeof ot.schedule)&&(this.scheduler=K)}static create(Ce,Je=0,ot=K){return new _e(Ce,Je,ot)}static dispatch(Ce){const{source:Je,subscriber:ot}=Ce;return this.add(Je.subscribe(ot))}_subscribe(Ce){return this.scheduler.schedule(_e.dispatch,this.delayTime,{source:this.source,subscriber:Ce})}}function ue(Le,Ce=0){return function(ot){return ot.lift(new Ne(Le,Ce))}}class Ne{constructor(Ce,Je){this.scheduler=Ce,this.delay=Je}call(Ce,Je){return new _e(Je,this.delay,this.scheduler).subscribe(Ce)}}},3342:(ze,fe,F)=>{"use strict";F.d(fe,{b:()=>ie});var p=F(7393);function X(){}var L=F(9105);function ie(me,le,ee){return function(k){return k.lift(new oe(me,le,ee))}}class oe{constructor(le,ee,V){this.nextOrObserver=le,this.error=ee,this.complete=V}call(le,ee){return ee.subscribe(new ne(le,this.nextOrObserver,this.error,this.complete))}}class ne extends p.L{constructor(le,ee,V,k){super(le),this._tapNext=X,this._tapError=X,this._tapComplete=X,this._tapError=V||X,this._tapComplete=k||X,(0,L.m)(ee)?(this._context=this,this._tapNext=ee):ee&&(this._context=ee,this._tapNext=ee.next||X,this._tapError=ee.error||X,this._tapComplete=ee.complete||X)}_next(le){try{this._tapNext.call(this._context,le)}catch(ee){return void this.destination.error(ee)}this.destination.next(le)}_error(le){try{this._tapError.call(this._context,le)}catch(ee){return void this.destination.error(ee)}this.destination.error(le)}_complete(){try{this._tapComplete.call(this._context)}catch(le){return void this.destination.error(le)}return this.destination.complete()}}},4087:(ze,fe,F)=>{"use strict";F.d(fe,{r:()=>L});var p=F(8891),X=F(5319);function L(ie,oe){return new p.y(ne=>{const me=new X.w;let le=0;return me.add(oe.schedule(function(){le!==ie.length?(ne.next(ie[le++]),ne.closed||me.add(this.schedule())):ne.complete()})),me})}},6465:(ze,fe,F)=>{"use strict";F.d(fe,{o:()=>L});var p=F(5319);class X extends p.w{constructor(oe,ne){super()}schedule(oe,ne=0){return this}}class L extends X{constructor(oe,ne){super(oe,ne),this.scheduler=oe,this.work=ne,this.pending=!1}schedule(oe,ne=0){if(this.closed)return this;this.state=oe;const me=this.id,le=this.scheduler;return null!=me&&(this.id=this.recycleAsyncId(le,me,ne)),this.pending=!0,this.delay=ne,this.id=this.id||this.requestAsyncId(le,this.id,ne),this}requestAsyncId(oe,ne,me=0){return setInterval(oe.flush.bind(oe,this),me)}recycleAsyncId(oe,ne,me=0){if(null!==me&&this.delay===me&&!1===this.pending)return ne;clearInterval(ne)}execute(oe,ne){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const me=this._execute(oe,ne);if(me)return me;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(oe,ne){let le,me=!1;try{this.work(oe)}catch(ee){me=!0,le=!!ee&&ee||new Error(ee)}if(me)return this.unsubscribe(),le}_unsubscribe(){const oe=this.id,ne=this.scheduler,me=ne.actions,le=me.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==le&&me.splice(le,1),null!=oe&&(this.id=this.recycleAsyncId(ne,oe,null)),this.delay=null}}},6102:(ze,fe,F)=>{"use strict";F.d(fe,{v:()=>X});let p=(()=>{class L{constructor(oe,ne=L.now){this.SchedulerAction=oe,this.now=ne}schedule(oe,ne=0,me){return new this.SchedulerAction(this,oe).schedule(me,ne)}}return L.now=()=>Date.now(),L})();class X extends p{constructor(ie,oe=p.now){super(ie,()=>X.delegate&&X.delegate!==this?X.delegate.now():oe()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(ie,oe=0,ne){return X.delegate&&X.delegate!==this?X.delegate.schedule(ie,oe,ne):super.schedule(ie,oe,ne)}flush(ie){const{actions:oe}=this;if(this.active)return void oe.push(ie);let ne;this.active=!0;do{if(ne=ie.execute(ie.state,ie.delay))break}while(ie=oe.shift());if(this.active=!1,ne){for(;ie=oe.shift();)ie.unsubscribe();throw ne}}}},7771:(ze,fe,F)=>{"use strict";F.d(fe,{c:()=>ne,N:()=>oe});var p=F(6465),L=F(6102);const oe=new class extends L.v{}(class extends p.o{constructor(le,ee){super(le,ee),this.scheduler=le,this.work=ee}schedule(le,ee=0){return ee>0?super.schedule(le,ee):(this.delay=ee,this.state=le,this.scheduler.flush(this),this)}execute(le,ee){return ee>0||this.closed?super.execute(le,ee):this._execute(le,ee)}requestAsyncId(le,ee,V=0){return null!==V&&V>0||null===V&&this.delay>0?super.requestAsyncId(le,ee,V):le.flush(this)}}),ne=oe},377:(ze,fe,F)=>{"use strict";F.d(fe,{hZ:()=>X});const X="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},6554:(ze,fe,F)=>{"use strict";F.d(fe,{L:()=>p});const p="function"==typeof Symbol&&Symbol.observable||"@@observable"},9181:(ze,fe,F)=>{"use strict";F.d(fe,{b:()=>p});const p="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},7971:(ze,fe,F)=>{"use strict";F.d(fe,{N:()=>X});const X=(()=>{function L(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return L.prototype=Object.create(Error.prototype),L})()},4449:(ze,fe,F)=>{"use strict";function p(X){setTimeout(()=>{throw X},0)}F.d(fe,{z:()=>p})},4487:(ze,fe,F)=>{"use strict";function p(X){return X}F.d(fe,{y:()=>p})},9796:(ze,fe,F)=>{"use strict";F.d(fe,{k:()=>p});const p=Array.isArray||(X=>X&&"number"==typeof X.length)},9489:(ze,fe,F)=>{"use strict";F.d(fe,{z:()=>p});const p=X=>X&&"number"==typeof X.length&&"function"!=typeof X},9105:(ze,fe,F)=>{"use strict";function p(X){return"function"==typeof X}F.d(fe,{m:()=>p})},1555:(ze,fe,F)=>{"use strict";function p(X){return null!==X&&"object"==typeof X}F.d(fe,{K:()=>p})},4072:(ze,fe,F)=>{"use strict";function p(X){return!!X&&"function"!=typeof X.subscribe&&"function"==typeof X.then}F.d(fe,{t:()=>p})},4869:(ze,fe,F)=>{"use strict";function p(X){return X&&"function"==typeof X.schedule}F.d(fe,{K:()=>p})},4022:(ze,fe,F)=>{"use strict";F.d(fe,{z:()=>X,U:()=>L});var p=F(4487);function X(...ie){return L(ie)}function L(ie){return 0===ie.length?p.y:1===ie.length?ie[0]:function(ne){return ie.reduce((me,le)=>le(me),ne)}}},7444:(ze,fe,F)=>{"use strict";F.d(fe,{s:()=>k});var p=F(5015),X=F(4449),ie=F(377),ne=F(6554),le=F(9489),ee=F(4072),V=F(1555);const k=Y=>{if(Y&&"function"==typeof Y[ne.L])return(Y=>K=>{const se=Y[ne.L]();if("function"!=typeof se.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return se.subscribe(K)})(Y);if((0,le.z)(Y))return(0,p.V)(Y);if((0,ee.t)(Y))return(Y=>K=>(Y.then(se=>{K.closed||(K.next(se),K.complete())},se=>K.error(se)).then(null,X.z),K))(Y);if(Y&&"function"==typeof Y[ie.hZ])return(Y=>K=>{const se=Y[ie.hZ]();for(;;){let ke;try{ke=se.next()}catch(_e){return K.error(_e),K}if(ke.done){K.complete();break}if(K.next(ke.value),K.closed)break}return"function"==typeof se.return&&K.add(()=>{se.return&&se.return()}),K})(Y);{const se=`You provided ${(0,V.K)(Y)?"an invalid object":`'${Y}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(se)}}},5015:(ze,fe,F)=>{"use strict";F.d(fe,{V:()=>p});const p=X=>L=>{for(let ie=0,oe=X.length;ie<oe&&!L.closed;ie++)L.next(X[ie]);L.complete()}},1378:(ze,fe,F)=>{"use strict";var p=F(3018);let X=null;function L(){return X}const me=new p.OlP("DocumentToken");let le=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=(0,p.Yz7)({factory:ee,token:n,providedIn:"platform"}),n})();function ee(){return(0,p.LFG)(k)}const V=new p.OlP("Location Initialized");let k=(()=>{class n extends le{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return L().getBaseHref(this._doc)}onPopState(t){const r=L().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=L().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,a){Y()?this._history.pushState(t,r,a):this.location.hash=a}replaceState(t,r,a){Y()?this._history.replaceState(t,r,a):this.location.hash=a}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(me))},n.\u0275prov=(0,p.Yz7)({factory:K,token:n,providedIn:"platform"}),n})();function Y(){return!!window.history.pushState}function K(){return new k((0,p.LFG)(me))}function se(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function ke(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function _e(n){return n&&"?"!==n[0]?"?"+n:n}let ue=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=(0,p.Yz7)({factory:Ne,token:n,providedIn:"root"}),n})();function Ne(n){const e=(0,p.LFG)(me).location;return new Ce((0,p.LFG)(le),e&&e.origin||"")}const Le=new p.OlP("appBaseHref");let Ce=(()=>{class n extends ue{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return se(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+_e(this._platformLocation.search),a=this._platformLocation.hash;return a&&t?`${r}${a}`:r}pushState(t,r,a,c){const h=this.prepareExternalUrl(a+_e(c));this._platformLocation.pushState(t,r,h)}replaceState(t,r,a,c){const h=this.prepareExternalUrl(a+_e(c));this._platformLocation.replaceState(t,r,h)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,a;null===(a=(r=this._platformLocation).historyGo)||void 0===a||a.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(le),p.LFG(Le,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),Je=(()=>{class n extends ue{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=se(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,a,c){let h=this.prepareExternalUrl(a+_e(c));0==h.length&&(h=this._platformLocation.pathname),this._platformLocation.pushState(t,r,h)}replaceState(t,r,a,c){let h=this.prepareExternalUrl(a+_e(c));0==h.length&&(h=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,h)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,a;null===(a=(r=this._platformLocation).historyGo)||void 0===a||a.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(le),p.LFG(Le,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),ot=(()=>{class n{constructor(t,r){this._subject=new p.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const a=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=ke(Et(a)),this._platformStrategy.onPopState(c=>{this._subject.emit({url:this.path(!0),pop:!0,state:c.state,type:c.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+_e(r))}normalize(t){return n.stripTrailingSlash(function(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Et(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",a=null){this._platformStrategy.pushState(a,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+_e(r)),a)}replaceState(t,r="",a=null){this._platformStrategy.replaceState(a,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+_e(r)),a)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,a;null===(a=(r=this._platformStrategy).historyGo)||void 0===a||a.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(a=>a(t,r))}subscribe(t,r,a){return this._subject.subscribe({next:t,error:r,complete:a})}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(ue),p.LFG(le))},n.normalizeQueryParams=_e,n.joinWithSlash=se,n.stripTrailingSlash=ke,n.\u0275prov=(0,p.Yz7)({factory:Be,token:n,providedIn:"root"}),n})();function Be(){return new ot((0,p.LFG)(ue),(0,p.LFG)(le))}function Et(n){return n.replace(/\/index.html$/,"")}var je=(()=>((je=je||{})[je.Zero=0]="Zero",je[je.One=1]="One",je[je.Two=2]="Two",je[je.Few=3]="Few",je[je.Many=4]="Many",je[je.Other=5]="Other",je))();const Un=p.kL8;class gr{}let fn=(()=>{class n extends gr{constructor(t){super(),this.locale=t}getPluralCategory(t,r){switch(Un(r||this.locale)(t)){case je.Zero:return"zero";case je.One:return"one";case je.Two:return"two";case je.Few:return"few";case je.Many:return"many";default:return"other"}}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(p.soG))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();function St(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[a,c]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(a.trim()===e)return decodeURIComponent(c)}return null}class Fu{constructor(e,t,r,a){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=a}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Lr=(()=>{class n{constructor(t,r,a){this._viewContainer=t,this._template=r,this._differs=a,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;if(!this._differ&&t)try{this._differ=this._differs.find(t).create(this.ngForTrackBy)}catch(r){throw new Error(`Cannot find a differ supporting object '${t}' of type '${function(n){return n.name||typeof n}(t)}'. NgFor only supports binding to Iterables such as Arrays.`)}}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=[];t.forEachOperation((a,c,h)=>{if(null==a.previousIndex){const y=this._viewContainer.createEmbeddedView(this._template,new Fu(null,this._ngForOf,-1,-1),null===h?void 0:h),w=new wr(a,y);r.push(w)}else if(null==h)this._viewContainer.remove(null===c?void 0:c);else if(null!==c){const y=this._viewContainer.get(c);this._viewContainer.move(y,h);const w=new wr(a,y);r.push(w)}});for(let a=0;a<r.length;a++)this._perViewChange(r[a].view,r[a].record);for(let a=0,c=this._viewContainer.length;a<c;a++){const h=this._viewContainer.get(a);h.context.index=a,h.context.count=c,h.context.ngForOf=this._ngForOf}t.forEachIdentityChange(a=>{this._viewContainer.get(a.currentIndex).context.$implicit=a.item})}_perViewChange(t,r){t.context.$implicit=r.item}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.s_b),p.Y36(p.Rgc),p.Y36(p.ZZ4))},n.\u0275dir=p.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();class wr{constructor(e,t){this.record=e,this.view=t}}let Vr=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Li,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){rn("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){rn("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.s_b),p.Y36(p.Rgc))},n.\u0275dir=p.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class Li{constructor(){this.$implicit=null,this.ngIf=null}}function rn(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,p.AaK)(e)}'.`)}class Lu{createSubscription(e,t){return e.subscribe({next:t,error:r=>{throw r}})}dispose(e){e.unsubscribe()}onDestroy(e){e.unsubscribe()}}class Vu{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}onDestroy(e){}}const bs=new Vu,Ci=new Lu;let Uu=(()=>{class n{constructor(t){this._ref=t,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if((0,p.QGY)(t))return bs;if((0,p.F4k)(t))return Ci;throw function(n,e){return Error(`InvalidPipeArgument: '${e}' for pipe '${(0,p.AaK)(n)}'`)}(n,t)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.sBO,16))},n.\u0275pipe=p.Yjl({name:"async",type:n,pure:!1}),n})(),Ud=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[{provide:gr,useClass:fn}]}),n})(),Qa=(()=>{class n{}return n.\u0275prov=(0,p.Yz7)({token:n,providedIn:"root",factory:()=>new il((0,p.LFG)(me),window)}),n})();class il{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let a=r.currentNode;for(;a;){const c=a.shadowRoot;if(c){const h=c.getElementById(e)||c.querySelector(`[name="${e}"]`);if(h)return h}a=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),this.attemptFocus(t))}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,a=t.top+this.window.pageYOffset,c=this.offset();this.window.scrollTo(r-c[0],a-c[1])}attemptFocus(e){return e.focus(),this.document.activeElement===e}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=ju(this.window.history)||ju(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function ju(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Ui{}class ua extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var n;n=new ua,X||(X=n)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=(Bi=Bi||document.querySelector("base"),Bi?Bi.getAttribute("href"):null);return null==t?null:function(n){yo=yo||document.createElement("a"),yo.setAttribute("href",n);const e=yo.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Bi=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return St(document.cookie,e)}}let yo,Bi=null;const Gs=new p.OlP("TRANSITION_ID"),jd=[{provide:p.ip1,useFactory:function(n,e,t){return()=>{t.get(p.CZH).donePromise.then(()=>{const r=L(),a=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let c=0;c<a.length;c++)r.remove(a[c])})}},deps:[Gs,me,p.zs3],multi:!0}];class Vt{static init(){(0,p.VLi)(new Vt)}addToWindow(e){p.dqk.getAngularTestability=(r,a=!0)=>{const c=e.findTestabilityInTree(r,a);if(null==c)throw new Error("Could not find testability for element.");return c},p.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),p.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),p.dqk.frameworkStabilizers||(p.dqk.frameworkStabilizers=[]),p.dqk.frameworkStabilizers.push(r=>{const a=p.dqk.getAllAngularTestabilities();let c=a.length,h=!1;const y=function(w){h=h||w,c--,0==c&&r(h)};a.forEach(function(w){w.whenStable(y)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const a=e.getTestability(t);return null!=a?a:r?L().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let Hd=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const Ds=new p.OlP("EventManagerPlugins");let vo=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(a=>a.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,a){return this._findPluginFor(r).addEventListener(t,r,a)}addGlobalEventListener(t,r,a){return this._findPluginFor(r).addGlobalEventListener(t,r,a)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const a=this._plugins;for(let c=0;c<a.length;c++){const h=a[c];if(h.supports(t))return this._eventNameToPlugin.set(t,h),h}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Ds),p.LFG(p.R0b))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();class Eo{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const a=L().getGlobalEventTarget(this._doc,e);if(!a)throw new Error(`Unsupported event target ${a} for event ${t}`);return this.addEventListener(a,t,r)}}let ca=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(a=>{this._stylesSet.has(a)||(this._stylesSet.add(a),r.add(a))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),Ts=(()=>{class n extends ca{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,a){t.forEach(c=>{const h=this._doc.createElement("style");h.textContent=c,a.push(r.appendChild(h))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(sl),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,a)=>{this._addStylesToHost(t,a,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(sl))}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(me))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();function sl(n){L().remove(n)}const Ee={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Bt=/%COMP%/g;function zs(n,e,t){for(let r=0;r<e.length;r++){let a=e[r];Array.isArray(a)?zs(n,a,t):(a=a.replace(Bt,n),t.push(a))}return t}function qd(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let da=(()=>{class n{constructor(t,r,a){this.eventManager=t,this.sharedStylesHost=r,this.appId=a,this.rendererByCompId=new Map,this.defaultRenderer=new ns(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case p.ifc.Emulated:{let a=this.rendererByCompId.get(r.id);return a||(a=new Ws(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,a)),a.applyToHost(t),a}case 1:case p.ifc.ShadowDom:return new ji(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const a=zs(r.id,r.styles,[]);this.sharedStylesHost.addStyles(a),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(vo),p.LFG(Ts),p.LFG(p.AFp))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();class ns{constructor(e){this.eventManager=e,this.data=Object.create(null)}destroy(){}createElement(e,t){return t?document.createElementNS(Ee[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,a){if(a){t=a+":"+t;const c=Ee[a];c?e.setAttributeNS(c,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const a=Ee[r];a?e.removeAttributeNS(a,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,a){a&(p.JOm.DashCase|p.JOm.Important)?e.style.setProperty(t,r,a&p.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&p.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,qd(r)):this.eventManager.addEventListener(e,t,qd(r))}}class Ws extends ns{constructor(e,t,r,a){super(e),this.component=r;const c=zs(a+"-"+r.id,r.styles,[]);t.addStyles(c),this.contentAttr="_ngcontent-%COMP%".replace(Bt,a+"-"+r.id),this.hostAttr=function(n){return"_nghost-%COMP%".replace(Bt,n)}(a+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class ji extends ns{constructor(e,t,r,a){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const c=zs(a.id,a.styles,[]);for(let h=0;h<c.length;h++){const y=document.createElement("style");y.textContent=c[h],this.shadowRoot.appendChild(y)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let ol=(()=>{class n extends Eo{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,a){return t.addEventListener(r,a,!1),()=>this.removeEventListener(t,r,a)}removeEventListener(t,r,a){return t.removeEventListener(r,a)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(me))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const Io=["alt","control","meta","shift"],pa={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ul={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},jr={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let ai=(()=>{class n extends Eo{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,a){const c=n.parseEventName(r),h=n.eventCallback(c.fullKey,a,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>L().onAndCancel(t,c.domEventName,h))}static parseEventName(t){const r=t.toLowerCase().split("."),a=r.shift();if(0===r.length||"keydown"!==a&&"keyup"!==a)return null;const c=n._normalizeKey(r.pop());let h="";if(Io.forEach(w=>{const D=r.indexOf(w);D>-1&&(r.splice(D,1),h+=w+".")}),h+=c,0!=r.length||0===c.length)return null;const y={};return y.domEventName=a,y.fullKey=h,y}static getEventFullKey(t){let r="",a=function(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&ul.hasOwnProperty(e)&&(e=ul[e]))}return pa[e]||e}(t);return a=a.toLowerCase()," "===a?a="space":"."===a&&(a="dot"),Io.forEach(c=>{c!=a&&jr[c](t)&&(r+=c+".")}),r+=a,r}static eventCallback(t,r,a){return c=>{n.getEventFullKey(c)===t&&a.runGuarded(()=>r(c))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(me))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const ll=(0,p.eFA)(p._c5,"browser",[{provide:p.Lbi,useValue:"browser"},{provide:p.g9A,useValue:function(){ua.makeCurrent(),Vt.init()},multi:!0},{provide:me,useFactory:function(){return(0,p.RDi)(document),document},deps:[]}]),ui=[[],{provide:p.zSh,useValue:"root"},{provide:p.qLn,useFactory:function(){return new p.qLn},deps:[]},{provide:Ds,useClass:ol,multi:!0,deps:[me,p.R0b,p.Lbi]},{provide:Ds,useClass:ai,multi:!0,deps:[me]},[],{provide:da,useClass:da,deps:[vo,Ts,p.AFp]},{provide:p.FYo,useExisting:da},{provide:ca,useExisting:Ts},{provide:Ts,useClass:Ts,deps:[me]},{provide:p.dDg,useClass:p.dDg,deps:[p.R0b]},{provide:vo,useClass:vo,deps:[Ds,p.R0b]},{provide:Ui,useClass:Hd,deps:[]},[]];let ma=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:p.AFp,useValue:t.appId},{provide:Gs,useExisting:p.AFp},jd]}}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(n,12))},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:ui,imports:[Ud,p.hGG]}),n})();"undefined"!=typeof window&&window;var mn=F(4402),ft=F(5917),ci=F(9765),Do=F(7971);class Cr extends ci.xQ{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return t&&!t.closed&&e.next(this._value),t}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new Do.N;return this._value}next(e){super.next(this._value=e)}}var nc=F(4869),Zs=F(9796),li=F(7393);class au extends li.L{notifyNext(e,t,r,a,c){this.destination.next(t)}notifyError(e,t){this.destination.error(e)}notifyComplete(e){this.destination.complete()}}class Xd extends li.L{constructor(e,t,r){super(),this.parent=e,this.outerValue=t,this.outerIndex=r,this.index=0}_next(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)}_error(e){this.parent.notifyError(e,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var As=F(7444),Hr=F(8891);function eh(n,e,t,r,a=new Xd(n,t,r)){if(!a.closed)return e instanceof Hr.y?e.subscribe(a):(0,As.s)(e)(a)}var To=F(6693);const th={};class _a{constructor(e){this.resultSelector=e}call(e,t){return t.subscribe(new rc(e,this.resultSelector))}}class rc extends au{constructor(e,t){super(e),this.resultSelector=t,this.active=0,this.values=[],this.observables=[]}_next(e){this.values.push(th),this.observables.push(e)}_complete(){const e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(let r=0;r<t;r++)this.add(eh(this,e[r],void 0,r))}}notifyComplete(e){0==(this.active-=1)&&this.destination.complete()}notifyNext(e,t,r){const a=this.values,h=this.toRespond?a[r]===th?--this.toRespond:this.toRespond:0;a[r]=t,0===h&&(this.resultSelector?this._tryResultSelector(a):this.destination.next(a.slice()))}_tryResultSelector(e){let t;try{t=this.resultSelector.apply(this,e)}catch(r){return void this.destination.error(r)}this.destination.next(t)}}const Ks=(()=>{function n(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return n.prototype=Object.create(Error.prototype),n})();var rs=F(3282);function Ys(...n){return(0,rs.J)(1)((0,ft.of)(...n))}var Ss=F(9193);function ss(n){return new Hr.y(e=>{let t;try{t=n()}catch(a){return void e.error(a)}return(t?(0,mn.D)(t):(0,Ss.c)()).subscribe(e)})}var Ao=F(2441),wt=F(8002),di=F(5345);function Qn(n,e){return"function"==typeof e?t=>t.pipe(Qn((r,a)=>(0,mn.D)(n(r,a)).pipe((0,wt.U)((c,h)=>e(r,c,a,h))))):t=>t.lift(new $i(n))}class $i{constructor(e){this.project=e}call(e,t){return t.subscribe(new Lm(e,this.project))}}class Lm extends di.Ds{constructor(e,t){super(e),this.project=t,this.index=0}_next(e){let t;const r=this.index++;try{t=this.project(e,r)}catch(a){return void this.destination.error(a)}this._innerSub(t)}_innerSub(e){const t=this.innerSubscription;t&&t.unsubscribe();const r=new di.IY(this),a=this.destination;a.add(r),this.innerSubscription=(0,di.ft)(e,r),this.innerSubscription!==r&&a.add(this.innerSubscription)}_complete(){const{innerSubscription:e}=this;(!e||e.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(e){this.destination.next(e)}}const cp=(()=>{function n(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return n.prototype=Object.create(Error.prototype),n})();function sc(n){return e=>0===n?(0,Ss.c)():e.lift(new lp(n))}class lp{constructor(e){if(this.total=e,this.total<0)throw new cp}call(e,t){return t.subscribe(new bn(e,this.total))}}class bn extends li.L{constructor(e,t){super(e),this.total=t,this.count=0}_next(e){const t=this.total,r=++this.count;r<=t&&(this.destination.next(e),r===t&&(this.destination.complete(),this.unsubscribe()))}}function pl(n,e){let t=!1;return arguments.length>=2&&(t=!0),function(a){return a.lift(new va(n,e,t))}}class va{constructor(e,t,r=!1){this.accumulator=e,this.seed=t,this.hasSeed=r}call(e,t){return t.subscribe(new Bm(e,this.accumulator,this.seed,this.hasSeed))}}class Bm extends li.L{constructor(e,t,r,a){super(e),this.accumulator=t,this._seed=r,this.hasSeed=a,this.index=0}get seed(){return this._seed}set seed(e){this.hasSeed=!0,this._seed=e}_next(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)}_tryNext(e){const t=this.index++;let r;try{r=this.accumulator(this.seed,e,t)}catch(a){this.destination.error(a)}this.seed=r,this.destination.next(r)}}function So(n,e){return function(r){return r.lift(new jm(n,e))}}class jm{constructor(e,t){this.predicate=e,this.thisArg=t}call(e,t){return t.subscribe(new nh(e,this.predicate,this.thisArg))}}class nh extends li.L{constructor(e,t,r){super(e),this.predicate=t,this.thisArg=r,this.count=0}_next(e){let t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(r){return void this.destination.error(r)}t&&this.destination.next(e)}}function uu(n){return function(t){const r=new dp(n),a=t.lift(r);return r.caught=a}}class dp{constructor(e){this.selector=e}call(e,t){return t.subscribe(new hp(e,this.selector,this.caught))}}class hp extends di.Ds{constructor(e,t,r){super(e),this.selector=t,this.caught=r}error(e){if(!this.isStopped){let t;try{t=this.selector(e,this.caught)}catch(c){return void super.error(c)}this._unsubscribeAndRecycle();const r=new di.IY(this);this.add(r);const a=(0,di.ft)(t,r);a!==r&&this.add(a)}}}var $r=F(9773);function os(n,e){return(0,$r.zg)(n,e,1)}function cu(n){return function(t){return 0===n?(0,Ss.c)():t.lift(new An(n))}}class An{constructor(e){if(this.total=e,this.total<0)throw new cp}call(e,t){return t.subscribe(new Ea(e,this.total))}}class Ea extends li.L{constructor(e,t){super(e),this.total=t,this.ring=new Array,this.count=0}_next(e){const t=this.ring,r=this.total,a=this.count++;t.length<r?t.push(e):t[a%r]=e}_complete(){const e=this.destination;let t=this.count;if(t>0){const r=this.count>=this.total?this.total:this.count,a=this.ring;for(let c=0;c<r;c++){const h=t++%r;e.next(a[h])}}e.complete()}}function xo(n=Gr){return e=>e.lift(new oc(n))}class oc{constructor(e){this.errorFactory=e}call(e,t){return t.subscribe(new gl(e,this.errorFactory))}}class gl extends li.L{constructor(e,t){super(e),this.errorFactory=t,this.hasValue=!1}_next(e){this.hasValue=!0,this.destination.next(e)}_complete(){if(this.hasValue)return this.destination.complete();{let e;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)}}}function Gr(){return new Ks}function hi(n=null){return e=>e.lift(new ml(n))}class ml{constructor(e){this.defaultValue=e}call(e,t){return t.subscribe(new ba(e,this.defaultValue))}}class ba extends li.L{constructor(e,t){super(e),this.defaultValue=t,this.isEmpty=!0}_next(e){this.isEmpty=!1,this.destination.next(e)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}var xs=F(4487);function Ro(n,e){const t=arguments.length>=2;return r=>r.pipe(n?So((a,c)=>n(a,c,r)):xs.y,sc(1),t?hi(e):xo(()=>new Ks))}var Jn=F(3342),yl=F(1307),fp=F(5319);class $n{constructor(e){this.callback=e}call(e,t){return t.subscribe(new lu(e,this.callback))}}class lu extends li.L{constructor(e,t){super(e),this.add(new fp.w(t))}}class On{constructor(e,t){this.id=e,this.url=t}}class _l extends On{constructor(e,t,r="imperative",a=null){super(e,t),this.navigationTrigger=r,this.restoredState=a}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Qs extends On{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class du extends On{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class pp extends On{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class vl extends On{constructor(e,t,r,a){super(e,t),this.urlAfterRedirects=r,this.state=a}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class uc extends On{constructor(e,t,r,a){super(e,t),this.urlAfterRedirects=r,this.state=a}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class I extends On{constructor(e,t,r,a,c){super(e,t),this.urlAfterRedirects=r,this.state=a,this.shouldActivate=c}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class A extends On{constructor(e,t,r,a){super(e,t),this.urlAfterRedirects=r,this.state=a}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class M extends On{constructor(e,t,r,a){super(e,t),this.urlAfterRedirects=r,this.state=a}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class U{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Z{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class re{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class be{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Fe{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ct{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class _t{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Ue="primary";class at{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Pn(n){return new at(n)}const Xn="ngNavigationCancelingError";function Ti(n){const e=Error("NavigationCancelingError: "+n);return e[Xn]=!0,e}function us(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const a={};for(let c=0;c<r.length;c++){const h=r[c],y=n[c];if(h.startsWith(":"))a[h.substring(1)]=y;else if(h!==y.path)return null}return{consumed:n.slice(0,r.length),posParams:a}}function fi(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let a;for(let c=0;c<t.length;c++)if(a=t[c],!Mo(n[a],e[a]))return!1;return!0}function Mo(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((a,c)=>r[c]===a)}return n===e}function yr(n){return Array.prototype.concat.apply([],n)}function pi(n){return n.length>0?n[n.length-1]:null}function er(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function cs(n){return(0,p.CqO)(n)?n:(0,p.QGY)(n)?(0,mn.D)(Promise.resolve(n)):(0,ft.of)(n)}const cc={exact:function Hm(n,e,t){if(!Ia(n.segments,e.segments)||!fu(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!Hm(n.children[r],e.children[r],t))return!1;return!0},subset:sh},Js={exact:function(n,e){return fi(n,e)},subset:function(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Mo(n[t],e[t]))},ignored:()=>!0};function hu(n,e,t){return cc[t.paths](n.root,e.root,t.matrixParams)&&Js[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function sh(n,e,t){return El(n,e,e.segments,t)}function El(n,e,t,r){if(n.segments.length>t.length){const a=n.segments.slice(0,t.length);return!(!Ia(a,t)||e.hasChildren()||!fu(a,t,r))}if(n.segments.length===t.length){if(!Ia(n.segments,t)||!fu(n.segments,t,r))return!1;for(const a in e.children)if(!n.children[a]||!sh(n.children[a],e.children[a],r))return!1;return!0}{const a=t.slice(0,n.segments.length),c=t.slice(n.segments.length);return!!(Ia(n.segments,a)&&fu(n.segments,a,r)&&n.children[Ue])&&El(n.children[Ue],e,c,r)}}function fu(n,e,t){return e.every((r,a)=>Js[t](n[a].parameters,r.parameters))}class pu{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Pn(this.queryParams)),this._queryParamMap}toString(){return Tv.serialize(this)}}class jt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,er(t,(r,a)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return bl(this)}}class Gi{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Pn(this.parameters)),this._parameterMap}toString(){return Av(this)}}function Ia(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class oh{}class mp{parse(e){const t=new Rv(e);return new pu(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${wl(e.root,!0)}`,r=function(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(a=>`${No(t)}=${No(a)}`).join("&"):`${No(t)}=${No(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);var n;return`${t}${r}${"string"==typeof e.fragment?`#${n=e.fragment,encodeURI(n)}`:""}`}}const Tv=new mp;function bl(n){return n.segments.map(e=>Av(e)).join("/")}function wl(n,e){if(!n.hasChildren())return bl(n);if(e){const t=n.children[Ue]?wl(n.children[Ue],!1):"",r=[];return er(n.children,(a,c)=>{c!==Ue&&r.push(`${c}:${wl(a,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function(n,e){let t=[];return er(n.children,(r,a)=>{a===Ue&&(t=t.concat(e(r,a)))}),er(n.children,(r,a)=>{a!==Ue&&(t=t.concat(e(r,a)))}),t}(n,(r,a)=>a===Ue?[wl(n.children[Ue],!1)]:[`${a}:${wl(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Ue]?`${bl(n)}/${t[0]}`:`${bl(n)}/(${t.join("//")})`}}function yp(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function No(n){return yp(n).replace(/%3B/gi,";")}function Ca(n){return yp(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ah(n){return decodeURIComponent(n)}function uh(n){return ah(n.replace(/\+/g,"%20"))}function Av(n){return`${Ca(n.path)}${function(n){return Object.keys(n).map(e=>`;${Ca(e)}=${Ca(n[e])}`).join("")}(n.parameters)}`}const Gm=/^[^\/()?;=#]+/;function Da(n){const e=n.match(Gm);return e?e[0]:""}const qm=/^[^=?&#]+/,Sv=/^[^?&#]+/;class Rv{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new jt([],{}):new jt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Ue]=new jt(e,t)),r}parseSegment(){const e=Da(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new Gi(ah(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Da(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const a=Da(this.remaining);a&&(r=a,this.capture(r))}e[ah(t)]=ah(r)}parseQueryParam(e){const t=function(n){const e=n.match(qm);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const h=function(n){const e=n.match(Sv);return e?e[0]:""}(this.remaining);h&&(r=h,this.capture(r))}const a=uh(t),c=uh(r);if(e.hasOwnProperty(a)){let h=e[a];Array.isArray(h)||(h=[h],e[a]=h),h.push(c)}else e[a]=c}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Da(this.remaining),a=this.remaining[r.length];if("/"!==a&&")"!==a&&";"!==a)throw new Error(`Cannot parse url '${this.url}'`);let c;r.indexOf(":")>-1?(c=r.substr(0,r.indexOf(":")),this.capture(c),this.capture(":")):e&&(c=Ue);const h=this.parseChildren();t[c]=1===Object.keys(h).length?h[Ue]:new jt([],h),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class zm{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=vp(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=vp(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Rs(e,this._root);return t.length<2?[]:t[t.length-2].children.map(a=>a.value).filter(a=>a!==e)}pathFromRoot(e){return Rs(e,this._root).map(t=>t.value)}}function vp(n,e){if(n===e.value)return e;for(const t of e.children){const r=vp(n,t);if(r)return r}return null}function Rs(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Rs(n,t);if(r.length)return r.unshift(e),r}return[]}class qr{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function lc(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Wm extends zm{constructor(e,t){super(e),this.snapshot=t,bp(this,e)}toString(){return this.snapshot.toString()}}function Zm(n,e){const t=function(n,e){const h=new dh([],{},{},"",{},Ue,e,null,n.root,-1,{});return new Ym("",new qr(h,[]))}(n,e),r=new Cr([new Gi("",{})]),a=new Cr({}),c=new Cr({}),h=new Cr({}),y=new Cr(""),w=new Ta(r,a,h,y,c,Ue,e,t.root);return w.snapshot=t.root,new Wm(new qr(w,[]),t)}class Ta{constructor(e,t,r,a,c,h,y,w){this.url=e,this.params=t,this.queryParams=r,this.fragment=a,this.data=c,this.outlet=h,this.component=y,this._futureSnapshot=w}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,wt.U)(e=>Pn(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,wt.U)(e=>Pn(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Ep(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const a=t[r],c=t[r-1];if(a.routeConfig&&""===a.routeConfig.path)r--;else{if(c.component)break;r--}}return function(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class dh{constructor(e,t,r,a,c,h,y,w,D,R,O){this.url=e,this.params=t,this.queryParams=r,this.fragment=a,this.data=c,this.outlet=h,this.component=y,this.routeConfig=w,this._urlSegment=D,this._lastPathIndex=R,this._resolve=O}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Pn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Pn(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Ym extends zm{constructor(e,t){super(t),this.url=e,bp(this,t)}toString(){return hh(this._root)}}function bp(n,e){e.value._routerState=n,e.children.forEach(t=>bp(n,t))}function hh(n){const e=n.children.length>0?` { ${n.children.map(hh).join(", ")} } `:"";return`${n.value}${e}`}function Qm(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,fi(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),fi(e.params,t.params)||n.params.next(t.params),function(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!fi(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),fi(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Il(n,e){const t=fi(n.params,e.params)&&function(n,e){return Ia(n,e)&&n.every((t,r)=>fi(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Il(n.parent,e.parent))}function dc(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const a=function(n,e,t){return e.children.map(r=>{for(const a of t.children)if(n.shouldReuseRoute(r.value,a.value.snapshot))return dc(n,r,a);return dc(n,r)})}(n,e,t);return new qr(r,a)}{if(n.shouldAttach(e.value)){const c=n.retrieve(e.value);if(null!==c){const h=c.route;return Ms(e,h),h}}const r=function(n){return new Ta(new Cr(n.url),new Cr(n.params),new Cr(n.queryParams),new Cr(n.fragment),new Cr(n.data),n.outlet,n.component,n)}(e.value),a=e.children.map(c=>dc(n,c));return new qr(r,a)}}function Ms(n,e){if(n.value.routeConfig!==e.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(n.children.length!==e.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");e.value._futureSnapshot=n.value;for(let t=0;t<n.children.length;++t)Ms(n.children[t],e.children[t])}function hc(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function fh(n){return"object"==typeof n&&null!=n&&n.outlets}function Xm(n,e,t,r,a){let c={};return r&&er(r,(h,y)=>{c[y]=Array.isArray(h)?h.map(w=>`${w}`):`${h}`}),new pu(t.root===n?e:Nv(t.root,n,e),c,a)}function Nv(n,e,t){const r={};return er(n.children,(a,c)=>{r[c]=a===e?t:Nv(a,e,t)}),new jt(n.segments,r)}class ph{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&hc(r[0]))throw new Error("Root segment cannot have matrix parameters");const a=r.find(fh);if(a&&a!==pi(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class fc{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function ey(n,e,t){if(n||(n=new jt([],{})),0===n.segments.length&&n.hasChildren())return gh(n,e,t);const r=function(n,e,t){let r=0,a=e;const c={match:!1,pathIndex:0,commandIndex:0};for(;a<n.segments.length;){if(r>=t.length)return c;const h=n.segments[a],y=t[r];if(fh(y))break;const w=`${y}`,D=r<t.length-1?t[r+1]:null;if(a>0&&void 0===w)break;if(w&&D&&"object"==typeof D&&void 0===D.outlets){if(!Tp(w,D,h))return c;r+=2}else{if(!Tp(w,{},h))return c;r++}a++}return{match:!0,pathIndex:a,commandIndex:r}}(n,e,t),a=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const c=new jt(n.segments.slice(0,r.pathIndex),{});return c.children[Ue]=new jt(n.segments.slice(r.pathIndex),n.children),gh(c,0,a)}return r.match&&0===a.length?new jt(n.segments,{}):r.match&&!n.hasChildren()?Dp(n,e,t):r.match?gh(n,0,a):Dp(n,e,t)}function gh(n,e,t){if(0===t.length)return new jt(n.segments,{});{const r=function(n){return fh(n[0])?n[0].outlets:{[Ue]:n}}(t),a={};return er(r,(c,h)=>{"string"==typeof c&&(c=[c]),null!==c&&(a[h]=ey(n.children[h],e,c))}),er(n.children,(c,h)=>{void 0===r[h]&&(a[h]=c)}),new jt(n.segments,a)}}function Dp(n,e,t){const r=n.segments.slice(0,e);let a=0;for(;a<t.length;){const c=t[a];if(fh(c)){const w=mh(c.outlets);return new jt(r,w)}if(0===a&&hc(t[0])){r.push(new Gi(n.segments[e].path,Dl(t[0]))),a++;continue}const h=fh(c)?c.outlets[Ue]:`${c}`,y=a<t.length-1?t[a+1]:null;h&&y&&hc(y)?(r.push(new Gi(h,Dl(y))),a+=2):(r.push(new Gi(h,{})),a++)}return new jt(r,{})}function mh(n){const e={};return er(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=Dp(new jt([],{}),0,t))}),e}function Dl(n){const e={};return er(n,(t,r)=>e[r]=`${t}`),e}function Tp(n,e,t){return n==t.path&&fi(e,t.parameters)}class Ov{constructor(e,t,r,a){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=a}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Qm(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const a=lc(t);e.children.forEach(c=>{const h=c.value.outlet;this.deactivateRoutes(c,a[h],r),delete a[h]}),er(a,(c,h)=>{this.deactivateRouteAndItsChildren(c,r)})}deactivateRoutes(e,t,r){const a=e.value,c=t?t.value:null;if(a===c)if(a.component){const h=r.getContext(a.outlet);h&&this.deactivateChildRoutes(e,t,h.children)}else this.deactivateChildRoutes(e,t,r);else c&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet);if(r&&r.outlet){const a=r.outlet.detach(),c=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:a,route:e,contexts:c})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),a=r&&e.value.component?r.children:t,c=lc(e);for(const h of Object.keys(c))this.deactivateRouteAndItsChildren(c[h],a);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const a=lc(t);e.children.forEach(c=>{this.activateRoutes(c,a[c.value.outlet],r),this.forwardEvent(new ct(c.value.snapshot))}),e.children.length&&this.forwardEvent(new be(e.value.snapshot))}activateRoutes(e,t,r){const a=e.value,c=t?t.value:null;if(Qm(a),a===c)if(a.component){const h=r.getOrCreateContext(a.outlet);this.activateChildRoutes(e,t,h.children)}else this.activateChildRoutes(e,t,r);else if(a.component){const h=r.getOrCreateContext(a.outlet);if(this.routeReuseStrategy.shouldAttach(a.snapshot)){const y=this.routeReuseStrategy.retrieve(a.snapshot);this.routeReuseStrategy.store(a.snapshot,null),h.children.onOutletReAttached(y.contexts),h.attachRef=y.componentRef,h.route=y.route.value,h.outlet&&h.outlet.attach(y.componentRef,y.route.value),Sn(y.route)}else{const y=function(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(a.snapshot),w=y?y.module.componentFactoryResolver:null;h.attachRef=null,h.route=a,h.resolver=w,h.outlet&&h.outlet.activateWith(a,w),this.activateChildRoutes(e,null,h.children)}}else this.activateChildRoutes(e,null,r)}}function Sn(n){Qm(n.value),n.children.forEach(Sn)}class Sp{constructor(e,t){this.routes=e,this.module=t}}function Xs(n){return"function"==typeof n}function _u(n){return n instanceof pu}const yh=Symbol("INITIAL_VALUE");function pc(){return Qn(n=>function(...n){let e,t;return(0,nc.K)(n[n.length-1])&&(t=n.pop()),"function"==typeof n[n.length-1]&&(e=n.pop()),1===n.length&&(0,Zs.k)(n[0])&&(n=n[0]),(0,To.n)(n,t).lift(new _a(e))}(n.map(e=>e.pipe(sc(1),function(...n){const e=n[n.length-1];return(0,nc.K)(e)?(n.pop(),t=>Ys(n,t,e)):t=>Ys(n,t)}(yh)))).pipe(pl((e,t)=>{let r=!1;return t.reduce((a,c,h)=>a!==yh?a:(c===yh&&(r=!0),r||!1!==c&&h!==t.length-1&&!_u(c)?a:c),e)},yh),So(e=>e!==yh),(0,wt.U)(e=>_u(e)?e:!0===e),sc(1)))}let Sa=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&p._UZ(0,"router-outlet")},directives:function(){return[gy]},encapsulation:2}),n})();function zr(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];Rp(r,Al(e,r))}}function Rp(n,e){n.children&&zr(n.children,e)}function Al(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function _h(n){const e=n.children&&n.children.map(_h),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Ue&&(t.component=Sa),t}function un(n){return n.outlet||Ue}function gc(n,e){const t=n.filter(r=>un(r)===e);return t.push(...n.filter(r=>un(r)!==e)),t}const Sl={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function vh(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},Sl):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const c=(e.matcher||us)(t,n,e);if(!c)return Object.assign({},Sl);const h={};er(c.posParams,(w,D)=>{h[D]=w.path});const y=c.consumed.length>0?Object.assign(Object.assign({},h),c.consumed[c.consumed.length-1].parameters):h;return{matched:!0,consumedSegments:c.consumed,lastChild:c.consumed.length,parameters:y,positionalParamSegments:null!==(r=c.posParams)&&void 0!==r?r:{}}}function Eh(n,e,t,r,a="corrected"){if(t.length>0&&function(n,e,t){return t.some(r=>yc(n,e,r)&&un(r)!==Ue)}(n,t,r)){const h=new jt(e,function(n,e,t,r){const a={};a[Ue]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const c of t)if(""===c.path&&un(c)!==Ue){const h=new jt([],{});h._sourceSegment=n,h._segmentIndexShift=e.length,a[un(c)]=h}return a}(n,e,r,new jt(t,n.children)));return h._sourceSegment=n,h._segmentIndexShift=e.length,{segmentGroup:h,slicedSegments:[]}}if(0===t.length&&function(n,e,t){return t.some(r=>yc(n,e,r))}(n,t,r)){const h=new jt(n.segments,function(n,e,t,r,a,c){const h={};for(const y of r)if(yc(n,t,y)&&!a[un(y)]){const w=new jt([],{});w._sourceSegment=n,w._segmentIndexShift="legacy"===c?n.segments.length:e.length,h[un(y)]=w}return Object.assign(Object.assign({},a),h)}(n,e,t,r,n.children,a));return h._sourceSegment=n,h._segmentIndexShift=e.length,{segmentGroup:h,slicedSegments:t}}const c=new jt(n.segments,n.children);return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:t}}function yc(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function iy(n,e,t,r){return!!(un(n)===r||r!==Ue&&yc(e,t,n))&&("**"===n.path||vh(e,n,t).matched)}function sy(n,e,t){return 0===e.length&&!n.children[t]}class xl{constructor(e){this.segmentGroup=e||null}}class Mp{constructor(e){this.urlTree=e}}function vu(n){return new Hr.y(e=>e.error(new xl(n)))}function Rl(n){return new Hr.y(e=>e.error(new Mp(n)))}function Np(n){return new Hr.y(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`)))}class _c{constructor(e,t,r,a,c){this.configLoader=t,this.urlSerializer=r,this.urlTree=a,this.config=c,this.allowRedirects=!0,this.ngModule=e.get(p.h0i)}apply(){const e=Eh(this.urlTree.root,[],[],this.config).segmentGroup,t=new jt(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,Ue).pipe((0,wt.U)(c=>this.createUrlTree(gi(c),this.urlTree.queryParams,this.urlTree.fragment))).pipe(uu(c=>{if(c instanceof Mp)return this.allowRedirects=!1,this.match(c.urlTree);throw c instanceof xl?this.noMatchError(c):c}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Ue).pipe((0,wt.U)(a=>this.createUrlTree(gi(a),e.queryParams,e.fragment))).pipe(uu(a=>{throw a instanceof xl?this.noMatchError(a):a}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const a=e.segments.length>0?new jt([],{[Ue]:e}):e;return new pu(a,t,r)}expandSegmentGroup(e,t,r,a){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,wt.U)(c=>new jt([],c))):this.expandSegment(e,r,t,r.segments,a,!0)}expandChildren(e,t,r){const a=[];for(const c of Object.keys(r.children))"primary"===c?a.unshift(c):a.push(c);return(0,mn.D)(a).pipe(os(c=>{const h=r.children[c],y=gc(t,c);return this.expandSegmentGroup(e,y,h,c).pipe((0,wt.U)(w=>({segment:w,outlet:c})))}),pl((c,h)=>(c[h.outlet]=h.segment,c),{}),function(n,e){const t=arguments.length>=2;return r=>r.pipe(n?So((a,c)=>n(a,c,r)):xs.y,cu(1),t?hi(e):xo(()=>new Ks))}())}expandSegment(e,t,r,a,c,h){return(0,mn.D)(r).pipe(os(y=>this.expandSegmentAgainstRoute(e,t,r,y,a,c,h).pipe(uu(D=>{if(D instanceof xl)return(0,ft.of)(null);throw D}))),Ro(y=>!!y),uu((y,w)=>{if(y instanceof Ks||"EmptyError"===y.name){if(sy(t,a,c))return(0,ft.of)(new jt([],{}));throw new xl(t)}throw y}))}expandSegmentAgainstRoute(e,t,r,a,c,h,y){return iy(a,t,c,h)?void 0===a.redirectTo?this.matchSegmentAgainstRoute(e,t,a,c,h):y&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,a,c,h):vu(t):vu(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,a,c,h){return"**"===a.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,a,h):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,a,c,h)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,a){const c=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Rl(c):this.lineralizeSegments(r,c).pipe((0,$r.zg)(h=>{const y=new jt(h,{});return this.expandSegment(e,y,t,h,a,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,a,c,h){const{matched:y,consumedSegments:w,lastChild:D,positionalParamSegments:R}=vh(t,a,c);if(!y)return vu(t);const O=this.applyRedirectCommands(w,a.redirectTo,R);return a.redirectTo.startsWith("/")?Rl(O):this.lineralizeSegments(a,O).pipe((0,$r.zg)(G=>this.expandSegment(e,t,r,G.concat(c.slice(D)),h,!1)))}matchSegmentAgainstRoute(e,t,r,a,c){if("**"===r.path)return r.loadChildren?(r._loadedConfig?(0,ft.of)(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,wt.U)(G=>(r._loadedConfig=G,new jt(a,{})))):(0,ft.of)(new jt(a,{}));const{matched:h,consumedSegments:y,lastChild:w}=vh(t,r,a);if(!h)return vu(t);const D=a.slice(w);return this.getChildConfig(e,r,a).pipe((0,$r.zg)(O=>{const G=O.module,q=O.routes,{segmentGroup:te,slicedSegments:Se}=Eh(t,y,D,q),Pe=new jt(te.segments,te.children);if(0===Se.length&&Pe.hasChildren())return this.expandChildren(G,q,Pe).pipe((0,wt.U)(Ft=>new jt(y,Ft)));if(0===q.length&&0===Se.length)return(0,ft.of)(new jt(y,{}));const st=un(r)===c;return this.expandSegment(G,Pe,q,Se,st?Ue:c,!0).pipe((0,wt.U)(kt=>new jt(y.concat(kt.segments),kt.children)))}))}getChildConfig(e,t,r){return t.children?(0,ft.of)(new Sp(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?(0,ft.of)(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,$r.zg)(a=>{return a?this.configLoader.load(e.injector,t).pipe((0,wt.U)(c=>(t._loadedConfig=c,c))):(n=t,new Hr.y(e=>e.error(Ti(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))));var n})):(0,ft.of)(new Sp([],e))}runCanLoadGuards(e,t,r){const a=t.canLoad;if(!a||0===a.length)return(0,ft.of)(!0);const c=a.map(h=>{const y=e.get(h);let w;if((n=y)&&Xs(n.canLoad))w=y.canLoad(t,r);else{if(!Xs(y))throw new Error("Invalid CanLoad guard");w=y(t,r)}var n;return cs(w)});return(0,ft.of)(c).pipe(pc(),(0,Jn.b)(h=>{if(!_u(h))return;const y=Ti(`Redirecting to "${this.urlSerializer.serialize(h)}"`);throw y.url=h,y}),(0,wt.U)(h=>!0===h))}lineralizeSegments(e,t){let r=[],a=t.root;for(;;){if(r=r.concat(a.segments),0===a.numberOfChildren)return(0,ft.of)(r);if(a.numberOfChildren>1||!a.children[Ue])return Np(e.redirectTo);a=a.children[Ue]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,a){const c=this.createSegmentGroup(e,t.root,r,a);return new pu(c,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return er(e,(a,c)=>{if("string"==typeof a&&a.startsWith(":")){const y=a.substring(1);r[c]=t[y]}else r[c]=a}),r}createSegmentGroup(e,t,r,a){const c=this.createSegments(e,t.segments,r,a);let h={};return er(t.children,(y,w)=>{h[w]=this.createSegmentGroup(e,y,r,a)}),new jt(c,h)}createSegments(e,t,r,a){return t.map(c=>c.path.startsWith(":")?this.findPosParam(e,c,a):this.findOrReturn(c,r))}findPosParam(e,t,r){const a=r[t.path.substring(1)];if(!a)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return a}findOrReturn(e,t){let r=0;for(const a of t){if(a.path===e.path)return t.splice(r),a;r++}return e}}function gi(n){const e={};for(const r of Object.keys(n.children)){const c=gi(n.children[r]);(c.segments.length>0||c.hasChildren())&&(e[r]=c)}return function(n){if(1===n.numberOfChildren&&n.children[Ue]){const e=n.children[Ue];return new jt(n.segments.concat(e.segments),e.children)}return n}(new jt(n.segments,e))}class Op{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class bh{constructor(e,t){this.component=e,this.route=t}}function Pp(n,e,t){const r=n._root;return Wr(r,e?e._root:null,t,[r.value])}function wh(n,e,t){const r=function(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function Wr(n,e,t,r,a={canDeactivateChecks:[],canActivateChecks:[]}){const c=lc(e);return n.children.forEach(h=>{(function(n,e,t,r,a={canDeactivateChecks:[],canActivateChecks:[]}){const c=n.value,h=e?e.value:null,y=t?t.getContext(n.value.outlet):null;if(h&&c.routeConfig===h.routeConfig){const w=function(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Ia(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Ia(n.url,e.url)||!fi(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Il(n,e)||!fi(n.queryParams,e.queryParams);default:return!Il(n,e)}}(h,c,c.routeConfig.runGuardsAndResolvers);w?a.canActivateChecks.push(new Op(r)):(c.data=h.data,c._resolvedData=h._resolvedData),Wr(n,e,c.component?y?y.children:null:t,r,a),w&&y&&y.outlet&&y.outlet.isActivated&&a.canDeactivateChecks.push(new bh(y.outlet.component,h))}else h&&Nl(e,y,a),a.canActivateChecks.push(new Op(r)),Wr(n,null,c.component?y?y.children:null:t,r,a)})(h,c[h.value.outlet],t,r.concat([h.value]),a),delete c[h.value.outlet]}),er(c,(h,y)=>Nl(h,t.getContext(y),a)),a}function Nl(n,e,t){const r=lc(n),a=n.value;er(r,(c,h)=>{Nl(c,a.component?e?e.children.getContext(h):null:e,t)}),t.canDeactivateChecks.push(new bh(a.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,a))}class Ih{}function cy(n){return new Hr.y(e=>e.error(n))}class mw{constructor(e,t,r,a,c,h){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=a,this.paramsInheritanceStrategy=c,this.relativeLinkResolution=h}recognize(){const e=Eh(this.urlTree.root,[],[],this.config.filter(h=>void 0===h.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Ue);if(null===t)return null;const r=new dh([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Ue,this.rootComponentType,null,this.urlTree.root,-1,{}),a=new qr(r,t),c=new Ym(this.url,a);return this.inheritParamsAndData(c._root),c}inheritParamsAndData(e){const t=e.value,r=Ep(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(a=>this.inheritParamsAndData(a))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const c of Object.keys(t.children)){const h=t.children[c],y=gc(e,c),w=this.processSegmentGroup(y,h,c);if(null===w)return null;r.push(...w)}const a=ly(r);return a.sort((e,t)=>e.value.outlet===Ue?-1:t.value.outlet===Ue?1:e.value.outlet.localeCompare(t.value.outlet)),a}processSegment(e,t,r,a){for(const c of e){const h=this.processSegmentAgainstRoute(c,t,r,a);if(null!==h)return h}return sy(t,r,a)?[]:null}processSegmentAgainstRoute(e,t,r,a){if(e.redirectTo||!iy(e,t,r,a))return null;let c,h=[],y=[];if("**"===e.path){const q=r.length>0?pi(r).parameters:{};c=new dh(r,q,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,g(e),un(e),e.component,e,_(t),f(t)+r.length,E(e))}else{const q=vh(t,e,r);if(!q.matched)return null;h=q.consumedSegments,y=r.slice(q.lastChild),c=new dh(h,q.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,g(e),un(e),e.component,e,_(t),f(t)+h.length,E(e))}const w=(n=e).children?n.children:n.loadChildren?n._loadedConfig.routes:[],{segmentGroup:D,slicedSegments:R}=Eh(t,h,y,w.filter(q=>void 0===q.redirectTo),this.relativeLinkResolution);var n;if(0===R.length&&D.hasChildren()){const q=this.processChildren(w,D);return null===q?null:[new qr(c,q)]}if(0===w.length&&0===R.length)return[new qr(c,[])];const O=un(e)===a,G=this.processSegment(w,D,R,O?Ue:a);return null===G?null:[new qr(c,G)]}}function jp(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function ly(n){const e=[],t=new Set;for(const r of n){if(!jp(r)){e.push(r);continue}const a=e.find(c=>r.value.routeConfig===c.value.routeConfig);void 0!==a?(a.children.push(...r.children),t.add(a)):e.push(r)}for(const r of t){const a=ly(r.children);e.push(new qr(r.value,a))}return e.filter(r=>!t.has(r))}function _(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function f(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function g(n){return n.data||{}}function E(n){return n.resolve||{}}function we(n){return Qn(e=>{const t=n(e);return t?(0,mn.D)(t).pipe((0,wt.U)(()=>e)):(0,ft.of)(e)})}class Gt extends class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const tr=new p.OlP("ROUTES");class Po{constructor(e,t,r,a){this.loader=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=a}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const a=this.loadModuleFactory(t.loadChildren).pipe((0,wt.U)(c=>{this.onLoadEndListener&&this.onLoadEndListener(t);const h=c.create(e);return new Sp(yr(h.injector.get(tr,void 0,p.XFs.Self|p.XFs.Optional)).map(_h),h)}),uu(c=>{throw t._loader$=void 0,c}));return t._loader$=new Ao.c(a,()=>new ci.xQ).pipe((0,yl.x)()),t._loader$}loadModuleFactory(e){return"string"==typeof e?(0,mn.D)(this.loader.load(e)):cs(e()).pipe((0,$r.zg)(t=>t instanceof p.YKP?(0,ft.of)(t):(0,mn.D)(this.compiler.compileModuleAsync(t))))}}class Ch{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new xa,this.attachRef=null}}class xa{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new Ch,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}class Hp{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function Ol(n){throw n}function $p(n,e,t){return e.parse("/")}function Pl(n,e){return(0,ft.of)(null)}const Gp={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},hy={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Dr=(()=>{class n{constructor(t,r,a,c,h,y,w,D){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=a,this.location=c,this.config=D,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new ci.xQ,this.errorHandler=Ol,this.malformedUriErrorHandler=$p,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Pl,afterPreactivation:Pl},this.urlHandlingStrategy=new Hp,this.routeReuseStrategy=new Gt,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=h.get(p.h0i),this.console=h.get(p.c2e);const G=h.get(p.R0b);this.isNgZoneEnabled=G instanceof p.R0b&&p.R0b.isInAngularZone(),this.resetConfig(D),this.currentUrlTree=new pu(new jt([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Po(y,w,q=>this.triggerEvent(new U(q)),q=>this.triggerEvent(new Z(q))),this.routerState=Zm(this.currentUrlTree,this.rootComponentType),this.transitions=new Cr({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(So(a=>0!==a.id),(0,wt.U)(a=>Object.assign(Object.assign({},a),{extractedUrl:this.urlHandlingStrategy.extract(a.rawUrl)})),Qn(a=>{let c=!1,h=!1;return(0,ft.of)(a).pipe((0,Jn.b)(y=>{this.currentNavigation={id:y.id,initialUrl:y.currentRawUrl,extractedUrl:y.extractedUrl,trigger:y.source,extras:y.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Qn(y=>{const w=this.browserUrlTree.toString(),D=!this.navigated||y.extractedUrl.toString()!==w||w!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||D)&&this.urlHandlingStrategy.shouldProcessUrl(y.rawUrl))return to(y.source)&&(this.browserUrlTree=y.extractedUrl),(0,ft.of)(y).pipe(Qn(O=>{const G=this.transitions.getValue();return r.next(new _l(O.id,this.serializeUrl(O.extractedUrl),O.source,O.restoredState)),G!==this.transitions.getValue()?Ss.E:Promise.resolve(O)}),function(n,e,t,r){return Qn(a=>function(n,e,t,r,a){return new _c(n,e,t,r,a).apply()}(n,e,t,a.extractedUrl,r).pipe((0,wt.U)(c=>Object.assign(Object.assign({},a),{urlAfterRedirects:c}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Jn.b)(O=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:O.urlAfterRedirects})}),function(n,e,t,r,a){return(0,$r.zg)(c=>function(n,e,t,r,a="emptyOnly",c="legacy"){try{const h=new mw(n,e,t,r,a,c).recognize();return null===h?cy(new Ih):(0,ft.of)(h)}catch(h){return cy(h)}}(n,e,c.urlAfterRedirects,t(c.urlAfterRedirects),r,a).pipe((0,wt.U)(h=>Object.assign(Object.assign({},c),{targetSnapshot:h}))))}(this.rootComponentType,this.config,O=>this.serializeUrl(O),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Jn.b)(O=>{"eager"===this.urlUpdateStrategy&&(O.extras.skipLocationChange||this.setBrowserUrl(O.urlAfterRedirects,O),this.browserUrlTree=O.urlAfterRedirects);const G=new vl(O.id,this.serializeUrl(O.extractedUrl),this.serializeUrl(O.urlAfterRedirects),O.targetSnapshot);r.next(G)}));if(D&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:G,extractedUrl:q,source:te,restoredState:Se,extras:Pe}=y,st=new _l(G,this.serializeUrl(q),te,Se);r.next(st);const Dt=Zm(q,this.rootComponentType).snapshot;return(0,ft.of)(Object.assign(Object.assign({},y),{targetSnapshot:Dt,urlAfterRedirects:q,extras:Object.assign(Object.assign({},Pe),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=y.rawUrl,this.browserUrlTree=y.urlAfterRedirects,y.resolve(null),Ss.E}),we(y=>{const{targetSnapshot:w,id:D,extractedUrl:R,rawUrl:O,extras:{skipLocationChange:G,replaceUrl:q}}=y;return this.hooks.beforePreactivation(w,{navigationId:D,appliedUrlTree:R,rawUrlTree:O,skipLocationChange:!!G,replaceUrl:!!q})}),(0,Jn.b)(y=>{const w=new uc(y.id,this.serializeUrl(y.extractedUrl),this.serializeUrl(y.urlAfterRedirects),y.targetSnapshot);this.triggerEvent(w)}),(0,wt.U)(y=>Object.assign(Object.assign({},y),{guards:Pp(y.targetSnapshot,y.currentSnapshot,this.rootContexts)})),function(n,e){return(0,$r.zg)(t=>{const{targetSnapshot:r,currentSnapshot:a,guards:{canActivateChecks:c,canDeactivateChecks:h}}=t;return 0===h.length&&0===c.length?(0,ft.of)(Object.assign(Object.assign({},t),{guardsResult:!0})):function(n,e,t,r){return(0,mn.D)(n).pipe((0,$r.zg)(a=>function(n,e,t,r,a){const c=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!c||0===c.length)return(0,ft.of)(!0);const h=c.map(y=>{const w=wh(y,e,a);let D;if(function(n){return n&&Xs(n.canDeactivate)}(w))D=cs(w.canDeactivate(n,e,t,r));else{if(!Xs(w))throw new Error("Invalid CanDeactivate guard");D=cs(w(n,e,t,r))}return D.pipe(Ro())});return(0,ft.of)(h).pipe(pc())}(a.component,a.route,t,e,r)),Ro(a=>!0!==a,!0))}(h,r,a,n).pipe((0,$r.zg)(y=>y&&function(n){return"boolean"==typeof n}(y)?function(n,e,t,r){return(0,mn.D)(e).pipe(os(a=>Ys(function(n,e){return null!==n&&e&&e(new re(n)),(0,ft.of)(!0)}(a.route.parent,r),function(n,e){return null!==n&&e&&e(new Fe(n)),(0,ft.of)(!0)}(a.route,r),function(n,e,t){const r=e[e.length-1],c=e.slice(0,e.length-1).reverse().map(h=>function(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(h)).filter(h=>null!==h).map(h=>ss(()=>{const y=h.guards.map(w=>{const D=wh(w,h.node,t);let R;if(function(n){return n&&Xs(n.canActivateChild)}(D))R=cs(D.canActivateChild(r,n));else{if(!Xs(D))throw new Error("Invalid CanActivateChild guard");R=cs(D(r,n))}return R.pipe(Ro())});return(0,ft.of)(y).pipe(pc())}));return(0,ft.of)(c).pipe(pc())}(n,a.path,t),function(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return(0,ft.of)(!0);const a=r.map(c=>ss(()=>{const h=wh(c,e,t);let y;if(function(n){return n&&Xs(n.canActivate)}(h))y=cs(h.canActivate(e,n));else{if(!Xs(h))throw new Error("Invalid CanActivate guard");y=cs(h(e,n))}return y.pipe(Ro())}));return(0,ft.of)(a).pipe(pc())}(n,a.route,t))),Ro(a=>!0!==a,!0))}(r,c,n,e):(0,ft.of)(y)),(0,wt.U)(y=>Object.assign(Object.assign({},t),{guardsResult:y})))})}(this.ngModule.injector,y=>this.triggerEvent(y)),(0,Jn.b)(y=>{if(_u(y.guardsResult)){const D=Ti(`Redirecting to "${this.serializeUrl(y.guardsResult)}"`);throw D.url=y.guardsResult,D}const w=new I(y.id,this.serializeUrl(y.extractedUrl),this.serializeUrl(y.urlAfterRedirects),y.targetSnapshot,!!y.guardsResult);this.triggerEvent(w)}),So(y=>!!y.guardsResult||(this.restoreHistory(y),this.cancelNavigationTransition(y,""),!1)),we(y=>{if(y.guards.canActivateChecks.length)return(0,ft.of)(y).pipe((0,Jn.b)(w=>{const D=new A(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);this.triggerEvent(D)}),Qn(w=>{let D=!1;return(0,ft.of)(w).pipe(function(n,e){return(0,$r.zg)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:a}}=t;if(!a.length)return(0,ft.of)(t);let c=0;return(0,mn.D)(a).pipe(os(h=>function(n,e,t,r){return function(n,e,t,r){const a=Object.keys(n);if(0===a.length)return(0,ft.of)({});const c={};return(0,mn.D)(a).pipe((0,$r.zg)(h=>function(n,e,t,r){const a=wh(n,e,r);return cs(a.resolve?a.resolve(e,t):a(e,t))}(n[h],e,t,r).pipe((0,Jn.b)(y=>{c[h]=y}))),cu(1),(0,$r.zg)(()=>Object.keys(c).length===a.length?(0,ft.of)(c):Ss.E))}(n._resolve,n,e,r).pipe((0,wt.U)(c=>(n._resolvedData=c,n.data=Object.assign(Object.assign({},n.data),Ep(n,t).resolve),null)))}(h.route,r,n,e)),(0,Jn.b)(()=>c++),cu(1),(0,$r.zg)(h=>c===a.length?(0,ft.of)(t):Ss.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Jn.b)({next:()=>D=!0,complete:()=>{D||(this.restoreHistory(w),this.cancelNavigationTransition(w,"At least one route resolver didn't emit any value."))}}))}),(0,Jn.b)(w=>{const D=new M(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);this.triggerEvent(D)}))}),we(y=>{const{targetSnapshot:w,id:D,extractedUrl:R,rawUrl:O,extras:{skipLocationChange:G,replaceUrl:q}}=y;return this.hooks.afterPreactivation(w,{navigationId:D,appliedUrlTree:R,rawUrlTree:O,skipLocationChange:!!G,replaceUrl:!!q})}),(0,wt.U)(y=>{const w=function(n,e,t){const r=dc(n,e._root,t?t._root:void 0);return new Wm(r,e)}(this.routeReuseStrategy,y.targetSnapshot,y.currentRouterState);return Object.assign(Object.assign({},y),{targetRouterState:w})}),(0,Jn.b)(y=>{this.currentUrlTree=y.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(y.urlAfterRedirects,y.rawUrl),this.routerState=y.targetRouterState,"deferred"===this.urlUpdateStrategy&&(y.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,y),this.browserUrlTree=y.urlAfterRedirects)}),((n,e,t)=>(0,wt.U)(r=>(new Ov(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,y=>this.triggerEvent(y)),(0,Jn.b)({next(){c=!0},complete(){c=!0}}),function(n){return e=>e.lift(new $n(n))}(()=>{var y;if(!c&&!h){const w=`Navigation ID ${a.id} is not equal to the current navigation id ${this.navigationId}`;"replace"===this.canceledNavigationResolution?(this.restoreHistory(a),this.cancelNavigationTransition(a,w)):this.cancelNavigationTransition(a,w)}(null===(y=this.currentNavigation)||void 0===y?void 0:y.id)===a.id&&(this.currentNavigation=null)}),uu(y=>{if(h=!0,function(n){return n&&n[Xn]}(y)){const w=_u(y.url);w||(this.navigated=!0,this.restoreHistory(a,!0));const D=new du(a.id,this.serializeUrl(a.extractedUrl),y.message);r.next(D),w?setTimeout(()=>{const R=this.urlHandlingStrategy.merge(y.url,this.rawUrlTree),O={skipLocationChange:a.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||to(a.source)};this.scheduleNavigation(R,"imperative",null,O,{resolve:a.resolve,reject:a.reject,promise:a.promise})},0):a.resolve(!1)}else{this.restoreHistory(a,!0);const w=new pp(a.id,this.serializeUrl(a.extractedUrl),y);r.next(w);try{a.resolve(this.errorHandler(y))}catch(D){a.reject(D)}}return Ss.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r=this.extractLocationChangeInfoFromEvent(t);this.shouldScheduleNavigation(this.lastLocationChangeInfo,r)&&setTimeout(()=>{const{source:a,state:c,urlTree:h}=r,y={replaceUrl:!0};if(c){const w=Object.assign({},c);delete w.navigationId,delete w.\u0275routerPageId,0!==Object.keys(w).length&&(y.state=w)}this.scheduleNavigation(h,a,c,y)},0),this.lastLocationChangeInfo=r}))}extractLocationChangeInfoFromEvent(t){var r;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(r=t.state)||void 0===r?void 0:r.navigationId)?t.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(t,r){if(!t)return!0;const a=r.urlTree.toString()===t.urlTree.toString();return r.transitionId!==t.transitionId||!a||!("hashchange"===r.source&&"popstate"===t.source||"popstate"===r.source&&"hashchange"===t.source)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){zr(t),this.config=t.map(_h),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:a,queryParams:c,fragment:h,queryParamsHandling:y,preserveFragment:w}=r,D=a||this.routerState.root,R=w?this.currentUrlTree.fragment:h;let O=null;switch(y){case"merge":O=Object.assign(Object.assign({},this.currentUrlTree.queryParams),c);break;case"preserve":O=this.currentUrlTree.queryParams;break;default:O=c||null}return null!==O&&(O=this.removeEmptyProps(O)),function(n,e,t,r,a){if(0===t.length)return Xm(e.root,e.root,e,r,a);const c=function(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new ph(!0,0,n);let e=0,t=!1;const r=n.reduce((a,c,h)=>{if("object"==typeof c&&null!=c){if(c.outlets){const y={};return er(c.outlets,(w,D)=>{y[D]="string"==typeof w?w.split("/"):w}),[...a,{outlets:y}]}if(c.segmentPath)return[...a,c.segmentPath]}return"string"!=typeof c?[...a,c]:0===h?(c.split("/").forEach((y,w)=>{0==w&&"."===y||(0==w&&""===y?t=!0:".."===y?e++:""!=y&&a.push(y))}),a):[...a,c]},[]);return new ph(t,e,r)}(t);if(c.toRoot())return Xm(e.root,new jt([],{}),e,r,a);const h=function(n,e,t){if(n.isAbsolute)return new fc(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const c=t.snapshot._urlSegment;return new fc(c,c===e.root,0)}const r=hc(n.commands[0])?0:1;return function(n,e,t){let r=n,a=e,c=t;for(;c>a;){if(c-=a,r=r.parent,!r)throw new Error("Invalid number of '../'");a=r.segments.length}return new fc(r,!1,a-c)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(c,e,n),y=h.processChildren?gh(h.segmentGroup,h.index,c.commands):ey(h.segmentGroup,h.index,c.commands);return Xm(h.segmentGroup,y,e,r,a)}(D,this.currentUrlTree,t,O,null!=R?R:null)}navigateByUrl(t,r={skipLocationChange:!1}){const a=_u(t)?t:this.parseUrl(t),c=this.urlHandlingStrategy.merge(a,this.rawUrlTree);return this.scheduleNavigation(c,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(a){r=this.malformedUriErrorHandler(a,this.urlSerializer,t)}return r}isActive(t,r){let a;if(a=!0===r?Object.assign({},Gp):!1===r?Object.assign({},hy):r,_u(t))return hu(this.currentUrlTree,t,a);const c=this.parseUrl(t);return hu(this.currentUrlTree,c,a)}removeEmptyProps(t){return Object.keys(t).reduce((r,a)=>{const c=t[a];return null!=c&&(r[a]=c),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Qs(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,a,c,h){var y,w;if(this.disposed)return Promise.resolve(!1);const D=this.getTransition(),R=to(r)&&D&&!to(D.source),q=(this.lastSuccessfulId===D.id||this.currentNavigation?D.rawUrl:D.urlAfterRedirects).toString()===t.toString();if(R&&q)return Promise.resolve(!0);let te,Se,Pe;h?(te=h.resolve,Se=h.reject,Pe=h.promise):Pe=new Promise((kt,Ft)=>{te=kt,Se=Ft});const st=++this.navigationId;let Dt;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(a=this.location.getState()),Dt=a&&a.\u0275routerPageId?a.\u0275routerPageId:c.replaceUrl||c.skipLocationChange?null!==(y=this.browserPageId)&&void 0!==y?y:0:(null!==(w=this.browserPageId)&&void 0!==w?w:0)+1):Dt=0,this.setTransition({id:st,targetPageId:Dt,source:r,restoredState:a,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:c,resolve:te,reject:Se,promise:Pe,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Pe.catch(kt=>Promise.reject(kt))}setBrowserUrl(t,r){const a=this.urlSerializer.serialize(t),c=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(a)||r.extras.replaceUrl?this.location.replaceState(a,"",c):this.location.go(a,"",c)}restoreHistory(t,r=!1){var a,c;if("computed"===this.canceledNavigationResolution){const h=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(a=this.currentNavigation)||void 0===a?void 0:a.finalUrl)||0===h?this.currentUrlTree===(null===(c=this.currentNavigation)||void 0===c?void 0:c.finalUrl)&&0===h&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(h)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const a=new du(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(a),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(p.DyG),p.LFG(oh),p.LFG(xa),p.LFG(ot),p.LFG(p.zs3),p.LFG(p.v3s),p.LFG(p.Sil),p.LFG(void 0))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();function to(n){return"imperative"!==n}let Ra=(()=>{class n{constructor(t,r,a){this.router=t,this.route=r,this.locationStrategy=a,this.commands=[],this.onChanges=new ci.xQ,this.subscription=t.events.subscribe(c=>{c instanceof Qs&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,a,c,h){if(0!==t||r||a||c||h||"string"==typeof this.target&&"_self"!=this.target)return!0;const y={skipLocationChange:Th(this.skipLocationChange),replaceUrl:Th(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,y),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Th(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(Dr),p.Y36(Ta),p.Y36(ue))},n.\u0275dir=p.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&p.NdJ("click",function(c){return r.onClick(c.button,c.ctrlKey,c.shiftKey,c.altKey,c.metaKey)}),2&t&&(p.Ikx("href",r.href,p.LSH),p.uIk("target",r.target))},inputs:{routerLink:"routerLink",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[p.TTD]}),n})();function Th(n){return""===n||!!n}let gy=(()=>{class n{constructor(t,r,a,c,h){this.parentContexts=t,this.location=r,this.resolver=a,this.changeDetector=h,this.activated=null,this._activatedRoute=null,this.activateEvents=new p.vpe,this.deactivateEvents=new p.vpe,this.name=c||Ue,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const h=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),y=this.parentContexts.getOrCreateContext(this.name).children,w=new yw(t,y,this.location.injector);this.activated=this.location.createComponent(h,this.location.length,w),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(xa),p.Y36(p.s_b),p.Y36(p._Vd),p.$8M("name"),p.Y36(p.sBO))},n.\u0275dir=p.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),n})();class yw{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Ta?this.route:e===xa?this.childContexts:this.parent.get(e,t)}}class jv{}class $v{preload(e,t){return(0,ft.of)(null)}}let qp=(()=>{class n{constructor(t,r,a,c,h){this.router=t,this.injector=c,this.preloadingStrategy=h,this.loader=new Po(r,a,D=>t.triggerEvent(new U(D)),D=>t.triggerEvent(new Z(D)))}setUpPreloading(){this.subscription=this.router.events.pipe(So(t=>t instanceof Qs),os(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(p.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const a=[];for(const c of r)if(c.loadChildren&&!c.canLoad&&c._loadedConfig){const h=c._loadedConfig;a.push(this.processRoutes(h.module,h.routes))}else c.loadChildren&&!c.canLoad?a.push(this.preloadConfig(t,c)):c.children&&a.push(this.processRoutes(t,c.children));return(0,mn.D)(a).pipe((0,rs.J)(),(0,wt.U)(c=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?(0,ft.of)(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,$r.zg)(c=>(r._loadedConfig=c,this.processRoutes(c.module,c.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Dr),p.LFG(p.v3s),p.LFG(p.Sil),p.LFG(p.zs3),p.LFG(jv))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),Ah=(()=>{class n{constructor(t,r,a={}){this.router=t,this.viewportScroller=r,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration=a.scrollPositionRestoration||"disabled",a.anchorScrolling=a.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof _l?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Qs&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof _t&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new _t(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Dr),p.LFG(Qa),p.LFG(void 0))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const Eu=new p.OlP("ROUTER_CONFIGURATION"),Gv=new p.OlP("ROUTER_FORROOT_GUARD"),zp=[ot,{provide:oh,useClass:mp},{provide:Dr,useFactory:function(n,e,t,r,a,c,h,y={},w,D){const R=new Dr(null,n,e,t,r,a,c,yr(h));return w&&(R.urlHandlingStrategy=w),D&&(R.routeReuseStrategy=D),function(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy)}(y,R),y.enableTracing&&R.events.subscribe(O=>{var G,q;null===(G=console.group)||void 0===G||G.call(console,`Router Event: ${O.constructor.name}`),console.log(O.toString()),console.log(O),null===(q=console.groupEnd)||void 0===q||q.call(console)}),R},deps:[oh,xa,ot,p.zs3,p.v3s,p.Sil,tr,Eu,[class{},new p.FiY],[class{},new p.FiY]]},xa,{provide:Ta,useFactory:function(n){return n.routerState.root},deps:[Dr]},{provide:p.v3s,useClass:p.EAV},qp,$v,class{preload(e,t){return t().pipe(uu(()=>(0,ft.of)(null)))}},{provide:Eu,useValue:{enableTracing:!1}}];function jT(){return new p.PXZ("Router",Dr)}let zv=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[zp,my(t),{provide:Gv,useFactory:_w,deps:[[Dr,new p.FiY,new p.tp0]]},{provide:Eu,useValue:r||{}},{provide:ue,useFactory:$T,deps:[le,[new p.tBr(Le),new p.FiY],Eu]},{provide:Ah,useFactory:HT,deps:[Dr,Qa,Eu]},{provide:jv,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:$v},{provide:p.PXZ,multi:!0,useFactory:jT},[Wv,{provide:p.ip1,multi:!0,useFactory:bw,deps:[Wv]},{provide:ww,useFactory:GT,deps:[Wv]},{provide:p.tb,multi:!0,useExisting:ww}]]}}static forChild(t){return{ngModule:n,providers:[my(t)]}}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Gv,8),p.LFG(Dr,8))},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({}),n})();function HT(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new Ah(n,e,t)}function $T(n,e,t={}){return t.useHash?new Je(n,e):new Ce(n,e)}function _w(n){return"guarded"}function my(n){return[{provide:p.deG,multi:!0,useValue:n},{provide:tr,multi:!0,useValue:n}]}let Wv=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new ci.xQ}appInitializer(){return this.injector.get(V,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const a=new Promise(y=>r=y),c=this.injector.get(Dr),h=this.injector.get(Eu);return"disabled"===h.initialNavigation?(c.setUpLocationChangeListener(),r(!0)):"enabled"===h.initialNavigation||"enabledBlocking"===h.initialNavigation?(c.hooks.afterPreactivation=()=>this.initNavigation?(0,ft.of)(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),c.initialNavigation()):r(!0),a})}bootstrapListener(t){const r=this.injector.get(Eu),a=this.injector.get(qp),c=this.injector.get(Ah),h=this.injector.get(Dr),y=this.injector.get(p.z2F);t===y.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&h.initialNavigation(),a.setUpPreloading(),c.init(),h.resetRootComponentType(y.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(p.zs3))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();function bw(n){return n.appInitializer.bind(n)}function GT(n){return n.bootstrapListener.bind(n)}const ww=new p.OlP("Router Initializer");let Iw=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-home"]],decls:14,vars:0,consts:[[1,"navbar","navbar-expand-lg","navbar-dark","bg-primary"],[1,"container-fluid"],["href","#",1,"navbar-brand"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarSupportedContent","aria-controls","navbarSupportedContent","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarSupportedContent",1,"collapse","navbar-collapse"],[1,"navbar-nav","me-auto","mb-2","mb-lg-0"],[1,"nav-item"],["aria-current","page","href","#",1,"nav-link","active"],["href","#",1,"nav-link","active"]],template:function(t,r){1&t&&(p.TgZ(0,"nav",0),p.TgZ(1,"div",1),p.TgZ(2,"a",2),p._uU(3,"Navbar"),p.qZA(),p.TgZ(4,"button",3),p._UZ(5,"span",4),p.qZA(),p.TgZ(6,"div",5),p.TgZ(7,"ul",6),p.TgZ(8,"li",7),p.TgZ(9,"a",8),p._uU(10,"Home"),p.qZA(),p.qZA(),p.TgZ(11,"li",7),p.TgZ(12,"a",9),p._uU(13,"Photo"),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.qZA())},styles:[""]}),n})();F(8241);var it,qT=F(3394),ge=F(8239),kl=F(8026),Wp=F(3910),Ec=F(5422),nn=F(3854),zT="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},lt={},yy=yy||{},It=zT||self;function ds(){}function Zp(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Kp(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Fo="closure_uid_"+(1e9*Math.random()>>>0),Kv=0;function Cw(n,e,t){return n.call.apply(n.bind,arguments)}function Yv(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var a=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(a,r),n.apply(e,a)}}return function(){return n.apply(e,arguments)}}function qi(n,e,t){return(qi=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Cw:Yv).apply(null,arguments)}function Yp(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Si(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(r,a,c){for(var h=Array(arguments.length-2),y=2;y<arguments.length;y++)h[y-2]=arguments[y];return e.prototype[a].apply(r,h)}}function xi(){this.s=this.s,this.o=this.o}var vy={};xi.prototype.s=!1,xi.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function(n){return Object.prototype.hasOwnProperty.call(n,Fo)&&n[Fo]||(n[Fo]=++Kv)}(this);delete vy[n]}},xi.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Ey=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function Dw(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function Tw(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(Zp(r)){const a=n.length||0,c=r.length||0;n.length=a+c;for(let h=0;h<c;h++)n[a+h]=r[h]}else n.push(r)}}function mi(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}mi.prototype.h=function(){this.defaultPrevented=!0};var eM=function(){if(!It.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{It.addEventListener("test",ds,e),It.removeEventListener("test",ds,e)}catch(t){}return n}();function by(n){return/^[\s\xa0]*$/.test(n)}var WT=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function wy(n,e){return n<e?-1:n>e?1:0}function Qp(){var n=It.navigator;return n&&(n=n.userAgent)?n:""}function Ma(n){return-1!=Qp().indexOf(n)}function Jp(n){return Jp[" "](n),n}Jp[" "]=ds;var Qv,n,nM=Ma("Opera"),Xp=Ma("Trident")||Ma("MSIE"),ZT=Ma("Edge"),Aw=ZT||Xp,KT=Ma("Gecko")&&!(-1!=Qp().toLowerCase().indexOf("webkit")&&!Ma("Edge"))&&!(Ma("Trident")||Ma("MSIE"))&&!Ma("Edge"),rM=-1!=Qp().toLowerCase().indexOf("webkit")&&!Ma("Edge");function YT(){var n=It.document;return n?n.documentMode:void 0}e:{var Sw="",xw=(n=Qp(),KT?/rv:([^\);]+)(\)|;)/.exec(n):ZT?/Edge\/([\d\.]+)/.exec(n):Xp?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):rM?/WebKit\/(\S+)/.exec(n):nM?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(xw&&(Sw=xw?xw[1]:""),Xp){var Na=YT();if(null!=Na&&Na>parseFloat(Sw)){Qv=String(Na);break e}}Qv=Sw}var Jv={};function QT(){return e=Jv,Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=function(){let n=0;const e=WT(String(Qv)).split("."),t=WT("9").split("."),r=Math.max(e.length,t.length);for(let h=0;0==n&&h<r;h++){var a=e[h]||"",c=t[h]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],c=/(\d*)(\D*)(.*)/.exec(c)||["","","",""],0==a[0].length&&0==c[0].length)break;n=wy(0==a[1].length?0:parseInt(a[1],10),0==c[1].length?0:parseInt(c[1],10))||wy(0==a[2].length,0==c[2].length)||wy(a[2],c[2]),a=a[3],c=c[3]}while(0==n)}return 0<=n}();var e}var Rw=It.document&&Xp&&(YT()||parseInt(Qv,10))||void 0;function Fl(n,e){if(mi.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(KT){e:{try{Jp(e.nodeName);var a=!0;break e}catch(c){}a=!1}a||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:JT[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Fl.X.h.call(this)}}Si(Fl,mi);var JT={2:"touch",3:"pen",4:"mouse"};Fl.prototype.h=function(){Fl.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var no="closure_listenable_"+(1e6*Math.random()|0),Mw=0;function XT(n,e,t,r,a){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ha=a,this.key=++Mw,this.ba=this.ea=!1}function Xv(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function eg(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function Nw(n){const e={};for(const t in n)e[t]=n[t];return e}const eE="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ow(n,e){let t,r;for(let a=1;a<arguments.length;a++){for(t in r=arguments[a],r)n[t]=r[t];for(let c=0;c<eE.length;c++)t=eE[c],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Dy(n){this.src=n,this.g={},this.h=0}function Ll(n,e){var t=e.type;if(t in n.g){var c,r=n.g[t],a=Ey(r,e);(c=0<=a)&&Array.prototype.splice.call(r,a,1),c&&(Xv(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function bc(n,e,t,r){for(var a=0;a<n.length;++a){var c=n[a];if(!c.ba&&c.listener==e&&c.capture==!!t&&c.ha==r)return a}return-1}Dy.prototype.add=function(n,e,t,r,a){var c=n.toString();(n=this.g[c])||(n=this.g[c]=[],this.h++);var h=bc(n,e,r,a);return-1<h?(e=n[h],t||(e.ea=!1)):((e=new XT(e,this.src,c,!!r,a)).ea=t,n.push(e)),e};var tg="closure_lm_"+(1e6*Math.random()|0),wc={};function Sh(n,e,t,r,a){if(r&&r.once)return tE(n,e,t,r,a);if(Array.isArray(e)){for(var c=0;c<e.length;c++)Sh(n,e[c],t,r,a);return null}return t=Ay(t),n&&n[no]?n.N(e,t,Kp(r)?!!r.capture:!!r,a):Vl(n,e,t,!1,r,a)}function Vl(n,e,t,r,a,c){if(!e)throw Error("Invalid event type");var h=Kp(a)?!!a.capture:!!a,y=xh(n);if(y||(n[tg]=y=new Dy(n)),(t=y.add(e,t,r,h,c)).proxy)return t;if(r=function(){const e=Pw;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)eM||(a=h),void 0===a&&(a=!1),n.addEventListener(e.toString(),r,a);else if(n.attachEvent)n.attachEvent(Ty(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function tE(n,e,t,r,a){if(Array.isArray(e)){for(var c=0;c<e.length;c++)tE(n,e[c],t,r,a);return null}return t=Ay(t),n&&n[no]?n.O(e,t,Kp(r)?!!r.capture:!!r,a):Vl(n,e,t,!0,r,a)}function nE(n,e,t,r,a){if(Array.isArray(e))for(var c=0;c<e.length;c++)nE(n,e[c],t,r,a);else r=Kp(r)?!!r.capture:!!r,t=Ay(t),n&&n[no]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=bc(c=n.g[e],t,r,a))&&(Xv(c[t]),Array.prototype.splice.call(c,t,1),0==c.length&&(delete n.g[e],n.h--))):n&&(n=xh(n))&&(e=n.g[e.toString()],n=-1,e&&(n=bc(e,t,r,a)),(t=-1<n?e[n]:null)&&ng(t))}function ng(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[no])Ll(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(Ty(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=xh(e))?(Ll(t,n),0==t.h&&(t.src=null,e[tg]=null)):Xv(n)}}}function Ty(n){return n in wc?wc[n]:wc[n]="on"+n}function Pw(n,e){if(n.ba)n=!0;else{e=new Fl(e,this);var t=n.listener,r=n.ha||n.src;n.ea&&ng(n),n=t.call(r,e)}return n}function xh(n){return(n=n[tg])instanceof Dy?n:null}var rE="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ay(n){return"function"==typeof n?n:(n[rE]||(n[rE]=function(e){return n.handleEvent(e)}),n[rE])}function yi(){xi.call(this),this.i=new Dy(this),this.P=this,this.I=null}function Zr(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new mi(e,n);else if(e instanceof mi)e.target=e.target||n;else{var a=e;Ow(e=new mi(r,n),a)}if(a=!0,t)for(var c=t.length-1;0<=c;c--){var h=e.g=t[c];a=rg(h,r,!0,e)&&a}if(a=rg(h=e.g=n,r,!0,e)&&a,a=rg(h,r,!1,e)&&a,t)for(c=0;c<t.length;c++)a=rg(h=e.g=t[c],r,!1,e)&&a}function rg(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var a=!0,c=0;c<e.length;++c){var h=e[c];if(h&&!h.ba&&h.capture==t){var y=h.listener,w=h.ha||h.src;h.ea&&Ll(n.i,h),a=!1!==y.call(w,r)&&a}}return a&&!r.defaultPrevented}Si(yi,xi),yi.prototype[no]=!0,yi.prototype.removeEventListener=function(n,e,t,r){nE(this,n,e,t,r)},yi.prototype.M=function(){if(yi.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Xv(t[r]);delete n.g[e],n.h--}}this.I=null},yi.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},yi.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var iE=It.JSON.stringify;function kw(){var n=rA;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Vw,Fw=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new Ns,n=>n.reset());class Ns{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function nA(n){It.setTimeout(()=>{throw n},0)}function Lw(n,e){Vw||function(){var n=It.Promise.resolve(void 0);Vw=function(){n.then(iA)}}(),Sy||(Vw(),Sy=!0),rA.add(n,e)}var Sy=!1,rA=new class{constructor(){this.h=this.g=null}add(e,t){const r=Fw.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function iA(){for(var n;n=kw();){try{n.h.call(n.g)}catch(t){nA(t)}var e=Fw;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Sy=!1}function Rh(n,e){yi.call(this),this.h=n||1,this.g=e||It,this.j=qi(this.lb,this),this.l=Date.now()}function xy(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function sE(n,e,t){if("function"==typeof n)t&&(n=qi(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=qi(n.handleEvent,n)}return 2147483647<Number(e)?-1:It.setTimeout(n,e||0)}function Uw(n){n.g=sE(()=>{n.g=null,n.i&&(n.i=!1,Uw(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Si(Rh,yi),(it=Rh.prototype).ca=!1,it.R=null,it.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Zr(this,"tick"),this.ca&&(xy(this),this.start()))}},it.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},it.M=function(){Rh.X.M.call(this),xy(this),delete this.g};class sA extends xi{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Uw(this)}M(){super.M(),this.g&&(It.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Mh(n){xi.call(this),this.h=n,this.g={}}Si(Mh,xi);var Bw=[];function oE(n,e,t,r){Array.isArray(t)||(t&&(Bw[0]=t.toString()),t=Bw);for(var a=0;a<t.length;a++){var c=Sh(e,t[a],r||n.handleEvent,!1,n.h||n);if(!c)break;n.g[c.key]=c}}function jw(n){eg(n.g,function(e,t){this.g.hasOwnProperty(t)&&ng(e)},n),n.g={}}function Ry(){this.g=!0}function Nh(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var a=r[1];if(Array.isArray(a)&&!(1>a.length)){var c=a[0];if("noop"!=c&&"stop"!=c&&"close"!=c)for(var h=1;h<a.length;h++)a[h]=""}}}return iE(t)}catch(y){return e}}(n,t)+(r?" "+r:"")})}Mh.prototype.M=function(){Mh.X.M.call(this),jw(this)},Mh.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Ry.prototype.Aa=function(){this.g=!1},Ry.prototype.info=function(){};var Ul={},Gw=null;function uE(){return Gw=Gw||new yi}function cE(n){mi.call(this,Ul.Pa,n)}function ig(n){const e=uE();Zr(e,new cE(e,n))}function qw(n,e){mi.call(this,Ul.STAT_EVENT,n),this.stat=e}function zi(n){const e=uE();Zr(e,new qw(e,n))}function My(n,e){mi.call(this,Ul.Qa,n),this.size=e}function sg(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return It.setTimeout(function(){n()},e)}Ul.Pa="serverreachability",Si(cE,mi),Ul.STAT_EVENT="statevent",Si(qw,mi),Ul.Qa="timingevent",Si(My,mi);var Ny={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},og={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function ag(){}function Oy(){}ag.prototype.h=null;var dE,Bl={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function Py(){mi.call(this,"d")}function lE(){mi.call(this,"c")}function Oh(){}function ky(n,e,t,r){this.l=n,this.j=e,this.m=t,this.U=r||1,this.S=new Mh(this),this.O=Zw,this.T=new Rh(n=Aw?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new Ww}function Ww(){this.i=null,this.g="",this.h=!1}Si(Py,mi),Si(lE,mi),Si(Oh,ag),Oh.prototype.g=function(){return new XMLHttpRequest},Oh.prototype.i=function(){return{}},dE=new Oh;var Zw=45e3,Fy={},ug={};function Ly(n,e,t){n.K=1,n.v=dg(Vo(e)),n.s=t,n.P=!0,hE(n,null)}function hE(n,e){n.F=Date.now(),lg(n),n.A=Vo(n.v);var t=n.A,r=n.U;Array.isArray(r)||(r=[String(r)]),hA(t.i,"t",r),n.C=0,t=n.l.H,n.h=new Ww,n.g=Lh(n.l,t?e:null,!n.s),0<n.N&&(n.L=new sA(qi(n.La,n,n.g),n.N)),oE(n.S,n.g,"readystatechange",n.ib),e=n.H?Nw(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),ig(1),function(n,e,t,r,a,c){n.info(function(){if(n.g)if(c)for(var h="",y=c.split("&"),w=0;w<y.length;w++){var D=y[w].split("=");if(1<D.length){var R=D[0];D=D[1];var O=R.split("_");h=2<=O.length&&"type"==O[1]?h+(R+"=")+D+"&":h+(R+"=redacted&")}}else h=null;else h=c;return"XMLHTTP REQ ("+r+") [attempt "+a+"]: "+e+"\n"+t+"\n"+h})}(n.j,n.u,n.A,n.m,n.U,n.s)}function Pa(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function cg(n,e,t){let a,r=!0;for(;!n.I&&n.C<t.length;){if(a=oA(n,t),a==ug){4==e&&(n.o=4,zi(14),r=!1),Nh(n.j,n.m,null,"[Incomplete Response]");break}if(a==Fy){n.o=4,zi(15),Nh(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Nh(n.j,n.m,a,null),jl(n,a)}Pa(n)&&a!=ug&&a!=Fy&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,zi(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),SE(e),e.K=!0,zi(11))):(Nh(n.j,n.m,t,"[Invalid Chunked Response]"),Lo(n),Ph(n))}function oA(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?ug:(t=Number(e.substring(t,r)),isNaN(t)?Fy:(r+=1)+t>e.length?ug:(e=e.substr(r,t),n.C=r+t,e))}function lg(n){n.V=Date.now()+n.O,aA(n,n.O)}function aA(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=sg(qi(n.gb,n),e)}function bu(n){n.B&&(It.clearTimeout(n.B),n.B=null)}function Ph(n){0==n.l.G||n.I||cI(n.l,n)}function Lo(n){bu(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,xy(n.T),jw(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function jl(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||jy(t.h,n)))if(!n.J&&jy(t.h,n)&&3==t.G){try{var r=t.Fa.g.parse(e)}catch(D){r=null}if(Array.isArray(r)&&3==r.length){var a=r;if(0==a[0])e:if(t.u)t.Ba=a[1],0<t.Ba-t.T&&37500>a[2]&&t.L&&0==t.A&&!t.v&&(t.v=sg(qi(t.cb,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;Zy(t),bg(t)}AE(t),zi(18)}if(1>=_E(t.h)&&t.ja){try{t.ja()}catch(D){}t.ja=void 0}}else io(t,11)}else if((n.J||t.g==n)&&Zy(t),!by(e))for(a=t.Fa.g.parse(e),e=0;e<a.length;e++){let D=a[e];if(t.T=D[0],D=D[1],2==t.G)if("c"==D[0]){t.I=D[1],t.ka=D[2];const R=D[3];null!=R&&(t.ma=R,t.j.info("VER="+t.ma));const O=D[4];null!=O&&(t.Ca=O,t.j.info("SVER="+t.Ca));const G=D[5];null!=G&&"number"==typeof G&&0<G&&(t.J=r=1.5*G,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const q=n.g;if(q){const te=q.g?q.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(te){var c=r.h;c.g||-1==te.indexOf("spdy")&&-1==te.indexOf("quic")&&-1==te.indexOf("h2")||(c.j=c.l,c.g=new Set,c.h&&(Hy(c,c.h),c.h=null))}if(r.D){const Se=q.g?q.g.getResponseHeader("X-HTTP-Session-Id"):null;Se&&(r.za=Se,cn(r.F,r.D,Se))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var h=n;if((r=t).sa=so(r,r.H?r.ka:null,r.V),h.J){vE(r.h,h);var y=h,w=r.J;w&&y.setTimeout(w),y.B&&(bu(y),lg(y)),r.g=h}else aI(r);0<t.i.length&&TE(t)}else"stop"!=D[0]&&"close"!=D[0]||io(t,7);else 3==t.G&&("stop"==D[0]||"close"==D[0]?"stop"==D[0]?io(t,7):qy(t):"noop"!=D[0]&&t.l&&t.l.wa(D),t.A=0)}ig(4)}catch(D){}}function pE(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Zp(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if("undefined"!=typeof Map&&n instanceof Map)return Array.from(n.keys());if(!("undefined"!=typeof Set&&n instanceof Set)){if(Zp(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function(n){if(n.W&&"function"==typeof n.W)return n.W();if("undefined"!=typeof Map&&n instanceof Map||"undefined"!=typeof Set&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(Zp(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),a=r.length,c=0;c<a;c++)e.call(void 0,r[c],t&&t[c],n)}(it=ky.prototype).setTimeout=function(n){this.O=n},it.ib=function(n){n=n.target;const e=this.L;e&&3==Ic(n)?e.l():this.La(n)},it.La=function(n){try{if(n==this.g)e:{const R=Ic(this.g);var e=this.g.Ea();const O=this.g.aa();if(!(3>R)&&(3!=R||Aw||this.g&&(this.h.h||this.g.fa()||ro(this.g)))){this.I||4!=R||7==e||ig(8==e||0>=O?3:2),bu(this);var t=this.g.aa();this.Y=t;t:if(Pa(this)){var r=ro(this.g);n="";var a=r.length,c=4==Ic(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Lo(this),Ph(this);var h="";break t}this.h.i=new It.TextDecoder}for(e=0;e<a;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:c&&e==a-1});r.splice(0,a),this.h.g+=n,this.C=0,h=this.h.g}else h=this.g.fa();if(this.i=200==t,function(n,e,t,r,a,c,h){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+a+"]: "+e+"\n"+t+"\n"+c+" "+h})}(this.j,this.u,this.A,this.m,this.U,R,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var y,w=this.g;if((y=w.g?w.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!by(y)){var D=y;break t}}D=null}if(!(t=D)){this.i=!1,this.o=3,zi(12),Lo(this),Ph(this);break e}Nh(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,jl(this,t)}this.P?(cg(this,R,h),Aw&&this.i&&3==R&&(oE(this.S,this.T,"tick",this.hb),this.T.start())):(Nh(this.j,this.m,h,null),jl(this,h)),4==R&&Lo(this),this.i&&!this.I&&(4==R?cI(this.l,this):(this.i=!1,lg(this)))}else 400==t&&0<h.indexOf("Unknown SID")?(this.o=3,zi(12)):(this.o=0,zi(13)),Lo(this),Ph(this)}}}catch(R){}},it.hb=function(){if(this.g){var n=Ic(this.g),e=this.g.fa();this.C<e.length&&(bu(this),cg(this,n,e),this.i&&4!=n&&lg(this))}},it.cancel=function(){this.I=!0,Lo(this)},it.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(ig(3),zi(17)),Lo(this),this.o=2,Ph(this)):aA(this,this.V-n)};var Kw=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Hl(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Hl){this.h=void 0!==e?e:n.h,Vy(this,n.j),this.s=n.s,this.g=n.g,Uy(this,n.m),this.l=n.l,e=n.i;var t=new pg;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),gE(this,t),this.o=n.o}else n&&(t=String(n).match(Kw))?(this.h=!!e,Vy(this,t[1]||"",!0),this.s=hg(t[2]||""),this.g=hg(t[3]||"",!0),Uy(this,t[4]),this.l=hg(t[5]||"",!0),gE(this,t[6]||"",!0),this.o=hg(t[7]||"")):(this.h=!!e,this.i=new pg(null,this.h))}function Vo(n){return new Hl(n)}function Vy(n,e,t){n.j=t?hg(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Uy(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function gE(n,e,t){e instanceof pg?(n.i=e,function(n,e){e&&!n.j&&(wu(n),n.i=null,n.g.forEach(function(t,r){var a=r.toLowerCase();r!=a&&(xn(this,r),hA(this,a,t))},n)),n.j=e}(n.i,n.h)):(t||(e=fg(e,dA)),n.i=new pg(e,n.h))}function cn(n,e,t){n.i.set(e,t)}function dg(n){return cn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function hg(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function fg(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,kh),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function kh(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Hl.prototype.toString=function(){var n=[],e=this.j;e&&n.push(fg(e,Qw,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(fg(e,Qw,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(fg(t,"/"==t.charAt(0)?lA:cA,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",fg(t,sM)),n.join("")};var Qw=/[#\/\?@]/g,cA=/[#\?:]/g,lA=/[#\?]/g,dA=/[#\?@]/g,sM=/#/g;function pg(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function wu(n){n.g||(n.g=new Map,n.h=0,n.i&&function(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),a=null;if(0<=r){var c=n[t].substring(0,r);a=n[t].substring(r+1)}else c=n[t];e(c,a?decodeURIComponent(a.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function xn(n,e){wu(n),e=hs(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function By(n,e){return wu(n),e=hs(n,e),n.g.has(e)}function hA(n,e,t){xn(n,e),0<t.length&&(n.i=null,n.g.set(hs(n,e),Dw(t)),n.h+=t.length)}function hs(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function fA(n){this.l=n||pA,n=It.PerformanceNavigationTiming?0<(n=It.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(It.g&&It.g.Ga&&It.g.Ga()&&It.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(it=pg.prototype).add=function(n,e){wu(this),this.i=null,n=hs(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},it.forEach=function(n,e){wu(this),this.g.forEach(function(t,r){t.forEach(function(a){n.call(e,a,r,this)},this)},this)},it.oa=function(){wu(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const a=n[r];for(let c=0;c<a.length;c++)t.push(e[r])}return t},it.W=function(n){wu(this);let e=[];if("string"==typeof n)By(this,n)&&(e=e.concat(this.g.get(hs(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},it.set=function(n,e){return wu(this),this.i=null,By(this,n=hs(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},it.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},it.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const c=encodeURIComponent(String(r)),h=this.W(r);for(r=0;r<h.length;r++){var a=c;""!==h[r]&&(a+="="+encodeURIComponent(String(h[r]))),n.push(a)}}return this.i=n.join("&")};var pA=10;function Jw(n){return!!n.h||!!n.g&&n.g.size>=n.j}function _E(n){return n.h?1:n.g?n.g.size:0}function jy(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Hy(n,e){n.g?n.g.add(e):n.h=e}function vE(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function Xw(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return Dw(n.i)}function EE(){}function gg(){this.g=new EE}function bE(n,e,t){const r=t||"";try{pE(n,function(a,c){let h=a;Kp(a)&&(h=iE(a)),e.push(r+c+"="+encodeURIComponent(h))})}catch(a){throw e.push(r+"type="+encodeURIComponent("_badmap")),a}}function mg(n,e,t,r,a){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,a(r)}catch(c){}}function Fh(n){this.l=n.ac||null,this.j=n.jb||!1}function yg(n,e){yi.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=wE,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}fA.prototype.cancel=function(){if(this.i=Xw(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},EE.prototype.stringify=function(n){return It.JSON.stringify(n,void 0)},EE.prototype.parse=function(n){return It.JSON.parse(n,void 0)},Si(Fh,ag),Fh.prototype.g=function(){return new yg(this.l,this.j)},Fh.prototype.i=function(n){return function(){return n}}({}),Si(yg,yi);var wE=0;function tI(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function _g(n){n.readyState=4,n.l=null,n.j=null,n.A=null,vg(n)}function vg(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(it=yg.prototype).open=function(n,e){if(this.readyState!=wE)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,vg(this)},it.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||It).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},it.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,_g(this)),this.readyState=wE},it.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,vg(this)),this.g&&(this.readyState=3,vg(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(void 0!==It.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;tI(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},it.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?_g(this):vg(this),3==this.readyState&&tI(this)}},it.Va=function(n){this.g&&(this.response=this.responseText=n,_g(this))},it.Ua=function(n){this.g&&(this.response=n,_g(this))},it.ga=function(){this.g&&_g(this)},it.setRequestHeader=function(n,e){this.v.append(n,e)},it.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},it.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(yg.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var nI=It.JSON.parse;function cr(n){yi.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=IE,this.K=this.L=!1}Si(cr,yi);var IE="",gA=/^https?$/i,mA=["POST","PUT"];function yA(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,$y(n),Eg(n)}function $y(n){n.D||(n.D=!0,Zr(n,"complete"),Zr(n,"error"))}function rI(n){if(n.h&&void 0!==yy&&(!n.C[1]||4!=Ic(n)||2!=n.aa()))if(n.v&&4==Ic(n))sE(n.Ha,0,n);else if(Zr(n,"readystatechange"),4==Ic(n)){n.h=!1;try{const y=n.aa();e:switch(y){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===y){var a=String(n.H).match(Kw)[1]||null;if(!a&&It.self&&It.self.location){var c=It.self.location.protocol;a=c.substr(0,c.length-1)}r=!gA.test(a?a.toLowerCase():"")}t=r}if(t)Zr(n,"complete"),Zr(n,"success");else{n.m=6;try{var h=2<Ic(n)?n.g.statusText:""}catch(w){h=""}n.j=h+" ["+n.aa()+"]",$y(n)}}finally{Eg(n)}}}function Eg(n,e){if(n.g){CE(n);const t=n.g,r=n.C[0]?ds:null;n.g=null,n.C=null,e||Zr(n,"ready");try{t.onreadystatechange=r}catch(a){}}}function CE(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(It.clearTimeout(n.A),n.A=null)}function Ic(n){return n.g?n.g.readyState:0}function ro(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case IE:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function _A(n){let e="";return eg(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function iI(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=_A(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):cn(n,e,t))}function Gy(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function DE(n){this.Ca=0,this.i=[],this.j=new Ry,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=Gy("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=Gy("baseRetryDelayMs",5e3,n),this.bb=Gy("retryDelaySeedMs",1e4,n),this.$a=Gy("forwardChannelMaxRetries",2,n),this.ta=Gy("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new fA(n&&n.concurrentRequestLimit),this.Fa=new gg,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function qy(n){if(sI(n),3==n.G){var e=n.U++,t=Vo(n.F);cn(t,"SID",n.I),cn(t,"RID",e),cn(t,"TYPE","terminate"),wg(n,t),(e=new ky(n,n.j,e,void 0)).K=2,e.v=dg(Vo(t)),t=!1,It.navigator&&It.navigator.sendBeacon&&(t=It.navigator.sendBeacon(e.v.toString(),"")),!t&&It.Image&&((new Image).src=e.v,t=!0),t||(e.g=Lh(e.l,null),e.g.da(e.v)),e.F=Date.now(),lg(e)}xE(n)}function bg(n){n.g&&(SE(n),n.g.cancel(),n.g=null)}function sI(n){bg(n),n.u&&(It.clearTimeout(n.u),n.u=null),Zy(n),n.h.cancel(),n.m&&("number"==typeof n.m&&It.clearTimeout(n.m),n.m=null)}function TE(n){Jw(n.h)||n.m||(n.m=!0,Lw(n.Ja,n),n.C=0)}function zy(n,e){var t;t=e?e.m:n.U++;const r=Vo(n.F);cn(r,"SID",n.I),cn(r,"RID",t),cn(r,"AID",n.T),wg(n,r),n.o&&n.s&&iI(r,n.o,n.s),t=new ky(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=Wy(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),Hy(n.h,t),Ly(t,r,e)}function wg(n,e){n.ia&&eg(n.ia,function(t,r){cn(e,r,t)}),n.l&&pE({},function(t,r){cn(e,r,t)})}function Wy(n,e,t){t=Math.min(n.i.length,t);var r=n.l?qi(n.l.Ra,n.l,n):null;e:{var a=n.i;let c=-1;for(;;){const h=["count="+t];-1==c?0<t?(c=a[0].h,h.push("ofs="+c)):c=0:h.push("ofs="+c);let y=!0;for(let w=0;w<t;w++){let D=a[w].h;const R=a[w].g;if(D-=c,0>D)c=Math.max(0,a[w].h-100),y=!1;else try{bE(R,h,"req"+D+"_")}catch(O){r&&r(R)}}if(y){r=h.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,r}function aI(n){n.g||n.u||(n.Z=1,Lw(n.Ia,n),n.A=0)}function AE(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=sg(qi(n.Ia,n),Ig(n,n.A)),n.A++,0))}function SE(n){null!=n.B&&(It.clearTimeout(n.B),n.B=null)}function uI(n){n.g=new ky(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=Vo(n.sa);cn(e,"RID","rpc"),cn(e,"SID",n.I),cn(e,"CI",n.L?"0":"1"),cn(e,"AID",n.T),cn(e,"TYPE","xmlhttp"),wg(n,e),n.o&&n.s&&iI(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=dg(Vo(e)),t.s=null,t.P=!0,hE(t,n)}function Zy(n){null!=n.v&&(It.clearTimeout(n.v),n.v=null)}function cI(n,e){var t=null;if(n.g==e){Zy(n),SE(n),n.g=null;var r=2}else{if(!jy(n.h,e))return;t=e.D,vE(n.h,e),r=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var a=n.C;Zr(r=uE(),new My(r,t,e,a)),TE(n)}else aI(n);else if(3==(a=e.o)||0==a&&0<n.pa||!(1==r&&function(n,e){return!(_E(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=sg(qi(n.Ja,n,e),Ig(n,n.C)),n.C++,0)))}(n,e)||2==r&&AE(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),a){case 1:io(n,5);break;case 4:io(n,10);break;case 3:io(n,6);break;default:io(n,2)}}function Ig(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function io(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=qi(n.kb,n);t||(t=new Hl("//www.google.com/images/cleardot.gif"),It.location&&"http"==It.location.protocol||Vy(t,"https"),dg(t)),function(n,e){const t=new Ry;if(It.Image){const r=new Image;r.onload=Yp(mg,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Yp(mg,t,r,"TestLoadImage: error",!1,e),r.onabort=Yp(mg,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Yp(mg,t,r,"TestLoadImage: timeout",!1,e),It.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else zi(2);n.G=0,n.l&&n.l.va(e),xE(n),sI(n)}function xE(n){if(n.G=0,n.la=[],n.l){const e=Xw(n.h);(0!=e.length||0!=n.i.length)&&(Tw(n.la,e),Tw(n.la,n.i),n.h.i.length=0,Dw(n.i),n.i.length=0),n.l.ua()}}function so(n,e,t){var r=t instanceof Hl?Vo(t):new Hl(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),Uy(r,r.m);else{var a=It.location;r=a.protocol,e=e?e+"."+a.hostname:a.hostname,a=+a.port;var c=new Hl(null,void 0);r&&Vy(c,r),e&&(c.g=e),a&&Uy(c,a),t&&(c.l=t),r=c}return e=n.za,(t=n.D)&&e&&cn(r,t,e),cn(r,"VER",n.ma),wg(n,r),r}function Lh(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new cr(t&&n.Da&&!n.ra?new Fh({jb:!0}):n.ra)).Ka(n.H),e}function lI(){}function Ky(){if(Xp&&!(10<=Number(Rw)))throw Error("Environmental error: no available transport.")}function Wi(n,e){yi.call(this),this.g=new DE(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!by(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!by(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new lr(this)}function Uo(n){Py.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function Vh(){lE.call(this),this.status=1}function lr(n){this.g=n}(it=cr.prototype).Ka=function(n){this.L=n},it.da=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():dE.g(),this.C=function(n){return n.h||(n.h=n.i())}(this.u?this.u:dE),this.g.onreadystatechange=qi(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(c){return void yA(this,c)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var a in r)t.set(a,r[a]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const c of r.keys())t.set(c,r.get(c))}r=Array.from(t.keys()).find(c=>"content-type"==c.toLowerCase()),a=It.FormData&&n instanceof It.FormData,!(0<=Ey(mA,e))||r||a||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[c,h]of t)this.g.setRequestHeader(c,h);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{CE(this),0<this.B&&((this.K=function(n){return Xp&&QT()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=qi(this.qa,this)):this.A=sE(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(c){yA(this,c)}},it.qa=function(){void 0!==yy&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Zr(this,"timeout"),this.abort(8))},it.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Zr(this,"complete"),Zr(this,"abort"),Eg(this))},it.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Eg(this,!0)),cr.X.M.call(this)},it.Ha=function(){this.s||(this.F||this.v||this.l?rI(this):this.fb())},it.fb=function(){rI(this)},it.aa=function(){try{return 2<Ic(this)?this.g.status:-1}catch(n){return-1}},it.fa=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},it.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),nI(e)}},it.Ea=function(){return this.m},it.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(it=DE.prototype).ma=8,it.G=1,it.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const a=new ky(this,this.j,n,void 0);let c=this.s;if(this.S&&(c?(c=Nw(c),Ow(c,this.S)):c=this.S),null!==this.o||this.N||(a.H=c,c=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Wy(this,a,e),cn(t=Vo(this.F),"RID",n),cn(t,"CVER",22),this.D&&cn(t,"X-HTTP-Session-Id",this.D),wg(this,t),c&&(this.N?e="headers="+encodeURIComponent(String(_A(c)))+"&"+e:this.o&&iI(t,this.o,c)),Hy(this.h,a),this.Ya&&cn(t,"TYPE","init"),this.O?(cn(t,"$req",e),cn(t,"SID","null"),a.Z=!0,Ly(a,t,null)):Ly(a,t,e),this.G=2}}else 3==this.G&&(n?zy(this,n):0==this.i.length||Jw(this.h)||zy(this))},it.Ia=function(){if(this.u=null,uI(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=sg(qi(this.eb,this),n)}},it.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,zi(10),bg(this),uI(this))},it.cb=function(){null!=this.v&&(this.v=null,bg(this),AE(this),zi(19))},it.kb=function(n){n?(this.j.info("Successfully pinged google.com"),zi(2)):(this.j.info("Failed to ping google.com"),zi(1))},(it=lI.prototype).xa=function(){},it.wa=function(){},it.va=function(){},it.ua=function(){},it.Ra=function(){},Ky.prototype.g=function(n,e){return new Wi(n,e)},Si(Wi,yi),Wi.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;zi(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=so(n,null,n.V),TE(n)},Wi.prototype.close=function(){qy(this.g)},Wi.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=iE(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&TE(e)},Wi.prototype.M=function(){this.g.l=null,delete this.j,qy(this.g),delete this.g,Wi.X.M.call(this)},Si(Uo,Py),Si(Vh,lE),Si(lr,lI),lr.prototype.xa=function(){Zr(this.g,"a")},lr.prototype.wa=function(n){Zr(this.g,new Uo(n))},lr.prototype.va=function(n){Zr(this.g,new Vh(n))},lr.prototype.ua=function(){Zr(this.g,"b")},Ky.prototype.createWebChannel=Ky.prototype.g,Wi.prototype.send=Wi.prototype.u,Wi.prototype.open=Wi.prototype.m,Wi.prototype.close=Wi.prototype.close,Ny.NO_ERROR=0,Ny.TIMEOUT=8,Ny.HTTP_ERROR=6,og.COMPLETE="complete",Oy.EventType=Bl,Bl.OPEN="a",Bl.CLOSE="b",Bl.ERROR="c",Bl.MESSAGE="d",yi.prototype.listen=yi.prototype.N,cr.prototype.listenOnce=cr.prototype.O,cr.prototype.getLastError=cr.prototype.Oa,cr.prototype.getLastErrorCode=cr.prototype.Ea,cr.prototype.getStatus=cr.prototype.aa,cr.prototype.getResponseJson=cr.prototype.Sa,cr.prototype.getResponseText=cr.prototype.fa,cr.prototype.send=cr.prototype.da,cr.prototype.setWithCredentials=cr.prototype.Ka;var $l=lt.createWebChannelTransport=function(){return new Ky},Yy=lt.getStatEventTarget=function(){return uE()},fs=lt.ErrorCode=Ny,RE=lt.EventType=og,Uh=lt.Event=Ul,Gl=lt.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},Bh=lt.FetchXmlHttpFactory=Fh,Iu=lt.WebChannel=Oy,jh=lt.XhrIo=cr;const ql="@firebase/firestore";class Gn{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Gn.UNAUTHENTICATED=new Gn(null),Gn.GOOGLE_CREDENTIALS=new Gn("google-credentials-uid"),Gn.FIRST_PARTY=new Gn("first-party-uid"),Gn.MOCK_USER=new Gn("mock-user");let Bo="9.12.1";const Os=new Ec.Yd("@firebase/firestore");function Qy(){return Os.logLevel}function xe(n,...e){if(Os.logLevel<=Ec.in.DEBUG){const t=e.map(Jy);Os.debug(`Firestore (${Bo}): ${n}`,...t)}}function nr(n,...e){if(Os.logLevel<=Ec.in.ERROR){const t=e.map(Jy);Os.error(`Firestore (${Bo}): ${n}`,...t)}}function Cc(n,...e){if(Os.logLevel<=Ec.in.WARN){const t=e.map(Jy);Os.warn(`Firestore (${Bo}): ${n}`,...t)}}function Jy(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function Qe(n="Unexpected state"){const e=`FIRESTORE (${Bo}) INTERNAL ASSERTION FAILED: `+n;throw nr(e),new Error(e)}function pt(n,e){n||Qe()}function $e(n,e){return n}const he={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ie extends nn.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Tr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class ME{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class vA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Gn.UNAUTHENTICATED))}shutdown(){}}class aM{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class EA{constructor(e){this.t=e,this.currentUser=Gn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let a=this.i;const c=D=>this.i!==a?(a=this.i,t(D)):Promise.resolve();let h=new Tr;this.o=()=>{this.i++,this.currentUser=this.u(),h.resolve(),h=new Tr,e.enqueueRetryable(()=>c(this.currentUser))};const y=()=>{const D=h;e.enqueueRetryable((0,ge.Z)(function*(){yield D.promise,yield c(r.currentUser)}))},w=D=>{xe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=D,this.auth.addAuthTokenListener(this.o),y()};this.t.onInit(D=>w(D)),setTimeout(()=>{if(!this.auth){const D=this.t.getImmediate({optional:!0});D?w(D):(xe("FirebaseAuthCredentialsProvider","Auth not yet detected"),h.resolve(),h=new Tr)}},0),y()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(xe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(pt("string"==typeof r.accessToken),new ME(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return pt(null===e||"string"==typeof e),new Gn(e)}}class fI{constructor(e,t,r,a){this.h=e,this.l=t,this.m=r,this.g=a,this.type="FirstParty",this.user=Gn.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(pt(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class bA{constructor(e,t,r,a){this.h=e,this.l=t,this.m=r,this.g=a}getToken(){return Promise.resolve(new fI(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(Gn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class NE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class wA{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=c=>{null!=c.error&&xe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const h=c.token!==this.A;return this.A=c.token,xe("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable(()=>r(c))};const a=c=>{xe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.appCheck.addTokenListener(this.o)};this.T.onInit(c=>a(c)),setTimeout(()=>{if(!this.appCheck){const c=this.T.getImmediate({optional:!0});c?a(c):xe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(pt("string"==typeof t.token),this.A=t.token,new NE(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function cM(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class pI{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const a=cM(40);for(let c=0;c<a.length;++c)r.length<20&&a[c]<t&&(r+=e.charAt(a[c]%e.length))}return r}}function Mt(n,e){return n<e?-1:n>e?1:0}function Cg(n,e,t){return n.length===e.length&&n.every((r,a)=>t(r,e[a]))}function IA(n){return n+"\0"}class qn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ie(he.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ie(he.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ie(he.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ie(he.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return qn.fromMillis(Date.now())}static fromDate(e){return qn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new qn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Mt(this.nanoseconds,e.nanoseconds):Mt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class gt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new gt(e)}static min(){return new gt(new qn(0,0))}static max(){return new gt(new qn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Xy{constructor(e,t,r){void 0===t?t=0:t>e.length&&Qe(),void 0===r?r=e.length-t:r>e.length-t&&Qe(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Xy.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Xy?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let a=0;a<r;a++){const c=e.get(a),h=t.get(a);if(c<h)return-1;if(c>h)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Jt extends Xy{construct(e,t,r){return new Jt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ie(he.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(a=>a.length>0))}return new Jt(t)}static emptyPath(){return new Jt([])}}const CA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Fn extends Xy{construct(e,t,r){return new Fn(e,t,r)}static isValidIdentifier(e){return CA.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Fn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Fn(["__name__"])}static fromServerFormat(e){const t=[];let r="",a=0;const c=()=>{if(0===r.length)throw new Ie(he.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let h=!1;for(;a<e.length;){const y=e[a];if("\\"===y){if(a+1===e.length)throw new Ie(he.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const w=e[a+1];if("\\"!==w&&"."!==w&&"`"!==w)throw new Ie(he.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=w,a+=2}else"`"===y?(h=!h,a++):"."!==y||h?(r+=y,a++):(c(),a++)}if(c(),h)throw new Ie(he.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Fn(t)}static emptyPath(){return new Fn([])}}class Ve{constructor(e){this.path=e}static fromPath(e){return new Ve(Jt.fromString(e))}static fromName(e){return new Ve(Jt.fromString(e).popFirst(5))}static empty(){return new Ve(Jt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Jt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Jt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ve(new Jt(e.slice()))}}class e_{constructor(e,t,r,a){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=a}}function gI(n){return n.fields.find(e=>2===e.kind)}function Hh(n){return n.fields.filter(e=>2!==e.kind)}e_.UNKNOWN_ID=-1;class t_{constructor(e,t){this.fieldPath=e,this.kind=t}}class n_{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new n_(0,Ps.min())}}function yI(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,a=gt.fromTimestamp(1e9===r?new qn(t+1,0):new qn(t,r));return new Ps(a,Ve.empty(),e)}function zl(n){return new Ps(n.readTime,n.key,-1)}class Ps{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Ps(gt.min(),Ve.empty(),-1)}static max(){return new Ps(gt.max(),Ve.empty(),-1)}}function r_(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ve.comparator(n.documentKey,e.documentKey),0!==t?t:Mt(n.largestBatchId,e.largestBatchId))}const _I="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class OE{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function jo(n){return PE.apply(this,arguments)}function PE(){return PE=(0,ge.Z)(function*(n){if(n.code!==he.FAILED_PRECONDITION||n.message!==_I)throw n;xe("LocalStore","Unexpectedly lost primary lease")}),PE.apply(this,arguments)}class ae{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Qe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ae((r,a)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(r,a)},this.catchCallback=c=>{this.wrapFailure(t,c).next(r,a)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ae?t:ae.resolve(t)}catch(t){return ae.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ae.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ae.reject(t)}static resolve(e){return new ae((t,r)=>{t(e)})}static reject(e){return new ae((t,r)=>{r(e)})}static waitFor(e){return new ae((t,r)=>{let a=0,c=0,h=!1;e.forEach(y=>{++a,y.next(()=>{++c,h&&c===a&&t()},w=>r(w))}),h=!0,c===a&&t()})}static or(e){let t=ae.resolve(!1);for(const r of e)t=t.next(a=>a?ae.resolve(a):r());return t}static forEach(e,t){const r=[];return e.forEach((a,c)=>{r.push(t.call(this,a,c))}),this.waitFor(r)}static mapArray(e,t){return new ae((r,a)=>{const c=e.length,h=new Array(c);let y=0;for(let w=0;w<c;w++){const D=w;t(e[D]).next(R=>{h[D]=R,++y,y===c&&r(h)},R=>a(R))}})}static doWhile(e,t){return new ae((r,a)=>{const c=()=>{!0===e()?t().next(()=>{c()},a):r()};c()})}}class i_{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new Tr,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new Dg(e,t.error)):this.P.resolve()},this.transaction.onerror=r=>{const a=s_(r.target.error);this.P.reject(new Dg(e,a))}}static open(e,t,r,a){try{return new i_(t,e.transaction(a,r))}catch(c){throw new Dg(t,c)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(xe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new vI(t)}}class Ho{constructor(e,t,r){this.name=e,this.version=t,this.S=r,12.2===Ho.D((0,nn.z$)())&&nr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return xe("SimpleDb","Removing database:",e),Wl(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,nn.hl)())return!1;if(Ho.N())return!0;const e=(0,nn.z$)(),t=Ho.D(e),r=0<t&&t<10,a=Ho.k(e),c=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||c)}static N(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}F(e){var t=this;return(0,ge.Z)(function*(){return t.db||(xe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,a)=>{const c=indexedDB.open(t.name,t.version);c.onsuccess=h=>{r(h.target.result)},c.onblocked=()=>{a(new Dg(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},c.onerror=h=>{const y=h.target.error;a("VersionError"===y.name?new Ie(he.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===y.name?new Ie(he.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+y):new Dg(e,y))},c.onupgradeneeded=h=>{xe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',h.oldVersion),t.S.$(h.target.result,c.transaction,h.oldVersion,t.version).next(()=>{xe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,a){var c=this;return(0,ge.Z)(function*(){const h="readonly"===t;let y=0;for(;;){++y;try{c.db=yield c.F(e);const w=i_.open(c.db,e,h?"readonly":"readwrite",r),D=a(w).next(R=>(w.V(),R)).catch(R=>(w.abort(R),ae.reject(R))).toPromise();return D.catch(()=>{}),yield w.v,D}catch(w){const D=w,R="FirebaseError"!==D.name&&y<3;if(xe("SimpleDb","Transaction failed with error:",D.message,"Retrying:",R),c.close(),!R)return Promise.reject(D)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class DA{constructor(e){this.U=e,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(e){this.U=e}done(){this.q=!0}j(e){this.K=e}delete(){return Wl(this.U.delete())}}class Dg extends Ie{constructor(e,t){super(he.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Dc(n){return"IndexedDbTransactionError"===n.name}class vI{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(xe("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(xe("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Wl(r)}add(e){return xe("SimpleDb","ADD",this.store.name,e,e),Wl(this.store.add(e))}get(e){return Wl(this.store.get(e)).next(t=>(void 0===t&&(t=null),xe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return xe("SimpleDb","DELETE",this.store.name,e),Wl(this.store.delete(e))}count(){return xe("SimpleDb","COUNT",this.store.name),Wl(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const a=this.cursor(r),c=[];return this.H(a,(h,y)=>{c.push(y)}).next(()=>c)}{const a=this.store.getAll(r.range);return new ae((c,h)=>{a.onerror=y=>{h(y.target.error)},a.onsuccess=y=>{c(y.target.result)}})}}J(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new ae((a,c)=>{r.onerror=h=>{c(h.target.error)},r.onsuccess=h=>{a(h.target.result)}})}Y(e,t){xe("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const a=this.cursor(r);return this.H(a,(c,h,y)=>y.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const a=this.cursor(r);return this.H(a,t)}tt(e){const t=this.cursor({});return new ae((r,a)=>{t.onerror=c=>{const h=s_(c.target.error);a(h)},t.onsuccess=c=>{const h=c.target.result;h?e(h.primaryKey,h.value).next(y=>{y?h.continue():r()}):r()}})}H(e,t){const r=[];return new ae((a,c)=>{e.onerror=h=>{c(h.target.error)},e.onsuccess=h=>{const y=h.target.result;if(!y)return void a();const w=new DA(y),D=t(y.primaryKey,y.value,w);if(D instanceof ae){const R=D.catch(O=>(w.done(),ae.reject(O)));r.push(R)}w.isDone?a():null===w.G?y.continue():y.continue(w.G)}}).next(()=>ae.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Wl(n){return new ae((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const a=s_(r.target.error);t(a)}})}let kE=!1;function s_(n){const e=Ho.D((0,nn.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Ie("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return kE||(kE=!0,setTimeout(()=>{throw r},0)),r}}return n}class FE{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;xe("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,ge.Z)(function*(){t.task=null;try{xe("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(r){Dc(r)?xe("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield jo(r)}yield t.nt(6e4)}))}}class dM{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,ge.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.it(r,e))})()}it(e,t){const r=new Set;let a=t,c=!0;return ae.doWhile(()=>!0===c&&a>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(h=>{if(null!==h&&!r.has(h))return xe("IndexBackiller",`Processing collection: ${h}`),this.rt(e,h,a).next(y=>{a-=y,r.add(h)});c=!1})).next(()=>t-a)}rt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(a=>this.localStore.localDocuments.getNextDocuments(e,t,a,r).next(c=>{const h=c.changes;return this.localStore.indexManager.updateIndexEntries(e,h).next(()=>this.ot(a,c)).next(y=>(xe("IndexBackiller",`Updating offset: ${y}`),this.localStore.indexManager.updateCollectionGroup(e,t,y))).next(()=>h.size)}))}ot(e,t){let r=e;return t.changes.forEach((a,c)=>{const h=zl(c);r_(h,r)>0&&(r=h)}),new Ps(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Ri{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ut(r),this.ct=r=>t.writeSequenceNumber(r))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}function EI(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function $h(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Gh(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}Ri.at=-1;class rr{constructor(e,t){this.comparator=e,this.root=t||Ar.EMPTY}insert(e,t){return new rr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ar.BLACK,null,null))}remove(e){return new rr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ar.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const a=this.comparator(e,r.key);if(0===a)return t+r.left.size;a<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new qh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new qh(this.root,e,this.comparator,!1)}getReverseIterator(){return new qh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new qh(this.root,e,this.comparator,!0)}}class qh{constructor(e,t,r,a){this.isReverse=a,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=t?r(e.key,t):1,t&&a&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(0===c){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ar{constructor(e,t,r,a,c){this.key=e,this.value=t,this.color=null!=r?r:Ar.RED,this.left=null!=a?a:Ar.EMPTY,this.right=null!=c?c:Ar.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,a,c){return new Ar(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=a?a:this.left,null!=c?c:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let a=this;const c=r(e,a.key);return a=c<0?a.copy(null,null,null,a.left.insert(e,t,r),null):0===c?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,r)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Ar.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),0===t(e,a.key)){if(a.right.isEmpty())return Ar.EMPTY;r=a.right.min(),a=a.copy(r.key,r.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ar.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ar.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Qe();const e=this.left.check();if(e!==this.right.check())throw Qe();return e+(this.isRed()?0:1)}}Ar.EMPTY=null,Ar.RED=!0,Ar.BLACK=!1,Ar.EMPTY=new class{constructor(){this.size=0}get key(){throw Qe()}get value(){throw Qe()}get color(){throw Qe()}get left(){throw Qe()}get right(){throw Qe()}copy(n,e,t,r,a){return this}insert(n,e,t){return new Ar(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ln{constructor(e){this.comparator=e,this.data=new rr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const a=r.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new o_(this.data.getIterator())}getIteratorFrom(e){return new o_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof ln)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,c=r.getNext().key;if(0!==this.comparator(a,c))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new ln(this.comparator);return t.data=e,t}}class o_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Tc(n){return n.hasNext()?n.getNext():void 0}class ps{constructor(e){this.fields=e,e.sort(Fn.comparator)}static empty(){return new ps([])}unionWith(e){let t=new ln(Fn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new ps(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Cg(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Sr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Sr(t)}static fromUint8Array(e){const t=function(r){let a="";for(let c=0;c<r.length;++c)a+=String.fromCharCode(r[c]);return a}(e);return new Sr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Mt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Sr.EMPTY_BYTE_STRING=new Sr("");const bI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Cu(n){if(pt(!!n),"string"==typeof n){let e=0;const t=bI.exec(n);if(pt(!!t),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ir(n.seconds),nanos:ir(n.nanos)}}function ir(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Ac(n){return"string"==typeof n?Sr.fromBase64String(n):Sr.fromUint8Array(n)}function Tg(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function LE(n){const e=n.mapValue.fields.__previous_value__;return Tg(e)?LE(e):e}function Zl(n){const e=Cu(n.mapValue.fields.__local_write_time__.timestampValue);return new qn(e.seconds,e.nanos)}class VE{constructor(e,t,r,a,c,h,y,w){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=a,this.ssl=c,this.forceLongPolling=h,this.autoDetectLongPolling=y,this.useFetchStreams=w}}class Du{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Du("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Du&&e.projectId===this.projectId&&e.database===this.database}}function Ag(n){return null==n}function zh(n){return 0===n&&1/n==-1/0}function UE(n){return"number"==typeof n&&Number.isInteger(n)&&!zh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const ka={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Sg={nullValue:"NULL_VALUE"};function Kl(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Tg(n)?4:wI(n)?9007199254740991:10:Qe()}function Fa(n,e){if(n===e)return!0;const t=Kl(n);if(t!==Kl(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Zl(n).isEqual(Zl(e));case 3:return function(r,a){if("string"==typeof r.timestampValue&&"string"==typeof a.timestampValue&&r.timestampValue.length===a.timestampValue.length)return r.timestampValue===a.timestampValue;const c=Cu(r.timestampValue),h=Cu(a.timestampValue);return c.seconds===h.seconds&&c.nanos===h.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return a=e,Ac(n.bytesValue).isEqual(Ac(a.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,a){return ir(r.geoPointValue.latitude)===ir(a.geoPointValue.latitude)&&ir(r.geoPointValue.longitude)===ir(a.geoPointValue.longitude)}(n,e);case 2:return function(r,a){if("integerValue"in r&&"integerValue"in a)return ir(r.integerValue)===ir(a.integerValue);if("doubleValue"in r&&"doubleValue"in a){const c=ir(r.doubleValue),h=ir(a.doubleValue);return c===h?zh(c)===zh(h):isNaN(c)&&isNaN(h)}return!1}(n,e);case 9:return Cg(n.arrayValue.values||[],e.arrayValue.values||[],Fa);case 10:return function(r,a){const c=r.mapValue.fields||{},h=a.mapValue.fields||{};if(EI(c)!==EI(h))return!1;for(const y in c)if(c.hasOwnProperty(y)&&(void 0===h[y]||!Fa(c[y],h[y])))return!1;return!0}(n,e);default:return Qe()}var a}function xg(n,e){return void 0!==(n.values||[]).find(t=>Fa(t,e))}function Tu(n,e){if(n===e)return 0;const t=Kl(n),r=Kl(e);if(t!==r)return Mt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Mt(n.booleanValue,e.booleanValue);case 2:return function(a,c){const h=ir(a.integerValue||a.doubleValue),y=ir(c.integerValue||c.doubleValue);return h<y?-1:h>y?1:h===y?0:isNaN(h)?isNaN(y)?0:-1:1}(n,e);case 3:return a_(n.timestampValue,e.timestampValue);case 4:return a_(Zl(n),Zl(e));case 5:return Mt(n.stringValue,e.stringValue);case 6:return function(a,c){const h=Ac(a),y=Ac(c);return h.compareTo(y)}(n.bytesValue,e.bytesValue);case 7:return function(a,c){const h=a.split("/"),y=c.split("/");for(let w=0;w<h.length&&w<y.length;w++){const D=Mt(h[w],y[w]);if(0!==D)return D}return Mt(h.length,y.length)}(n.referenceValue,e.referenceValue);case 8:return function(a,c){const h=Mt(ir(a.latitude),ir(c.latitude));return 0!==h?h:Mt(ir(a.longitude),ir(c.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(a,c){const h=a.values||[],y=c.values||[];for(let w=0;w<h.length&&w<y.length;++w){const D=Tu(h[w],y[w]);if(D)return D}return Mt(h.length,y.length)}(n.arrayValue,e.arrayValue);case 10:return function(a,c){if(a===ka.mapValue&&c===ka.mapValue)return 0;if(a===ka.mapValue)return 1;if(c===ka.mapValue)return-1;const h=a.fields||{},y=Object.keys(h),w=c.fields||{},D=Object.keys(w);y.sort(),D.sort();for(let R=0;R<y.length&&R<D.length;++R){const O=Mt(y[R],D[R]);if(0!==O)return O;const G=Tu(h[y[R]],w[D[R]]);if(0!==G)return G}return Mt(y.length,D.length)}(n.mapValue,e.mapValue);default:throw Qe()}}function a_(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Mt(n,e);const t=Cu(n),r=Cu(e),a=Mt(t.seconds,r.seconds);return 0!==a?a:Mt(t.nanos,r.nanos)}function Yl(n){return u_(n)}function u_(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const a=Cu(r);return`time(${a.seconds},${a.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Ac(n.bytesValue).toBase64():"referenceValue"in n?Ve.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let a="[",c=!0;for(const h of r.values||[])c?c=!1:a+=",",a+=u_(h);return a+"]"}(n.arrayValue):"mapValue"in n?function(r){const a=Object.keys(r.fields||{}).sort();let c="{",h=!0;for(const y of a)h?h=!1:c+=",",c+=`${y}:${u_(r.fields[y])}`;return c+"}"}(n.mapValue):Qe();var e}function Sc(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function c_(n){return!!n&&"integerValue"in n}function Wh(n){return!!n&&"arrayValue"in n}function BE(n){return!!n&&"nullValue"in n}function jE(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Rg(n){return!!n&&"mapValue"in n}function l_(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return $h(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=l_(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=l_(n.arrayValue.values[t]);return e}return Object.assign({},n)}function wI(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function TA(n){return"nullValue"in n?Sg:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Sc(Du.empty(),Ve.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:Qe()}function II(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Sc(Du.empty(),Ve.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?ka:Qe()}function CI(n,e){const t=Tu(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function vr(n,e){const t=Tu(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Kr{constructor(e){this.value=e}static empty(){return new Kr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Rg(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=l_(t)}setAll(e){let t=Fn.emptyPath(),r={},a=[];e.forEach((h,y)=>{if(!t.isImmediateParentOf(y)){const w=this.getFieldsMap(t);this.applyChanges(w,r,a),r={},a=[],t=y.popLast()}h?r[y.lastSegment()]=l_(h):a.push(y.lastSegment())});const c=this.getFieldsMap(t);this.applyChanges(c,r,a)}delete(e){const t=this.field(e.popLast());Rg(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Fa(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let a=t.mapValue.fields[e.get(r)];Rg(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,r){$h(t,(a,c)=>e[a]=c);for(const a of r)delete e[a]}clone(){return new Kr(l_(this.value))}}function DI(n){const e=[];return $h(n.fields,(t,r)=>{const a=new Fn([t]);if(Rg(r)){const c=DI(r.mapValue).fields;if(0===c.length)e.push(a);else for(const h of c)e.push(a.child(h))}else e.push(a)}),new ps(e)}class wn{constructor(e,t,r,a,c,h){this.key=e,this.documentType=t,this.version=r,this.readTime=a,this.data=c,this.documentState=h}static newInvalidDocument(e){return new wn(e,0,gt.min(),gt.min(),Kr.empty(),0)}static newFoundDocument(e,t,r){return new wn(e,1,t,gt.min(),r,0)}static newNoDocument(e,t){return new wn(e,2,t,gt.min(),Kr.empty(),0)}static newUnknownDocument(e,t){return new wn(e,3,t,gt.min(),Kr.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Kr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Kr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=gt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof wn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new wn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class TI{constructor(e,t=null,r=[],a=[],c=null,h=null,y=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=a,this.limit=c,this.startAt=h,this.endAt=y,this.ht=null}}function AI(n,e=null,t=[],r=[],a=null,c=null,h=null){return new TI(n,e,t,r,a,c,h)}function xc(n){const e=$e(n);if(null===e.ht){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(a=r).field.canonicalString()+a.op.toString()+Yl(a.value);var a}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(a=r).field.canonicalString()+a.dir;var a}).join(","),Ag(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Yl(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Yl(r)).join(",")),e.ht=t}return e.ht}function La(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let a=0;a<n.orderBy.length;a++)if(!MI(n.orderBy[a],e.orderBy[a]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let a=0;a<n.filters.length;a++)if((t=n.filters[a]).op!==(r=e.filters[a]).op||!t.field.isEqual(r.field)||!Fa(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!OI(n.startAt,e.startAt)&&OI(n.endAt,e.endAt)}function d_(n){return Ve.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function h_(n,e){return n.filters.filter(t=>t instanceof Yr&&t.field.isEqual(e))}function HE(n,e,t){let r=Sg,a=!0;for(const c of h_(n,e)){let h=Sg,y=!0;switch(c.op){case"<":case"<=":h=TA(c.value);break;case"==":case"in":case">=":h=c.value;break;case">":h=c.value,y=!1;break;case"!=":case"not-in":h=Sg}CI({value:r,inclusive:a},{value:h,inclusive:y})<0&&(r=h,a=y)}if(null!==t)for(let c=0;c<n.orderBy.length;++c)if(n.orderBy[c].field.isEqual(e)){const h=t.position[c];CI({value:r,inclusive:a},{value:h,inclusive:t.inclusive})<0&&(r=h,a=t.inclusive);break}return{value:r,inclusive:a}}function xI(n,e,t){let r=ka,a=!0;for(const c of h_(n,e)){let h=ka,y=!0;switch(c.op){case">=":case">":h=II(c.value),y=!1;break;case"==":case"in":case"<=":h=c.value;break;case"<":h=c.value,y=!1;break;case"!=":case"not-in":h=ka}vr({value:r,inclusive:a},{value:h,inclusive:y})>0&&(r=h,a=y)}if(null!==t)for(let c=0;c<n.orderBy.length;++c)if(n.orderBy[c].field.isEqual(e)){const h=t.position[c];vr({value:r,inclusive:a},{value:h,inclusive:t.inclusive})>0&&(r=h,a=t.inclusive);break}return{value:r,inclusive:a}}class Yr extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,r):new fM(e,t,r):"array-contains"===t?new AA(e,r):"in"===t?new SA(e,r):"not-in"===t?new Va(e,r):"array-contains-any"===t?new Go(e,r):new Yr(e,t,r)}static lt(e,t,r){return"in"===t?new RI(e,r):new $E(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft(Tu(t,this.value)):null!==t&&Kl(this.value)===Kl(t)&&this.ft(Tu(t,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Qe()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class fM extends Yr{constructor(e,t,r){super(e,t,r),this.key=Ve.fromName(r.referenceValue)}matches(e){const t=Ve.comparator(e.key,this.key);return this.ft(t)}}class RI extends Yr{constructor(e,t){super(e,"in",t),this.keys=$o(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class $E extends Yr{constructor(e,t){super(e,"not-in",t),this.keys=$o(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function $o(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Ve.fromName(r.referenceValue))}class AA extends Yr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Wh(t)&&xg(t.arrayValue,this.value)}}class SA extends Yr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&xg(this.value.arrayValue,t)}}class Va extends Yr{constructor(e,t){super(e,"not-in",t)}matches(e){if(xg(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!xg(this.value.arrayValue,t)}}class Go extends Yr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Wh(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>xg(this.value.arrayValue,r))}}class Qr{constructor(e,t){this.position=e,this.inclusive=t}}class Ql{constructor(e,t="asc"){this.field=e,this.dir=t}}function MI(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function NI(n,e,t){let r=0;for(let a=0;a<n.position.length;a++){const c=e[a],h=n.position[a];if(r=c.field.isKeyField()?Ve.comparator(Ve.fromName(h.referenceValue),t.key):Tu(h,t.data.field(c.field)),"desc"===c.dir&&(r*=-1),0!==r)break}return r}function OI(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Fa(n.position[t],e.position[t]))return!1;return!0}class Au{constructor(e,t=null,r=[],a=[],c=null,h="F",y=null,w=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=a,this.limit=c,this.limitType=h,this.startAt=y,this.endAt=w,this._t=null,this.wt=null}}function PI(n,e,t,r,a,c,h,y){return new Au(n,e,t,r,a,c,h,y)}function Rc(n){return new Au(n)}function Zh(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function GE(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function f_(n){for(const e of n.filters)if(e.dt())return e.field;return null}function qE(n){return null!==n.collectionGroup}function Jl(n){const e=$e(n);if(null===e._t){e._t=[];const t=f_(e),r=GE(e);if(null!==t&&null===r)t.isKeyField()||e._t.push(new Ql(t)),e._t.push(new Ql(Fn.keyField(),"asc"));else{let a=!1;for(const c of e.explicitOrderBy)e._t.push(c),c.field.isKeyField()&&(a=!0);if(!a){const c=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new Ql(Fn.keyField(),c))}}}return e._t}function Mi(n){const e=$e(n);if(!e.wt)if("F"===e.limitType)e.wt=AI(e.path,e.collectionGroup,Jl(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const c of Jl(e))t.push(new Ql(c.field,"desc"===c.dir?"asc":"desc"));const r=e.endAt?new Qr(e.endAt.position,e.endAt.inclusive):null,a=e.startAt?new Qr(e.startAt.position,e.startAt.inclusive):null;e.wt=AI(e.path,e.collectionGroup,t,e.filters,e.limit,r,a)}return e.wt}function Xl(n,e,t){return new Au(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Mg(n,e){return La(Mi(n),Mi(e))&&n.limitType===e.limitType}function zE(n){return`${xc(Mi(n))}|lt:${n.limitType}`}function p_(n){return`Query(target=${function(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${Yl(r.value)}`;var r}).join(", ")}]`),Ag(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>Yl(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>Yl(t)).join(",")),`Target(${e})`}(Mi(n))}; limitType=${n.limitType})`}function Ng(n,e){return e.isFoundDocument()&&function(t,r){const a=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(a):Ve.isDocumentKey(t.path)?t.path.isEqual(a):t.path.isImmediateParentOf(a)}(n,e)&&function(t,r){for(const a of t.explicitOrderBy)if(!a.field.isKeyField()&&null===r.data.field(a.field))return!1;return!0}(n,e)&&function(t,r){for(const a of t.filters)if(!a.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(a,c,h){const y=NI(a,c,h);return a.inclusive?y<=0:y<0}(t.startAt,Jl(t),r)||t.endAt&&!function(a,c,h){const y=NI(a,c,h);return a.inclusive?y>=0:y>0}(t.endAt,Jl(t),r)));var t,r}function Og(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function g_(n){return(e,t)=>{let r=!1;for(const a of Jl(n)){const c=kI(a,e,t);if(0!==c)return c;r=r||a.field.isKeyField()}return 0}}function kI(n,e,t){const r=n.field.isKeyField()?Ve.comparator(e.key,t.key):function(a,c,h){const y=c.data.field(a),w=h.data.field(a);return null!==y&&null!==w?Tu(y,w):Qe()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Qe()}}function WE(n,e){if(n.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:zh(e)?"-0":e}}function ZE(n){return{integerValue:""+n}}function KE(n,e){return UE(e)?ZE(e):WE(n,e)}class Pg{constructor(){this._=void 0}}function FI(n,e,t){return n instanceof Kh?function(r,a){const c={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return a&&(c.fields.__previous_value__=a),{mapValue:c}}(t,e):n instanceof ed?UI(n,e):n instanceof td?BI(n,e):function(r,a){const c=VI(r,a),h=jI(c)+jI(r.yt);return c_(c)&&c_(r.yt)?ZE(h):WE(r.It,h)}(n,e)}function LI(n,e,t){return n instanceof ed?UI(n,e):n instanceof td?BI(n,e):t}function VI(n,e){return n instanceof Yh?c_(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Kh extends Pg{}class ed extends Pg{constructor(e){super(),this.elements=e}}function UI(n,e){const t=HI(e);for(const r of n.elements)t.some(a=>Fa(a,r))||t.push(r);return{arrayValue:{values:t}}}class td extends Pg{constructor(e){super(),this.elements=e}}function BI(n,e){let t=HI(e);for(const r of n.elements)t=t.filter(a=>!Fa(a,r));return{arrayValue:{values:t}}}class Yh extends Pg{constructor(e,t){super(),this.It=e,this.yt=t}}function jI(n){return ir(n.integerValue||n.doubleValue)}function HI(n){return Wh(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class kg{constructor(e,t){this.field=e,this.transform=t}}class RA{constructor(e,t){this.version=e,this.transformResults=t}}class Ln{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ln}static exists(e){return new Ln(void 0,e)}static updateTime(e){return new Ln(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function m_(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class y_{}function $I(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new rd(n.key,Ln.none()):new nd(n.key,n.data,Ln.none());{const t=n.data,r=Kr.empty();let a=new ln(Fn.comparator);for(let c of e.fields)if(!a.has(c)){let h=t.field(c);null===h&&c.length>1&&(c=c.popLast(),h=t.field(c)),null===h?r.delete(c):r.set(c,h),a=a.add(c)}return new Ua(n.key,r,new ps(a.toArray()),Ln.none())}}function MA(n,e,t){n instanceof nd?function(r,a,c){const h=r.value.clone(),y=JE(r.fieldTransforms,a,c.transformResults);h.setAll(y),a.convertToFoundDocument(c.version,h).setHasCommittedMutations()}(n,e,t):n instanceof Ua?function(r,a,c){if(!m_(r.precondition,a))return void a.convertToUnknownDocument(c.version);const h=JE(r.fieldTransforms,a,c.transformResults),y=a.data;y.setAll(QE(r)),y.setAll(h),a.convertToFoundDocument(c.version,y).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Fg(n,e,t,r){return n instanceof nd?function(a,c,h,y){if(!m_(a.precondition,c))return h;const w=a.value.clone(),D=XE(a.fieldTransforms,y,c);return w.setAll(D),c.convertToFoundDocument(c.version,w).setHasLocalMutations(),null}(n,e,t,r):n instanceof Ua?function(a,c,h,y){if(!m_(a.precondition,c))return h;const w=XE(a.fieldTransforms,y,c),D=c.data;return D.setAll(QE(a)),D.setAll(w),c.convertToFoundDocument(c.version,D).setHasLocalMutations(),null===h?null:h.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(R=>R.field))}(n,e,t,r):(h=t,m_(n.precondition,c=e)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):h);var c,h}function GI(n,e){let t=null;for(const r of n.fieldTransforms){const a=e.data.field(r.field),c=VI(r.transform,a||null);null!=c&&(null===t&&(t=Kr.empty()),t.set(r.field,c))}return t||null}function YE(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Cg(t,r,(a,c)=>function(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof ed&&r instanceof ed||t instanceof td&&r instanceof td?Cg(t.elements,r.elements,Fa):t instanceof Yh&&r instanceof Yh?Fa(t.yt,r.yt):t instanceof Kh&&r instanceof Kh);var t,r}(a,c))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class nd extends y_{constructor(e,t,r,a=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Ua extends y_{constructor(e,t,r,a,c=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=a,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function QE(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function JE(n,e,t){const r=new Map;pt(n.length===t.length);for(let a=0;a<t.length;a++){const c=n[a],h=c.transform,y=e.data.field(c.field);r.set(c.field,LI(h,y,t[a]))}return r}function XE(n,e,t){const r=new Map;for(const a of n){const c=a.transform,h=t.data.field(a.field);r.set(a.field,FI(c,h,e))}return r}class rd extends y_{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class __ extends y_{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class eb{constructor(e){this.count=e}}var dr,Ht;function qI(n){switch(n){default:return Qe();case he.CANCELLED:case he.UNKNOWN:case he.DEADLINE_EXCEEDED:case he.RESOURCE_EXHAUSTED:case he.INTERNAL:case he.UNAVAILABLE:case he.UNAUTHENTICATED:return!1;case he.INVALID_ARGUMENT:case he.NOT_FOUND:case he.ALREADY_EXISTS:case he.PERMISSION_DENIED:case he.FAILED_PRECONDITION:case he.ABORTED:case he.OUT_OF_RANGE:case he.UNIMPLEMENTED:case he.DATA_LOSS:return!0}}function zI(n){if(void 0===n)return nr("GRPC error has no .code"),he.UNKNOWN;switch(n){case dr.OK:return he.OK;case dr.CANCELLED:return he.CANCELLED;case dr.UNKNOWN:return he.UNKNOWN;case dr.DEADLINE_EXCEEDED:return he.DEADLINE_EXCEEDED;case dr.RESOURCE_EXHAUSTED:return he.RESOURCE_EXHAUSTED;case dr.INTERNAL:return he.INTERNAL;case dr.UNAVAILABLE:return he.UNAVAILABLE;case dr.UNAUTHENTICATED:return he.UNAUTHENTICATED;case dr.INVALID_ARGUMENT:return he.INVALID_ARGUMENT;case dr.NOT_FOUND:return he.NOT_FOUND;case dr.ALREADY_EXISTS:return he.ALREADY_EXISTS;case dr.PERMISSION_DENIED:return he.PERMISSION_DENIED;case dr.FAILED_PRECONDITION:return he.FAILED_PRECONDITION;case dr.ABORTED:return he.ABORTED;case dr.OUT_OF_RANGE:return he.OUT_OF_RANGE;case dr.UNIMPLEMENTED:return he.UNIMPLEMENTED;case dr.DATA_LOSS:return he.DATA_LOSS;default:return Qe()}}(Ht=dr||(dr={}))[Ht.OK=0]="OK",Ht[Ht.CANCELLED=1]="CANCELLED",Ht[Ht.UNKNOWN=2]="UNKNOWN",Ht[Ht.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ht[Ht.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ht[Ht.NOT_FOUND=5]="NOT_FOUND",Ht[Ht.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ht[Ht.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ht[Ht.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ht[Ht.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ht[Ht.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ht[Ht.ABORTED=10]="ABORTED",Ht[Ht.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ht[Ht.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ht[Ht.INTERNAL=13]="INTERNAL",Ht[Ht.UNAVAILABLE=14]="UNAVAILABLE",Ht[Ht.DATA_LOSS=15]="DATA_LOSS";class ks{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[a,c]of r)if(this.equalsFn(a,e))return c}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),a=this.inner[r];if(void 0===a)return this.inner[r]=[[e,t]],void this.innerSize++;for(let c=0;c<a.length;c++)if(this.equalsFn(a[c][0],e))return void(a[c]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],e))return 1===r.length?delete this.inner[t]:r.splice(a,1),this.innerSize--,!0;return!1}forEach(e){$h(this.inner,(t,r)=>{for(const[a,c]of r)e(a,c)})}isEmpty(){return Gh(this.inner)}size(){return this.innerSize}}const pM=new rr(Ve.comparator);function Ni(){return pM}const NA=new rr(Ve.comparator);function Qh(...n){let e=NA;for(const t of n)e=e.insert(t.key,t);return e}function tb(n){let e=NA;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Su(){return Lg()}function dt(){return Lg()}function Lg(){return new ks(n=>n.toString(),(n,e)=>n.isEqual(e))}const OA=new rr(Ve.comparator),PA=new ln(Ve.comparator);function Ot(...n){let e=PA;for(const t of n)e=e.add(t);return e}const kA=new ln(Mt);function id(){return kA}class Mc{constructor(e,t,r,a,c){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=a,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const a=new Map;return a.set(e,In.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Mc(gt.min(),a,id(),Ni(),Ot())}}class In{constructor(e,t,r,a,c){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=a,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new In(r,t,Ot(),Ot(),Ot())}}class nb{constructor(e,t,r,a){this.Tt=e,this.removedTargetIds=t,this.key=r,this.Et=a}}class rb{constructor(e,t){this.targetId=e,this.At=t}}class v_{constructor(e,t,r=Sr.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=a}}class WI{constructor(){this.Rt=0,this.bt=sb(),this.Pt=Sr.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=Ot(),t=Ot(),r=Ot();return this.bt.forEach((a,c)=>{switch(c){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:r=r.add(a);break;default:Qe()}}),new In(this.Pt,this.vt,e,t,r)}Nt(){this.Vt=!1,this.bt=sb()}kt(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}Ot(e){this.Vt=!0,this.bt=this.bt.remove(e)}Mt(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class ZI{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=Ni(),this.qt=ib(),this.Kt=new ln(Mt)}Gt(e){for(const t of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(t,e.Et):this.jt(t,e.key,e.Et);for(const t of e.removedTargetIds)this.jt(t,e.key,e.Et)}Wt(e){this.forEachTarget(e,t=>{const r=this.zt(t);switch(e.state){case 0:this.Ht(t)&&r.Ct(e.resumeToken);break;case 1:r.Ft(),r.St||r.Nt(),r.Ct(e.resumeToken);break;case 2:r.Ft(),r.St||this.removeTarget(t);break;case 3:this.Ht(t)&&(r.$t(),r.Ct(e.resumeToken));break;case 4:this.Ht(t)&&(this.Jt(t),r.Ct(e.resumeToken));break;default:Qe()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((r,a)=>{this.Ht(a)&&t(a)})}Yt(e){const t=e.targetId,r=e.At.count,a=this.Xt(t);if(a){const c=a.target;if(d_(c))if(0===r){const h=new Ve(c.path);this.jt(t,h,wn.newNoDocument(h,gt.min()))}else pt(1===r);else this.Zt(t)!==r&&(this.Jt(t),this.Kt=this.Kt.add(t))}}te(e){const t=new Map;this.Lt.forEach((c,h)=>{const y=this.Xt(h);if(y){if(c.current&&d_(y.target)){const w=new Ve(y.target.path);null!==this.Ut.get(w)||this.ee(h,w)||this.jt(h,w,wn.newNoDocument(w,e))}c.Dt&&(t.set(h,c.xt()),c.Nt())}});let r=Ot();this.qt.forEach((c,h)=>{let y=!0;h.forEachWhile(w=>{const D=this.Xt(w);return!D||2===D.purpose||(y=!1,!1)}),y&&(r=r.add(c))}),this.Ut.forEach((c,h)=>h.setReadTime(e));const a=new Mc(e,t,this.Kt,this.Ut,r);return this.Ut=Ni(),this.qt=ib(),this.Kt=new ln(Mt),a}Qt(e,t){if(!this.Ht(e))return;const r=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,r),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}jt(e,t,r){if(!this.Ht(e))return;const a=this.zt(e);this.ee(e,t)?a.kt(t,1):a.Ot(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),r&&(this.Ut=this.Ut.insert(t,r))}removeTarget(e){this.Lt.delete(e)}Zt(e){const t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Mt(e){this.zt(e).Mt()}zt(e){let t=this.Lt.get(e);return t||(t=new WI,this.Lt.set(e,t)),t}ne(e){let t=this.qt.get(e);return t||(t=new ln(Mt),this.qt=this.qt.insert(e,t)),t}Ht(e){const t=null!==this.Xt(e);return t||xe("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new WI),this.Bt.getRemoteKeysForTarget(e).forEach(t=>{this.jt(e,t,null)})}ee(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}function ib(){return new rr(Ve.comparator)}function sb(){return new rr(Ve.comparator)}const KI={asc:"ASCENDING",desc:"DESCENDING"},FA={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class LA{constructor(e,t){this.databaseId=e,this.gt=t}}function Vg(n,e){return n.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Jh(n,e){return n.gt?e.toBase64():e.toUint8Array()}function VA(n,e){return Vg(n,e.toTimestamp())}function Jr(n){return pt(!!n),gt.fromTimestamp(function(e){const t=Cu(e);return new qn(t.seconds,t.nanos)}(n))}function ob(n,e){return(t=n,new Jt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Ug(n){const e=Jt.fromString(n);return pt(nf(e)),e}function Xh(n,e){return ob(n.databaseId,e.path)}function qo(n,e){const t=Ug(e);if(t.get(1)!==n.databaseId.projectId)throw new Ie(he.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ie(he.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ve(ef(t))}function E_(n,e){return ob(n.databaseId,e)}function YI(n){const e=Ug(n);return 4===e.length?Jt.emptyPath():ef(e)}function xu(n){return new Jt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function ef(n){return pt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function QI(n,e,t){return{name:Xh(n,e),fields:t.value.mapValue.fields}}function JI(n,e,t){const r=qo(n,e.name),a=Jr(e.updateTime),c=new Kr({mapValue:{fields:e.fields}}),h=wn.newFoundDocument(r,a,c);return t&&h.setHasCommittedMutations(),t?h.setHasCommittedMutations():h}function tf(n,e){let t;if(e instanceof nd)t={update:QI(n,e.key,e.value)};else if(e instanceof rd)t={delete:Xh(n,e.key)};else if(e instanceof Ua)t={update:QI(n,e.key,e.data),updateMask:tC(e.fieldMask)};else{if(!(e instanceof __))return Qe();t={verify:Xh(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(a,c){const h=c.transform;if(h instanceof Kh)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof ed)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof td)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof Yh)return{fieldPath:c.field.canonicalString(),increment:h.yt};throw Qe()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(a=e.precondition).updateTime?{updateTime:VA(n,a.updateTime)}:void 0!==a.exists?{exists:a.exists}:Qe()),t;var a}function b_(n,e){const t=e.currentDocument?void 0!==(a=e.currentDocument).updateTime?Ln.updateTime(Jr(a.updateTime)):void 0!==a.exists?Ln.exists(a.exists):Ln.none():Ln.none(),r=e.updateTransforms?e.updateTransforms.map(a=>function(c,h){let y=null;"setToServerValue"in h?(pt("REQUEST_TIME"===h.setToServerValue),y=new Kh):"appendMissingElements"in h?y=new ed(h.appendMissingElements.values||[]):"removeAllFromArray"in h?y=new td(h.removeAllFromArray.values||[]):"increment"in h?y=new Yh(c,h.increment):Qe();const w=Fn.fromServerFormat(h.fieldPath);return new kg(w,y)}(n,a)):[];var a;if(e.update){const a=qo(n,e.update.name),c=new Kr({mapValue:{fields:e.update.fields}});if(e.updateMask){const h=new ps((e.updateMask.fieldPaths||[]).map(D=>Fn.fromServerFormat(D)));return new Ua(a,c,h,t,r)}return new nd(a,c,t,r)}if(e.delete){const a=qo(n,e.delete);return new rd(a,t)}if(e.verify){const a=qo(n,e.verify);return new __(a,t)}return Qe()}function ab(n,e){return{documents:[E_(n,e.path)]}}function ub(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=E_(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=E_(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const a=function(w){if(0===w.length)return;const D=w.map(R=>function(O){if("=="===O.op){if(jE(O.value))return{unaryFilter:{field:sd(O.field),op:"IS_NAN"}};if(BE(O.value))return{unaryFilter:{field:sd(O.field),op:"IS_NULL"}}}else if("!="===O.op){if(jE(O.value))return{unaryFilter:{field:sd(O.field),op:"IS_NOT_NAN"}};if(BE(O.value))return{unaryFilter:{field:sd(O.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:sd(O.field),op:yM(O.op),value:O.value}}}(R));return 1===D.length?D[0]:{compositeFilter:{op:"AND",filters:D}}}(e.filters);a&&(t.structuredQuery.where=a);const c=function(w){if(0!==w.length)return w.map(D=>{return{field:sd((R=D).field),direction:mM(R.dir)};var R})}(e.orderBy);c&&(t.structuredQuery.orderBy=c);const h=(D=e.limit,n.gt||Ag(D)?D:{value:D});var D,y,w;return null!==h&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt={before:(y=e.startAt).inclusive,values:y.position}),e.endAt&&(t.structuredQuery.endAt={before:!(w=e.endAt).inclusive,values:w.position}),t}function eC(n){let e=YI(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let a=null;if(r>0){pt(1===r);const R=t.from[0];R.allDescendants?a=R.collectionId:e=e.child(R.collectionId)}let c=[];t.where&&(c=jA(t.where));let h=[];t.orderBy&&(h=t.orderBy.map(R=>{return new Ql(Ru((O=R).field),function(G){switch(G){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(O.direction));var O}));let y=null;t.limit&&(y=function(R){let O;return O="object"==typeof R?R.value:R,Ag(O)?null:O}(t.limit));let w=null;var R;t.startAt&&(w=new Qr((R=t.startAt).values||[],!!R.before));let D=null;return t.endAt&&(D=function(R){return new Qr(R.values||[],!R.before)}(t.endAt)),PI(e,a,h,c,y,"F",w,D)}function jA(n){return n?void 0!==n.unaryFilter?[$A(n)]:void 0!==n.fieldFilter?[HA(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>jA(e)).reduce((e,t)=>e.concat(t)):Qe():[]}function mM(n){return KI[n]}function yM(n){return FA[n]}function sd(n){return{fieldPath:n.canonicalString()}}function Ru(n){return Fn.fromServerFormat(n.fieldPath)}function HA(n){return Yr.create(Ru(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Qe()}}(n.fieldFilter.op),n.fieldFilter.value)}function $A(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Ru(n.unaryFilter.field);return Yr.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Ru(n.unaryFilter.field);return Yr.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Ru(n.unaryFilter.field);return Yr.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Ru(n.unaryFilter.field);return Yr.create(a,"!=",{nullValue:"NULL_VALUE"});default:return Qe()}}function tC(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function nf(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Zi(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=nC(e)),e=GA(n.get(t),e);return nC(e)}function GA(n,e){let t=e;const r=n.length;for(let a=0;a<r;a++){const c=n.charAt(a);switch(c){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=c}}return t}function nC(n){return n+"\x01\x01"}function Ba(n){const e=n.length;if(pt(e>=2),2===e)return pt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Jt.emptyPath();const t=e-2,r=[];let a="";for(let c=0;c<e;){const h=n.indexOf("\x01",c);switch((h<0||h>t)&&Qe(),n.charAt(h+1)){case"\x01":const y=n.substring(c,h);let w;0===a.length?w=y:(a+=y,w=a,a=""),r.push(w);break;case"\x10":a+=n.substring(c,h),a+="\0";break;case"\x11":a+=n.substring(c,h+1);break;default:Qe()}c=h+2}return new Jt(r)}const rC=["userId","batchId"];function Bg(n,e){return[n,Zi(e)]}function iC(n,e,t){return[n,Zi(e),t]}const qA={},rf=["prefixPath","collectionGroup","readTime","documentId"],zA=["prefixPath","collectionGroup","documentId"],sC=["collectionGroup","readTime","prefixPath","documentId"],WA=["canonicalId","targetId"],oC=["targetId","path"],ZA=["path","targetId"],aC=["collectionId","parent"],KA=["indexId","uid"],cb=["uid","sequenceNumber"],YA=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],uC=["indexId","uid","orderedDocumentKey"],cC=["userId","collectionPath","documentId"],QA=["userId","collectionPath","largestBatchId"],JA=["userId","collectionGroup","largestBatchId"],lC=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],lb=[...lC,"documentOverlays"],dC=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],db=dC,XA=[...db,"indexConfiguration","indexState","indexEntries"];class hb extends OE{constructor(e,t){super(),this.ie=e,this.currentSequenceNumber=t}}function Xr(n,e){const t=$e(n);return Ho.M(t.ie,e)}class fb{constructor(e,t,r,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=a}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const c=this.mutations[a];c.key.isEqual(e.key)&&MA(c,e,r[a])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Fg(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Fg(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=dt();return this.mutations.forEach(a=>{const c=e.get(a.key),h=c.overlayedDocument;let y=this.applyToLocalView(h,c.mutatedFields);y=t.has(a.key)?null:y;const w=$I(h,y);null!==w&&r.set(a.key,w),h.isValidDocument()||h.convertToNoDocument(gt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ot())}isEqual(e){return this.batchId===e.batchId&&Cg(this.mutations,e.mutations,(t,r)=>YE(t,r))&&Cg(this.baseMutations,e.baseMutations,(t,r)=>YE(t,r))}}class pb{constructor(e,t,r,a){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=a}static from(e,t,r){pt(e.mutations.length===r.length);let a=OA;const c=e.mutations;for(let h=0;h<c.length;h++)a=a.insert(c[h].key,r[h].version);return new pb(e,t,r,a)}}class gb{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Nc{constructor(e,t,r,a,c=gt.min(),h=gt.min(),y=Sr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=a,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=y}withSequenceNumber(e){return new Nc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Nc(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Nc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class hC{constructor(e){this.re=e}}function mb(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:w_(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Xh(a=n.re,(c=e).key),fields:c.data.value.mapValue.fields,updateTime:Vg(a,c.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:od(e.version)};else{if(!e.isUnknownDocument())return Qe();r.unknownDocument={path:t.path.toArray(),version:od(e.version)}}var a,c;return r}function w_(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function od(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Oc(n){const e=new qn(n.seconds,n.nanoseconds);return gt.fromTimestamp(e)}function ad(n,e){const t=(e.baseMutations||[]).map(c=>b_(n.re,c));for(let c=0;c<e.mutations.length-1;++c){const h=e.mutations[c];c+1<e.mutations.length&&void 0!==e.mutations[c+1].transform&&(h.updateTransforms=e.mutations[c+1].transform.fieldTransforms,e.mutations.splice(c+1,1),++c)}const r=e.mutations.map(c=>b_(n.re,c)),a=qn.fromMillis(e.localWriteTimeMs);return new fb(e.batchId,a,t,r)}function jg(n){const e=Oc(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Oc(n.lastLimboFreeSnapshotVersion):gt.min();let r;var a;return void 0!==n.query.documents?(pt(1===(a=n.query).documents.length),r=Mi(Rc(YI(a.documents[0])))):r=Mi(eC(n.query)),new Nc(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Sr.fromBase64String(n.resumeToken))}function pC(n,e){const t=od(e.snapshotVersion),r=od(e.lastLimboFreeSnapshotVersion);let a;a=d_(e.target)?ab(n.re,e.target):ub(n.re,e.target);const c=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:xc(e.target),readTime:t,resumeToken:c,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:a}}function Hg(n){const e=eC({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Xl(e,e.limit,"L"):e}function $g(n,e){return new gb(e.largestBatchId,b_(n.re,e.overlayMutation))}function yb(n,e){const t=e.path.lastSegment();return[n,Zi(e.path.popLast()),t]}function I_(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:od(r.readTime),documentKey:Zi(r.documentKey.path),largestBatchId:r.largestBatchId}}class eS{getBundleMetadata(e,t){return gC(e).get(t).next(r=>{if(r)return{id:(a=r).bundleId,createTime:Oc(a.createTime),version:a.version};var a})}saveBundleMetadata(e,t){return gC(e).put({bundleId:(r=t).id,createTime:od(Jr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return C_(e).get(t).next(r=>{if(r)return{name:(a=r).name,query:Hg(a.bundledQuery),readTime:Oc(a.readTime)};var a})}saveNamedQuery(e,t){return C_(e).put({name:(r=t).name,readTime:od(Jr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function gC(n){return Xr(n,"bundles")}function C_(n){return Xr(n,"namedQueries")}class D_{constructor(e,t){this.It=e,this.userId=t}static oe(e,t){return new D_(e,t.uid||"")}getOverlay(e,t){return sf(e).get(yb(this.userId,t)).next(r=>r?$g(this.It,r):null)}getOverlays(e,t){const r=Su();return ae.forEach(t,a=>this.getOverlay(e,a).next(c=>{null!==c&&r.set(a,c)})).next(()=>r)}saveOverlays(e,t,r){const a=[];return r.forEach((c,h)=>{const y=new gb(t,h);a.push(this.ue(e,y))}),ae.waitFor(a)}removeOverlaysForBatchId(e,t,r){const a=new Set;t.forEach(h=>a.add(Zi(h.getCollectionPath())));const c=[];return a.forEach(h=>{const y=IDBKeyRange.bound([this.userId,h,r],[this.userId,h,r+1],!1,!0);c.push(sf(e).Y("collectionPathOverlayIndex",y))}),ae.waitFor(c)}getOverlaysForCollection(e,t,r){const a=Su(),c=Zi(t),h=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,Number.POSITIVE_INFINITY],!0);return sf(e).W("collectionPathOverlayIndex",h).next(y=>{for(const w of y){const D=$g(this.It,w);a.set(D.getKey(),D)}return a})}getOverlaysForCollectionGroup(e,t,r,a){const c=Su();let h;const y=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return sf(e).Z({index:"collectionGroupOverlayIndex",range:y},(w,D,R)=>{const O=$g(this.It,D);c.size()<a||O.largestBatchId===h?(c.set(O.getKey(),O),h=O.largestBatchId):R.done()}).next(()=>c)}ue(e,t){return sf(e).put(function(r,a,c){const[h,y,w]=yb(a,c.mutation.key);return{userId:a,collectionPath:y,documentId:w,collectionGroup:c.mutation.key.getCollectionGroup(),largestBatchId:c.largestBatchId,overlayMutation:tf(r.re,c.mutation)}}(this.It,this.userId,t))}}function sf(n){return Xr(n,"documentOverlays")}class ud{constructor(){}ce(e,t){this.ae(e,t),t.he()}ae(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe(ir(e.integerValue));else if("doubleValue"in e){const r=ir(e.doubleValue);isNaN(r)?this.le(t,13):(this.le(t,15),zh(r)?t.fe(0):t.fe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.le(t,20),"string"==typeof r?t.de(r):(t.de(`${r.seconds||""}`),t.fe(r.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me(Ac(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.le(t,45),t.fe(r.latitude||0),t.fe(r.longitude||0)}else"mapValue"in e?wI(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):Qe()}_e(e,t){this.le(t,25),this.Ie(e,t)}Ie(e,t){t.de(e)}ye(e,t){const r=e.fields||{};this.le(t,55);for(const a of Object.keys(r))this._e(a,t),this.ae(r[a],t)}pe(e,t){const r=e.values||[];this.le(t,50);for(const a of r)this.ae(a,t)}ge(e,t){this.le(t,37),Ve.fromName(e).path.forEach(r=>{this.le(t,60),this.Ie(r,t)})}le(e,t){e.fe(t)}we(e){e.fe(2)}}function mC(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function _b(n){const e=64-function(t){let r=0;for(let a=0;a<8;++a){const c=mC(255&t[a]);if(r+=c,8!==c)break}return r}(n);return Math.ceil(e/8)}ud.Te=new ud;class yC{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ae(r.value),r=t.next();this.Re()}be(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Pe(r.value),r=t.next();this.ve()}Ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const a=t.codePointAt(0);this.Ae(240|a>>>18),this.Ae(128|63&a>>>12),this.Ae(128|63&a>>>6),this.Ae(128|63&a)}}this.Re()}Se(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Pe(r);else if(r<2048)this.Pe(960|r>>>6),this.Pe(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Pe(480|r>>>12),this.Pe(128|63&r>>>6),this.Pe(128|63&r);else{const a=t.codePointAt(0);this.Pe(240|a>>>18),this.Pe(128|63&a>>>12),this.Pe(128|63&a>>>6),this.Pe(128|63&a)}}this.ve()}De(e){const t=this.Ce(e),r=_b(t);this.xe(1+r),this.buffer[this.position++]=255&r;for(let a=t.length-r;a<t.length;++a)this.buffer[this.position++]=255&t[a]}Ne(e){const t=this.Ce(e),r=_b(t);this.xe(1+r),this.buffer[this.position++]=~(255&r);for(let a=t.length-r;a<t.length;++a)this.buffer[this.position++]=~(255&t[a])}ke(){this.Oe(255),this.Oe(255)}Me(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Ce(e){const t=function(a){const c=new DataView(new ArrayBuffer(8));return c.setFloat64(0,a,!1),new Uint8Array(c.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let a=1;a<t.length;++a)t[a]^=r?255:0;return t}Ae(e){const t=255&e;0===t?(this.Oe(0),this.Oe(255)):255===t?(this.Oe(255),this.Oe(0)):this.Oe(t)}Pe(e){const t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}Re(){this.Oe(0),this.Oe(1)}ve(){this.Fe(0),this.Fe(1)}Oe(e){this.xe(1),this.buffer[this.position++]=e}Fe(e){this.xe(1),this.buffer[this.position++]=~e}xe(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const a=new Uint8Array(r);a.set(this.buffer),this.buffer=a}}class _M{constructor(e){this.Be=e}me(e){this.Be.Ee(e)}de(e){this.Be.Ve(e)}fe(e){this.Be.De(e)}he(){this.Be.ke()}}class tS{constructor(e){this.Be=e}me(e){this.Be.be(e)}de(e){this.Be.Se(e)}fe(e){this.Be.Ne(e)}he(){this.Be.Me()}}class ja{constructor(){this.Be=new yC,this.Le=new _M(this.Be),this.Ue=new tS(this.Be)}seed(e){this.Be.seed(e)}qe(e){return 0===e?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class af{constructor(e,t,r,a){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=a}Ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new af(this.indexId,this.documentKey,this.arrayValue,r)}}function Mu(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=Gg(n.arrayValue,e.arrayValue),0!==t?t:(t=Gg(n.directionalValue,e.directionalValue),0!==t?t:Ve.comparator(n.documentKey,e.documentKey)))}function Gg(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class nS{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ge=e.orderBy,this.Qe=[];for(const t of e.filters){const r=t;r.dt()?this.je=r:this.Qe.push(r)}}We(e){const t=gI(e);if(void 0!==t&&!this.ze(t))return!1;const r=Hh(e);let a=0,c=0;for(;a<r.length&&this.ze(r[a]);++a);if(a===r.length)return!0;if(void 0!==this.je){const h=r[a];if(!this.He(this.je,h)||!this.Je(this.Ge[c++],h))return!1;++a}for(;a<r.length;++a){const h=r[a];if(c>=this.Ge.length||!this.Je(this.Ge[c++],h))return!1}return!0}ze(e){for(const t of this.Qe)if(this.He(t,e))return!0;return!1}He(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Je(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class uf{constructor(){this.Ye=new vb}addToCollectionParentIndex(e,t){return this.Ye.add(t),ae.resolve()}getCollectionParents(e,t){return ae.resolve(this.Ye.getEntries(t))}addFieldIndex(e,t){return ae.resolve()}deleteFieldIndex(e,t){return ae.resolve()}getDocumentsMatchingTarget(e,t){return ae.resolve(null)}getIndexType(e,t){return ae.resolve(0)}getFieldIndexes(e,t){return ae.resolve([])}getNextCollectionGroupToUpdate(e){return ae.resolve(null)}getMinOffset(e,t){return ae.resolve(Ps.min())}getMinOffsetFromCollectionGroup(e,t){return ae.resolve(Ps.min())}updateCollectionGroup(e,t,r){return ae.resolve()}updateIndexEntries(e,t){return ae.resolve()}}class vb{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t]||new ln(Jt.comparator),c=!a.has(r);return this.index[t]=a.add(r),c}has(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t];return a&&a.has(r)}getEntries(e){return(this.index[e]||new ln(Jt.comparator)).toArray()}}const Eb=new Uint8Array(0);class rS{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new vb,this.Ze=new ks(r=>xc(r),(r,a)=>La(r,a)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const r=t.lastSegment(),a=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const c={collectionId:r,parent:Zi(a)};return zo(e).put(c)}return ae.resolve()}getCollectionParents(e,t){const r=[],a=IDBKeyRange.bound([t,""],[IA(t),""],!1,!0);return zo(e).W(a).next(c=>{for(const h of c){if(h.collectionId!==t)break;r.push(Ba(h.parent))}return r})}addFieldIndex(e,t){const r=bb(e),a={indexId:(h=t).indexId,collectionGroup:h.collectionGroup,fields:h.fields.map(y=>[y.fieldPath.canonicalString(),y.kind])};var h;delete a.indexId;const c=r.add(a);if(t.indexState){const h=Pc(e);return c.next(y=>{h.put(I_(y,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return c.next()}deleteFieldIndex(e,t){const r=bb(e),a=Pc(e),c=cf(e);return r.delete(t.indexId).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>c.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=cf(e);let a=!0;const c=new Map;return ae.forEach(this.tn(t),h=>this.en(e,h).next(y=>{a&&(a=!!y),c.set(h,y)})).next(()=>{if(a){let h=Ot();const y=[];return ae.forEach(c,(w,D)=>{var R;xe("IndexedDbIndexManager",`Using index ${R=w,`id=${R.indexId}|cg=${R.collectionGroup}|f=${R.fields.map(kt=>`${kt.fieldPath}:${kt.kind}`).join(",")}`} to execute ${xc(t)}`);const O=function(kt,Ft){const zt=gI(Ft);if(void 0===zt)return null;for(const Zt of h_(kt,zt.fieldPath))switch(Zt.op){case"array-contains-any":return Zt.value.arrayValue.values||[];case"array-contains":return[Zt.value]}return null}(D,w),G=function(kt,Ft){const zt=new Map;for(const Zt of Hh(Ft))for(const Yi of h_(kt,Zt.fieldPath))switch(Yi.op){case"==":case"in":zt.set(Zt.fieldPath.canonicalString(),Yi.value);break;case"not-in":case"!=":return zt.set(Zt.fieldPath.canonicalString(),Yi.value),Array.from(zt.values())}return null}(D,w),q=function(kt,Ft){const zt=[];let Zt=!0;for(const Yi of Hh(Ft)){const fw=0===Yi.kind?HE(kt,Yi.fieldPath,kt.startAt):xI(kt,Yi.fieldPath,kt.startAt);zt.push(fw.value),Zt&&(Zt=fw.inclusive)}return new Qr(zt,Zt)}(D,w),te=function(kt,Ft){const zt=[];let Zt=!0;for(const Yi of Hh(Ft)){const fw=0===Yi.kind?xI(kt,Yi.fieldPath,kt.endAt):HE(kt,Yi.fieldPath,kt.endAt);zt.push(fw.value),Zt&&(Zt=fw.inclusive)}return new Qr(zt,Zt)}(D,w),Se=this.nn(w,D,q),Pe=this.nn(w,D,te),st=this.sn(w,D,G),Dt=this.rn(w.indexId,O,Se,q.inclusive,Pe,te.inclusive,st);return ae.forEach(Dt,kt=>r.J(kt,t.limit).next(Ft=>{Ft.forEach(zt=>{const Zt=Ve.fromSegments(zt.documentKey);h.has(Zt)||(h=h.add(Zt),y.push(Zt))})}))}).next(()=>y)}return ae.resolve(null)})}tn(e){let t=this.Ze.get(e);return t||(t=[e],this.Ze.set(e,t),t)}rn(e,t,r,a,c,h,y){const w=(null!=t?t.length:1)*Math.max(r.length,c.length),D=w/(null!=t?t.length:1),R=[];for(let O=0;O<w;++O){const G=t?this.on(t[O/D]):Eb,q=this.un(e,G,r[O%D],a),te=this.cn(e,G,c[O%D],h),Se=y.map(Pe=>this.un(e,G,Pe,!0));R.push(...this.createRange(q,te,Se))}return R}un(e,t,r,a){const c=new af(e,Ve.empty(),t,r);return a?c:c.Ke()}cn(e,t,r,a){const c=new af(e,Ve.empty(),t,r);return a?c.Ke():c}en(e,t){const r=new nS(t),a=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,a).next(c=>{let h=null;for(const y of c)r.We(y)&&(!h||y.fields.length>h.fields.length)&&(h=y);return h})}getIndexType(e,t){let r=2;return ae.forEach(this.tn(t),a=>this.en(e,a).next(c=>{c?0!==r&&c.fields.length<function(h){let y=new ln(Fn.comparator),w=!1;for(const D of h.filters){const R=D;R.field.isKeyField()||("array-contains"===R.op||"array-contains-any"===R.op?w=!0:y=y.add(R.field))}for(const D of h.orderBy)D.field.isKeyField()||(y=y.add(D.field));return y.size+(w?1:0)}(a)&&(r=1):r=0})).next(()=>r)}an(e,t){const r=new ja;for(const a of Hh(e)){const c=t.data.field(a.fieldPath);if(null==c)return null;const h=r.qe(a.kind);ud.Te.ce(c,h)}return r.$e()}on(e){const t=new ja;return ud.Te.ce(e,t.qe(0)),t.$e()}hn(e,t){const r=new ja;return ud.Te.ce(Sc(this.databaseId,t),r.qe(function(a){const c=Hh(a);return 0===c.length?0:c[c.length-1].kind}(e))),r.$e()}sn(e,t,r){if(null===r)return[];let a=[];a.push(new ja);let c=0;for(const h of Hh(e)){const y=r[c++];for(const w of a)if(this.ln(t,h.fieldPath)&&Wh(y))a=this.fn(a,h,y);else{const D=w.qe(h.kind);ud.Te.ce(y,D)}}return this.dn(a)}nn(e,t,r){return this.sn(e,t,r.position)}dn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].$e();return t}fn(e,t,r){const a=[...e],c=[];for(const h of r.arrayValue.values||[])for(const y of a){const w=new ja;w.seed(y.$e()),ud.Te.ce(h,w.qe(t.kind)),c.push(w)}return c}ln(e,t){return!!e.filters.find(r=>r instanceof Yr&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=bb(e),a=Pc(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(c=>{const h=[];return ae.forEach(c,y=>a.get([y.indexId,this.uid]).next(w=>{h.push(function(D,R){const O=R?new n_(R.sequenceNumber,new Ps(Oc(R.readTime),new Ve(Ba(R.documentKey)),R.largestBatchId)):n_.empty(),G=D.fields.map(([q,te])=>new t_(Fn.fromServerFormat(q),te));return new e_(D.indexId,D.collectionGroup,G,O)}(y,w))})).next(()=>h)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,a)=>{const c=r.indexState.sequenceNumber-a.indexState.sequenceNumber;return 0!==c?c:Mt(r.collectionGroup,a.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const a=bb(e),c=Pc(e);return this._n(e).next(h=>a.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(y=>ae.forEach(y,w=>c.put(I_(w.indexId,this.user,h,r)))))}updateIndexEntries(e,t){const r=new Map;return ae.forEach(t,(a,c)=>{const h=r.get(a.collectionGroup);return(h?ae.resolve(h):this.getFieldIndexes(e,a.collectionGroup)).next(y=>(r.set(a.collectionGroup,y),ae.forEach(y,w=>this.wn(e,a,w).next(D=>{const R=this.mn(c,w);return D.isEqual(R)?ae.resolve():this.gn(e,c,w,D,R)}))))})}yn(e,t,r,a){return cf(e).put({indexId:a.indexId,uid:this.uid,arrayValue:a.arrayValue,directionalValue:a.directionalValue,orderedDocumentKey:this.hn(r,t.key),documentKey:t.key.path.toArray()})}pn(e,t,r,a){return cf(e).delete([a.indexId,this.uid,a.arrayValue,a.directionalValue,this.hn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const a=cf(e);let c=new ln(Mu);return a.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.hn(r,t)])},(h,y)=>{c=c.add(new af(r.indexId,t,y.arrayValue,y.directionalValue))}).next(()=>c)}mn(e,t){let r=new ln(Mu);const a=this.an(t,e);if(null==a)return r;const c=gI(t);if(null!=c){const h=e.data.field(c.fieldPath);if(Wh(h))for(const y of h.arrayValue.values||[])r=r.add(new af(t.indexId,e.key,this.on(y),a))}else r=r.add(new af(t.indexId,e.key,Eb,a));return r}gn(e,t,r,a,c){xe("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const h=[];return function(y,w,D,R,O){const G=y.getIterator(),q=w.getIterator();let te=Tc(G),Se=Tc(q);for(;te||Se;){let Pe=!1,st=!1;if(te&&Se){const Dt=D(te,Se);Dt<0?st=!0:Dt>0&&(Pe=!0)}else null!=te?st=!0:Pe=!0;Pe?(R(Se),Se=Tc(q)):st?(O(te),te=Tc(G)):(te=Tc(G),Se=Tc(q))}}(a,c,Mu,y=>{h.push(this.yn(e,t,r,y))},y=>{h.push(this.pn(e,t,r,y))}),ae.waitFor(h)}_n(e){let t=1;return Pc(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,a,c)=>{c.done(),t=a.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((h,y)=>Mu(h,y)).filter((h,y,w)=>!y||0!==Mu(h,w[y-1]));const a=[];a.push(e);for(const h of r){const y=Mu(h,e),w=Mu(h,t);if(0===y)a[0]=e.Ke();else if(y>0&&w<0)a.push(h),a.push(h.Ke());else if(w>0)break}a.push(t);const c=[];for(let h=0;h<a.length;h+=2)c.push(IDBKeyRange.bound([a[h].indexId,this.uid,a[h].arrayValue,a[h].directionalValue,Eb,[]],[a[h+1].indexId,this.uid,a[h+1].arrayValue,a[h+1].directionalValue,Eb,[]]));return c}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(_C)}getMinOffset(e,t){return ae.mapArray(this.tn(t),r=>this.en(e,r).next(a=>a||Qe())).next(_C)}}function zo(n){return Xr(n,"collectionParents")}function cf(n){return Xr(n,"indexEntries")}function bb(n){return Xr(n,"indexConfiguration")}function Pc(n){return Xr(n,"indexState")}function _C(n){pt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const a=n[r].indexState.offset;r_(a,e)<0&&(e=a),t<a.largestBatchId&&(t=a.largestBatchId)}return new Ps(e.readTime,e.documentKey,t)}const vC={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Fs{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Fs(e,Fs.DEFAULT_COLLECTION_PERCENTILE,Fs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function EC(n,e,t){const r=n.store("mutations"),a=n.store("documentMutations"),c=[],h=IDBKeyRange.only(t.batchId);let y=0;const w=r.Z({range:h},(R,O,G)=>(y++,G.delete()));c.push(w.next(()=>{pt(1===y)}));const D=[];for(const R of t.mutations){const O=iC(e,R.key.path,t.batchId);c.push(a.delete(O)),D.push(R.key)}return ae.waitFor(c).next(()=>D)}function T_(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Qe();e=n.noDocument}return JSON.stringify(e).length}Fs.DEFAULT_COLLECTION_PERCENTILE=10,Fs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Fs.DEFAULT=new Fs(41943040,Fs.DEFAULT_COLLECTION_PERCENTILE,Fs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Fs.DISABLED=new Fs(-1,0,0);class A_{constructor(e,t,r,a){this.userId=e,this.It=t,this.indexManager=r,this.referenceDelegate=a,this.In={}}static oe(e,t,r,a){pt(""!==e.uid);const c=e.isAuthenticated()?e.uid:"";return new A_(c,t,r,a)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Nu(e).Z({index:"userMutationsIndex",range:r},(a,c,h)=>{t=!1,h.done()}).next(()=>t)}addMutationBatch(e,t,r,a){const c=kc(e),h=Nu(e);return h.add({}).next(y=>{pt("number"==typeof y);const w=new fb(y,t,r,a),D=function(G,q,te){const Se=te.baseMutations.map(st=>tf(G.re,st)),Pe=te.mutations.map(st=>tf(G.re,st));return{userId:q,batchId:te.batchId,localWriteTimeMs:te.localWriteTime.toMillis(),baseMutations:Se,mutations:Pe}}(this.It,this.userId,w),R=[];let O=new ln((G,q)=>Mt(G.canonicalString(),q.canonicalString()));for(const G of a){const q=iC(this.userId,G.key.path,y);O=O.add(G.key.path.popLast()),R.push(h.put(D)),R.push(c.put(q,qA))}return O.forEach(G=>{R.push(this.indexManager.addToCollectionParentIndex(e,G))}),e.addOnCommittedListener(()=>{this.In[y]=w.keys()}),ae.waitFor(R).next(()=>w)})}lookupMutationBatch(e,t){return Nu(e).get(t).next(r=>r?(pt(r.userId===this.userId),ad(this.It,r)):null)}Tn(e,t){return this.In[t]?ae.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const a=r.keys();return this.In[t]=a,a}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,a=IDBKeyRange.lowerBound([this.userId,r]);let c=null;return Nu(e).Z({index:"userMutationsIndex",range:a},(h,y,w)=>{y.userId===this.userId&&(pt(y.batchId>=r),c=ad(this.It,y)),w.done()}).next(()=>c)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Nu(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(a,c,h)=>{r=c.batchId,h.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Nu(e).W("userMutationsIndex",t).next(r=>r.map(a=>ad(this.It,a)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Bg(this.userId,t.path),a=IDBKeyRange.lowerBound(r),c=[];return kc(e).Z({range:a},(h,y,w)=>{const[D,R,O]=h,G=Ba(R);if(D===this.userId&&t.path.isEqual(G))return Nu(e).get(O).next(q=>{if(!q)throw Qe();pt(q.userId===this.userId),c.push(ad(this.It,q))});w.done()}).next(()=>c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new ln(Mt);const a=[];return t.forEach(c=>{const h=Bg(this.userId,c.path),y=IDBKeyRange.lowerBound(h),w=kc(e).Z({range:y},(D,R,O)=>{const[G,q,te]=D,Se=Ba(q);G===this.userId&&c.path.isEqual(Se)?r=r.add(te):O.done()});a.push(w)}),ae.waitFor(a).next(()=>this.En(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,a=r.length+1,c=Bg(this.userId,r),h=IDBKeyRange.lowerBound(c);let y=new ln(Mt);return kc(e).Z({range:h},(w,D,R)=>{const[O,G,q]=w,te=Ba(G);O===this.userId&&r.isPrefixOf(te)?te.length===a&&(y=y.add(q)):R.done()}).next(()=>this.En(e,y))}En(e,t){const r=[],a=[];return t.forEach(c=>{a.push(Nu(e).get(c).next(h=>{if(null===h)throw Qe();pt(h.userId===this.userId),r.push(ad(this.It,h))}))}),ae.waitFor(a).next(()=>r)}removeMutationBatch(e,t){return EC(e.ie,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),ae.forEach(r,a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ae.resolve();const r=IDBKeyRange.lowerBound([this.userId]),a=[];return kc(e).Z({range:r},(c,h,y)=>{if(c[0]===this.userId){const w=Ba(c[1]);a.push(w)}else y.done()}).next(()=>{pt(0===a.length)})})}containsKey(e,t){return S_(e,this.userId,t)}Rn(e){return wb(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function S_(n,e,t){const r=Bg(e,t.path),a=r[1],c=IDBKeyRange.lowerBound(r);let h=!1;return kc(n).Z({range:c,X:!0},(y,w,D)=>{const[R,O,G]=y;R===e&&O===a&&(h=!0),D.done()}).next(()=>h)}function Nu(n){return Xr(n,"mutations")}function kc(n){return Xr(n,"documentMutations")}function wb(n){return Xr(n,"mutationQueues")}class cd{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new cd(0)}static vn(){return new cd(-1)}}class vM{constructor(e,t){this.referenceDelegate=e,this.It=t}allocateTargetId(e){return this.Vn(e).next(t=>{const r=new cd(t.highestTargetId);return t.highestTargetId=r.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>gt.fromTimestamp(new qn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Vn(e).next(a=>(a.highestListenSequenceNumber=t,r&&(a.lastRemoteSnapshotVersion=r.toTimestamp()),t>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=t),this.Sn(e,a)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(r=>(r.targetCount+=1,this.Cn(t,r),this.Sn(e,r))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>lf(e).delete(t.targetId)).next(()=>this.Vn(e)).next(r=>(pt(r.targetCount>0),r.targetCount-=1,this.Sn(e,r)))}removeTargets(e,t,r){let a=0;const c=[];return lf(e).Z((h,y)=>{const w=jg(y);w.sequenceNumber<=t&&null===r.get(w.targetId)&&(a++,c.push(this.removeTargetData(e,w)))}).next(()=>ae.waitFor(c)).next(()=>a)}forEachTarget(e,t){return lf(e).Z((r,a)=>{const c=jg(a);t(c)})}Vn(e){return bC(e).get("targetGlobalKey").next(t=>(pt(null!==t),t))}Sn(e,t){return bC(e).put("targetGlobalKey",t)}Dn(e,t){return lf(e).put(pC(this.It,t))}Cn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=xc(t),a=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let c=null;return lf(e).Z({range:a,index:"queryTargetsIndex"},(h,y,w)=>{const D=jg(y);La(t,D.target)&&(c=D,w.done())}).next(()=>c)}addMatchingKeys(e,t,r){const a=[],c=Fc(e);return t.forEach(h=>{const y=Zi(h.path);a.push(c.put({targetId:r,path:y})),a.push(this.referenceDelegate.addReference(e,r,h))}),ae.waitFor(a)}removeMatchingKeys(e,t,r){const a=Fc(e);return ae.forEach(t,c=>{const h=Zi(c.path);return ae.waitFor([a.delete([r,h]),this.referenceDelegate.removeReference(e,r,c)])})}removeMatchingKeysForTargetId(e,t){const r=Fc(e),a=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(a)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),a=Fc(e);let c=Ot();return a.Z({range:r,X:!0},(h,y,w)=>{const D=Ba(h[1]),R=new Ve(D);c=c.add(R)}).next(()=>c)}containsKey(e,t){const r=Zi(t.path),a=IDBKeyRange.bound([r],[IA(r)],!1,!0);let c=0;return Fc(e).Z({index:"documentTargetsIndex",X:!0,range:a},([h,y],w,D)=>{0!==h&&(c++,D.done())}).next(()=>c>0)}se(e,t){return lf(e).get(t).next(r=>r?jg(r):null)}}function lf(n){return Xr(n,"targets")}function bC(n){return Xr(n,"targetGlobal")}function Fc(n){return Xr(n,"targetDocuments")}function Ib([n,e],[t,r]){const a=Mt(n,t);return 0===a?Mt(e,r):a}class wC{constructor(e){this.xn=e,this.buffer=new ln(Ib),this.Nn=0}kn(){return++this.Nn}On(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Ib(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class IC{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var t=this;xe("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,ge.Z)(function*(){t.Mn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Dc(r)?xe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield jo(r)}yield t.Fn(3e5)}))}}class iS{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return ae.resolve(Ri.at);const r=new wC(t);return this.$n.forEachTarget(e,a=>r.On(a.sequenceNumber)).next(()=>this.$n.Ln(e,a=>r.On(a))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.$n.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(xe("LruGarbageCollector","Garbage collection skipped; disabled"),ae.resolve(vC)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(xe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),vC):this.Un(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}Un(e,t){let r,a,c,h,y,w,D;const R=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(O=>(O>this.params.maximumSequenceNumbersToCollect?(xe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${O}`),a=this.params.maximumSequenceNumbersToCollect):a=O,h=Date.now(),this.nthSequenceNumber(e,a))).next(O=>(r=O,y=Date.now(),this.removeTargets(e,r,t))).next(O=>(c=O,w=Date.now(),this.removeOrphanedDocuments(e,r))).next(O=>(D=Date.now(),Qy()<=Ec.in.DEBUG&&xe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${h-R}ms\n\tDetermined least recently used ${a} in `+(y-h)+`ms\n\tRemoved ${c} targets in `+(w-y)+`ms\n\tRemoved ${O} documents in `+(D-w)+`ms\nTotal Duration: ${D-R}ms`),ae.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:c,documentsRemoved:O})))}}class sS{constructor(e,t){this.db=e,this.garbageCollector=new iS(this,t)}Bn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(a=>r+a))}qn(e){let t=0;return this.Ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(r,a)=>t(a))}addReference(e,t,r){return qg(e,r)}removeReference(e,t,r){return qg(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return qg(e,t)}Gn(e,t){return function(r,a){let c=!1;return wb(r).tt(h=>S_(r,h,a).next(y=>(y&&(c=!0),ae.resolve(!y)))).next(()=>c)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let c=0;return this.Kn(e,(h,y)=>{if(y<=t){const w=this.Gn(e,h).next(D=>{if(!D)return c++,r.getEntry(e,h).next(()=>(r.removeEntry(h,gt.min()),Fc(e).delete([0,Zi(h.path)])))});a.push(w)}}).next(()=>ae.waitFor(a)).next(()=>r.apply(e)).next(()=>c)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return qg(e,t)}Kn(e,t){const r=Fc(e);let a,c=Ri.at;return r.Z({index:"documentTargetsIndex"},([h,y],{path:w,sequenceNumber:D})=>{0===h?(c!==Ri.at&&t(new Ve(Ba(a)),c),c=D,a=w):c=Ri.at}).next(()=>{c!==Ri.at&&t(new Ve(Ba(a)),c)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function qg(n,e){return Fc(n).put((r=n.currentSequenceNumber,{targetId:0,path:Zi(e.path),sequenceNumber:r}));var r}class zg{constructor(){this.changes=new ks(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,wn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ae.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class oS{constructor(e){this.It=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Wo(e).put(r)}removeEntry(e,t,r){return Wo(e).delete(function(a,c){const h=a.path.toArray();return[h.slice(0,h.length-2),h[h.length-2],w_(c),h[h.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Qn(e,r)))}getEntry(e,t){let r=wn.newInvalidDocument(t);return Wo(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Zg(t))},(a,c)=>{r=this.jn(t,c)}).next(()=>r)}Wn(e,t){let r={size:0,document:wn.newInvalidDocument(t)};return Wo(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Zg(t))},(a,c)=>{r={document:this.jn(t,c),size:T_(c)}}).next(()=>r)}getEntries(e,t){let r=Ni();return this.zn(e,t,(a,c)=>{const h=this.jn(a,c);r=r.insert(a,h)}).next(()=>r)}Hn(e,t){let r=Ni(),a=new rr(Ve.comparator);return this.zn(e,t,(c,h)=>{const y=this.jn(c,h);r=r.insert(c,y),a=a.insert(c,T_(h))}).next(()=>({documents:r,Jn:a}))}zn(e,t,r){if(t.isEmpty())return ae.resolve();let a=new ln(aS);t.forEach(w=>a=a.add(w));const c=IDBKeyRange.bound(Zg(a.first()),Zg(a.last())),h=a.getIterator();let y=h.getNext();return Wo(e).Z({index:"documentKeyIndex",range:c},(w,D,R)=>{const O=Ve.fromSegments([...D.prefixPath,D.collectionGroup,D.documentId]);for(;y&&aS(y,O)<0;)r(y,null),y=h.getNext();y&&y.isEqual(O)&&(r(y,D),y=h.hasNext()?h.getNext():null),y?R.j(Zg(y)):R.done()}).next(()=>{for(;y;)r(y,null),y=h.hasNext()?h.getNext():null})}getAllFromCollection(e,t,r){const a=[t.popLast().toArray(),t.lastSegment(),w_(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Wo(e).W(IDBKeyRange.bound(a,c,!0)).next(h=>{let y=Ni();for(const w of h){const D=this.jn(Ve.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);y=y.insert(D.key,D)}return y})}getAllFromCollectionGroup(e,t,r,a){let c=Ni();const h=CC(t,r),y=CC(t,Ps.max());return Wo(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(h,y,!0)},(w,D,R)=>{const O=this.jn(Ve.fromSegments(D.prefixPath.concat(D.collectionGroup,D.documentId)),D);c=c.insert(O.key,O),c.size===a&&R.done()}).next(()=>c)}newChangeBuffer(e){return new x_(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Wg(e).get("remoteDocumentGlobalKey").next(t=>(pt(!!t),t))}Qn(e,t){return Wg(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const r=function(n,e){let t;if(e.document)t=JI(n.re,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Ve.fromSegments(e.noDocument.path),a=Oc(e.noDocument.readTime);t=wn.newNoDocument(r,a),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Qe();{const r=Ve.fromSegments(e.unknownDocument.path),a=Oc(e.unknownDocument.version);t=wn.newUnknownDocument(r,a)}}return e.readTime&&t.setReadTime(function(r){const a=new qn(r[0],r[1]);return gt.fromTimestamp(a)}(e.readTime)),t}(this.It,t);if(!r.isNoDocument()||!r.version.isEqual(gt.min()))return r}return wn.newInvalidDocument(e)}}function Cb(n){return new oS(n)}class x_ extends zg{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new ks(r=>r.toString(),(r,a)=>r.isEqual(a))}applyChanges(e){const t=[];let r=0,a=new ln((c,h)=>Mt(c.canonicalString(),h.canonicalString()));return this.changes.forEach((c,h)=>{const y=this.Xn.get(c);if(t.push(this.Yn.removeEntry(e,c,y.readTime)),h.isValidDocument()){const w=mb(this.Yn.It,h);a=a.add(c.path.popLast()),r+=T_(w)-y.size,t.push(this.Yn.addEntry(e,c,w))}else if(r-=y.size,this.trackRemovals){const w=mb(this.Yn.It,h.convertToNoDocument(gt.min()));t.push(this.Yn.addEntry(e,c,w))}}),a.forEach(c=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,c))}),t.push(this.Yn.updateMetadata(e,r)),ae.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(r=>(this.Xn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:r,Jn:a})=>(a.forEach((c,h)=>{this.Xn.set(c,{size:h,readTime:r.get(c).readTime})}),r))}}function Wg(n){return Xr(n,"remoteDocumentGlobal")}function Wo(n){return Xr(n,"remoteDocumentsV14")}function Zg(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function CC(n,e){const t=e.documentKey.path.toArray();return[n,w_(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function aS(n,e){const t=n.path.toArray(),r=e.path.toArray();let a=0;for(let c=0;c<t.length-2&&c<r.length-2;++c)if(a=Mt(t[c],r[c]),a)return a;return a=Mt(t.length,r.length),a||(a=Mt(t[t.length-2],r[r.length-2]),a||Mt(t[t.length-1],r[r.length-1]))}class uS{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class DC{constructor(e,t,r,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=a}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(a=>(r=a,this.getBaseDocument(e,t,r))).next(a=>(null!==r&&Fg(r.mutation,a,ps.empty(),qn.now()),a))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Ot()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Ot()){const a=Su();return this.populateOverlays(e,a,t).next(()=>this.computeViews(e,t,a,r).next(c=>{let h=Qh();return c.forEach((y,w)=>{h=h.insert(y,w.overlayedDocument)}),h}))}getOverlayedDocuments(e,t){const r=Su();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Ot()))}populateOverlays(e,t,r){const a=[];return r.forEach(c=>{t.has(c)||a.push(c)}),this.documentOverlayCache.getOverlays(e,a).next(c=>{c.forEach((h,y)=>{t.set(h,y)})})}computeViews(e,t,r,a){let c=Ni();const h=Lg(),y=Lg();return t.forEach((w,D)=>{const R=r.get(D.key);a.has(D.key)&&(void 0===R||R.mutation instanceof Ua)?c=c.insert(D.key,D):void 0!==R&&(h.set(D.key,R.mutation.getFieldMask()),Fg(R.mutation,D,R.mutation.getFieldMask(),qn.now()))}),this.recalculateAndSaveOverlays(e,c).next(w=>(w.forEach((D,R)=>h.set(D,R)),t.forEach((D,R)=>{var O;return y.set(D,new uS(R,null!==(O=h.get(D))&&void 0!==O?O:null))}),y))}recalculateAndSaveOverlays(e,t){const r=Lg();let a=new rr((h,y)=>h-y),c=Ot();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(h=>{for(const y of h)y.keys().forEach(w=>{const D=t.get(w);if(null===D)return;let R=r.get(w)||ps.empty();R=y.applyToLocalView(D,R),r.set(w,R);const O=(a.get(y.batchId)||Ot()).add(w);a=a.insert(y.batchId,O)})}).next(()=>{const h=[],y=a.getReverseIterator();for(;y.hasNext();){const w=y.getNext(),D=w.key,R=w.value,O=dt();R.forEach(G=>{if(!c.has(G)){const q=$I(t.get(G),r.get(G));null!==q&&O.set(G,q),c=c.add(G)}}),h.push(this.documentOverlayCache.saveOverlays(e,D,O))}return ae.waitFor(h)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return Ve.isDocumentKey((a=t).path)&&null===a.collectionGroup&&0===a.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):qE(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var a}getNextDocuments(e,t,r,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,a).next(c=>{const h=a-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,a-c.size):ae.resolve(Su());let y=-1,w=c;return h.next(D=>ae.forEach(D,(R,O)=>(y<O.largestBatchId&&(y=O.largestBatchId),c.get(R)?ae.resolve():this.getBaseDocument(e,R,O).next(G=>{w=w.insert(R,G)}))).next(()=>this.populateOverlays(e,D,c)).next(()=>this.computeViews(e,w,D,Ot())).next(R=>({batchId:y,changes:tb(R)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ve(t)).next(r=>{let a=Qh();return r.isFoundDocument()&&(a=a.insert(r.key,r)),a})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const a=t.collectionGroup;let c=Qh();return this.indexManager.getCollectionParents(e,a).next(h=>ae.forEach(h,y=>{const w=(D=t,R=y.child(a),new Au(R,null,D.explicitOrderBy.slice(),D.filters.slice(),D.limit,D.limitType,D.startAt,D.endAt));var D,R;return this.getDocumentsMatchingCollectionQuery(e,w,r).next(D=>{D.forEach((R,O)=>{c=c.insert(R,O)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,t,r){let a;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(c=>(a=c,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(c=>{c.forEach((y,w)=>{const D=w.getKey();null===a.get(D)&&(a=a.insert(D,wn.newInvalidDocument(D)))});let h=Qh();return a.forEach((y,w)=>{const D=c.get(y);void 0!==D&&Fg(D.mutation,w,ps.empty(),qn.now()),Ng(t,w)&&(h=h.insert(y,w))}),h})}getBaseDocument(e,t,r){return null===r||1===r.mutation.type?this.remoteDocumentCache.getEntry(e,t):ae.resolve(wn.newInvalidDocument(t))}}class cS{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return ae.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var r;return this.Zn.set(t.id,{id:(r=t).id,version:r.version,createTime:Jr(r.createTime)}),ae.resolve()}getNamedQuery(e,t){return ae.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(r=t).name,query:Hg(r.bundledQuery),readTime:Jr(r.readTime)}),ae.resolve();var r}}class lS{constructor(){this.overlays=new rr(Ve.comparator),this.es=new Map}getOverlay(e,t){return ae.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Su();return ae.forEach(t,a=>this.getOverlay(e,a).next(c=>{null!==c&&r.set(a,c)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((a,c)=>{this.ue(e,t,c)}),ae.resolve()}removeOverlaysForBatchId(e,t,r){const a=this.es.get(r);return void 0!==a&&(a.forEach(c=>this.overlays=this.overlays.remove(c)),this.es.delete(r)),ae.resolve()}getOverlaysForCollection(e,t,r){const a=Su(),c=t.length+1,h=new Ve(t.child("")),y=this.overlays.getIteratorFrom(h);for(;y.hasNext();){const w=y.getNext().value,D=w.getKey();if(!t.isPrefixOf(D.path))break;D.path.length===c&&w.largestBatchId>r&&a.set(w.getKey(),w)}return ae.resolve(a)}getOverlaysForCollectionGroup(e,t,r,a){let c=new rr((D,R)=>D-R);const h=this.overlays.getIterator();for(;h.hasNext();){const D=h.getNext().value;if(D.getKey().getCollectionGroup()===t&&D.largestBatchId>r){let R=c.get(D.largestBatchId);null===R&&(R=Su(),c=c.insert(D.largestBatchId,R)),R.set(D.getKey(),D)}}const y=Su(),w=c.getIterator();for(;w.hasNext()&&(w.getNext().value.forEach((D,R)=>y.set(D,R)),!(y.size()>=a)););return ae.resolve(y)}ue(e,t,r){const a=this.overlays.get(r.key);if(null!==a){const h=this.es.get(a.largestBatchId).delete(r.key);this.es.set(a.largestBatchId,h)}this.overlays=this.overlays.insert(r.key,new gb(t,r));let c=this.es.get(t);void 0===c&&(c=Ot(),this.es.set(t,c)),this.es.set(t,c.add(r.key))}}class Db{constructor(){this.ns=new ln(ei.ss),this.rs=new ln(ei.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const r=new ei(e,t);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.cs(new ei(e,t))}hs(e,t){e.forEach(r=>this.removeReference(r,t))}ls(e){const t=new Ve(new Jt([])),r=new ei(t,e),a=new ei(t,e+1),c=[];return this.rs.forEachInRange([r,a],h=>{this.cs(h),c.push(h.key)}),c}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new Ve(new Jt([])),r=new ei(t,e),a=new ei(t,e+1);let c=Ot();return this.rs.forEachInRange([r,a],h=>{c=c.add(h.key)}),c}containsKey(e){const t=new ei(e,0),r=this.ns.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class ei{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return Ve.comparator(e.key,t.key)||Mt(e._s,t._s)}static os(e,t){return Mt(e._s,t._s)||Ve.comparator(e.key,t.key)}}class dS{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new ln(ei.ss)}checkEmpty(e){return ae.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,a){const c=this.ws;this.ws++;const h=new fb(c,t,r,a);this.mutationQueue.push(h);for(const y of a)this.gs=this.gs.add(new ei(y.key,c)),this.indexManager.addToCollectionParentIndex(e,y.key.path.popLast());return ae.resolve(h)}lookupMutationBatch(e,t){return ae.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const a=this.ps(t+1),c=a<0?0:a;return ae.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return ae.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return ae.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new ei(t,0),a=new ei(t,Number.POSITIVE_INFINITY),c=[];return this.gs.forEachInRange([r,a],h=>{const y=this.ys(h._s);c.push(y)}),ae.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new ln(Mt);return t.forEach(a=>{const c=new ei(a,0),h=new ei(a,Number.POSITIVE_INFINITY);this.gs.forEachInRange([c,h],y=>{r=r.add(y._s)})}),ae.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,a=r.length+1;let c=r;Ve.isDocumentKey(c)||(c=c.child(""));const h=new ei(new Ve(c),0);let y=new ln(Mt);return this.gs.forEachWhile(w=>{const D=w.key.path;return!!r.isPrefixOf(D)&&(D.length===a&&(y=y.add(w._s)),!0)},h),ae.resolve(this.Is(y))}Is(e){const t=[];return e.forEach(r=>{const a=this.ys(r);null!==a&&t.push(a)}),t}removeMutationBatch(e,t){pt(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let r=this.gs;return ae.forEach(t.mutations,a=>{const c=new ei(a.key,t.batchId);return r=r.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,t){const r=new ei(t,0),a=this.gs.firstAfterOrEqual(r);return ae.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return ae.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class hS{constructor(e){this.Es=e,this.docs=new rr(Ve.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,a=this.docs.get(r),c=a?a.size:0,h=this.Es(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:h}),this.size+=h-c,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ae.resolve(r?r.document.mutableCopy():wn.newInvalidDocument(t))}getEntries(e,t){let r=Ni();return t.forEach(a=>{const c=this.docs.get(a);r=r.insert(a,c?c.document.mutableCopy():wn.newInvalidDocument(a))}),ae.resolve(r)}getAllFromCollection(e,t,r){let a=Ni();const c=new Ve(t.child("")),h=this.docs.getIteratorFrom(c);for(;h.hasNext();){const{key:y,value:{document:w}}=h.getNext();if(!t.isPrefixOf(y.path))break;y.path.length>t.length+1||r_(zl(w),r)<=0||(a=a.insert(w.key,w.mutableCopy()))}return ae.resolve(a)}getAllFromCollectionGroup(e,t,r,a){Qe()}As(e,t){return ae.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new fS(this)}getSize(e){return ae.resolve(this.size)}}class fS extends zg{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((r,a)=>{a.isValidDocument()?t.push(this.Yn.addEntry(e,a)):this.Yn.removeEntry(r)}),ae.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class EM{constructor(e){this.persistence=e,this.Rs=new ks(t=>xc(t),La),this.lastRemoteSnapshotVersion=gt.min(),this.highestTargetId=0,this.bs=0,this.Ps=new Db,this.targetCount=0,this.vs=cd.Pn()}forEachTarget(e,t){return this.Rs.forEach((r,a)=>t(a)),ae.resolve()}getLastRemoteSnapshotVersion(e){return ae.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ae.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),ae.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.bs&&(this.bs=t),ae.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new cd(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,ae.resolve()}updateTargetData(e,t){return this.Dn(t),ae.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,ae.resolve()}removeTargets(e,t,r){let a=0;const c=[];return this.Rs.forEach((h,y)=>{y.sequenceNumber<=t&&null===r.get(y.targetId)&&(this.Rs.delete(h),c.push(this.removeMatchingKeysForTargetId(e,y.targetId)),a++)}),ae.waitFor(c).next(()=>a)}getTargetCount(e){return ae.resolve(this.targetCount)}getTargetData(e,t){const r=this.Rs.get(t)||null;return ae.resolve(r)}addMatchingKeys(e,t,r){return this.Ps.us(t,r),ae.resolve()}removeMatchingKeys(e,t,r){this.Ps.hs(t,r);const a=this.persistence.referenceDelegate,c=[];return a&&t.forEach(h=>{c.push(a.markPotentiallyOrphaned(e,h))}),ae.waitFor(c)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),ae.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ps.ds(t);return ae.resolve(r)}containsKey(e,t){return ae.resolve(this.Ps.containsKey(t))}}class TC{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new Ri(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new EM(this),this.indexManager=new uf,this.remoteDocumentCache=new hS(r=>this.referenceDelegate.xs(r)),this.It=new hC(t),this.Ns=new cS(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new lS,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Vs[e.toKey()];return r||(r=new dS(t,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,r){xe("MemoryPersistence","Starting transaction:",e);const a=new Kg(this.Ss.next());return this.referenceDelegate.ks(),r(a).next(c=>this.referenceDelegate.Os(a).next(()=>c)).toPromise().then(c=>(a.raiseOnCommittedEvent(),c))}Ms(e,t){return ae.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,t)))}}class Kg extends OE{constructor(e){super(),this.currentSequenceNumber=e}}class R_{constructor(e){this.persistence=e,this.Fs=new Db,this.$s=null}static Bs(e){return new R_(e)}get Ls(){if(this.$s)return this.$s;throw Qe()}addReference(e,t,r){return this.Fs.addReference(r,t),this.Ls.delete(r.toString()),ae.resolve()}removeReference(e,t,r){return this.Fs.removeReference(r,t),this.Ls.add(r.toString()),ae.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),ae.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(a=>this.Ls.add(a.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(a=>{a.forEach(c=>this.Ls.add(c.toString()))}).next(()=>r.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ae.forEach(this.Ls,r=>{const a=Ve.fromPath(r);return this.Us(e,a).next(c=>{c||t.removeEntry(a,gt.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.Us(e,t).next(r=>{r?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}Us(e,t){return ae.or([()=>ae.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class pS{constructor(e){this.It=e}$(e,t,r,a){const c=new i_("createOrUpgrade",t);var y;r<1&&a>=1&&(e.createObjectStore("owner"),(y=e).createObjectStore("mutationQueues",{keyPath:"userId"}),y.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",rC,{unique:!0}),y.createObjectStore("documentMutations"),AC(e),function(y){y.createObjectStore("remoteDocuments")}(e));let h=ae.resolve();return r<3&&a>=3&&(0!==r&&(function(y){y.deleteObjectStore("targetDocuments"),y.deleteObjectStore("targets"),y.deleteObjectStore("targetGlobal")}(e),AC(e)),h=h.next(()=>function(y){const w=y.store("targetGlobal"),D={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:gt.min().toTimestamp(),targetCount:0};return w.put("targetGlobalKey",D)}(c))),r<4&&a>=4&&(0!==r&&(h=h.next(()=>function(y,w){return w.store("mutations").W().next(D=>{y.deleteObjectStore("mutations"),y.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",rC,{unique:!0});const R=w.store("mutations"),O=D.map(G=>R.put(G));return ae.waitFor(O)})}(e,c))),h=h.next(()=>{!function(y){y.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&a>=5&&(h=h.next(()=>this.qs(c))),r<6&&a>=6&&(h=h.next(()=>(function(y){y.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(c)))),r<7&&a>=7&&(h=h.next(()=>this.Gs(c))),r<8&&a>=8&&(h=h.next(()=>this.Qs(e,c))),r<9&&a>=9&&(h=h.next(()=>{!function(y){y.objectStoreNames.contains("remoteDocumentChanges")&&y.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&a>=10&&(h=h.next(()=>this.js(c))),r<11&&a>=11&&(h=h.next(()=>{(function(y){y.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(y){y.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&a>=12&&(h=h.next(()=>{!function(y){const w=y.createObjectStore("documentOverlays",{keyPath:cC});w.createIndex("collectionPathOverlayIndex",QA,{unique:!1}),w.createIndex("collectionGroupOverlayIndex",JA,{unique:!1})}(e)})),r<13&&a>=13&&(h=h.next(()=>function(y){const w=y.createObjectStore("remoteDocumentsV14",{keyPath:rf});w.createIndex("documentKeyIndex",zA),w.createIndex("collectionGroupIndex",sC)}(e)).next(()=>this.Ws(e,c)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&a>=14&&(h=h.next(()=>this.zs(e,c))),r<15&&a>=15&&(h=h.next(()=>function(y){y.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),y.createObjectStore("indexState",{keyPath:KA}).createIndex("sequenceNumberIndex",cb,{unique:!1}),y.createObjectStore("indexEntries",{keyPath:YA}).createIndex("documentKeyIndex",uC,{unique:!1})}(e))),h}Ks(e){let t=0;return e.store("remoteDocuments").Z((r,a)=>{t+=T_(a)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}qs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(a=>ae.forEach(a,c=>{const h=IDBKeyRange.bound([c.userId,-1],[c.userId,c.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",h).next(y=>ae.forEach(y,w=>{pt(w.userId===c.userId);const D=ad(this.It,w);return EC(e,c.userId,D).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(a=>{const c=[];return r.Z((h,y)=>{const w=new Jt(h),D=[0,Zi(w)];c.push(t.get(D).next(R=>R?ae.resolve():t.put({targetId:0,path:Zi(w),sequenceNumber:a.highestListenSequenceNumber})))}).next(()=>ae.waitFor(c))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:aC});const r=t.store("collectionParents"),a=new vb,c=h=>{if(a.add(h)){const y=h.lastSegment(),w=h.popLast();return r.put({collectionId:y,parent:Zi(w)})}};return t.store("remoteDocuments").Z({X:!0},(h,y)=>{const w=new Jt(h);return c(w.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([h,y,w],D)=>{const R=Ba(y);return c(R.popLast())}))}js(e){const t=e.store("targets");return t.Z((r,a)=>{const c=jg(a),h=pC(this.It,c);return t.put(h)})}Ws(e,t){const r=t.store("remoteDocuments"),a=[];return r.Z((c,h)=>{const y=t.store("remoteDocumentsV14"),w=(D=h,D.document?new Ve(Jt.fromString(D.document.name).popFirst(5)):D.noDocument?Ve.fromSegments(D.noDocument.path):D.unknownDocument?Ve.fromSegments(D.unknownDocument.path):Qe()).path.toArray();var D;const R={prefixPath:w.slice(0,w.length-2),collectionGroup:w[w.length-2],documentId:w[w.length-1],readTime:h.readTime||[0,0],unknownDocument:h.unknownDocument,noDocument:h.noDocument,document:h.document,hasCommittedMutations:!!h.hasCommittedMutations};a.push(y.put(R))}).next(()=>ae.waitFor(a))}zs(e,t){const r=t.store("mutations"),a=Cb(this.It),c=new TC(R_.Bs,this.It.re);return r.W().next(h=>{const y=new Map;return h.forEach(w=>{var D;let R=null!==(D=y.get(w.userId))&&void 0!==D?D:Ot();ad(this.It,w).keys().forEach(O=>R=R.add(O)),y.set(w.userId,R)}),ae.forEach(y,(w,D)=>{const R=new Gn(D),O=D_.oe(this.It,R),G=c.getIndexManager(R),q=A_.oe(R,this.It,G,c.referenceDelegate);return new DC(a,q,O,G).recalculateAndSaveOverlaysForDocumentKeys(new hb(t,Ri.at),w).next()})})}}function AC(n){n.createObjectStore("targetDocuments",{keyPath:oC}).createIndex("documentTargetsIndex",ZA,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",WA,{unique:!0}),n.createObjectStore("targetGlobal")}const df="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Ou{constructor(e,t,r,a,c,h,y,w,D,R,O=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Hs=c,this.window=h,this.document=y,this.Js=D,this.Ys=R,this.Xs=O,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=G=>Promise.resolve(),!Ou.C())throw new Ie(he.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new sS(this,a),this.ii=t+"main",this.It=new hC(w),this.ri=new Ho(this.ii,this.Xs,new pS(this.It)),this.Cs=new vM(this.referenceDelegate,this.It),this.remoteDocumentCache=Cb(this.It),this.Ns=new eS,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===R&&nr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ie(he.FAILED_PRECONDITION,df);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new Ri(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var r=(0,ge.Z)(function*(a){if(t.started)return e(a)});return function(a){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,ge.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,ge.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>M_(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(Dc(e))return xe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return xe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return hf(e).get("owner").next(t=>ae.resolve(this.mi(t)))}gi(e){return M_(e).delete(this.clientId)}yi(){var e=this;return(0,ge.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const a=Xr(r,"clientMetadata");return a.W().next(c=>{const h=e.Ii(c,18e5),y=c.filter(w=>-1===h.indexOf(w));return ae.forEach(y,w=>a.delete(w.clientId)).next(()=>y)})}).catch(()=>[]);if(e.oi)for(const r of t)e.oi.removeItem(e.Ti(r.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?ae.resolve(!0):hf(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new Ie(he.FAILED_PRECONDITION,df);return!1}}return!(!this.networkEnabled||!this.inForeground)||M_(e).W().next(r=>void 0===this.Ii(r,5e3).find(a=>{if(this.clientId!==a.clientId){const h=!this.inForeground&&a.inForeground,y=this.networkEnabled===a.networkEnabled;if(!this.networkEnabled&&a.networkEnabled||h&&y)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&xe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ge.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new hb(t,Ri.at);return e._i(r).next(()=>e.gi(r))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(r=>this.pi(r.updateTimeMs,t)&&!this.Ei(r.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>M_(e).W().next(t=>this.Ii(t,18e5).map(r=>r.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return A_.oe(e,this.It,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new rS(e,this.It.re.databaseId)}getDocumentOverlayCache(e){return D_.oe(this.It,e)}getBundleCache(){return this.Ns}runTransaction(e,t,r){xe("IndexedDbPersistence","Starting transaction:",e);const a="readonly"===t?"readonly":"readwrite",c=15===(h=this.Xs)?XA:14===h?db:13===h?dC:12===h?lb:11===h?lC:void Qe();var h;let y;return this.ri.runTransaction(e,a,c,w=>(y=new hb(w,this.Ss?this.Ss.next():Ri.at),"readwrite-primary"===t?this.fi(y).next(D=>!!D||this.di(y)).next(D=>{if(!D)throw nr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new Ie(he.FAILED_PRECONDITION,_I);return r(y)}).next(D=>this.wi(y).next(()=>D)):this.Vi(y).next(()=>r(y)))).then(w=>(y.raiseOnCommittedEvent(),w))}Vi(e){return hf(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ie(he.FAILED_PRECONDITION,df)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return hf(e).put("owner",t)}static C(){return Ho.C()}_i(e){const t=hf(e);return t.get("owner").next(r=>this.mi(r)?(xe("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ae.resolve())}pi(e,t){const r=Date.now();return!(e<r-t||e>r&&(nr(`Detected an update time that is in the future: ${e} > ${r}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,nn.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const r=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return xe("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return nr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){nr("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch(e){}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function hf(n){return Xr(n,"owner")}function M_(n){return Xr(n,"clientMetadata")}function SC(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class Tb{constructor(e,t,r,a){this.targetId=e,this.fromCache=t,this.Si=r,this.Di=a}static Ci(e,t){let r=Ot(),a=Ot();for(const c of t.docChanges)switch(c.type){case 0:r=r.add(c.doc.key);break;case 1:a=a.add(c.doc.key)}return new Tb(e,t.fromCache,r,a)}}class Yg{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,r,a){return this.ki(e,t).next(c=>c||this.Oi(e,t,a,r)).next(c=>c||this.Mi(e,t))}ki(e,t){if(Zh(t))return ae.resolve(null);let r=Mi(t);return this.indexManager.getIndexType(e,r).next(a=>0===a?null:(null!==t.limit&&1===a&&(t=Xl(t,null,"F"),r=Mi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(c=>{const h=Ot(...c);return this.Ni.getDocuments(e,h).next(y=>this.indexManager.getMinOffset(e,r).next(w=>{const D=this.Fi(t,y);return this.$i(t,D,h,w.readTime)?this.ki(e,Xl(t,null,"F")):this.Bi(e,D,t,w)}))})))}Oi(e,t,r,a){return Zh(t)||a.isEqual(gt.min())?this.Mi(e,t):this.Ni.getDocuments(e,r).next(c=>{const h=this.Fi(t,c);return this.$i(t,h,r,a)?this.Mi(e,t):(Qy()<=Ec.in.DEBUG&&xe("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),p_(t)),this.Bi(e,h,t,yI(a,-1)))})}Fi(e,t){let r=new ln(g_(e));return t.forEach((a,c)=>{Ng(e,c)&&(r=r.add(c))}),r}$i(e,t,r,a){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const c="F"===e.limitType?t.last():t.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(a)>0)}Mi(e,t){return Qy()<=Ec.in.DEBUG&&xe("QueryEngine","Using full collection scan to execute query:",p_(t)),this.Ni.getDocumentsMatchingQuery(e,t,Ps.min())}Bi(e,t,r,a){return this.Ni.getDocumentsMatchingQuery(e,r,a).next(c=>(t.forEach(h=>{c=c.insert(h.key,h)}),c))}}class gS{constructor(e,t,r,a){this.persistence=e,this.Li=t,this.It=a,this.Ui=new rr(Mt),this.qi=new ks(c=>xc(c),La),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new DC(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ui))}}function xC(n,e,t,r){return new gS(n,e,t,r)}function Ab(n,e){return N_.apply(this,arguments)}function N_(){return N_=(0,ge.Z)(function*(n,e){const t=$e(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let a;return t.mutationQueue.getAllMutationBatches(r).next(c=>(a=c,t.Qi(e),t.mutationQueue.getAllMutationBatches(r))).next(c=>{const h=[],y=[];let w=Ot();for(const D of a){h.push(D.batchId);for(const R of D.mutations)w=w.add(R.key)}for(const D of c){y.push(D.batchId);for(const R of D.mutations)w=w.add(R.key)}return t.localDocuments.getDocuments(r,w).next(D=>({ji:D,removedBatchIds:h,addedBatchIds:y}))})})}),N_.apply(this,arguments)}function Sb(n,e){const t=$e(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const a=e.batch.keys(),c=t.Gi.newChangeBuffer({trackRemovals:!0});return function(h,y,w,D){const R=w.batch,O=R.keys();let G=ae.resolve();return O.forEach(q=>{G=G.next(()=>D.getEntry(y,q)).next(te=>{const Se=w.docVersions.get(q);pt(null!==Se),te.version.compareTo(Se)<0&&(R.applyToRemoteDocument(te,w),te.isValidDocument()&&(te.setReadTime(w.commitVersion),D.addEntry(te)))})}),G.next(()=>h.mutationQueue.removeMutationBatch(y,R))}(t,r,e,c).next(()=>c.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,a,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(h){let y=Ot();for(let w=0;w<h.mutationResults.length;++w)h.mutationResults[w].transformResults.length>0&&(y=y.add(h.batch.mutations[w].key));return y}(e))).next(()=>t.localDocuments.getDocuments(r,a))})}function xb(n){const e=$e(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function RC(n,e){const t=$e(n),r=e.snapshotVersion;let a=t.Ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",c=>{const h=t.Gi.newChangeBuffer({trackRemovals:!0});a=t.Ui;const y=[];e.targetChanges.forEach((R,O)=>{const G=a.get(O);if(!G)return;y.push(t.Cs.removeMatchingKeys(c,R.removedDocuments,O).next(()=>t.Cs.addMatchingKeys(c,R.addedDocuments,O)));let q=G.withSequenceNumber(c.currentSequenceNumber);var te,Se,Pe;e.targetMismatches.has(O)?q=q.withResumeToken(Sr.EMPTY_BYTE_STRING,gt.min()).withLastLimboFreeSnapshotVersion(gt.min()):R.resumeToken.approximateByteSize()>0&&(q=q.withResumeToken(R.resumeToken,r)),a=a.insert(O,q),Se=q,Pe=R,(0===(te=G).resumeToken.approximateByteSize()||Se.snapshotVersion.toMicroseconds()-te.snapshotVersion.toMicroseconds()>=3e8||Pe.addedDocuments.size+Pe.modifiedDocuments.size+Pe.removedDocuments.size>0)&&y.push(t.Cs.updateTargetData(c,q))});let w=Ni(),D=Ot();if(e.documentUpdates.forEach(R=>{e.resolvedLimboDocuments.has(R)&&y.push(t.persistence.referenceDelegate.updateLimboDocument(c,R))}),y.push(MC(c,h,e.documentUpdates).next(R=>{w=R.Wi,D=R.zi})),!r.isEqual(gt.min())){const R=t.Cs.getLastRemoteSnapshotVersion(c).next(O=>t.Cs.setTargetsMetadata(c,c.currentSequenceNumber,r));y.push(R)}return ae.waitFor(y).next(()=>h.apply(c)).next(()=>t.localDocuments.getLocalViewOfDocuments(c,w,D)).next(()=>w)}).then(c=>(t.Ui=a,c))}function MC(n,e,t){let r=Ot(),a=Ot();return t.forEach(c=>r=r.add(c)),e.getEntries(n,r).next(c=>{let h=Ni();return t.forEach((y,w)=>{const D=c.get(y);w.isFoundDocument()!==D.isFoundDocument()&&(a=a.add(y)),w.isNoDocument()&&w.version.isEqual(gt.min())?(e.removeEntry(y,w.readTime),h=h.insert(y,w)):!D.isValidDocument()||w.version.compareTo(D.version)>0||0===w.version.compareTo(D.version)&&D.hasPendingWrites?(e.addEntry(w),h=h.insert(y,w)):xe("LocalStore","Ignoring outdated watch update for ",y,". Current version:",D.version," Watch version:",w.version)}),{Wi:h,zi:a}})}function mS(n,e){const t=$e(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function ld(n,e){const t=$e(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let a;return t.Cs.getTargetData(r,e).next(c=>c?(a=c,ae.resolve(a)):t.Cs.allocateTargetId(r).next(h=>(a=new Nc(e,h,0,r.currentSequenceNumber),t.Cs.addTargetData(r,a).next(()=>a))))}).then(r=>{const a=t.Ui.get(r.targetId);return(null===a||r.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Ui=t.Ui.insert(r.targetId,r),t.qi.set(e,r.targetId)),r})}function ff(n,e,t){return O_.apply(this,arguments)}function O_(){return O_=(0,ge.Z)(function*(n,e,t){const r=$e(n),a=r.Ui.get(e),c=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",c,h=>r.persistence.referenceDelegate.removeTarget(h,a)))}catch(h){if(!Dc(h))throw h;xe("LocalStore",`Failed to update sequence numbers for target ${e}: ${h}`)}r.Ui=r.Ui.remove(e),r.qi.delete(a.target)}),O_.apply(this,arguments)}function dd(n,e,t){const r=$e(n);let a=gt.min(),c=Ot();return r.persistence.runTransaction("Execute query","readonly",h=>function(y,w,D){const R=$e(y),O=R.qi.get(D);return void 0!==O?ae.resolve(R.Ui.get(O)):R.Cs.getTargetData(w,D)}(r,h,Mi(e)).next(y=>{if(y)return a=y.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(h,y.targetId).next(w=>{c=w})}).next(()=>r.Li.getDocumentsMatchingQuery(h,e,t?a:gt.min(),t?c:Ot())).next(y=>(pf(r,Og(e),y),{documents:y,Hi:c})))}function Qg(n,e){const t=$e(n),r=$e(t.Cs),a=t.Ui.get(e);return a?Promise.resolve(a.target):t.persistence.runTransaction("Get target data","readonly",c=>r.se(c,e).next(h=>h?h.target:null))}function yS(n,e){const t=$e(n),r=t.Ki.get(e)||gt.min();return t.persistence.runTransaction("Get new document changes","readonly",a=>t.Gi.getAllFromCollectionGroup(a,e,yI(r,-1),Number.MAX_SAFE_INTEGER)).then(a=>(pf(t,e,a),a))}function pf(n,e,t){let r=n.Ki.get(e)||gt.min();t.forEach((a,c)=>{c.readTime.compareTo(r)>0&&(r=c.readTime)}),n.Ki.set(e,r)}function Ha(){return Ha=(0,ge.Z)(function*(n,e,t,r){const a=$e(n);let c=Ot(),h=Ni();for(const D of t){const R=e.Ji(D.metadata.name);D.document&&(c=c.add(R));const O=e.Yi(D);O.setReadTime(e.Xi(D.metadata.readTime)),h=h.insert(R,O)}const y=a.Gi.newChangeBuffer({trackRemovals:!0}),w=yield ld(a,(D=r,Mi(Rc(Jt.fromString(`__bundle__/docs/${D}`)))));var D;return a.persistence.runTransaction("Apply bundle documents","readwrite",D=>MC(D,y,h).next(R=>(y.apply(D),R)).next(R=>a.Cs.removeMatchingKeysForTargetId(D,w.targetId).next(()=>a.Cs.addMatchingKeys(D,c,w.targetId)).next(()=>a.localDocuments.getLocalViewOfDocuments(D,R.Wi,R.zi)).next(()=>R.Wi)))}),Ha.apply(this,arguments)}function gf(n,e){return hd.apply(this,arguments)}function hd(){return hd=(0,ge.Z)(function*(n,e,t=Ot()){const r=yield ld(n,Mi(Hg(e.bundledQuery))),a=$e(n);return a.persistence.runTransaction("Save named query","readwrite",c=>{const h=Jr(e.readTime);if(r.snapshotVersion.compareTo(h)>=0)return a.Ns.saveNamedQuery(c,e);const y=r.withResumeToken(Sr.EMPTY_BYTE_STRING,h);return a.Ui=a.Ui.insert(y.targetId,y),a.Cs.updateTargetData(c,y).next(()=>a.Cs.removeMatchingKeysForTargetId(c,r.targetId)).next(()=>a.Cs.addMatchingKeys(c,t,r.targetId)).next(()=>a.Ns.saveNamedQuery(c,e))})}),hd.apply(this,arguments)}function _S(n,e){return`firestore_clients_${n}_${e}`}function Nt(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function gs(n,e){return`firestore_targets_${n}_${e}`}class mf{constructor(e,t,r,a){this.user=e,this.batchId=t,this.state=r,this.error=a}static Zi(e,t,r){const a=JSON.parse(r);let c,h="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return h&&a.error&&(h="string"==typeof a.error.message&&"string"==typeof a.error.code,h&&(c=new Ie(a.error.code,a.error.message))),h?new mf(e,t,a.state,c):(nr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Zo{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Zi(e,t){const r=JSON.parse(t);let a,c="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return c&&r.error&&(c="string"==typeof r.error.message&&"string"==typeof r.error.code,c&&(a=new Ie(r.error.code,r.error.message))),c?new Zo(e,r.state,a):(nr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Rb{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const r=JSON.parse(t);let a="object"==typeof r&&r.activeTargetIds instanceof Array,c=id();for(let h=0;a&&h<r.activeTargetIds.length;++h)a=UE(r.activeTargetIds[h]),c=c.add(r.activeTargetIds[h]);return a?new Rb(e,c):(nr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class P_{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new P_(t.clientId,t.onlineState):(nr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class k_{constructor(){this.activeTargetIds=id()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class NC{constructor(e,t,r,a,c){this.window=e,this.Hs=t,this.persistenceKey=r,this.sr=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new rr(Mt),this.started=!1,this.cr=[];const h=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=c,this.ar=_S(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new k_),this.lr=new RegExp(`^firestore_clients_${h}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${h}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${h}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(y){return`firestore_bundle_loaded_v2_${y}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ge.Z)(function*(){const t=yield e.syncEngine.vi();for(const a of t){if(a===e.sr)continue;const c=e.getItem(_S(e.persistenceKey,a));if(c){const h=Rb.Zi(a,c);h&&(e.ur=e.ur.insert(h.clientId,h))}}e.gr();const r=e.storage.getItem(e.wr);if(r){const a=e.yr(r);a&&e.pr(a)}for(const a of e.cr)e.rr(a);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((r,a)=>{a.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,r){this.Tr(e,t,r),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(gs(this.persistenceKey,e));if(r){const a=Zo.Zi(e,r);a&&(t=a.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(gs(this.persistenceKey,e))}updateQueryState(e,t,r){this.Rr(e,t,r)}handleUserChange(e,t,r){t.forEach(a=>{this.Er(a)}),this.currentUser=e,r.forEach(a=>{this.addPendingMutation(a)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return xe("SharedClientState","READ",e,t),t}setItem(e,t){xe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){xe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(xe("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ar)return void nr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,ge.Z)(function*(){if(t.started){if(null!==r.key)if(t.lr.test(r.key)){if(null==r.newValue){const a=t.vr(r.key);return t.Vr(a,null)}{const a=t.Sr(r.key,r.newValue);if(a)return t.Vr(a.clientId,a)}}else if(t.dr.test(r.key)){if(null!==r.newValue){const a=t.Dr(r.key,r.newValue);if(a)return t.Cr(a)}}else if(t._r.test(r.key)){if(null!==r.newValue){const a=t.Nr(r.key,r.newValue);if(a)return t.kr(a)}}else if(r.key===t.wr){if(null!==r.newValue){const a=t.yr(r.newValue);if(a)return t.pr(a)}}else if(r.key===t.hr){const a=function(c){let h=Ri.at;if(null!=c)try{const y=JSON.parse(c);pt("number"==typeof y),h=y}catch(y){nr("SharedClientState","Failed to read sequence number from WebStorage",y)}return h}(r.newValue);a!==Ri.at&&t.sequenceNumberHandler(a)}else if(r.key===t.mr){const a=t.Or(r.newValue);yield Promise.all(a.map(c=>t.syncEngine.Mr(c)))}}else t.cr.push(r)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,r){const a=new mf(this.currentUser,e,t,r),c=Nt(this.persistenceKey,this.currentUser,e);this.setItem(c,a.tr())}Er(e){const t=Nt(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,r){const a=gs(this.persistenceKey,e),c=new Zo(e,t,r);this.setItem(a,c.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const r=this.vr(e);return Rb.Zi(r,t)}Dr(e,t){const r=this.dr.exec(e),a=Number(r[1]);return mf.Zi(new Gn(void 0!==r[2]?r[2]:null),a,t)}Nr(e,t){const r=this._r.exec(e),a=Number(r[1]);return Zo.Zi(a,t)}yr(e){return P_.Zi(e)}Or(e){return JSON.parse(e)}Cr(e){var t=this;return(0,ge.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);xe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const r=t?this.ur.insert(e,t):this.ur.remove(e),a=this.Ir(this.ur),c=this.Ir(r),h=[],y=[];return c.forEach(w=>{a.has(w)||h.push(w)}),a.forEach(w=>{c.has(w)||y.push(w)}),this.syncEngine.Br(h,y).then(()=>{this.ur=r})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=id();return e.forEach((r,a)=>{t=t.unionWith(a.activeTargetIds)}),t}}class OC{constructor(){this.Lr=new k_,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,t,r){this.Ur[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new k_,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class vS{qr(e){}shutdown(){}}class Ls{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){xe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){xe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const zn={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Ko{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class PC extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,r,a,c){const h=this.ho(e,t);xe("RestConnection","Sending: ",h,r);const y={};return this.lo(y,a,c),this.fo(e,h,y,r).then(w=>(xe("RestConnection","Received: ",w),w),w=>{throw Cc("RestConnection",`${e} failed with error: `,w,"url: ",h,"request:",r),w})}_o(e,t,r,a,c,h){return this.ao(e,t,r,a,c)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Bo,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((a,c)=>e[c]=a),r&&r.headers.forEach((a,c)=>e[c]=a)}ho(e,t){return`${this.oo}/v1/${t}:${zn[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,a){return new Promise((c,h)=>{const y=new jh;y.setWithCredentials(!0),y.listenOnce(RE.COMPLETE,()=>{try{switch(y.getLastErrorCode()){case fs.NO_ERROR:const D=y.getResponseJson();xe("Connection","XHR received:",JSON.stringify(D)),c(D);break;case fs.TIMEOUT:xe("Connection",'RPC "'+e+'" timed out'),h(new Ie(he.DEADLINE_EXCEEDED,"Request time out"));break;case fs.HTTP_ERROR:const R=y.getStatus();if(xe("Connection",'RPC "'+e+'" failed with status:',R,"response text:",y.getResponseText()),R>0){const O=y.getResponseJson().error;if(O&&O.status&&O.message){const G=function(q){const te=q.toLowerCase().replace(/_/g,"-");return Object.values(he).indexOf(te)>=0?te:he.UNKNOWN}(O.status);h(new Ie(G,O.message))}else h(new Ie(he.UNKNOWN,"Server responded with status "+y.getStatus()))}else h(new Ie(he.UNAVAILABLE,"Connection failed."));break;default:Qe()}}finally{xe("Connection",'RPC "'+e+'" completed.')}});const w=JSON.stringify(a);y.send(t,"POST",w,r,15)})}wo(e,t,r){const a=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=$l(),h=Yy(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(y.xmlHttpFactory=new Bh({})),this.lo(y.initMessageHeaders,t,r),y.encodeInitMessageHeaders=!0;const w=a.join("");xe("Connection","Creating WebChannel: "+w,y);const D=c.createWebChannel(w,y);let R=!1,O=!1;const G=new Ko({Hr:te=>{O?xe("Connection","Not sending because WebChannel is closed:",te):(R||(xe("Connection","Opening WebChannel transport."),D.open(),R=!0),xe("Connection","WebChannel sending:",te),D.send(te))},Jr:()=>D.close()}),q=(te,Se,Pe)=>{te.listen(Se,st=>{try{Pe(st)}catch(Dt){setTimeout(()=>{throw Dt},0)}})};return q(D,Iu.EventType.OPEN,()=>{O||xe("Connection","WebChannel transport opened.")}),q(D,Iu.EventType.CLOSE,()=>{O||(O=!0,xe("Connection","WebChannel transport closed"),G.io())}),q(D,Iu.EventType.ERROR,te=>{O||(O=!0,Cc("Connection","WebChannel transport errored:",te),G.io(new Ie(he.UNAVAILABLE,"The operation could not be completed")))}),q(D,Iu.EventType.MESSAGE,te=>{var Se;if(!O){const Pe=te.data[0];pt(!!Pe);const st=Pe,Dt=st.error||(null===(Se=st[0])||void 0===Se?void 0:Se.error);if(Dt){xe("Connection","WebChannel received error:",Dt);const kt=Dt.status;let Ft=function(Zt){const Yi=dr[Zt];if(void 0!==Yi)return zI(Yi)}(kt),zt=Dt.message;void 0===Ft&&(Ft=he.INTERNAL,zt="Unknown error status: "+kt+" with message "+Dt.message),O=!0,G.io(new Ie(Ft,zt)),D.close()}else xe("Connection","WebChannel received:",Pe),G.ro(Pe)}}),q(h,Uh.STAT_EVENT,te=>{te.stat===Gl.PROXY?xe("Connection","Detected buffering proxy"):te.stat===Gl.NOPROXY&&xe("Connection","Detected no buffering proxy")}),setTimeout(()=>{G.so()},0),G}}function kC(){return"undefined"!=typeof window?window:null}function Jg(){return"undefined"!=typeof document?document:null}function fd(n){return new LA(n,!0)}class Lc{constructor(e,t,r=1e3,a=1.5,c=6e4){this.Hs=e,this.timerId=t,this.mo=r,this.yo=a,this.po=c,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),a=Math.max(0,t-r);a>0&&xe("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,a,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class yf{constructor(e,t,r,a,c,h,y,w){this.Hs=e,this.vo=r,this.Vo=a,this.So=c,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=y,this.listener=w,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new Lc(e,t)}ko(){return 1===this.state||5===this.state||this.Oo()}Oo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Mo()}stop(){var e=this;return(0,ge.Z)(function*(){e.ko()&&(yield e.close(0))})()}Fo(){this.state=0,this.No.reset()}$o(){this.Oo()&&null===this.Co&&(this.Co=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.Bo()))}Lo(e){this.Uo(),this.stream.send(e)}Bo(){var e=this;return(0,ge.Z)(function*(){if(e.Oo())return e.close(0)})()}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}qo(){this.xo&&(this.xo.cancel(),this.xo=null)}close(e,t){var r=this;return(0,ge.Z)(function*(){r.Uo(),r.qo(),r.No.cancel(),r.Do++,4!==e?r.No.reset():t&&t.code===he.RESOURCE_EXHAUSTED?(nr(t.toString()),nr("Using maximum backoff delay to prevent overloading the backend."),r.No.Ao()):t&&t.code===he.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Ko(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(t)})()}Ko(){}auth(){this.state=1;const e=this.Go(this.Do),t=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,a])=>{this.Do===t&&this.Qo(r,a)},r=>{e(()=>{const a=new Ie(he.UNKNOWN,"Fetching auth token failed: "+r.message);return this.jo(a)})})}Qo(e,t){const r=this.Go(this.Do);this.stream=this.Wo(e,t),this.stream.Yr(()=>{r(()=>(this.state=2,this.xo=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.Oo()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(a=>{r(()=>this.jo(a))}),this.stream.onMessage(a=>{r(()=>this.onMessage(a))})}Mo(){var e=this;this.state=5,this.No.Ro((0,ge.Z)(function*(){e.state=0,e.start()}))}jo(e){return xe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Go(e){return t=>{this.Hs.enqueueAndForget(()=>this.Do===e?t():(xe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class ES extends yf{constructor(e,t,r,a,c,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,a,h),this.It=c}Wo(e,t){return this.So.wo("Listen",e,t)}onMessage(e){this.No.reset();const t=function(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(w=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===w?1:"REMOVE"===w?2:"CURRENT"===w?3:"RESET"===w?4:Qe(),a=e.targetChange.targetIds||[],c=function(w,D){return w.gt?(pt(void 0===D||"string"==typeof D),Sr.fromBase64String(D||"")):(pt(void 0===D||D instanceof Uint8Array),Sr.fromUint8Array(D||new Uint8Array))}(n,e.targetChange.resumeToken),h=e.targetChange.cause,y=h&&function(w){const D=void 0===w.code?he.UNKNOWN:zI(w.code);return new Ie(D,w.message||"")}(h);t=new v_(r,a,c,y||null)}else if("documentChange"in e){const r=e.documentChange,a=qo(n,r.document.name),c=Jr(r.document.updateTime),h=new Kr({mapValue:{fields:r.document.fields}}),y=wn.newFoundDocument(a,c,h);t=new nb(r.targetIds||[],r.removedTargetIds||[],y.key,y)}else if("documentDelete"in e){const r=e.documentDelete,a=qo(n,r.document),c=r.readTime?Jr(r.readTime):gt.min(),h=wn.newNoDocument(a,c);t=new nb([],r.removedTargetIds||[],h.key,h)}else if("documentRemove"in e){const r=e.documentRemove,a=qo(n,r.document);t=new nb([],r.removedTargetIds||[],a,null)}else{if(!("filter"in e))return Qe();{const r=e.filter,c=new eb(r.count||0);t=new rb(r.targetId,c)}}var w;return t}(this.It,e),r=function(a){if(!("targetChange"in a))return gt.min();const c=a.targetChange;return c.targetIds&&c.targetIds.length?gt.min():c.readTime?Jr(c.readTime):gt.min()}(e);return this.listener.zo(t,r)}Ho(e){const t={};t.database=xu(this.It),t.addTarget=function(a,c){let h;const y=c.target;return h=d_(y)?{documents:ab(a,y)}:{query:ub(a,y)},h.targetId=c.targetId,c.resumeToken.approximateByteSize()>0?h.resumeToken=Jh(a,c.resumeToken):c.snapshotVersion.compareTo(gt.min())>0&&(h.readTime=Vg(a,c.snapshotVersion.toTimestamp())),h}(this.It,e);const r=function(n,e){const t=function(r,a){switch(a){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Qe()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Lo(t)}Jo(e){const t={};t.database=xu(this.It),t.removeTarget=e,this.Lo(t)}}class pd extends yf{constructor(e,t,r,a,c,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,a,h),this.It=c,this.Yo=!1}get Xo(){return this.Yo}start(){this.Yo=!1,this.lastStreamToken=void 0,super.start()}Ko(){this.Yo&&this.Zo([])}Wo(e,t){return this.So.wo("Write",e,t)}onMessage(e){if(pt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Yo){this.No.reset();const t=function(n,e){return n&&n.length>0?(pt(void 0!==e),n.map(t=>function(r,a){let c=Jr(r.updateTime?r.updateTime:a);return c.isEqual(gt.min())&&(c=Jr(a)),new RA(c,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Jr(e.commitTime);return this.listener.tu(r,t)}return pt(!e.writeResults||0===e.writeResults.length),this.Yo=!0,this.listener.eu()}nu(){const e={};e.database=xu(this.It),this.Lo(e)}Zo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>tf(this.It,r))};this.Lo(t)}}class bS extends class{}{constructor(e,t,r,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.So=r,this.It=a,this.su=!1}iu(){if(this.su)throw new Ie(he.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,r){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.So.ao(e,t,r,a,c)).catch(a=>{throw"FirebaseError"===a.name?(a.code===he.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ie(he.UNKNOWN,a.toString())})}_o(e,t,r,a){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,h])=>this.So._o(e,t,r,c,h,a)).catch(c=>{throw"FirebaseError"===c.name?(c.code===he.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Ie(he.UNKNOWN,c.toString())})}terminate(){this.su=!0}}class em{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}cu(){0===this.ru&&(this.au("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ou=null,this.hu("Backend didn't respond within 10 seconds."),this.au("Offline"),Promise.resolve())))}lu(e){"Online"===this.state?this.au("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.au("Offline")))}set(e){this.fu(),this.ru=0,"Online"===e&&(this.uu=!1),this.au(e)}au(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}hu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.uu?(nr(t),this.uu=!1):xe("OnlineStateTracker",t)}fu(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}class Mb{constructor(e,t,r,a,c){var h=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=c,this.gu.qr(y=>{r.enqueueAndForget((0,ge.Z)(function*(){var w;Yo(h)&&(xe("RemoteStore","Restarting streams for network reachability change."),yield(w=(0,ge.Z)(function*(D){const R=$e(D);R.wu.add(4),yield vf(R),R.yu.set("Unknown"),R.wu.delete(4),yield _f(R)}),function(D){return w.apply(this,arguments)})(h))}))}),this.yu=new em(r,a)}}function _f(n){return Vc.apply(this,arguments)}function Vc(){return Vc=(0,ge.Z)(function*(n){if(Yo(n))for(const e of n.mu)yield e(!0)}),Vc.apply(this,arguments)}function vf(n){return Ef.apply(this,arguments)}function Ef(){return Ef=(0,ge.Z)(function*(n){for(const e of n.mu)yield e(!1)}),Ef.apply(this,arguments)}function tm(n,e){const t=$e(n);t._u.has(e.targetId)||(t._u.set(e.targetId,e),rm(t)?Nb(t):If(t).Oo()&&F_(t,e))}function bf(n,e){const t=$e(n),r=If(t);t._u.delete(e),r.Oo()&&nm(t,e),0===t._u.size&&(r.Oo()?r.$o():Yo(t)&&t.yu.set("Unknown"))}function F_(n,e){n.pu.Mt(e.targetId),If(n).Ho(e)}function nm(n,e){n.pu.Mt(e),If(n).Jo(e)}function Nb(n){n.pu=new ZI({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),se:e=>n._u.get(e)||null}),If(n).start(),n.yu.cu()}function rm(n){return Yo(n)&&!If(n).ko()&&n._u.size>0}function Yo(n){return 0===$e(n).wu.size}function wS(n){n.pu=void 0}function bM(n){return Ct.apply(this,arguments)}function Ct(){return Ct=(0,ge.Z)(function*(n){n._u.forEach((e,t)=>{F_(n,e)})}),Ct.apply(this,arguments)}function wM(n,e){return gd.apply(this,arguments)}function gd(){return gd=(0,ge.Z)(function*(n,e){wS(n),rm(n)?(n.yu.lu(e),Nb(n)):n.yu.set("Unknown")}),gd.apply(this,arguments)}function IS(n,e,t){return Ob.apply(this,arguments)}function Ob(){return Ob=(0,ge.Z)(function*(n,e,t){if(n.yu.set("Online"),e instanceof v_&&2===e.state&&e.cause)try{yield(r=(0,ge.Z)(function*(a,c){const h=c.cause;for(const y of c.targetIds)a._u.has(y)&&(yield a.remoteSyncer.rejectListen(y,h),a._u.delete(y),a.pu.removeTarget(y))}),function(a,c){return r.apply(this,arguments)})(n,e)}catch(r){xe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield L_(n,r)}else if(e instanceof nb?n.pu.Gt(e):e instanceof rb?n.pu.Yt(e):n.pu.Wt(e),!t.isEqual(gt.min()))try{const r=yield xb(n.localStore);t.compareTo(r)>=0&&(yield function(a,c){const h=a.pu.te(c);return h.targetChanges.forEach((y,w)=>{if(y.resumeToken.approximateByteSize()>0){const D=a._u.get(w);D&&a._u.set(w,D.withResumeToken(y.resumeToken,c))}}),h.targetMismatches.forEach(y=>{const w=a._u.get(y);if(!w)return;a._u.set(y,w.withResumeToken(Sr.EMPTY_BYTE_STRING,w.snapshotVersion)),nm(a,y);const D=new Nc(w.target,y,1,w.sequenceNumber);F_(a,D)}),a.remoteSyncer.applyRemoteEvent(h)}(n,t))}catch(r){xe("RemoteStore","Failed to raise snapshot:",r),yield L_(n,r)}var r}),Ob.apply(this,arguments)}function L_(n,e,t){return LC.apply(this,arguments)}function LC(){return LC=(0,ge.Z)(function*(n,e,t){if(!Dc(e))throw e;n.wu.add(1),yield vf(n),n.yu.set("Offline"),t||(t=()=>xb(n.localStore)),n.asyncQueue.enqueueRetryable((0,ge.Z)(function*(){xe("RemoteStore","Retrying IndexedDB access"),yield t(),n.wu.delete(1),yield _f(n)}))}),LC.apply(this,arguments)}function CS(n,e){return e().catch(t=>L_(n,t,e))}function wf(n){return ti.apply(this,arguments)}function ti(){return ti=(0,ge.Z)(function*(n){const e=$e(n),t=Uc(e);let r=e.du.length>0?e.du[e.du.length-1].batchId:-1;for(;DS(e);)try{const a=yield mS(e.localStore,r);if(null===a){0===e.du.length&&t.$o();break}r=a.batchId,TS(e,a)}catch(a){yield L_(e,a)}V_(e)&&VC(e)}),ti.apply(this,arguments)}function DS(n){return Yo(n)&&n.du.length<10}function TS(n,e){n.du.push(e);const t=Uc(n);t.Oo()&&t.Xo&&t.Zo(e.mutations)}function V_(n){return Yo(n)&&!Uc(n).ko()&&n.du.length>0}function VC(n){Uc(n).start()}function AS(n){return Pb.apply(this,arguments)}function Pb(){return Pb=(0,ge.Z)(function*(n){Uc(n).nu()}),Pb.apply(this,arguments)}function SS(n){return kb.apply(this,arguments)}function kb(){return kb=(0,ge.Z)(function*(n){const e=Uc(n);for(const t of n.du)e.Zo(t.mutations)}),kb.apply(this,arguments)}function xS(n,e,t){return im.apply(this,arguments)}function im(){return im=(0,ge.Z)(function*(n,e,t){const r=n.du.shift(),a=pb.from(r,e,t);yield CS(n,()=>n.remoteSyncer.applySuccessfulWrite(a)),yield wf(n)}),im.apply(this,arguments)}function RS(n,e){return Fb.apply(this,arguments)}function Fb(){return Fb=(0,ge.Z)(function*(n,e){var t;e&&Uc(n).Xo&&(yield(t=(0,ge.Z)(function*(r,a){if(qI(c=a.code)&&c!==he.ABORTED){const h=r.du.shift();Uc(r).Fo(),yield CS(r,()=>r.remoteSyncer.rejectFailedWrite(h.batchId,a)),yield wf(r)}var c}),function(r,a){return t.apply(this,arguments)})(n,e)),V_(n)&&VC(n)}),Fb.apply(this,arguments)}function Lb(n,e){return sm.apply(this,arguments)}function sm(){return sm=(0,ge.Z)(function*(n,e){const t=$e(n);t.asyncQueue.verifyOperationInProgress(),xe("RemoteStore","RemoteStore received new credentials");const r=Yo(t);t.wu.add(3),yield vf(t),r&&t.yu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.wu.delete(3),yield _f(t)}),sm.apply(this,arguments)}function Vb(n,e){return UC.apply(this,arguments)}function UC(){return UC=(0,ge.Z)(function*(n,e){const t=$e(n);e?(t.wu.delete(2),yield _f(t)):e||(t.wu.add(2),yield vf(t),t.yu.set("Unknown"))}),UC.apply(this,arguments)}function If(n){return n.Iu||(n.Iu=function(e,t,r){const a=$e(e);return a.iu(),new ES(t,a.So,a.authCredentials,a.appCheckCredentials,a.It,r)}(n.datastore,n.asyncQueue,{Yr:bM.bind(null,n),Zr:wM.bind(null,n),zo:IS.bind(null,n)}),n.mu.push(function(){var e=(0,ge.Z)(function*(t){t?(n.Iu.Fo(),rm(n)?Nb(n):n.yu.set("Unknown")):(yield n.Iu.stop(),wS(n))});return function(t){return e.apply(this,arguments)}}())),n.Iu}function Uc(n){return n.Tu||(n.Tu=function(e,t,r){const a=$e(e);return a.iu(),new pd(t,a.So,a.authCredentials,a.appCheckCredentials,a.It,r)}(n.datastore,n.asyncQueue,{Yr:AS.bind(null,n),Zr:RS.bind(null,n),eu:SS.bind(null,n),tu:xS.bind(null,n)}),n.mu.push(function(){var e=(0,ge.Z)(function*(t){t?(n.Tu.Fo(),yield wf(n)):(yield n.Tu.stop(),n.du.length>0&&(xe("RemoteStore",`Stopping write stream with ${n.du.length} pending writes`),n.du=[]))});return function(t){return e.apply(this,arguments)}}())),n.Tu}class Ub{constructor(e,t,r,a,c){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=a,this.removalCallback=c,this.deferred=new Tr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(h=>{})}static createAndSchedule(e,t,r,a,c){const h=Date.now()+r,y=new Ub(e,t,h,a,c);return y.start(r),y}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ie(he.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Cf(n,e){if(nr("AsyncQueue",`${e}: ${n}`),Dc(n))return new Ie(he.UNAVAILABLE,`${e}: ${n}`);throw n}class Df{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ve.comparator(t.key,r.key):(t,r)=>Ve.comparator(t.key,r.key),this.keyedMap=Qh(),this.sortedSet=new rr(this.comparator)}static emptySet(e){return new Df(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Df)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,c=r.getNext().key;if(!a.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Df;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class BC{constructor(){this.Eu=new rr(Ve.comparator)}track(e){const t=e.doc.key,r=this.Eu.get(t);r?0!==e.type&&3===r.type?this.Eu=this.Eu.insert(t,e):3===e.type&&1!==r.type?this.Eu=this.Eu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Eu=this.Eu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Eu=this.Eu.remove(t):1===e.type&&2===r.type?this.Eu=this.Eu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):Qe():this.Eu=this.Eu.insert(t,e)}Au(){const e=[];return this.Eu.inorderTraversal((t,r)=>{e.push(r)}),e}}class $a{constructor(e,t,r,a,c,h,y,w,D){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=a,this.mutatedKeys=c,this.fromCache=h,this.syncStateChanged=y,this.excludesMetadataChanges=w,this.hasCachedResults=D}static fromInitialDocuments(e,t,r,a,c){const h=[];return t.forEach(y=>{h.push({type:0,doc:y})}),new $a(e,t,Df.emptySet(t),h,r,a,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Mg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==r[a].type||!t[a].doc.isEqual(r[a].doc))return!1;return!0}}class MS{constructor(){this.Ru=void 0,this.listeners=[]}}class NS{constructor(){this.queries=new ks(e=>zE(e),Mg),this.onlineState="Unknown",this.bu=new Set}}function U_(n,e){return md.apply(this,arguments)}function md(){return md=(0,ge.Z)(function*(n,e){const t=$e(n),r=e.query;let a=!1,c=t.queries.get(r);if(c||(a=!0,c=new MS),a)try{c.Ru=yield t.onListen(r)}catch(h){const y=Cf(h,`Initialization of query '${p_(e.query)}' failed`);return void e.onError(y)}t.queries.set(r,c),c.listeners.push(e),e.Pu(t.onlineState),c.Ru&&e.vu(c.Ru)&&Bb(t)}),md.apply(this,arguments)}function jC(n,e){return B_.apply(this,arguments)}function B_(){return B_=(0,ge.Z)(function*(n,e){const t=$e(n),r=e.query;let a=!1;const c=t.queries.get(r);if(c){const h=c.listeners.indexOf(e);h>=0&&(c.listeners.splice(h,1),a=0===c.listeners.length)}if(a)return t.queries.delete(r),t.onUnlisten(r)}),B_.apply(this,arguments)}function OS(n,e){const t=$e(n);let r=!1;for(const a of e){const h=t.queries.get(a.query);if(h){for(const y of h.listeners)y.vu(a)&&(r=!0);h.Ru=a}}r&&Bb(t)}function PS(n,e,t){const r=$e(n),a=r.queries.get(e);if(a)for(const c of a.listeners)c.onError(t);r.queries.delete(e)}function Bb(n){n.bu.forEach(e=>{e.next()})}class jb{constructor(e,t,r){this.query=e,this.Vu=t,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=r||{}}vu(e){if(!this.options.includeMetadataChanges){const r=[];for(const a of e.docChanges)3!==a.type&&r.push(a);e=new $a(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Su?this.Cu(e)&&(this.Vu.next(e),t=!0):this.xu(e,this.onlineState)&&(this.Nu(e),t=!0),this.Du=e,t}onError(e){this.Vu.error(e)}Pu(e){this.onlineState=e;let t=!1;return this.Du&&!this.Su&&this.xu(this.Du,e)&&(this.Nu(this.Du),t=!0),t}xu(e,t){return!e.fromCache||(!this.options.ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Cu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Du&&this.Du.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Nu(e){e=$a.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Su=!0,this.Vu.next(e)}}class kS{constructor(e,t){this.payload=e,this.byteLength=t}Ou(){return"metadata"in this.payload}}class Hb{constructor(e){this.It=e}Ji(e){return qo(this.It,e)}Yi(e){return e.metadata.exists?JI(this.It,e.document,!1):wn.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return Jr(e)}}class FS{constructor(e,t,r){this.Mu=e,this.localStore=t,this.It=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=HC(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=Jt.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new Hb(this.It);for(const a of e)if(a.metadata.queries){const c=r.Ji(a.metadata.name);for(const h of a.metadata.queries){const y=(t.get(h)||Ot()).add(c);t.set(h,y)}}return t}complete(){var e=this;return(0,ge.Z)(function*(){const t=yield function(n,e,t,r){return Ha.apply(this,arguments)}(e.localStore,new Hb(e.It),e.documents,e.Mu.id),r=e.$u(e.documents);for(const a of e.queries)yield gf(e.localStore,a,r.get(a.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function HC(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class LS{constructor(e){this.key=e}}class VS{constructor(e){this.key=e}}class US{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=Ot(),this.mutatedKeys=Ot(),this.Gu=g_(e),this.Qu=new Df(this.Gu)}get ju(){return this.Uu}Wu(e,t){const r=t?t.zu:new BC,a=t?t.Qu:this.Qu;let c=t?t.mutatedKeys:this.mutatedKeys,h=a,y=!1;const w="F"===this.query.limitType&&a.size===this.query.limit?a.last():null,D="L"===this.query.limitType&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((R,O)=>{const G=a.get(R),q=Ng(this.query,O)?O:null,te=!!G&&this.mutatedKeys.has(G.key),Se=!!q&&(q.hasLocalMutations||this.mutatedKeys.has(q.key)&&q.hasCommittedMutations);let Pe=!1;G&&q?G.data.isEqual(q.data)?te!==Se&&(r.track({type:3,doc:q}),Pe=!0):this.Hu(G,q)||(r.track({type:2,doc:q}),Pe=!0,(w&&this.Gu(q,w)>0||D&&this.Gu(q,D)<0)&&(y=!0)):!G&&q?(r.track({type:0,doc:q}),Pe=!0):G&&!q&&(r.track({type:1,doc:G}),Pe=!0,(w||D)&&(y=!0)),Pe&&(q?(h=h.add(q),c=Se?c.add(R):c.delete(R)):(h=h.delete(R),c=c.delete(R)))}),null!==this.query.limit)for(;h.size>this.query.limit;){const R="F"===this.query.limitType?h.last():h.first();h=h.delete(R.key),c=c.delete(R.key),r.track({type:1,doc:R})}return{Qu:h,zu:r,$i:y,mutatedKeys:c}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const a=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const c=e.zu.Au();c.sort((D,R)=>function(O,G){const q=te=>{switch(te){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Qe()}};return q(O)-q(G)}(D.type,R.type)||this.Gu(D.doc,R.doc)),this.Ju(r);const h=t?this.Yu():[],y=0===this.Ku.size&&this.current?1:0,w=y!==this.qu;return this.qu=y,0!==c.length||w?{snapshot:new $a(this.query,e.Qu,a,c,e.mutatedKeys,0===y,w,!1,!!r&&r.resumeToken.approximateByteSize()>0),Xu:h}:{Xu:h}}Pu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new BC,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=Ot(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new VS(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new LS(r))}),t}tc(e){this.Uu=e.Hi,this.Ku=Ot();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return $a.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}class $b{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class BS{constructor(e){this.key=e,this.nc=!1}}class jS{constructor(e,t,r,a,c,h){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=a,this.currentUser=c,this.maxConcurrentLimboResolutions=h,this.sc={},this.ic=new ks(y=>zE(y),Mg),this.rc=new Map,this.oc=new Set,this.uc=new rr(Ve.comparator),this.cc=new Map,this.ac=new Db,this.hc={},this.lc=new Map,this.fc=cd.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function HS(n,e){return Gb.apply(this,arguments)}function Gb(){return Gb=(0,ge.Z)(function*(n,e){const t=Z_(n);let r,a;const c=t.ic.get(e);if(c)r=c.targetId,t.sharedClientState.addLocalQueryTarget(r),a=c.view.ec();else{const h=yield ld(t.localStore,Mi(e));t.isPrimaryClient&&tm(t.remoteStore,h);const y=t.sharedClientState.addLocalQueryTarget(h.targetId);r=h.targetId,a=yield qb(t,e,r,"current"===y,h.resumeToken)}return a}),Gb.apply(this,arguments)}function qb(n,e,t,r,a){return zb.apply(this,arguments)}function zb(){return zb=(0,ge.Z)(function*(n,e,t,r,a){n._c=(O,G,q)=>{return(te=(0,ge.Z)(function*(Se,Pe,st,Dt){let kt=Pe.view.Wu(st);kt.$i&&(kt=yield dd(Se.localStore,Pe.query,!1).then(({documents:Zt})=>Pe.view.Wu(Zt,kt)));const Ft=Dt&&Dt.targetChanges.get(Pe.targetId),zt=Pe.view.applyChanges(kt,Se.isPrimaryClient,Ft);return Jb(Se,Pe.targetId,zt.Xu),zt.snapshot}),function(Se,Pe,st,Dt){return te.apply(this,arguments)})(n,O,G,q);var te};const c=yield dd(n.localStore,e,!0),h=new US(e,c.Hi),y=h.Wu(c.documents),w=In.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,a),D=h.applyChanges(y,n.isPrimaryClient,w);Jb(n,t,D.Xu);const R=new $b(e,t,h);return n.ic.set(e,R),n.rc.has(t)?n.rc.get(t).push(e):n.rc.set(t,[e]),D.snapshot}),zb.apply(this,arguments)}function $C(n,e){return om.apply(this,arguments)}function om(){return om=(0,ge.Z)(function*(n,e){const t=$e(n),r=t.ic.get(e),a=t.rc.get(r.targetId);if(a.length>1)return t.rc.set(r.targetId,a.filter(c=>!Mg(c,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield ff(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),bf(t.remoteStore,r.targetId),am(t,r.targetId)}).catch(jo))):(am(t,r.targetId),yield ff(t.localStore,r.targetId,!0))}),om.apply(this,arguments)}function Bc(){return Bc=(0,ge.Z)(function*(n,e,t){const r=K_(n);try{const a=yield function(c,h){const y=$e(c),w=qn.now(),D=h.reduce((G,q)=>G.add(q.key),Ot());let R,O;return y.persistence.runTransaction("Locally write mutations","readwrite",G=>{let q=Ni(),te=Ot();return y.Gi.getEntries(G,D).next(Se=>{q=Se,q.forEach((Pe,st)=>{st.isValidDocument()||(te=te.add(Pe))})}).next(()=>y.localDocuments.getOverlayedDocuments(G,q)).next(Se=>{R=Se;const Pe=[];for(const st of h){const Dt=GI(st,R.get(st.key).overlayedDocument);null!=Dt&&Pe.push(new Ua(st.key,Dt,DI(Dt.value.mapValue),Ln.exists(!0)))}return y.mutationQueue.addMutationBatch(G,w,Pe,h)}).next(Se=>{O=Se;const Pe=Se.applyToLocalDocumentSet(R,te);return y.documentOverlayCache.saveOverlays(G,Se.batchId,Pe)})}).then(()=>({batchId:O.batchId,changes:tb(R)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(a.batchId),function(c,h,y){let w=c.hc[c.currentUser.toKey()];w||(w=new rr(Mt)),w=w.insert(h,y),c.hc[c.currentUser.toKey()]=w}(r,a.batchId,t),yield Ga(r,a.changes),yield wf(r.remoteStore)}catch(a){const c=Cf(a,"Failed to persist write");t.reject(c)}}),Bc.apply(this,arguments)}function _i(n,e){return j_.apply(this,arguments)}function j_(){return j_=(0,ge.Z)(function*(n,e){const t=$e(n);try{const r=yield RC(t.localStore,e);e.targetChanges.forEach((a,c)=>{const h=t.cc.get(c);h&&(pt(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?h.nc=!0:a.modifiedDocuments.size>0?pt(h.nc):a.removedDocuments.size>0&&(pt(h.nc),h.nc=!1))}),yield Ga(t,r,e)}catch(r){yield jo(r)}}),j_.apply(this,arguments)}function oo(n,e,t){const r=$e(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const a=[];r.ic.forEach((c,h)=>{const y=h.view.Pu(e);y.snapshot&&a.push(y.snapshot)}),function(c,h){const y=$e(c);y.onlineState=h;let w=!1;y.queries.forEach((D,R)=>{for(const O of R.listeners)O.Pu(h)&&(w=!0)}),w&&Bb(y)}(r.eventManager,e),a.length&&r.sc.zo(a),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Wb(n,e,t){return Zb.apply(this,arguments)}function Zb(){return Zb=(0,ge.Z)(function*(n,e,t){const r=$e(n);r.sharedClientState.updateQueryState(e,"rejected",t);const a=r.cc.get(e),c=a&&a.key;if(c){let h=new rr(Ve.comparator);h=h.insert(c,wn.newNoDocument(c,gt.min()));const y=Ot().add(c),w=new Mc(gt.min(),new Map,new ln(Mt),h,y);yield _i(r,w),r.uc=r.uc.remove(c),r.cc.delete(e),WC(r)}else yield ff(r.localStore,e,!1).then(()=>am(r,e,t)).catch(jo)}),Zb.apply(this,arguments)}function GC(n,e){return H_.apply(this,arguments)}function H_(){return H_=(0,ge.Z)(function*(n,e){const t=$e(n),r=e.batch.batchId;try{const a=yield Sb(t.localStore,e);Qb(t,r,null),$_(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Ga(t,a)}catch(a){yield jo(a)}}),H_.apply(this,arguments)}function qC(n,e,t){return Kb.apply(this,arguments)}function Kb(){return Kb=(0,ge.Z)(function*(n,e,t){const r=$e(n);try{const a=yield function(c,h){const y=$e(c);return y.persistence.runTransaction("Reject batch","readwrite-primary",w=>{let D;return y.mutationQueue.lookupMutationBatch(w,h).next(R=>(pt(null!==R),D=R.keys(),y.mutationQueue.removeMutationBatch(w,R))).next(()=>y.mutationQueue.performConsistencyCheck(w)).next(()=>y.documentOverlayCache.removeOverlaysForBatchId(w,D,h)).next(()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(w,D)).next(()=>y.localDocuments.getDocuments(w,D))})}(r.localStore,e);Qb(r,e,t),$_(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Ga(r,a)}catch(a){yield jo(a)}}),Kb.apply(this,arguments)}function Yb(){return Yb=(0,ge.Z)(function*(n,e){const t=$e(n);Yo(t.remoteStore)||xe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(c){const h=$e(c);return h.persistence.runTransaction("Get highest unacknowledged batch id","readonly",y=>h.mutationQueue.getHighestUnacknowledgedBatchId(y))}(t.localStore);if(-1===r)return void e.resolve();const a=t.lc.get(r)||[];a.push(e),t.lc.set(r,a)}catch(r){const a=Cf(r,"Initialization of waitForPendingWrites() operation failed");e.reject(a)}}),Yb.apply(this,arguments)}function $_(n,e){(n.lc.get(e)||[]).forEach(t=>{t.resolve()}),n.lc.delete(e)}function Qb(n,e,t){const r=$e(n);let a=r.hc[r.currentUser.toKey()];if(a){const c=a.get(e);c&&(t?c.reject(t):c.resolve(),a=a.remove(e)),r.hc[r.currentUser.toKey()]=a}}function am(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.rc.get(e))n.ic.delete(r),t&&n.sc.wc(r,t);n.rc.delete(e),n.isPrimaryClient&&n.ac.ls(e).forEach(r=>{n.ac.containsKey(r)||zC(n,r)})}function zC(n,e){n.oc.delete(e.path.canonicalString());const t=n.uc.get(e);null!==t&&(bf(n.remoteStore,t),n.uc=n.uc.remove(e),n.cc.delete(t),WC(n))}function Jb(n,e,t){for(const r of t)r instanceof LS?(n.ac.addReference(r.key,e),Tf(n,r)):r instanceof VS?(xe("SyncEngine","Document no longer in limbo: "+r.key),n.ac.removeReference(r.key,e),n.ac.containsKey(r.key)||zC(n,r.key)):Qe()}function Tf(n,e){const t=e.key,r=t.path.canonicalString();n.uc.get(t)||n.oc.has(r)||(xe("SyncEngine","New document in limbo: "+t),n.oc.add(r),WC(n))}function WC(n){for(;n.oc.size>0&&n.uc.size<n.maxConcurrentLimboResolutions;){const e=n.oc.values().next().value;n.oc.delete(e);const t=new Ve(Jt.fromString(e)),r=n.fc.next();n.cc.set(r,new BS(t)),n.uc=n.uc.insert(t,r),tm(n.remoteStore,new Nc(Mi(Rc(t.path)),r,2,Ri.at))}}function Ga(n,e,t){return Xb.apply(this,arguments)}function Xb(){return Xb=(0,ge.Z)(function*(n,e,t){const r=$e(n),a=[],c=[],h=[];var y;r.ic.isEmpty()||(r.ic.forEach((y,w)=>{h.push(r._c(w,e,t).then(D=>{if((D||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(w.targetId,(null==D?void 0:D.fromCache)?"not-current":"current"),D){a.push(D);const R=Tb.Ci(w.targetId,D);c.push(R)}}))}),yield Promise.all(h),r.sc.zo(a),yield(y=(0,ge.Z)(function*(w,D){const R=$e(w);try{yield R.persistence.runTransaction("notifyLocalViewChanges","readwrite",O=>ae.forEach(D,G=>ae.forEach(G.Si,q=>R.persistence.referenceDelegate.addReference(O,G.targetId,q)).next(()=>ae.forEach(G.Di,q=>R.persistence.referenceDelegate.removeReference(O,G.targetId,q)))))}catch(O){if(!Dc(O))throw O;xe("LocalStore","Failed to update sequence numbers: "+O)}for(const O of D){const G=O.targetId;if(!O.fromCache){const q=R.Ui.get(G),Se=q.withLastLimboFreeSnapshotVersion(q.snapshotVersion);R.Ui=R.Ui.insert(G,Se)}}}),function(w,D){return y.apply(this,arguments)})(r.localStore,c))}),Xb.apply(this,arguments)}function IM(n,e){return G_.apply(this,arguments)}function G_(){return G_=(0,ge.Z)(function*(n,e){const t=$e(n);if(!t.currentUser.isEqual(e)){xe("SyncEngine","User change. New user:",e.toKey());const r=yield Ab(t.localStore,e);t.currentUser=e,(a=t).lc.forEach(h=>{h.forEach(y=>{y.reject(new Ie(he.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),a.lc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Ga(t,r.ji)}var a}),G_.apply(this,arguments)}function qS(n,e){const t=$e(n),r=t.cc.get(e);if(r&&r.nc)return Ot().add(r.key);{let a=Ot();const c=t.rc.get(e);if(!c)return a;for(const h of c){const y=t.ic.get(h);a=a.unionWith(y.view.ju)}return a}}function e0(n,e){return q_.apply(this,arguments)}function q_(){return q_=(0,ge.Z)(function*(n,e){const t=$e(n),r=yield dd(t.localStore,e.query,!0),a=e.view.tc(r);return t.isPrimaryClient&&Jb(t,e.targetId,a.Xu),a}),q_.apply(this,arguments)}function ZC(n,e){return t0.apply(this,arguments)}function t0(){return t0=(0,ge.Z)(function*(n,e){const t=$e(n);return yS(t.localStore,e).then(r=>Ga(t,r))}),t0.apply(this,arguments)}function zS(n,e,t,r){return n0.apply(this,arguments)}function n0(){return n0=(0,ge.Z)(function*(n,e,t,r){const a=$e(n),c=yield function(h,y){const w=$e(h),D=$e(w.mutationQueue);return w.persistence.runTransaction("Lookup mutation documents","readonly",R=>D.Tn(R,y).next(O=>O?w.localDocuments.getDocuments(R,O):ae.resolve(null)))}(a.localStore,e);var y;null!==c?("pending"===t?yield wf(a.remoteStore):"acknowledged"===t||"rejected"===t?(Qb(a,e,r||null),$_(a,e),y=e,$e($e(a.localStore).mutationQueue).An(y)):Qe(),yield Ga(a,c)):xe("SyncEngine","Cannot apply mutation batch with id: "+e)}),n0.apply(this,arguments)}function r0(){return r0=(0,ge.Z)(function*(n,e){const t=$e(n);if(Z_(t),K_(t),!0===e&&!0!==t.dc){const r=t.sharedClientState.getAllActiveQueryTargets(),a=yield KC(t,r.toArray());t.dc=!0,yield Vb(t.remoteStore,!0);for(const c of a)tm(t.remoteStore,c)}else if(!1===e&&!1!==t.dc){const r=[];let a=Promise.resolve();t.rc.forEach((c,h)=>{t.sharedClientState.isLocalQueryTarget(h)?r.push(h):a=a.then(()=>(am(t,h),ff(t.localStore,h,!0))),bf(t.remoteStore,h)}),yield a,yield KC(t,r),function(c){const h=$e(c);h.cc.forEach((y,w)=>{bf(h.remoteStore,w)}),h.ac.fs(),h.cc=new Map,h.uc=new rr(Ve.comparator)}(t),t.dc=!1,yield Vb(t.remoteStore,!1)}}),r0.apply(this,arguments)}function KC(n,e,t){return s0.apply(this,arguments)}function s0(){return s0=(0,ge.Z)(function*(n,e,t){const r=$e(n),a=[],c=[];for(const h of e){let y;const w=r.rc.get(h);if(w&&0!==w.length){y=yield ld(r.localStore,Mi(w[0]));for(const D of w){const R=r.ic.get(D),O=yield e0(r,R);O.snapshot&&c.push(O.snapshot)}}else{const D=yield Qg(r.localStore,h);y=yield ld(r.localStore,D),yield qb(r,YC(D),h,!1,y.resumeToken)}a.push(y)}return r.sc.zo(c),a}),s0.apply(this,arguments)}function YC(n){return PI(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function um(n){const e=$e(n);return $e($e(e.localStore).persistence).vi()}function QC(n,e,t,r){return z_.apply(this,arguments)}function z_(){return z_=(0,ge.Z)(function*(n,e,t,r){const a=$e(n);if(a.dc)return void xe("SyncEngine","Ignoring unexpected query state notification.");const c=a.rc.get(e);if(c&&c.length>0)switch(t){case"current":case"not-current":{const h=yield yS(a.localStore,Og(c[0])),y=Mc.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Sr.EMPTY_BYTE_STRING);yield Ga(a,h,y);break}case"rejected":yield ff(a.localStore,e,!0),am(a,e,r);break;default:Qe()}}),z_.apply(this,arguments)}function JC(n,e,t){return W_.apply(this,arguments)}function W_(){return W_=(0,ge.Z)(function*(n,e,t){const r=Z_(n);if(r.dc){for(const a of e){if(r.rc.has(a)){xe("SyncEngine","Adding an already active target "+a);continue}const c=yield Qg(r.localStore,a),h=yield ld(r.localStore,c);yield qb(r,YC(c),h.targetId,!1,h.resumeToken),tm(r.remoteStore,h)}for(const a of t)r.rc.has(a)&&(yield ff(r.localStore,a,!1).then(()=>{bf(r.remoteStore,a),am(r,a)}).catch(jo))}}),W_.apply(this,arguments)}function Z_(n){const e=$e(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=_i.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=qS.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Wb.bind(null,e),e.sc.zo=OS.bind(null,e.eventManager),e.sc.wc=PS.bind(null,e.eventManager),e}function K_(n){const e=$e(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=GC.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=qC.bind(null,e),e}class o0{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ge.Z)(function*(){t.It=fd(e.databaseInfo.databaseId),t.sharedClientState=t.gc(e),t.persistence=t.yc(e),yield t.persistence.start(),t.localStore=t.Ic(e),t.gcScheduler=t.Tc(e,t.localStore),t.indexBackfillerScheduler=t.Ec(e,t.localStore)})()}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return xC(this.persistence,new Yg,e.initialUser,this.It)}yc(e){return new TC(R_.Bs,this.It)}gc(e){return new OC}terminate(){var e=this;return(0,ge.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class XC extends o0{constructor(e,t,r){super(),this.Ac=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,ge.Z)(function*(){yield t().call(r,e),yield r.Ac.initialize(r,e),yield K_(r.Ac.syncEngine),yield wf(r.Ac.remoteStore),yield r.persistence.li(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return xC(this.persistence,new Yg,e.initialUser,this.It)}Tc(e,t){return new IC(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ec(e,t){const r=new dM(t,this.persistence);return new FE(e.asyncQueue,r)}yc(e){const t=SC(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Fs.withCacheSize(this.cacheSizeBytes):Fs.DEFAULT;return new Ou(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,kC(),Jg(),this.It,this.sharedClientState,!!this.forceOwnership)}gc(e){return new OC}}class KS extends XC{constructor(e,t){super(e,t,!1),this.Ac=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,ge.Z)(function*(){yield t().call(r,e);const a=r.Ac.syncEngine;r.sharedClientState instanceof NC&&(r.sharedClientState.syncEngine={Fr:zS.bind(null,a),$r:QC.bind(null,a),Br:JC.bind(null,a),vi:um.bind(null,a),Mr:ZC.bind(null,a)},yield r.sharedClientState.start()),yield r.persistence.li(function(){var c=(0,ge.Z)(function*(h){yield function(n,e){return r0.apply(this,arguments)}(r.Ac.syncEngine,h),r.gcScheduler&&(h&&!r.gcScheduler.started?r.gcScheduler.start():h||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(h&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():h||r.indexBackfillerScheduler.stop())});return function(h){return c.apply(this,arguments)}}())})()}gc(e){const t=kC();if(!NC.C(t))throw new Ie(he.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=SC(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new NC(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class a0{initialize(e,t){var r=this;return(0,ge.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=a=>oo(r.syncEngine,a,1),r.remoteStore.remoteSyncer.handleCredentialChange=IM.bind(null,r.syncEngine),yield Vb(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new NS}createDatastore(e){const t=fd(e.databaseInfo.databaseId),r=new PC(e.databaseInfo);return new bS(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,a=e.asyncQueue,c=y=>oo(this.syncEngine,y,0),h=Ls.C()?new Ls:new vS,new Mb(t,r,a,c,h);var t,r,a,c,h}createSyncEngine(e,t){return function(r,a,c,h,y,w,D){const R=new jS(r,a,c,h,y,w);return D&&(R.dc=!0),R}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ge.Z)(function*(t){const r=$e(t);xe("RemoteStore","RemoteStore shutting down."),r.wu.add(5),yield vf(r),r.gu.shutdown(),r.yu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function u0(n,e,t){if(!t)throw new Ie(he.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Af(n,e,t,r){if(!0===e&&!0===r)throw new Ie(he.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Sf(n){if(!Ve.isDocumentKey(n))throw new Ie(he.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function eD(n){if(Ve.isDocumentKey(n))throw new Ie(he.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function xf(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":Qe()}function Pt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ie(he.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=xf(n);throw new Ie(he.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function tD(n,e){if(e<=0)throw new Ie(he.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}const cm=new Map;class nD{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Ie(he.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ie(he.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,Af("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class lm{constructor(e,t,r,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new nD({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ie(he.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ie(he.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new nD(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new vA;switch(t.type){case"gapi":return new bA(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Ie(he.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=cm.get(e);t&&(xe("ComponentProvider","Removing Datastore"),cm.delete(e),t.terminate())}(this),Promise.resolve()}}class yn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Qo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new yn(this.firestore,e,this._key)}}class ni{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ni(this.firestore,e,this._query)}}class Qo extends ni{constructor(e,t,r){super(e,t,Rc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new yn(this.firestore,null,new Ve(e))}withConverter(e){return new Qo(this.firestore,e,this._path)}}function Y_(n,e,...t){if(n=(0,nn.m9)(n),u0("collection","path",e),n instanceof lm){const r=Jt.fromString(e,...t);return eD(r),new Qo(n,null,r)}{if(!(n instanceof yn||n instanceof Qo))throw new Ie(he.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Jt.fromString(e,...t));return eD(r),new Qo(n.firestore,null,r)}}function Q_(n,e,...t){if(n=(0,nn.m9)(n),1===arguments.length&&(e=pI.R()),u0("doc","path",e),n instanceof lm){const r=Jt.fromString(e,...t);return Sf(r),new yn(n,null,new Ve(r))}{if(!(n instanceof yn||n instanceof Qo))throw new Ie(he.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Jt.fromString(e,...t));return Sf(r),new yn(n.firestore,n instanceof Qo?n.converter:null,new Ve(r))}}function rD(n,e){return n=(0,nn.m9)(n),e=(0,nn.m9)(e),(n instanceof yn||n instanceof Qo)&&(e instanceof yn||e instanceof Qo)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function l0(n,e){return n=(0,nn.m9)(n),e=(0,nn.m9)(e),n instanceof ni&&e instanceof ni&&n.firestore===e.firestore&&Mg(n._query,e._query)&&n.converter===e.converter}function iD(n,e=10240){let t=0;return{read:()=>(0,ge.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,ge.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class dm{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):nr("Uncaught Error in snapshot listener:",e)}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class d0{constructor(e,t){this.Pc=e,this.It=t,this.metadata=new Tr,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(r=>{r&&r.Ou()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Pc.cancel()}getMetadata(){var e=this;return(0,ge.Z)(function*(){return e.metadata.promise})()}mc(){var e=this;return(0,ge.Z)(function*(){return yield e.getMetadata(),e.Vc()})()}Vc(){var e=this;return(0,ge.Z)(function*(){const t=yield e.Sc();if(null===t)return null;const r=e.vc.decode(t),a=Number(r);isNaN(a)&&e.Dc(`length string (${r}) is not valid number`);const c=yield e.Cc(a);return new kS(JSON.parse(c),t.length+a)})()}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Sc(){var e=this;return(0,ge.Z)(function*(){for(;e.xc()<0&&!(yield e.Nc()););if(0===e.buffer.length)return null;const t=e.xc();t<0&&e.Dc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Cc(e){var t=this;return(0,ge.Z)(function*(){for(;t.buffer.length<e;)(yield t.Nc())&&t.Dc("Reached the end of bundle when more is expected.");const r=t.vc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}Nc(){var e=this;return(0,ge.Z)(function*(){const t=yield e.Pc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class oD{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ge.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Ie(he.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(a=(0,ge.Z)(function*(c,h){const y=$e(c),w=xu(y.It)+"/documents",D={documents:h.map(q=>Xh(y.It,q))},R=yield y._o("BatchGetDocuments",w,D,h.length),O=new Map;R.forEach(q=>{const te=function(n,e){return"found"in e?function(t,r){pt(!!r.found);const a=qo(t,r.found.name),c=Jr(r.found.updateTime),h=new Kr({mapValue:{fields:r.found.fields}});return wn.newFoundDocument(a,c,h)}(n,e):"missing"in e?function(t,r){pt(!!r.missing),pt(!!r.readTime);const a=qo(t,r.missing),c=Jr(r.readTime);return wn.newNoDocument(a,c)}(n,e):Qe()}(y.It,q);O.set(te.key.toString(),te)});const G=[];return h.forEach(q=>{const te=O.get(q.toString());pt(!!te),G.push(te)}),G}),function(c,h){return a.apply(this,arguments)})(t.datastore,e);var a;return r.forEach(a=>t.recordVersion(a)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new rd(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ge.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,a)=>{const c=Ve.fromPath(a);e.mutations.push(new __(c,e.precondition(c)))}),yield(r=(0,ge.Z)(function*(a,c){const h=$e(a),y=xu(h.It)+"/documents",w={writes:c.map(D=>tf(h.It,D))};yield h.ao("Commit",y,w)}),function(a,c){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Qe();t=gt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Ie(he.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(gt.min())?Ln.exists(!1):Ln.updateTime(t):Ln.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(gt.min()))throw new Ie(he.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ln.updateTime(t)}return Ln.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class XS{constructor(e,t,r,a,c){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=a,this.deferred=c,this.kc=r.maxAttempts,this.No=new Lc(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var e=this;this.No.Ro((0,ge.Z)(function*(){const t=new oD(e.datastore),r=e.Mc(t);r&&r.then(a=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(a)}).catch(c=>{e.Fc(c)}))}).catch(a=>{e.Fc(a)})}))}Mc(e){try{const t=this.updateFunction(e);return!Ag(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!qI(t)}return!1}}class aD{constructor(e,t,r,a){var c=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=a,this.user=Gn.UNAUTHENTICATED,this.clientId=pI.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var h=(0,ge.Z)(function*(y){xe("FirestoreClient","Received user=",y.uid),yield c.authCredentialListener(y),c.user=y});return function(y){return h.apply(this,arguments)}}()),this.appCheckCredentials.start(r,h=>(xe("FirestoreClient","Received new app check token=",h),this.appCheckCredentialListener(h,this.user)))}getConfiguration(){var e=this;return(0,ge.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ie(he.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Tr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ge.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const a=Cf(r,"Failed to shutdown persistence");t.reject(a)}})),t.promise}}function h0(n,e){return f0.apply(this,arguments)}function f0(){return f0=(0,ge.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),xe("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var a=(0,ge.Z)(function*(c){r.isEqual(c)||(yield Ab(e.localStore,c),r=c)});return function(c){return a.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),f0.apply(this,arguments)}function p0(n,e){return g0.apply(this,arguments)}function g0(){return g0=(0,ge.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield uD(n);xe("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(a=>Lb(e.remoteStore,a)),n.setAppCheckTokenChangeListener((a,c)=>Lb(e.remoteStore,c)),n.onlineComponents=e}),g0.apply(this,arguments)}function uD(n){return vi.apply(this,arguments)}function vi(){return vi=(0,ge.Z)(function*(n){return n.offlineComponents||(xe("FirestoreClient","Using default OfflineComponentProvider"),yield h0(n,new o0)),n.offlineComponents}),vi.apply(this,arguments)}function Pu(n){return m0.apply(this,arguments)}function m0(){return m0=(0,ge.Z)(function*(n){return n.onlineComponents||(xe("FirestoreClient","Using default OnlineComponentProvider"),yield p0(n,new a0)),n.onlineComponents}),m0.apply(this,arguments)}function cD(n){return uD(n).then(e=>e.persistence)}function y0(n){return uD(n).then(e=>e.localStore)}function yd(n){return Pu(n).then(e=>e.remoteStore)}function _0(n){return Pu(n).then(e=>e.syncEngine)}function Rf(n){return X_.apply(this,arguments)}function X_(){return X_=(0,ge.Z)(function*(n){const e=yield Pu(n),t=e.eventManager;return t.onListen=HS.bind(null,e.syncEngine),t.onUnlisten=$C.bind(null,e.syncEngine),t}),X_.apply(this,arguments)}function E0(n,e,t={}){const r=new Tr;return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return function(a,c,h,y,w){const D=new dm({next:O=>{c.enqueueAndForget(()=>jC(a,R));const G=O.docs.has(h);!G&&O.fromCache?w.reject(new Ie(he.UNAVAILABLE,"Failed to get document because the client is offline.")):G&&O.fromCache&&y&&"server"===y.source?w.reject(new Ie(he.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):w.resolve(O)},error:O=>w.reject(O)}),R=new jb(Rc(h.path),D,{includeMetadataChanges:!0,ku:!0});return U_(a,R)}(yield Rf(n),n.asyncQueue,e,t,r)})),r.promise}function hm(n,e,t={}){const r=new Tr;return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return function(a,c,h,y,w){const D=new dm({next:O=>{c.enqueueAndForget(()=>jC(a,R)),O.fromCache&&"server"===y.source?w.reject(new Ie(he.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):w.resolve(O)},error:O=>w.reject(O)}),R=new jb(h,D,{includeMetadataChanges:!0,ku:!0});return U_(a,R)}(yield Rf(n),n.asyncQueue,e,t,r)})),r.promise}class nx{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.Uc=!1,this.qc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.No=new Lc(this,"async_queue_retry"),this.Wc=()=>{const t=Jg();t&&xe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.No.Po()};const e=Jg();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.Uc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.Uc){this.Uc=!0,this.Qc=e||!1;const t=Jg();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.Uc)return new Promise(()=>{});const t=new Tr;return this.Hc(()=>this.Uc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,ge.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.No.reset()}catch(t){if(!Dc(t))throw t;xe("AsyncQueue","Operation failed with retryable error: "+t)}e.Lc.length>0&&e.No.Ro(()=>e.Jc())}})()}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(r=>{throw this.Kc=r,this.Gc=!1,nr("INTERNAL UNHANDLED ERROR: ",function(c){let h=c.message||"";return c.stack&&(h=c.stack.includes(c.message)?c.stack:c.message+"\n"+c.stack),h}(r)),r}).then(r=>(this.Gc=!1,r))));return this.Bc=t,t}enqueueAfterDelay(e,t,r){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const a=Ub.createAndSchedule(this,e,t,r,c=>this.Yc(c));return this.qc.push(a),a}zc(){this.Kc&&Qe()}verifyOperationInProgress(){}Xc(){var e=this;return(0,ge.Z)(function*(){let t;do{t=e.Bc,yield t}while(t!==e.Bc)})()}Zc(e){for(const t of this.qc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.qc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.qc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.qc.indexOf(e);this.qc.splice(t,1)}}function ev(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const a of["next","error","complete"])if(a in r&&"function"==typeof r[a])return!0;return!1}(n)}class tv{constructor(){this._progressObserver={},this._taskCompletionResolver=new Tr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Rn extends lm{constructor(e,t,r,a){super(e,t,r,a),this.type="firestore",this._queue=new nx,this._persistenceKey=(null==a?void 0:a.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||gD(this),this._firestoreClient.terminate()}}function hr(n){return n._firestoreClient||gD(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function gD(n){var e;const t=n._freezeSettings(),r=(c=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new VE(n._databaseId,c,n._persistenceKey,(y=t).host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,y.useFetchStreams));var c,y;n._firestoreClient=new aD(n._authCredentials,n._appCheckCredentials,n._queue,r)}function w0(n,e,t){const r=new Tr;return n.asyncQueue.enqueue((0,ge.Z)(function*(){try{yield h0(n,t),yield p0(n,e),r.resolve()}catch(a){const c=a;if(!("FirebaseError"===(h=c).name?h.code===he.FAILED_PRECONDITION||h.code===he.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&h instanceof DOMException)||22===h.code||20===h.code||11===h.code))throw c;Cc("Error enabling offline persistence. Falling back to persistence disabled: "+c),r.reject(c)}var h})).then(()=>r.promise)}function I0(n){if(n._initialized||n._terminated)throw new Ie(he.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Jo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Jo(Sr.fromBase64String(e))}catch(t){throw new Ie(he.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Jo(Sr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class qa{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Ie(he.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Fn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class _d{constructor(e){this._methodName=e}}class nv{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ie(he.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ie(he.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Mt(this._lat,e._lat)||Mt(this._long,e._long)}}const ax=/^__.*__$/;class bD{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Ua(e,this.data,this.fieldMask,t,this.fieldTransforms):new nd(e,this.data,t,this.fieldTransforms)}}class ux{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Ua(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function cx(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Qe()}}class C0{constructor(e,t,r,a,c,h){this.settings=e,this.databaseId=t,this.It=r,this.ignoreUndefinedProperties=a,void 0===c&&this.na(),this.fieldTransforms=c||[],this.fieldMask=h||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new C0(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),a=this.ia({path:r,oa:!1});return a.ua(e),a}ca(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),a=this.ia({path:r,oa:!1});return a.na(),a}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return x0(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(cx(this.sa)&&ax.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class TM{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.It=r||fd(e)}da(e,t,r,a=!1){return new C0({sa:e,methodName:t,fa:r,path:Fn.emptyPath(),oa:!1,la:a},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function Mf(n){const e=n._freezeSettings(),t=fd(n._databaseId);return new TM(n._databaseId,!!e.ignoreUndefinedProperties,t)}function D0(n,e,t,r,a,c={}){const h=n.da(c.merge||c.mergeFields?2:0,e,t,a);T0("Data must be an object, but it was:",h,r);const y=hx(r,h);let w,D;if(c.merge)w=new ps(h.fieldMask),D=h.fieldTransforms;else if(c.mergeFields){const R=[];for(const O of c.mergeFields){const G=A0(e,O,t);if(!h.contains(G))throw new Ie(he.INVALID_ARGUMENT,`Field '${G}' is specified in your field mask but missing from your input data.`);TD(R,G)||R.push(G)}w=new ps(R),D=h.fieldTransforms.filter(O=>w.covers(O.field))}else w=null,D=h.fieldTransforms;return new bD(new Kr(y),w,D)}class rv extends _d{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof rv}}function lx(n,e,t){return new C0({sa:3,fa:e.settings.fa,methodName:n._methodName,oa:t},e.databaseId,e.It,e.ignoreUndefinedProperties)}class wD extends _d{_toFieldTransform(e){return new kg(e.path,new Kh)}isEqual(e){return e instanceof wD}}class AM extends _d{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=lx(this,e,!0),r=this._a.map(c=>Nf(c,t)),a=new ed(r);return new kg(e.path,a)}isEqual(e){return this===e}}class SM extends _d{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=lx(this,e,!0),r=this._a.map(c=>Nf(c,t)),a=new td(r);return new kg(e.path,a)}isEqual(e){return this===e}}class xM extends _d{constructor(e,t){super(e),this.wa=t}_toFieldTransform(e){const t=new Yh(e.It,KE(e.It,this.wa));return new kg(e.path,t)}isEqual(e){return this===e}}function ID(n,e,t,r){const a=n.da(1,e,t);T0("Data must be an object, but it was:",a,r);const c=[],h=Kr.empty();$h(r,(w,D)=>{const R=S0(e,w,t);D=(0,nn.m9)(D);const O=a.ca(R);if(D instanceof rv)c.push(R);else{const G=Nf(D,O);null!=G&&(c.push(R),h.set(R,G))}});const y=new ps(c);return new ux(h,y,a.fieldTransforms)}function CD(n,e,t,r,a,c){const h=n.da(1,e,t),y=[A0(e,r,t)],w=[a];if(c.length%2!=0)throw new Ie(he.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let G=0;G<c.length;G+=2)y.push(A0(e,c[G])),w.push(c[G+1]);const D=[],R=Kr.empty();for(let G=y.length-1;G>=0;--G)if(!TD(D,y[G])){const q=y[G];let te=w[G];te=(0,nn.m9)(te);const Se=h.ca(q);if(te instanceof rv)D.push(q);else{const Pe=Nf(te,Se);null!=Pe&&(D.push(q),R.set(q,Pe))}}const O=new ps(D);return new ux(R,O,h.fieldTransforms)}function dx(n,e,t,r=!1){return Nf(t,n.da(r?4:3,e))}function Nf(n,e){if(DD(n=(0,nn.m9)(n)))return T0("Unsupported field value:",e,n),hx(n,e);if(n instanceof _d)return function(t,r){if(!cx(r.sa))throw r.ha(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ha(`${t._methodName}() is not currently supported inside arrays`);const a=t._toFieldTransform(r);a&&r.fieldTransforms.push(a)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,r){const a=[];let c=0;for(const h of t){let y=Nf(h,r.aa(c));null==y&&(y={nullValue:"NULL_VALUE"}),a.push(y),c++}return{arrayValue:{values:a}}}(n,e)}return function(t,r){if(null===(t=(0,nn.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return KE(r.It,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const a=qn.fromDate(t);return{timestampValue:Vg(r.It,a)}}if(t instanceof qn){const a=new qn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Vg(r.It,a)}}if(t instanceof nv)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Jo)return{bytesValue:Jh(r.It,t._byteString)};if(t instanceof yn){const a=r.databaseId,c=t.firestore._databaseId;if(!c.isEqual(a))throw r.ha(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:ob(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ha(`Unsupported field value: ${xf(t)}`)}(n,e)}function hx(n,e){const t={};return Gh(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):$h(n,(r,a)=>{const c=Nf(a,e.ra(r));null!=c&&(t[r]=c)}),{mapValue:{fields:t}}}function DD(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof qn||n instanceof nv||n instanceof Jo||n instanceof yn||n instanceof _d)}function T0(n,e,t){if(!DD(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=xf(t);throw e.ha("an object"===r?n+" a custom object":n+" "+r)}var r}function A0(n,e,t){if((e=(0,nn.m9)(e))instanceof qa)return e._internalPath;if("string"==typeof e)return S0(n,e);throw x0("Field path arguments must be of type string or ",n,!1,void 0,t)}const RM=new RegExp("[~\\*/\\[\\]]");function S0(n,e,t){if(e.search(RM)>=0)throw x0(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new qa(...e.split("."))._internalPath}catch(r){throw x0(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function x0(n,e,t,r,a){const c=r&&!r.isEmpty(),h=void 0!==a;let y=`Function ${e}() called with invalid data`;t&&(y+=" (via `toFirestore()`)"),y+=". ";let w="";return(c||h)&&(w+=" (found",c&&(w+=` in field ${r}`),h&&(w+=` in document ${a}`),w+=")"),new Ie(he.INVALID_ARGUMENT,y+n+w)}function TD(n,e){return n.some(t=>t.isEqual(e))}class fm{constructor(e,t,r,a,c){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=a,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new yn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new fx(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(R0("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class fx extends fm{data(){return super.data()}}function R0(n,e){return"string"==typeof e?S0(n,e):e instanceof qa?e._internalPath:e._delegate._internalPath}function px(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Ie(he.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class iv{}function vd(n,...e){for(const t of e)n=t._apply(n);return n}class gx extends iv{constructor(e,t,r){super(),this.ma=e,this.ga=t,this.ya=r,this.type="where"}_apply(e){const t=Mf(e.firestore),r=function(a,c,h,y,w,D,R){let O;if(w.isKeyField()){if("array-contains"===D||"array-contains-any"===D)throw new Ie(he.INVALID_ARGUMENT,`Invalid Query. You can't perform '${D}' queries on documentId().`);if("in"===D||"not-in"===D){k0(R,D);const q=[];for(const te of R)q.push(pm(y,a,te));O={arrayValue:{values:q}}}else O=pm(y,a,R)}else"in"!==D&&"not-in"!==D&&"array-contains-any"!==D||k0(R,D),O=dx(h,"where",R,"in"===D||"not-in"===D);const G=Yr.create(w,D,O);return function(q,te){if(te.dt()){const Pe=f_(q);if(null!==Pe&&!Pe.isEqual(te.field))throw new Ie(he.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Pe.toString()}' and '${te.field.toString()}'`);const st=GE(q);null!==st&&_x(0,te.field,st)}const Se=function(Pe,st){for(const Dt of Pe.filters)if(st.indexOf(Dt.op)>=0)return Dt.op;return null}(q,function(Pe){switch(Pe){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(te.op));if(null!==Se)throw new Ie(he.INVALID_ARGUMENT,Se===te.op?`Invalid query. You cannot use more than one '${te.op.toString()}' filter.`:`Invalid query. You cannot use '${te.op.toString()}' filters with '${Se.toString()}' filters.`)}(a,G),G}(e._query,0,t,e.firestore._databaseId,this.ma,this.ga,this.ya);return new ni(e.firestore,e.converter,function(a,c){const h=a.filters.concat([c]);return new Au(a.path,a.collectionGroup,a.explicitOrderBy.slice(),h,a.limit,a.limitType,a.startAt,a.endAt)}(e._query,r))}}class mx extends iv{constructor(e,t){super(),this.ma=e,this.pa=t,this.type="orderBy"}_apply(e){const t=function(r,a,c){if(null!==r.startAt)throw new Ie(he.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Ie(he.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const h=new Ql(a,c);return function(y,w){if(null===GE(y)){const D=f_(y);null!==D&&_x(0,D,w.field)}}(r,h),h}(e._query,this.ma,this.pa);return new ni(e.firestore,e.converter,function(r,a){const c=r.explicitOrderBy.concat([a]);return new Au(r.path,r.collectionGroup,c,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class Ed extends iv{constructor(e,t,r){super(),this.type=e,this.Ia=t,this.Ta=r}_apply(e){return new ni(e.firestore,e.converter,Xl(e._query,this.Ia,this.Ta))}}class SD extends iv{constructor(e,t,r){super(),this.type=e,this.Ea=t,this.Aa=r}_apply(e){const t=P0(e,this.type,this.Ea,this.Aa);return new ni(e.firestore,e.converter,(a=t,new Au((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,a,r.endAt)));var r,a}}class O0 extends iv{constructor(e,t,r){super(),this.type=e,this.Ea=t,this.Aa=r}_apply(e){const t=P0(e,this.type,this.Ea,this.Aa);return new ni(e.firestore,e.converter,(a=t,new Au((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,a)));var r,a}}function P0(n,e,t,r){if(t[0]=(0,nn.m9)(t[0]),t[0]instanceof fm)return function(a,c,h,y,w){if(!y)throw new Ie(he.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${h}().`);const D=[];for(const R of Jl(a))if(R.field.isKeyField())D.push(Sc(c,y.key));else{const O=y.data.field(R.field);if(Tg(O))throw new Ie(he.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+R.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===O){const G=R.field.canonicalString();throw new Ie(he.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${G}' (used as the orderBy) does not exist.`)}D.push(O)}return new Qr(D,w)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const a=Mf(n.firestore);return function(c,h,y,w,D,R){const O=c.explicitOrderBy;if(D.length>O.length)throw new Ie(he.INVALID_ARGUMENT,`Too many arguments provided to ${w}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const G=[];for(let q=0;q<D.length;q++){const te=D[q];if(O[q].field.isKeyField()){if("string"!=typeof te)throw new Ie(he.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${w}(), but got a ${typeof te}`);if(!qE(c)&&-1!==te.indexOf("/"))throw new Ie(he.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${w}() must be a plain document ID, but '${te}' contains a slash.`);const Se=c.path.child(Jt.fromString(te));if(!Ve.isDocumentKey(Se))throw new Ie(he.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${w}() must result in a valid document path, but '${Se}' is not because it contains an odd number of segments.`);const Pe=new Ve(Se);G.push(Sc(h,Pe))}else{const Se=dx(y,w,te);G.push(Se)}}return new Qr(G,R)}(n._query,n.firestore._databaseId,a,e,t,r)}}function pm(n,e,t){if("string"==typeof(t=(0,nn.m9)(t))){if(""===t)throw new Ie(he.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!qE(e)&&-1!==t.indexOf("/"))throw new Ie(he.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Jt.fromString(t));if(!Ve.isDocumentKey(r))throw new Ie(he.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Sc(n,new Ve(r))}if(t instanceof yn)return Sc(n,t._key);throw new Ie(he.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${xf(t)}.`)}function k0(n,e){if(!Array.isArray(n)||0===n.length)throw new Ie(he.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Ie(he.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function _x(n,e,t){if(!t.isEqual(e))throw new Ie(he.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class MD{convertValue(e,t="none"){switch(Kl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ir(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ac(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Qe()}}convertObject(e,t){const r={};return $h(e.fields,(a,c)=>{r[a]=this.convertValue(c,t)}),r}convertGeoPoint(e){return new nv(ir(e.latitude),ir(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=LE(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Zl(e));default:return null}}convertTimestamp(e){const t=Cu(e);return new qn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Jt.fromString(e);pt(nf(r));const a=new Du(r.get(1),r.get(3)),c=new Ve(r.popFirst(5));return a.isEqual(t)||nr(`Document ${c} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),c}}function F0(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class vx extends MD{constructor(e){super(),this.firestore=e}convertBytes(e){return new Jo(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new yn(this.firestore,null,t)}}class Of{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ao extends fm{constructor(e,t,r,a,c,h){super(e,t,r,a,h),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new gm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(R0("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class gm extends ao{data(e={}){return super.data(e)}}class bd{constructor(e,t,r,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new Of(a.hasPendingWrites,a.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new gm(this._firestore,this._userDataWriter,r.key,r,new Of(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ie(he.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,a){if(r._snapshot.oldDocs.isEmpty()){let c=0;return r._snapshot.docChanges.map(h=>({type:"added",doc:new gm(r._firestore,r._userDataWriter,h.doc.key,h.doc,new Of(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:c++}))}{let c=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(h=>a||3!==h.type).map(h=>{const y=new gm(r._firestore,r._userDataWriter,h.doc.key,h.doc,new Of(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter);let w=-1,D=-1;return 0!==h.type&&(w=c.indexOf(h.doc.key),c=c.delete(h.doc.key)),1!==h.type&&(c=c.add(h.doc),D=c.indexOf(h.doc.key)),{type:OM(h.type),doc:y,oldIndex:w,newIndex:D}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function OM(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Qe()}}function sv(n,e){return n instanceof ao&&e instanceof ao?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof bd&&e instanceof bd&&n._firestore===e._firestore&&l0(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class wd extends MD{constructor(e){super(),this.firestore=e}convertBytes(e){return new Jo(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new yn(this.firestore,null,t)}}function Ix(n,e,t){n=Pt(n,yn);const r=Pt(n.firestore,Rn),a=F0(n.converter,e,t);return Pf(r,[D0(Mf(r),"setDoc",n._key,a,null!==n.converter,t).toMutation(n._key,Ln.none())])}function Cx(n,e,t,...r){n=Pt(n,yn);const a=Pt(n.firestore,Rn),c=Mf(a);let h;return h="string"==typeof(e=(0,nn.m9)(e))||e instanceof qa?CD(c,"updateDoc",n._key,e,t,r):ID(c,"updateDoc",n._key,e),Pf(a,[h.toMutation(n._key,Ln.exists(!0))])}function OD(n,...e){var t,r,a;n=(0,nn.m9)(n);let c={includeMetadataChanges:!1},h=0;"object"!=typeof e[h]||ev(e[h])||(c=e[h],h++);const y={includeMetadataChanges:c.includeMetadataChanges};if(ev(e[h])){const O=e[h];e[h]=null===(t=O.next)||void 0===t?void 0:t.bind(O),e[h+1]=null===(r=O.error)||void 0===r?void 0:r.bind(O),e[h+2]=null===(a=O.complete)||void 0===a?void 0:a.bind(O)}let w,D,R;if(n instanceof yn)D=Pt(n.firestore,Rn),R=Rc(n._key.path),w={next:O=>{e[h]&&e[h](ym(D,n,O))},error:e[h+1],complete:e[h+2]};else{const O=Pt(n,ni);D=Pt(O.firestore,Rn),R=O._query;const G=new wd(D);w={next:q=>{e[h]&&e[h](new bd(D,G,O,q))},error:e[h+1],complete:e[h+2]},px(n._query)}return function(O,G,q,te){const Se=new dm(te),Pe=new jb(G,Se,q);return O.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return U_(yield Rf(O),Pe)})),()=>{Se.bc(),O.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return jC(yield Rf(O),Pe)}))}}(hr(D),R,y,w)}function Pf(n,e){return function(t,r){const a=new Tr;return t.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return function(n,e,t){return Bc.apply(this,arguments)}(yield _0(t),r,a)})),a.promise}(hr(n),e)}function ym(n,e,t){const r=t.docs.get(e._key),a=new wd(n);return new ao(n,a,e._key,r,new Of(t.hasPendingWrites,t.fromCache),e.converter)}const Ax={maxAttempts:5};class ov{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Mf(e)}set(e,t,r){this._verifyNotCommitted();const a=jc(e,this._firestore),c=F0(a.converter,t,r),h=D0(this._dataReader,"WriteBatch.set",a._key,c,null!==a.converter,r);return this._mutations.push(h.toMutation(a._key,Ln.none())),this}update(e,t,r,...a){this._verifyNotCommitted();const c=jc(e,this._firestore);let h;return h="string"==typeof(t=(0,nn.m9)(t))||t instanceof qa?CD(this._dataReader,"WriteBatch.update",c._key,t,r,a):ID(this._dataReader,"WriteBatch.update",c._key,t),this._mutations.push(h.toMutation(c._key,Ln.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=jc(e,this._firestore);return this._mutations=this._mutations.concat(new rd(t._key,Ln.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ie(he.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function jc(n,e){if((n=(0,nn.m9)(n)).firestore!==e)throw new Ie(he.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Sx extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Mf(e)}get(e){const t=jc(e,this._firestore),r=new vx(this._firestore);return this._transaction.lookup([t._key]).then(a=>{if(!a||1!==a.length)return Qe();const c=a[0];if(c.isFoundDocument())return new fm(this._firestore,r,c.key,c,t.converter);if(c.isNoDocument())return new fm(this._firestore,r,t._key,null,t.converter);throw Qe()})}set(e,t,r){const a=jc(e,this._firestore),c=F0(a.converter,t,r),h=D0(this._dataReader,"Transaction.set",a._key,c,null!==a.converter,r);return this._transaction.set(a._key,h),this}update(e,t,r,...a){const c=jc(e,this._firestore);let h;return h="string"==typeof(t=(0,nn.m9)(t))||t instanceof qa?CD(this._dataReader,"Transaction.update",c._key,t,r,a):ID(this._dataReader,"Transaction.update",c._key,t),this._transaction.update(c._key,h),this}delete(e){const t=jc(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=jc(e,this._firestore),r=new wd(this._firestore);return super.get(e).then(a=>new ao(this._firestore,r,t._key,a._document,new Of(!1,!1),t.converter))}}function _m(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ie("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function BD(){if("undefined"==typeof Uint8Array)throw new Ie("unimplemented","Uint8Arrays are not available in this environment.")}function co(){if("undefined"==typeof atob)throw new Ie("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Bo=kl.SDK_VERSION,(0,kl._registerComponent)(new Wp.wA("firestore",(t,{instanceIdentifier:r,options:a})=>{const c=t.getProvider("app").getImmediate(),h=new Rn(new EA(t.getProvider("auth-internal")),new wA(t.getProvider("app-check-internal")),function(y,w){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new Ie(he.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Du(y.options.projectId,w)}(c,r),c);return a=Object.assign({useFetchStreams:e},a),h._setSettings(a),h},"PUBLIC").setMultipleInstances(!0)),(0,kl.registerVersion)(ql,"3.7.1",n),(0,kl.registerVersion)(ql,"3.7.1","esm2017")}();class vm{constructor(e){this._delegate=e}static fromBase64String(e){return co(),new vm(Jo.fromBase64String(e))}static fromUint8Array(e){return BD(),new vm(Jo.fromUint8Array(e))}toBase64(){return co(),this._delegate.toBase64()}toUint8Array(){return BD(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function jD(n){return function(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of["next","error","complete"])if(r in t&&"function"==typeof t[r])return!0;return!1}(n)}class UM{enableIndexedDbPersistence(e,t){return function(n,e){I0(n=Pt(n,Rn));const t=hr(n),r=n._freezeSettings(),a=new a0;return w0(t,a,new XC(a,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function(n){I0(n=Pt(n,Rn));const e=hr(n),t=n._freezeSettings(),r=new a0;return w0(e,r,new KS(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(n){if(n._initialized&&!n._terminated)throw new Ie(he.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Tr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ge.Z)(function*(){try{yield(t=(0,ge.Z)(function*(r){if(!Ho.C())return Promise.resolve();const a=r+"main";yield Ho.delete(a)}),function(r){return t.apply(this,arguments)})(SC(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class HD{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Du||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Cc("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function(n,e,t,r={}){var a;const c=(n=Pt(n,lm))._getSettings();if("firestore.googleapis.com"!==c.host&&c.host!==e&&Cc("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},c),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let h,y;if("string"==typeof r.mockUserToken)h=r.mockUserToken,y=Gn.MOCK_USER;else{h=(0,nn.Sg)(r.mockUserToken,null===(a=n._app)||void 0===a?void 0:a.options.projectId);const w=r.mockUserToken.sub||r.mockUserToken.user_id;if(!w)throw new Ie(he.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new Gn(w)}n._authCredentials=new aM(new ME(h,y))}}(this._delegate,e,t,r)}enableNetwork(){return function(n){return function(n){return n.asyncQueue.enqueue((0,ge.Z)(function*(){const e=yield cD(n),t=yield yd(n);return e.setNetworkEnabled(!0),function(r){const a=$e(r);return a.wu.delete(0),_f(a)}(t)}))}(hr(n=Pt(n,Rn)))}(this._delegate)}disableNetwork(){return function(n){return function(n){return n.asyncQueue.enqueue((0,ge.Z)(function*(){const e=yield cD(n),t=yield yd(n);return e.setNetworkEnabled(!1),(r=(0,ge.Z)(function*(a){const c=$e(a);c.wu.add(0),yield vf(c),c.yu.set("Offline")}),function(a){return r.apply(this,arguments)})(t);var r}))}(hr(n=Pt(n,Rn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,Af("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function(n){return function(e){const t=new Tr;return e.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return function(n,e){return Yb.apply(this,arguments)}(yield _0(e),t)})),t.promise}(hr(n=Pt(n,Rn)))}(this._delegate)}onSnapshotsInSync(e){return function(n,e){return function(n,e){const t=new dm(e);return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return r=yield Rf(n),a=t,$e(r).bu.add(a),void a.next();var r,a})),()=>{t.bc(),n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return r=yield Rf(n),a=t,void $e(r).bu.delete(a);var r,a}))}}(hr(n=Pt(n,Rn)),ev(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Ie("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Id(this,Y_(this._delegate,e))}catch(t){throw Ki(t,"collection()","Firestore.collection()")}}doc(e){try{return new lo(this,Q_(this._delegate,e))}catch(t){throw Ki(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Oi(this,function(n,e){if(n=Pt(n,lm),u0("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ie(he.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ni(n,null,(t=e,new Au(Jt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Ki(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(n,e,t){n=Pt(n,Rn);const r=Object.assign(Object.assign({},Ax),void 0);return function(a){if(a.maxAttempts<1)throw new Ie(he.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(a,c,h){const y=new Tr;return a.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){const w=yield function(n){return Pu(n).then(e=>e.datastore)}(a);new XS(a.asyncQueue,w,h,c,y).run()})),y.promise}(hr(n),a=>e(new Sx(n,a)),r)}(this._delegate,t=>e(new Nx(this,t)))}batch(){return hr(this._delegate),new $D(new ov(this._delegate,e=>Pf(this._delegate,e)))}loadBundle(e){return function(n,e){const t=hr(n=Pt(n,Rn)),r=new tv;return function(n,e,t,r){const a=function(c,h){let y;return y="string"==typeof c?(new TextEncoder).encode(c):c,w=function(w,D){if(w instanceof Uint8Array)return iD(w,D);if(w instanceof ArrayBuffer)return iD(new Uint8Array(w),D);if(w instanceof ReadableStream)return w.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(y),new d0(w,h);var w}(t,fd(e));n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){!function(n,e,t){const r=$e(n);var a;(a=(0,ge.Z)(function*(c,h,y){try{const w=yield h.getMetadata();if(yield function(G,q){const te=$e(G),Se=Jr(q.createTime);return te.persistence.runTransaction("hasNewerBundle","readonly",Pe=>te.Ns.getBundleMetadata(Pe,q.id)).then(Pe=>!!Pe&&Pe.createTime.compareTo(Se)>=0)}(c.localStore,w))return yield h.close(),y._completeWith({taskState:"Success",documentsLoaded:(G=w).totalDocuments,bytesLoaded:G.totalBytes,totalDocuments:G.totalDocuments,totalBytes:G.totalBytes}),Promise.resolve(new Set);y._updateProgress(HC(w));const D=new FS(w,c.localStore,h.It);let R=yield h.mc();for(;R;){const G=yield D.Fu(R);G&&y._updateProgress(G),R=yield h.mc()}const O=yield D.complete();return yield Ga(c,O.Lu,void 0),yield function(G,q){const te=$e(G);return te.persistence.runTransaction("Save bundle","readwrite",Se=>te.Ns.saveBundleMetadata(Se,q))}(c.localStore,w),y._completeWith(O.progress),Promise.resolve(O.Bu)}catch(w){return Cc("SyncEngine",`Loading bundle failed with ${w}`),y._failWith(w),Promise.resolve(new Set)}var G}),function(c,h,y){return a.apply(this,arguments)})(r,e,t).then(a=>{r.sharedClientState.notifyBundleLoaded(a)})}(yield _0(n),a,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function(n,e){return function(n,e){return n.asyncQueue.enqueue((0,ge.Z)(function*(){return function(t,r){const a=$e(t);return a.persistence.runTransaction("Get named query","readonly",c=>a.Ns.getNamedQuery(c,r))}(yield y0(n),e)}))}(hr(n=Pt(n,Rn)),e).then(t=>t?new ni(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Oi(this,t):null)}}class uv extends MD{constructor(e){super(),this.firestore=e}convertBytes(e){return new vm(new Jo(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return lo.forKey(t,this.firestore,null)}}class Nx{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new uv(e)}get(e){const t=Xo(e);return this._delegate.get(t).then(r=>new cv(this._firestore,new ao(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const a=Xo(e);return r?(_m("Transaction.set",r),this._delegate.set(a,t,r)):this._delegate.set(a,t),this}update(e,t,r,...a){const c=Xo(e);return 2===arguments.length?this._delegate.update(c,t):this._delegate.update(c,t,r,...a),this}delete(e){const t=Xo(e);return this._delegate.delete(t),this}}class $D{constructor(e){this._delegate=e}set(e,t,r){const a=Xo(e);return r?(_m("WriteBatch.set",r),this._delegate.set(a,t,r)):this._delegate.set(a,t),this}update(e,t,r,...a){const c=Xo(e);return 2===arguments.length?this._delegate.update(c,t):this._delegate.update(c,t,r,...a),this}delete(e){const t=Xo(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Hc{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new gm(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new kf(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Hc.INSTANCES;let a=r.get(e);a||(a=new WeakMap,r.set(e,a));let c=a.get(t);return c||(c=new Hc(e,new uv(e),t),a.set(t,c)),c}}Hc.INSTANCES=new WeakMap;class lo{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new uv(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Ie("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new lo(t,new yn(t._delegate,r,new Ve(e)))}static forKey(e,t,r){return new lo(t,new yn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Id(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Id(this.firestore,Y_(this._delegate,e))}catch(t){throw Ki(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,nn.m9)(e))instanceof yn&&rD(this._delegate,e)}set(e,t){t=_m("DocumentReference.set",t);try{return t?Ix(this._delegate,e,t):Ix(this._delegate,e)}catch(r){throw Ki(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?Cx(this._delegate,e):Cx(this._delegate,e,t,...r)}catch(a){throw Ki(a,"updateDoc()","DocumentReference.update()")}}delete(){return function(n){return Pf(Pt(n.firestore,Rn),[new rd(n._key,Ln.none())])}(this._delegate)}onSnapshot(...e){const t=V0(e),r=GD(e,a=>new cv(this.firestore,new ao(this.firestore._delegate,this._userDataWriter,a._key,a._document,a.metadata,this._delegate.converter)));return OD(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(n){n=Pt(n,yn);const e=Pt(n.firestore,Rn),t=hr(e),r=new wd(e);return function(n,e){const t=new Tr;return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return(r=(0,ge.Z)(function*(a,c,h){try{const y=yield function(w,D){const R=$e(w);return R.persistence.runTransaction("read document","readonly",O=>R.localDocuments.getDocument(O,D))}(a,c);y.isFoundDocument()?h.resolve(y):y.isNoDocument()?h.resolve(null):h.reject(new Ie(he.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(y){const w=Cf(y,`Failed to get document '${c} from cache`);h.reject(w)}}),function(a,c,h){return r.apply(this,arguments)})(yield y0(n),e,t);var r})),t.promise}(t,n._key).then(a=>new ao(e,r,n._key,a,new Of(null!==a&&a.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function(n){n=Pt(n,yn);const e=Pt(n.firestore,Rn);return E0(hr(e),n._key,{source:"server"}).then(t=>ym(e,n,t))}(this._delegate):function(n){n=Pt(n,yn);const e=Pt(n.firestore,Rn);return E0(hr(e),n._key).then(t=>ym(e,n,t))}(this._delegate),t.then(r=>new cv(this.firestore,new ao(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new lo(this.firestore,this._delegate.withConverter(e?Hc.getInstance(this.firestore,e):null))}}function Ki(n,e,t){return n.message=n.message.replace(e,t),n}function V0(n){for(const e of n)if("object"==typeof e&&!jD(e))return e;return{}}function GD(n,e){var t,r;let a;return a=jD(n[0])?n[0]:jD(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:c=>{a.next&&a.next(e(c))},error:null===(t=a.error)||void 0===t?void 0:t.bind(a),complete:null===(r=a.complete)||void 0===r?void 0:r.bind(a)}}class cv{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new lo(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return sv(this._delegate,e._delegate)}}class kf extends cv{data(e){const t=this._delegate.data(e);return function(n,e){n||Qe()}(void 0!==t),t}}class Oi{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new uv(e)}where(e,t,r){try{return new Oi(this.firestore,vd(this._delegate,function(n,e,t){const r=e,a=R0("where",n);return new gx(a,r,t)}(e,t,r)))}catch(a){throw Ki(a,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Oi(this.firestore,vd(this._delegate,function(n,e="asc"){const t=e,r=R0("orderBy",n);return new mx(r,t)}(e,t)))}catch(r){throw Ki(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Oi(this.firestore,vd(this._delegate,function(n){return tD("limit",n),new Ed("limit",n,"F")}(e)))}catch(t){throw Ki(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Oi(this.firestore,vd(this._delegate,function(n){return tD("limitToLast",n),new Ed("limitToLast",n,"L")}(e)))}catch(t){throw Ki(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Oi(this.firestore,vd(this._delegate,function(...n){return new SD("startAt",n,!0)}(...e)))}catch(t){throw Ki(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Oi(this.firestore,vd(this._delegate,function(...n){return new SD("startAfter",n,!1)}(...e)))}catch(t){throw Ki(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Oi(this.firestore,vd(this._delegate,function(...n){return new O0("endBefore",n,!1)}(...e)))}catch(t){throw Ki(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Oi(this.firestore,vd(this._delegate,function(...n){return new O0("endAt",n,!0)}(...e)))}catch(t){throw Ki(t,"endAt()","Query.endAt()")}}isEqual(e){return l0(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(n){n=Pt(n,ni);const e=Pt(n.firestore,Rn),t=hr(e),r=new wd(e);return function(n,e){const t=new Tr;return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return(r=(0,ge.Z)(function*(a,c,h){try{const y=yield dd(a,c,!0),w=new US(c,y.Hi),D=w.Wu(y.documents),R=w.applyChanges(D,!1);h.resolve(R.snapshot)}catch(y){const w=Cf(y,`Failed to execute query '${c} against cache`);h.reject(w)}}),function(a,c,h){return r.apply(this,arguments)})(yield y0(n),e,t);var r})),t.promise}(t,n._query).then(a=>new bd(e,r,n,a))}(this._delegate):"server"===(null==e?void 0:e.source)?function(n){n=Pt(n,ni);const e=Pt(n.firestore,Rn),t=hr(e),r=new wd(e);return hm(t,n._query,{source:"server"}).then(a=>new bd(e,r,n,a))}(this._delegate):function(n){n=Pt(n,ni);const e=Pt(n.firestore,Rn),t=hr(e),r=new wd(e);return px(n._query),hm(t,n._query).then(a=>new bd(e,r,n,a))}(this._delegate),t.then(r=>new U0(this.firestore,new bd(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=V0(e),r=GD(e,a=>new U0(this.firestore,new bd(this.firestore._delegate,this._userDataWriter,this._delegate,a._snapshot)));return OD(this._delegate,t,r)}withConverter(e){return new Oi(this.firestore,this._delegate.withConverter(e?Hc.getInstance(this.firestore,e):null))}}class Ox{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new kf(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class U0{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Oi(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new kf(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new Ox(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new kf(this._firestore,r))})}isEqual(e){return sv(this._delegate,e._delegate)}}class Id extends Oi{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new lo(this.firestore,e):null}doc(e){try{return new lo(this.firestore,void 0===e?Q_(this._delegate):Q_(this._delegate,e))}catch(t){throw Ki(t,"doc()","CollectionReference.doc()")}}add(e){return function(n,e){const t=Pt(n.firestore,Rn),r=Q_(n),a=F0(n.converter,e);return Pf(t,[D0(Mf(n.firestore),"addDoc",r._key,a,null!==n.converter,{}).toMutation(r._key,Ln.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new lo(this.firestore,t))}isEqual(e){return rD(this._delegate,e._delegate)}withConverter(e){return new Id(this.firestore,this._delegate.withConverter(e?Hc.getInstance(this.firestore,e):null))}}function Xo(n){return Pt(n,yn)}class Em{constructor(...e){this._delegate=new qa(...e)}static documentId(){return new Em(Fn.keyField().canonicalString())}isEqual(e){return(e=(0,nn.m9)(e))instanceof qa&&this._delegate._internalPath.isEqual(e._internalPath)}}class $c{constructor(e){this._delegate=e}static serverTimestamp(){const e=new wD("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new $c(e)}static delete(){const e=new rv("deleteField");return e._methodName="FieldValue.delete",new $c(e)}static arrayUnion(...e){const t=function(...n){return new AM("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new $c(t)}static arrayRemove(...e){const t=function(...n){return new SM("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new $c(t)}static increment(e){const t=function(n){return new xM("increment",n)}(e);return t._methodName="FieldValue.increment",new $c(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Px={Firestore:HD,GeoPoint:nv,Timestamp:qn,Blob:vm,Transaction:Nx,WriteBatch:$D,DocumentReference:lo,DocumentSnapshot:cv,Query:Oi,QueryDocumentSnapshot:kf,QuerySnapshot:U0,CollectionReference:Id,FieldPath:Em,FieldValue:$c,setLogLevel:function(n){!function(n){Os.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function(n){(function(n,e){n.INTERNAL.registerComponent(new Wp.wA("firestore-compat",t=>((e,t)=>new HD(e,t,new UM))(t.getProvider("app-compat").getImmediate(),t.getProvider("firestore").getImmediate()),"PUBLIC").setServiceProps(Object.assign({},Px)))})(n),n.registerVersion("@firebase/firestore-compat","0.2.1")}(qT.Z);const lv_firebaseConfig={apiKey:"AIzaSyBVobJ1gh4oXd3zjfa3Jx1yy8k8inJNY30",authDomain:"gmh-myphotoapp.firebaseapp.com",projectId:"gmh-myphotoapp",storageBucket:"gmh-myphotoapp.appspot.com",messagingSenderId:"643008644751",appId:"1:643008644751:web:8c34050f3db9874c3512fa",measurementId:"G-G8C9HRP084"};var jM=F(6682),Ff=F(309),qD=F(7771),Fx=F(8858);class Lx extends ci.xQ{constructor(e=Number.POSITIVE_INFINITY,t=Number.POSITIVE_INFINITY,r){super(),this.scheduler=r,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=e<1?1:e,this._windowTime=t<1?1:t,t===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(e){if(!this.isStopped){const t=this._events;t.push(e),t.length>this._bufferSize&&t.shift()}super.next(e)}nextTimeWindow(e){this.isStopped||(this._events.push(new Vx(this._getNow(),e)),this._trimBufferThenGetEvents()),super.next(e)}_subscribe(e){const t=this._infiniteTimeWindow,r=t?this._events:this._trimBufferThenGetEvents(),a=this.scheduler,c=r.length;let h;if(this.closed)throw new Do.N;if(this.isStopped||this.hasError?h=fp.w.EMPTY:(this.observers.push(e),h=new Fx.W(this,e)),a&&e.add(e=new Ff.ht(e,a)),t)for(let y=0;y<c&&!e.closed;y++)e.next(r[y]);else for(let y=0;y<c&&!e.closed;y++)e.next(r[y].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),h}_getNow(){return(this.scheduler||qD.c).now()}_trimBufferThenGetEvents(){const e=this._getNow(),t=this._bufferSize,r=this._windowTime,a=this._events,c=a.length;let h=0;for(;h<c&&!(e-a[h].time<r);)h++;return c>t&&(h=Math.max(h,c-t)),h>0&&a.splice(0,h),a}}class Vx{constructor(e,t){this.time=e,this.value=t}}function zD(n,e,t){let r;return r=n&&"object"==typeof n?n:{bufferSize:n,windowTime:e,refCount:!1,scheduler:t},a=>a.lift(function({bufferSize:n=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:t,scheduler:r}){let a,h,c=0,y=!1,w=!1;return function(R){let O;c++,!a||y?(y=!1,a=new Lx(n,e,r),O=a.subscribe(this),h=R.subscribe({next(G){a.next(G)},error(G){y=!0,a.error(G)},complete(){w=!0,h=void 0,a.complete()}}),w&&(h=void 0)):O=a.subscribe(this),this.add(()=>{c--,O.unsubscribe(),O=void 0,h&&!w&&t&&0===c&&(h.unsubscribe(),h=void 0,a=void 0)})}}(r))}function Ux(n,e){return e?Qn(()=>n,e):Qn(()=>n)}var ZD=F(3101),bm=F(9173),ku=F(8939);F(2329);const Rr=new Map,zM={activated:!1,tokenObservers:[]},Gx={initialized:!1,enabled:!1};function ri(n){return Rr.get(n)||zM}function ea(n,e){Rr.set(n,e)}function Dd(){return Gx}class zx{constructor(e,t,r,a,c){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=a,this.upperBound=c,this.pending=null,this.nextErrorWaitInterval=a,a>c)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,ge.Z)(function*(){t.stop();try{t.pending=new nn.BH,yield function(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new nn.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const ms=new nn.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function tT(n){if(!ri(n).activated)throw ms.create("use-before-activation",{appName:n.name})}function nT(n,e){return q0.apply(this,arguments)}function q0(){return q0=(0,ge.Z)(function*({url:n,body:e},t){var r,a;const c={"Content-Type":"application/json"},h=t.getImmediate({optional:!0});if(h){const q=yield h.getHeartbeatsHeader();q&&(c["X-Firebase-Client"]=q)}const y={method:"POST",body:JSON.stringify(e),headers:c};let w,D;try{w=yield fetch(n,y)}catch(q){throw ms.create("fetch-network-error",{originalErrorMessage:null===(r=q)||void 0===r?void 0:r.message})}if(200!==w.status)throw ms.create("fetch-status-error",{httpStatus:w.status});try{D=yield w.json()}catch(q){throw ms.create("fetch-parse-error",{originalErrorMessage:null===(a=q)||void 0===a?void 0:a.message})}const R=D.ttl.match(/^([\d.]+)(s)$/);if(!R||!R[2]||isNaN(Number(R[1])))throw ms.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${D.ttl}`});const O=1e3*Number(R[1]),G=Date.now();return{token:D.token,expireTimeMillis:G+O,issuedAtTimeMillis:G}}),q0.apply(this,arguments)}function Qx(n,e){const{projectId:t,appId:r,apiKey:a}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${a}`,body:{debug_token:e}}}const wm="firebase-app-check-store";let hv=null;function iT(){return hv||(hv=new Promise((n,e)=>{var t;try{const r=indexedDB.open("firebase-app-check-database",1);r.onsuccess=a=>{n(a.target.result)},r.onerror=a=>{var c;e(ms.create("storage-open",{originalErrorMessage:null===(c=a.target.error)||void 0===c?void 0:c.message}))},r.onupgradeneeded=a=>{0===a.oldVersion&&a.target.result.createObjectStore(wm,{keyPath:"compositeKey"})}}catch(r){e(ms.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}}),hv)}function fv(){return fv=(0,ge.Z)(function*(n,e){const r=(yield iT()).transaction(wm,"readwrite"),c=r.objectStore(wm).put({compositeKey:n,value:e});return new Promise((h,y)=>{c.onsuccess=w=>{h()},r.onerror=w=>{var D;y(ms.create("storage-set",{originalErrorMessage:null===(D=w.target.error)||void 0===D?void 0:D.message}))}})}),fv.apply(this,arguments)}const pv=new Ec.Yd("@firebase/app-check");function W0(n,e){return(0,nn.hl)()?function(n,e){return function(n,e){return fv.apply(this,arguments)}(function(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{pv.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function sR(){return Dd().enabled}function sT(){return K0.apply(this,arguments)}function K0(){return K0=(0,ge.Z)(function*(){const n=Dd();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),K0.apply(this,arguments)}const na={error:"UNKNOWN_ERROR"};function JM(n){return nn.US.encodeString(JSON.stringify(n),!1)}function Cm(n){return Y0.apply(this,arguments)}function Y0(){return Y0=(0,ge.Z)(function*(n,e=!1){const t=n.app;tT(t);const r=ri(t);let c,a=r.token;if(a&&!Gc(a)&&(ea(t,Object.assign(Object.assign({},r),{token:void 0})),a=void 0),!a){const w=yield r.cachedTokenPromise;w&&(Gc(w)?a=w:yield W0(t,void 0))}if(!e&&a&&Gc(a))return{token:a.token};let y,h=!1;if(sR()){r.exchangeTokenPromise||(r.exchangeTokenPromise=nT(Qx(t,yield sT()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),h=!0);const w=yield r.exchangeTokenPromise;return yield W0(t,w),ea(t,Object.assign(Object.assign({},r),{token:w})),{token:w.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),h=!0),a=yield r.exchangeTokenPromise}catch(w){"appCheck/throttled"===w.code?pv.warn(w.message):pv.error(w),c=w}return a?c?y=Gc(a)?{token:a.token,internalError:c}:Dm(c):(y={token:a.token},ea(t,Object.assign(Object.assign({},r),{token:a})),yield W0(t,a)):y=Dm(c),h&&yv(t,y),y}),Y0.apply(this,arguments)}function mv(n,e){const t=ri(n),r=t.tokenObservers.filter(a=>a.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),ea(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function Q0(n){const{app:e}=n,t=ri(e);let r=t.tokenRefresher;r||(r=function(n){const{app:e}=n;return new zx((0,ge.Z)(function*(){let r;if(r=ri(e).token?yield Cm(n,!0):yield Cm(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=ri(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),ea(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function yv(n,e){const t=ri(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(a){}}function Gc(n){return n.expireTimeMillis-Date.now()>0}function Dm(n){return{token:JM(na),error:n}}class _v{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=ri(this.app);for(const t of e)mv(this.app,t.next);return Promise.resolve()}}const Bf="app-check-internal";(0,kl._registerComponent)(new Wp.wA("app-check",n=>function(n,e){return new _v(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(Bf).initialize()})),(0,kl._registerComponent)(new Wp.wA(Bf,n=>function(n){return{getToken:e=>Cm(n,e),addTokenListener:e=>function(n,e,t,r){const{app:a}=n,c=ri(a),h={next:t,error:r,type:e};if(ea(a,Object.assign(Object.assign({},c),{tokenObservers:[...c.tokenObservers,h]})),c.token&&Gc(c.token)){const y=c.token;Promise.resolve().then(()=>{t({token:y.token}),Q0(n)}).catch(()=>{})}c.cachedTokenPromise.then(()=>Q0(n))}(n,"INTERNAL",e),removeTokenListener:e=>mv(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,kl.registerVersion)("@firebase/app-check","0.5.15");class pT{constructor(){return(0,bm.vb)("app-check")}}"undefined"!=typeof window&&window;var yT=F(7841);const vT=new p.OlP("angularfire2.auth.use-emulator"),ET=new p.OlP("angularfire2.auth.settings"),sw=new p.OlP("angularfire2.auth.tenant-id"),yR=new p.OlP("angularfire2.auth.langugage-code"),_R=new p.OlP("angularfire2.auth.use-device-language"),bT=new p.OlP("angularfire.auth.persistence");let Hf=(()=>{class n{constructor(t,r,a,c,h,y,w,D,R,O,G,q){const te=new ci.xQ,Se=(0,ft.of)(void 0).pipe((0,Ff.QV)(h.outsideAngular),Qn(()=>c.runOutsideAngular(()=>Promise.resolve().then(F.bind(F,8241)))),(0,wt.U)(()=>(0,ku.on)(t,c,r)),(0,wt.U)(Pe=>((n,e,t,r,a,c,h,y)=>(0,ku.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const w=e.runOutsideAngular(()=>n.auth());if(t&&w.useEmulator(...t),r&&(w.tenantId=r),w.languageCode=a,c&&w.useDeviceLanguage(),h)for(const[D,R]of Object.entries(h))w.settings[D]=R;return y&&w.setPersistence(y),w},[t,r,a,c,h,y]))(Pe,c,y,D,R,O,w,G)),zD({bufferSize:1,refCount:!1}));if(function(n){return"server"===n}(a))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,ft.of)(null);else{Se.pipe(Ro()).subscribe();const st=Se.pipe(Qn(Ft=>Ft.getRedirectResult().then(zt=>zt,()=>null)),bm.iC,zD({bufferSize:1,refCount:!1})),Dt=Se.pipe(Qn(Ft=>new Hr.y(zt=>({unsubscribe:c.runOutsideAngular(()=>Ft.onAuthStateChanged(Zt=>zt.next(Zt),Zt=>zt.error(Zt),()=>zt.complete()))})))),kt=Se.pipe(Qn(Ft=>new Hr.y(zt=>({unsubscribe:c.runOutsideAngular(()=>Ft.onIdTokenChanged(Zt=>zt.next(Zt),Zt=>zt.error(Zt),()=>zt.complete()))}))));this.authState=st.pipe(Ux(Dt),(0,ZD.R)(h.outsideAngular),(0,Ff.QV)(h.insideAngular)),this.user=st.pipe(Ux(kt),(0,ZD.R)(h.outsideAngular),(0,Ff.QV)(h.insideAngular)),this.idToken=this.user.pipe(Qn(Ft=>Ft?(0,mn.D)(Ft.getIdToken()):(0,ft.of)(null))),this.idTokenResult=this.user.pipe(Qn(Ft=>Ft?(0,mn.D)(Ft.getIdTokenResult()):(0,ft.of)(null))),this.credential=(0,jM.T)(st,te,this.authState.pipe(So(Ft=>!Ft))).pipe((0,wt.U)(Ft=>(null==Ft?void 0:Ft.user)?Ft:null),(0,ZD.R)(h.outsideAngular),(0,Ff.QV)(h.insideAngular))}return(0,ku.pX)(this,Se,c,{spy:{apply:(Pe,st,Dt)=>{(Pe.startsWith("signIn")||Pe.startsWith("createUser"))&&Dt.then(kt=>te.next(kt))}}})}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(ku.Dh),p.LFG(ku.xv,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(bm.HU),p.LFG(vT,8),p.LFG(ET,8),p.LFG(sw,8),p.LFG(yR,8),p.LFG(_R,8),p.LFG(bT,8),p.LFG(pT,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),vR=(()=>{class n{constructor(){yT.Z.registerVersion("angularfire",bm.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[Hf]}),n})();class wT{}class ER{}class Wc{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const a=t.slice(0,r),c=a.toLowerCase(),h=t.slice(r+1).trim();this.maybeSetNormalizedName(a,c),this.headers.has(c)?this.headers.get(c).push(h):this.headers.set(c,[h])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const a=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(a,r),this.maybeSetNormalizedName(t,a))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Wc?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Wc;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Wc?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const a=("a"===e.op?this.headers.get(t):void 0)||[];a.push(...r),this.headers.set(t,a);break;case"d":const c=e.value;if(c){let h=this.headers.get(t);if(!h)return;h=h.filter(y=>-1===c.indexOf(y)),0===h.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,h)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class oN{encodeKey(e){return IR(e)}encodeValue(e){return IR(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const bR=/%(\d[a-f0-9])/gi,wR={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function IR(n){return encodeURIComponent(n).replace(bR,(e,t)=>{var r;return null!==(r=wR[t])&&void 0!==r?r:e})}function CR(n){return`${n}`}class Sd{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new oN,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(a=>{const c=a.indexOf("="),[h,y]=-1==c?[e.decodeKey(a),""]:[e.decodeKey(a.slice(0,c)),e.decodeValue(a.slice(c+1))],w=t.get(h)||[];w.push(y),t.set(h,w)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t];this.map.set(t,Array.isArray(r)?r:[r])})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const a=e[r];Array.isArray(a)?a.forEach(c=>{t.push({param:r,value:c,op:"a"})}):t.push({param:r,value:a,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Sd({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(CR(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const a=r.indexOf(CR(e.value));-1!==a&&r.splice(a,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class DR{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}keys(){return this.map.keys()}}function TR(n){return"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer}function AR(n){return"undefined"!=typeof Blob&&n instanceof Blob}function SR(n){return"undefined"!=typeof FormData&&n instanceof FormData}class s{constructor(e,t,r,a){let c;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||a?(this.body=void 0!==r?r:null,c=a):c=r,c&&(this.reportProgress=!!c.reportProgress,this.withCredentials=!!c.withCredentials,c.responseType&&(this.responseType=c.responseType),c.headers&&(this.headers=c.headers),c.context&&(this.context=c.context),c.params&&(this.params=c.params)),this.headers||(this.headers=new Wc),this.context||(this.context=new DR),this.params){const h=this.params.toString();if(0===h.length)this.urlWithParams=t;else{const y=t.indexOf("?");this.urlWithParams=t+(-1===y?"?":y<t.length-1?"&":"")+h}}else this.params=new Sd,this.urlWithParams=t}serializeBody(){return null===this.body?null:TR(this.body)||AR(this.body)||SR(this.body)||function(n){return"undefined"!=typeof URLSearchParams&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Sd?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||SR(this.body)?null:AR(this.body)?this.body.type||null:TR(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Sd?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){var t;const r=e.method||this.method,a=e.url||this.url,c=e.responseType||this.responseType,h=void 0!==e.body?e.body:this.body,y=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,w=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let D=e.headers||this.headers,R=e.params||this.params;const O=null!==(t=e.context)&&void 0!==t?t:this.context;return void 0!==e.setHeaders&&(D=Object.keys(e.setHeaders).reduce((G,q)=>G.set(q,e.setHeaders[q]),D)),e.setParams&&(R=Object.keys(e.setParams).reduce((G,q)=>G.set(q,e.setParams[q]),R)),new s(r,a,h,{params:R,headers:D,context:O,reportProgress:w,responseType:c,withCredentials:y})}}var o=(()=>((o=o||{})[o.Sent=0]="Sent",o[o.UploadProgress=1]="UploadProgress",o[o.ResponseHeader=2]="ResponseHeader",o[o.DownloadProgress=3]="DownloadProgress",o[o.Response=4]="Response",o[o.User=5]="User",o))();class u{constructor(e,t=200,r="OK"){this.headers=e.headers||new Wc,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class l extends u{constructor(e={}){super(e),this.type=o.ResponseHeader}clone(e={}){return new l({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class d extends u{constructor(e={}){super(e),this.type=o.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new d({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class m extends u{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function v(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let b=(()=>{class n{constructor(t){this.handler=t}request(t,r,a={}){let c;if(t instanceof s)c=t;else{let w,D;w=a.headers instanceof Wc?a.headers:new Wc(a.headers),a.params&&(D=a.params instanceof Sd?a.params:new Sd({fromObject:a.params})),c=new s(t,r,void 0!==a.body?a.body:null,{headers:w,context:a.context,params:D,reportProgress:a.reportProgress,responseType:a.responseType||"json",withCredentials:a.withCredentials})}const h=(0,ft.of)(c).pipe(os(w=>this.handler.handle(w)));if(t instanceof s||"events"===a.observe)return h;const y=h.pipe(So(w=>w instanceof d));switch(a.observe||"body"){case"body":switch(c.responseType){case"arraybuffer":return y.pipe((0,wt.U)(w=>{if(null!==w.body&&!(w.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return w.body}));case"blob":return y.pipe((0,wt.U)(w=>{if(null!==w.body&&!(w.body instanceof Blob))throw new Error("Response is not a Blob.");return w.body}));case"text":return y.pipe((0,wt.U)(w=>{if(null!==w.body&&"string"!=typeof w.body)throw new Error("Response is not a string.");return w.body}));default:return y.pipe((0,wt.U)(w=>w.body))}case"response":return y;default:throw new Error(`Unreachable: unhandled observe type ${a.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new Sd).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,a={}){return this.request("PATCH",t,v(a,r))}post(t,r,a={}){return this.request("POST",t,v(a,r))}put(t,r,a={}){return this.request("PUT",t,v(a,r))}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(wT))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();class C{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const S=new p.OlP("HTTP_INTERCEPTORS");let N=(()=>{class n{intercept(t,r){return r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const ut=/^\)\]\}',?\n/;let qt=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Hr.y(r=>{const a=this.xhrFactory.build();if(a.open(t.method,t.urlWithParams),t.withCredentials&&(a.withCredentials=!0),t.headers.forEach((q,te)=>a.setRequestHeader(q,te.join(","))),t.headers.has("Accept")||a.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const q=t.detectContentTypeHeader();null!==q&&a.setRequestHeader("Content-Type",q)}if(t.responseType){const q=t.responseType.toLowerCase();a.responseType="json"!==q?q:"text"}const c=t.serializeBody();let h=null;const y=()=>{if(null!==h)return h;const q=1223===a.status?204:a.status,te=a.statusText||"OK",Se=new Wc(a.getAllResponseHeaders()),Pe=function(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(a)||t.url;return h=new l({headers:Se,status:q,statusText:te,url:Pe}),h},w=()=>{let{headers:q,status:te,statusText:Se,url:Pe}=y(),st=null;204!==te&&(st=void 0===a.response?a.responseText:a.response),0===te&&(te=st?200:0);let Dt=te>=200&&te<300;if("json"===t.responseType&&"string"==typeof st){const kt=st;st=st.replace(ut,"");try{st=""!==st?JSON.parse(st):null}catch(Ft){st=kt,Dt&&(Dt=!1,st={error:Ft,text:st})}}Dt?(r.next(new d({body:st,headers:q,status:te,statusText:Se,url:Pe||void 0})),r.complete()):r.error(new m({error:st,headers:q,status:te,statusText:Se,url:Pe||void 0}))},D=q=>{const{url:te}=y(),Se=new m({error:q,status:a.status||0,statusText:a.statusText||"Unknown Error",url:te||void 0});r.error(Se)};let R=!1;const O=q=>{R||(r.next(y()),R=!0);let te={type:o.DownloadProgress,loaded:q.loaded};q.lengthComputable&&(te.total=q.total),"text"===t.responseType&&!!a.responseText&&(te.partialText=a.responseText),r.next(te)},G=q=>{let te={type:o.UploadProgress,loaded:q.loaded};q.lengthComputable&&(te.total=q.total),r.next(te)};return a.addEventListener("load",w),a.addEventListener("error",D),a.addEventListener("timeout",D),a.addEventListener("abort",D),t.reportProgress&&(a.addEventListener("progress",O),null!==c&&a.upload&&a.upload.addEventListener("progress",G)),a.send(c),r.next({type:o.Sent}),()=>{a.removeEventListener("error",D),a.removeEventListener("abort",D),a.removeEventListener("load",w),a.removeEventListener("timeout",D),t.reportProgress&&(a.removeEventListener("progress",O),null!==c&&a.upload&&a.upload.removeEventListener("progress",G)),a.readyState!==a.DONE&&a.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Ui))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const fr=new p.OlP("XSRF_COOKIE_NAME"),ys=new p.OlP("XSRF_HEADER_NAME");class $f{}let Gf=(()=>{class n{constructor(t,r,a){this.doc=t,this.platform=r,this.cookieName=a,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=St(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(me),p.LFG(p.Lbi),p.LFG(fr))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),Zc=(()=>{class n{constructor(t,r){this.tokenService=t,this.headerName=r}intercept(t,r){const a=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||a.startsWith("http://")||a.startsWith("https://"))return r.handle(t);const c=this.tokenService.getToken();return null!==c&&!t.headers.has(this.headerName)&&(t=t.clone({headers:t.headers.set(this.headerName,c)})),r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG($f),p.LFG(ys))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),qf=(()=>{class n{constructor(t,r){this.backend=t,this.injector=r,this.chain=null}handle(t){if(null===this.chain){const r=this.injector.get(S,[]);this.chain=r.reduceRight((a,c)=>new C(a,c),this.backend)}return this.chain.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(ER),p.LFG(p.zs3))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),ow=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:Zc,useClass:N}]}}static withOptions(t={}){return{ngModule:n,providers:[t.cookieName?{provide:fr,useValue:t.cookieName}:[],t.headerName?{provide:ys,useValue:t.headerName}:[]]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[Zc,{provide:S,useExisting:Zc,multi:!0},{provide:$f,useClass:Gf},{provide:fr,useValue:"XSRF-TOKEN"},{provide:ys,useValue:"X-XSRF-TOKEN"}]}),n})(),aw=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[b,{provide:wT,useClass:qf},qt,{provide:ER,useExisting:qt}],imports:[[ow.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),n})(),TT=(()=>{class n{constructor(t,r,a){this.angularFireAuth=t,this.router=r,this.http=a,this.defaultProfilePhoto="https://www.placecage.com/g/200/200",this.user=this.angularFireAuth.user,console.log("User ID Token at the constructor of UserService: ",localStorage.getItem("userIdToken")),this.user.subscribe(c=>{null!=c&&(console.log("User Info is available",c),this.storeIdToken(c.getIdToken()))}),this.angularFireAuth.onAuthStateChanged(c=>{console.log(c?c.email+" is Logged in!":"User is Logged Out")})}storeIdToken(t){t.then(r=>{localStorage.setItem("userIdToken",r),console.log("Id Token is available: ",localStorage.getItem("userIdToken"))})}logInUser(t,r){this.angularFireAuth.signInWithEmailAndPassword(t,r).then(a=>{console.log("log in successfull",a),this.router.navigate(["/albums/recent"])},a=>{console.log("error logging in: ",a)})}signUpUser(t,r,a){this.angularFireAuth.createUserWithEmailAndPassword(t,r).then(c=>{console.log("user sign up successfull",c),this.registerUser(t,a)},c=>{console.log("user sign up error")})}registerUser(t,r){this.http.post("http://54.166.192.54:8080/api/user/register",{id:"",name:r,email:t,profilePhotoUrl:this.defaultProfilePhoto}).subscribe(c=>{console.log("Registration successfull"),this.router.navigate(["/albums/recent"])})}logOutUser(){localStorage.clear(),this.angularFireAuth.signOut().then(()=>{console.log("user sign out"),this.router.navigate(["/login"])},t=>{console.log("Error logging out")})}canActivate(){return null!=this.angularFireAuth.currentUser?(console.log("User can Navigate"),!0):(console.log("User not allowed to Navigate"),this.router.navigate(["login"]),!1)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Hf),p.LFG(Dr),p.LFG(b))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var fO=F(1555);function AT(n,e){return new Hr.y(t=>{const r=n.length;if(0===r)return void t.complete();const a=new Array(r);let c=0,h=0;for(let y=0;y<r;y++){const w=(0,mn.D)(n[y]);let D=!1;t.add(w.subscribe({next:R=>{D||(D=!0,h++),a[y]=R},error:R=>t.error(R),complete:()=>{c++,(c===r||!D)&&(h===r&&t.next(e?e.reduce((R,O,G)=>(R[O]=a[G],R),{}):a),t.complete())}}))}})}let cN=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=a=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.Qsj),p.Y36(p.SBq))},n.\u0275dir=p.lG2({type:n}),n})(),Sm=(()=>{class n extends cN{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=p.n5z(n)))(r||n)}}(),n.\u0275dir=p.lG2({type:n,features:[p.qOj]}),n})();const Kc=new p.OlP("NgValueAccessor"),mO={provide:Kc,useExisting:(0,p.Gpc)(()=>Iv),multi:!0},_O=new p.OlP("CompositionEventMode");let Iv=(()=>{class n extends cN{constructor(t,r,a){super(t,r),this._compositionMode=a,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const n=L()?L().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.Qsj),p.Y36(p.SBq),p.Y36(_O,8))},n.\u0275dir=p.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&p.NdJ("input",function(c){return r._handleInput(c.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(c){return r._compositionEnd(c.target.value)})},features:[p._Bn([mO]),p.qOj]}),n})();const _s=new p.OlP("NgValidators"),Wf=new p.OlP("NgAsyncValidators");function EN(n){return null!=n}function bN(n){const e=(0,p.QGY)(n)?(0,mn.D)(n):n;return(0,p.CqO)(e),e}function wN(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function IN(n,e){return e.map(t=>t(n))}function CN(n){return n.map(e=>function(n){return!n.validate}(e)?e:t=>e.validate(t))}function xR(n){return null!=n?function(n){if(!n)return null;const e=n.filter(EN);return 0==e.length?null:function(t){return wN(IN(t,e))}}(CN(n)):null}function RR(n){return null!=n?function(n){if(!n)return null;const e=n.filter(EN);return 0==e.length?null:function(t){return function(...n){if(1===n.length){const e=n[0];if((0,Zs.k)(e))return AT(e,null);if((0,fO.K)(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return AT(t.map(r=>e[r]),t)}}if("function"==typeof n[n.length-1]){const e=n.pop();return AT(n=1===n.length&&(0,Zs.k)(n[0])?n[0]:n,null).pipe((0,wt.U)(t=>e(...t)))}return AT(n,null)}(IN(t,e).map(bN)).pipe((0,wt.U)(wN))}}(CN(n)):null}function AN(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function MR(n){return n?Array.isArray(n)?n:[n]:[]}function ST(n,e){return Array.isArray(n)?n.includes(e):n===e}function RN(n,e){const t=MR(e);return MR(n).forEach(a=>{ST(t,a)||t.push(a)}),t}function MN(n,e){return MR(e).filter(t=>!ST(n,t))}let NN=(()=>{class n{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=xR(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=RR(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,r){return!!this.control&&this.control.hasError(t,r)}getError(t,r){return this.control?this.control.getError(t,r):null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=p.lG2({type:n}),n})(),Vs=(()=>{class n extends NN{get formDirective(){return null}get path(){return null}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=p.n5z(n)))(r||n)}}(),n.\u0275dir=p.lG2({type:n,features:[p.qOj]}),n})();class Kf extends NN{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}let xT=(()=>{class n extends class{constructor(e){this._cd=e}is(e){var t,r,a;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(a=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===a?void 0:a[e])}}{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(Kf,2))},n.\u0275dir=p.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&p.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[p.qOj]}),n})();function uw(n,e){(function(n,e){const t=function(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(AN(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(AN(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const a=()=>n.updateValueAndValidity();OT(e._rawValidators,a),OT(e._rawAsyncValidators,a)})(n,e),e.valueAccessor.writeValue(n.value),function(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&PN(n,e)})}(n,e),function(n,e){const t=(r,a)=>{e.valueAccessor.writeValue(r),a&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&PN(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function OT(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function PN(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function kT(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const cw="VALID",FT="INVALID",Cv="PENDING",lw="DISABLED";function LR(n){return(UR(n)?n.validators:n)||null}function LN(n){return Array.isArray(n)?xR(n):n||null}function VR(n,e){return(UR(e)?e.asyncValidators:n)||null}function VN(n){return Array.isArray(n)?RR(n):n||null}function UR(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class BR{constructor(e,t){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=LN(this._rawValidators),this._composedAsyncValidatorFn=VN(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===cw}get invalid(){return this.status===FT}get pending(){return this.status==Cv}get disabled(){return this.status===lw}get enabled(){return this.status!==lw}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=LN(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=VN(e)}addValidators(e){this.setValidators(RN(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(RN(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(MN(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(MN(e,this._rawAsyncValidators))}hasValidator(e){return ST(this._rawValidators,e)}hasAsyncValidator(e){return ST(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Cv,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=lw,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=cw,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===cw||this.status===Cv)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?lw:cw}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Cv,this._hasOwnPendingAsyncValidator=!0;const t=bN(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(a=>{r=r instanceof jR?r.controls.hasOwnProperty(a)?r.controls[a]:null:r instanceof OO&&r.at(a)||null}),r}(this,e)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new p.vpe,this.statusChanges=new p.vpe}_calculateStatus(){return this._allControlsDisabled()?lw:this.errors?FT:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Cv)?Cv:this._anyControlsHaveStatus(FT)?FT:cw}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){UR(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class LT extends BR{constructor(e=null,t,r){super(LR(t),VR(r,t)),this._onChange=[],this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=null,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){kT(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){kT(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class jR extends BR{constructor(e,t,r){super(LR(t),VR(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){this._checkAllValuesPresent(e),Object.keys(e).forEach(r=>{this._throwIfControlMissing(r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,a)=>{r.reset(e[a],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t instanceof LT?t.value:t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[e])throw new Error(`Cannot find form control with name: ${e}.`)}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((a,c)=>{r=t(r,a,c)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(e){this._forEachChild((t,r)=>{if(void 0===e[r])throw new Error(`Must supply a value for form control with name: '${r}'.`)})}}class OO extends BR{constructor(e,t,r){super(LR(t),VR(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){this._checkAllValuesPresent(e),e.forEach((r,a)=>{this._throwIfControlMissing(a),this.at(a).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,a)=>{this.at(a)&&this.at(a).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,a)=>{r.reset(e[a],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e instanceof LT?e.value:e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(e))throw new Error(`Cannot find form control at index ${e}`)}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_checkAllValuesPresent(e){this._forEachChild((t,r)=>{if(void 0===e[r])throw new Error(`Must supply a value for form control at index: ${r}.`)})}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const FO={provide:Kf,useExisting:(0,p.Gpc)(()=>hw)},jN=(()=>Promise.resolve(null))();let hw=(()=>{class n extends Kf{constructor(t,r,a,c){super(),this.control=new LT,this._registered=!1,this.update=new p.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(a),this.valueAccessor=function(n,e){if(!e)return null;let t,r,a;return Array.isArray(e),e.forEach(c=>{c.constructor===Iv?t=c:function(n){return Object.getPrototypeOf(n.constructor)===Sm}(c)?r=c:a=c}),a||r||t||null}(0,c)}ngOnChanges(t){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in t&&this._updateDisabled(t),function(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?function(n,e){return[...e.path,n]}(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){uw(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){jN.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1})})}_updateDisabled(t){const r=t.isDisabled.currentValue,a=""===r||r&&"false"!==r;jN.then(()=>{a&&!this.control.disabled?this.control.disable():!a&&this.control.disabled&&this.control.enable()})}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(Vs,9),p.Y36(_s,10),p.Y36(Wf,10),p.Y36(Kc,10))},n.\u0275dir=p.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[p._Bn([FO]),p.qOj,p.TTD]}),n})(),$N=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({}),n})(),oO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[[$N]]}),n})(),a1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[oO]}),n})(),aO=(()=>{class n{constructor(t){this.userService=t,this.signInFormVisible=!0}ngOnInit(){}logIn(){this.userService.logInUser(this.email,this.password),this.email="",this.password=""}makeSignInFormVisible(){this.signInFormVisible=!0}makeSignUpFormVisible(){this.signInFormVisible=!1}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(TT))},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-login"]],decls:23,vars:2,consts:[[1,"container-fluid"],[1,"row"],[1,"col-md-6","offset-md-2","mt-3"],[1,"card"],[1,"card-header"],[1,"card-body"],[1,"mb-3"],["for","exampleInputEmail1",1,"form-label"],["type","email","id","exampleInputEmail1","aria-describedby","emailHelp",1,"form-control",3,"ngModel","ngModelChange"],["for","exampleInputPassword1",1,"form-label"],["type","password","id","exampleInputPassword1",1,"form-control",3,"ngModel","ngModelChange"],["type","submit",1,"btn","btn-primary",3,"click"],[1,"mt-3"],["href","registration",1,"link-primary",3,"click"]],template:function(t,r){1&t&&(p.TgZ(0,"div",0),p.TgZ(1,"div",1),p.TgZ(2,"div",2),p.TgZ(3,"div",3),p.TgZ(4,"div",4),p._uU(5,"Welcome"),p.qZA(),p.TgZ(6,"div",5),p.TgZ(7,"div"),p.TgZ(8,"div",6),p.TgZ(9,"label",7),p._uU(10,"Email address"),p.qZA(),p.TgZ(11,"input",8),p.NdJ("ngModelChange",function(c){return r.email=c}),p.qZA(),p.qZA(),p.TgZ(12,"div",6),p.TgZ(13,"label",9),p._uU(14,"Password"),p.qZA(),p.TgZ(15,"input",10),p.NdJ("ngModelChange",function(c){return r.password=c}),p.qZA(),p.qZA(),p.TgZ(16,"button",11),p.NdJ("click",function(){return r.logIn()}),p._uU(17,"Log In"),p.qZA(),p.qZA(),p.TgZ(18,"div",12),p._uU(19," Don't have an account? "),p.TgZ(20,"a",13),p.NdJ("click",function(){return r.makeSignUpFormVisible()}),p._uU(21,"Sign Up"),p.qZA(),p._uU(22," from here. "),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.qZA()),2&t&&(p.xp6(11),p.Q6J("ngModel",r.email),p.xp6(4),p.Q6J("ngModel",r.password))},directives:[Iv,xT,hw],styles:[""]}),n})(),u1=(()=>{class n{constructor(t){this.userService=t}ngOnInit(){}signUp(){this.userService.signUpUser(this.email,this.password,this.name),this.email="",this.password=""}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(TT))},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-registration"]],decls:27,vars:3,consts:[[1,"container-fluid"],[1,"row"],[1,"col-md-6","offset-md-2","mt-3"],[1,"card"],[1,"card-header"],[1,"card-body"],[1,"mb-3"],["for","exampleInputEmail1",1,"form-label"],["type","email","id","exampleInputEmail1","aria-describedby","emailHelp",1,"form-control",3,"ngModel","ngModelChange"],["for","exampleInputPassword1",1,"form-label"],["type","password","id","exampleInputPassword1",1,"form-control",3,"ngModel","ngModelChange"],["for","inputName",1,"form-label"],["type","text","placeholder","Enter name",1,"form-control",3,"ngModel","ngModelChange"],["type","submit",1,"btn","btn-primary",3,"click"],[1,"mt-3"],["href","login",1,"link-primary"]],template:function(t,r){1&t&&(p.TgZ(0,"div",0),p.TgZ(1,"div",1),p.TgZ(2,"div",2),p.TgZ(3,"div",3),p.TgZ(4,"div",4),p._uU(5,"Register In Our Application"),p.qZA(),p.TgZ(6,"div",5),p.TgZ(7,"div"),p.TgZ(8,"div",6),p.TgZ(9,"label",7),p._uU(10,"Email address"),p.qZA(),p.TgZ(11,"input",8),p.NdJ("ngModelChange",function(c){return r.email=c}),p.qZA(),p.qZA(),p.TgZ(12,"div",6),p.TgZ(13,"label",9),p._uU(14,"Password"),p.qZA(),p.TgZ(15,"input",10),p.NdJ("ngModelChange",function(c){return r.password=c}),p.qZA(),p.qZA(),p.TgZ(16,"div",6),p.TgZ(17,"label",11),p._uU(18,"Name"),p.qZA(),p.TgZ(19,"input",12),p.NdJ("ngModelChange",function(c){return r.name=c}),p.qZA(),p.qZA(),p.TgZ(20,"button",13),p.NdJ("click",function(){return r.signUp()}),p._uU(21,"Submit"),p.qZA(),p.qZA(),p.TgZ(22,"div",14),p._uU(23," Already have an account? "),p.TgZ(24,"a",15),p._uU(25,"Login "),p.qZA(),p._uU(26," from here. "),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.qZA()),2&t&&(p.xp6(11),p.Q6J("ngModel",r.email),p.xp6(4),p.Q6J("ngModel",r.password),p.xp6(4),p.Q6J("ngModel",r.name))},directives:[Iv,xT,hw],styles:[""]}),n})();function c1(n,e){if(1&n&&(p.TgZ(0,"li"),p._uU(1),p.qZA()),2&n){const t=e.$implicit;p.xp6(1),p.Oqu(t)}}let l1=(()=>{class n{constructor(){this.title="Profile Page",this.imageURL="https://cdn-icons-png.flaticon.com/512/1250/1250689.png",this.viewCount=0,this.name="default",this.list=["item 1","item 2","item 3"]}ngOnInit(){}incrementCount(){this.viewCount++}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-profile"]],decls:17,vars:7,consts:[["width","300",3,"src"],[3,"click"],["type","text",3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"]],template:function(t,r){1&t&&(p.TgZ(0,"p"),p._uU(1,"profile works!"),p.qZA(),p.TgZ(2,"h1"),p._uU(3),p.qZA(),p._UZ(4,"img",0),p._UZ(5,"br"),p.TgZ(6,"button",1),p.NdJ("click",function(){return r.incrementCount()}),p._uU(7,"Click to increase view count"),p.qZA(),p.TgZ(8,"p"),p._uU(9),p.qZA(),p.TgZ(10,"div"),p.TgZ(11,"input",2),p.NdJ("ngModelChange",function(c){return r.name=c}),p.qZA(),p.TgZ(12,"p"),p._uU(13),p.qZA(),p.qZA(),p.TgZ(14,"ul"),p.YNc(15,c1,2,1,"li",3),p.qZA(),p._uU(16)),2&t&&(p.xp6(3),p.Oqu(r.title),p.xp6(1),p.Q6J("src",r.imageURL,p.LSH),p.xp6(5),p.hij("Counter: ",r.viewCount,""),p.xp6(2),p.Q6J("ngModel",r.name),p.xp6(2),p.hij("Hello, ",r.name,""),p.xp6(2),p.Q6J("ngForOf",r.list),p.xp6(1),p.hij("\n",r.list,""))},directives:[Iv,xT,hw,Lr],styles:[""]}),n})();const d1=function(){return["/create"]},h1=function(){return["/album",11]};let f1=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-my-albums"]],decls:7,vars:4,consts:[[1,"float-right",2,"padding-right","35px","padding-top","30px"],[1,"btn","btn-success",3,"routerLink"],[3,"routerLink"]],template:function(t,r){1&t&&(p.TgZ(0,"div",0),p.TgZ(1,"a",1),p._uU(2," Create Album "),p.qZA(),p.qZA(),p._UZ(3,"br"),p._uU(4," All My Albums will be listed here! "),p.TgZ(5,"a",2),p._uU(6," Go to Specific album\n"),p.qZA()),2&t&&(p.xp6(1),p.Q6J("routerLink",p.DdM(2,d1)),p.xp6(4),p.Q6J("routerLink",p.DdM(3,h1)))},directives:[Ra],styles:[""]}),n})(),p1=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-create-album"]],decls:1,vars:0,template:function(t,r){1&t&&p._uU(0,"This Page will allow user to create a new album")},styles:[""]}),n})();const g1=function(n){return["/upload",n]},m1=function(n){return["/photo",n]};let y1=(()=>{class n{constructor(t){this.route=t}ngOnInit(){this.route.paramMap.subscribe(t=>{this.albumId=t.get("albumId"),console.log("Get albumID : ",this.albumId)})}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(Ta))},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-album-details"]],decls:9,vars:6,consts:[[1,"float-right",2,"padding-right","35px","padding-top","30px"],[1,"btn","btn-success",3,"routerLink"]],template:function(t,r){1&t&&(p.TgZ(0,"div",0),p.TgZ(1,"a",1),p._uU(2," Upload Photo "),p.qZA(),p.qZA(),p._UZ(3,"br"),p.TgZ(4,"div",0),p.TgZ(5,"a",1),p._uU(6," Photo Details "),p.qZA(),p.qZA(),p._UZ(7,"br"),p._uU(8,"\nDetails of specific album will be shown here!")),2&t&&(p.xp6(1),p.Q6J("routerLink",p.VKq(2,g1,r.albumId)),p.xp6(4),p.Q6J("routerLink",p.VKq(4,m1,r.albumId)))},directives:[Ra],styles:[""]}),n})();const _1=function(n){return["/album",n]};let v1=(()=>{class n{constructor(t){this.route=t}ngOnInit(){this.route.paramMap.subscribe(t=>{this.albumId=t.get("albumId")})}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(Ta))},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-upload-picture"]],decls:5,vars:3,consts:[[1,"float-right",2,"padding-right","35px","padding-top","30px"],[1,"btn","btn-success",3,"routerLink"]],template:function(t,r){1&t&&(p.TgZ(0,"div",0),p.TgZ(1,"a",1),p._uU(2," Go back to Album "),p.qZA(),p.qZA(),p._UZ(3,"br"),p._uU(4," Will allow user to upload photo from here!")),2&t&&(p.xp6(1),p.Q6J("routerLink",p.VKq(1,_1,r.albumId)))},directives:[Ra],styles:[""]}),n})();const E1=function(){return["/upload",11]};let b1=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-photo-details"]],decls:5,vars:2,consts:[[1,"float-right",2,"padding-right","35px","padding-top","30px"],[1,"btn","btn-success",3,"routerLink"]],template:function(t,r){1&t&&(p.TgZ(0,"div",0),p.TgZ(1,"a",1),p._uU(2," Upload Photo "),p.qZA(),p.qZA(),p._UZ(3,"br"),p._uU(4," Where the details of the photo will be shown!")),2&t&&(p.xp6(1),p.Q6J("routerLink",p.DdM(1,E1)))},directives:[Ra],styles:[""]}),n})(),w1=(()=>{class n{constructor(t){this.http=t}getAllAlbums(){var t=this.getHeaders();return this.http.get("http://54.166.192.54:8080/api/albums",{headers:t})}getOneAlbum(){return this.http.get("http://54.166.192.54:8080/api/album")}getHeaders(){return{idToken:localStorage.getItem("userIdToken")}}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(b))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function I1(n,e){if(1&n&&(p.TgZ(0,"li"),p._uU(1),p.qZA()),2&n){const t=e.$implicit;p.xp6(1),p.AsE("",t.id,"",t.title,"")}}const C1=function(n){return["/album",n]};function D1(n,e){if(1&n&&(p.TgZ(0,"div",3),p.TgZ(1,"div",4),p._UZ(2,"img",5),p.TgZ(3,"div",6),p.TgZ(4,"h5",7),p._uU(5),p.qZA(),p.TgZ(6,"a",8),p._uU(7,"Go To Album"),p.qZA(),p.qZA(),p.qZA(),p.qZA()),2&n){const t=e.$implicit;p.xp6(2),p.Q6J("src",t.coverPhotoUrl,p.LSH),p.xp6(3),p.Oqu(t.title),p.xp6(1),p.Q6J("routerLink",p.VKq(3,C1,t.id))}}let T1=(()=>{class n{constructor(t){this.albumService=t}ngOnInit(){this.albumService.getAllAlbums().subscribe(t=>{this.albums=t,console.log("Got all album response: ",this.albums)}),this.albumService.getOneAlbum().subscribe(t=>{console.log("Got album response: ",t)})}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(w1))},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-recent-albums"]],decls:5,vars:2,consts:[[4,"ngFor","ngForOf"],[1,"row"],["class","col-sm-3 pt-3",4,"ngFor","ngForOf"],[1,"col-sm-3","pt-3"],[1,"card",2,"width","18rem"],["alt","Card image cap",1,"card-img-top",3,"src"],[1,"card-body"],[1,"card-title"],[1,"btn","btn-primary",3,"routerLink"]],template:function(t,r){1&t&&(p._uU(0,"Most recent albums will be listed here! "),p.TgZ(1,"ul"),p.YNc(2,I1,2,2,"li",0),p.qZA(),p.TgZ(3,"div",1),p.YNc(4,D1,8,5,"div",2),p.qZA()),2&t&&(p.xp6(2),p.Q6J("ngForOf",r.albums),p.xp6(2),p.Q6J("ngForOf",r.albums))},directives:[Lr,Ra],styles:[""]}),n})();var A1=F(4022);const YR=(0,wt.U)(n=>!!n);let Yf=(()=>{class n{constructor(t,r){this.router=t,this.auth=r,this.canActivate=(a,c)=>{const h=a.data.authGuardPipe||(()=>YR);return this.auth.user.pipe(sc(1),h(a,c),(0,wt.U)(y=>"boolean"==typeof y?y:Array.isArray(y)?this.router.createUrlTree(y):this.router.parseUrl(y)))}}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Dr),p.LFG(Hf))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();const xm=()=>(n=>(0,A1.z)(YR,(0,wt.U)(e=>e||n)))(["login"]),R1=[{path:"",component:aO},{path:"login",component:aO},{path:"registration",component:u1},{path:"home",component:Iw},{path:"albums/recent",component:T1,canActivate:[Yf],data:{authGuardPipe:xm}},{path:"profile/:profileId",component:l1,canActivate:[Yf],data:{authGuardPipe:xm}},{path:"albums/me",component:f1,canActivate:[Yf],data:{authGuardPipe:xm}},{path:"create",component:p1,canActivate:[Yf],data:{authGuardPipe:xm}},{path:"album/:albumId",component:y1,canActivate:[Yf],data:{authGuardPipe:xm}},{path:"upload/:albumId",component:v1,canActivate:[Yf],data:{authGuardPipe:xm}},{path:"photo/:photoId",component:b1,canActivate:[Yf],data:{authGuardPipe:xm}}];let M1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[[zv.forRoot(R1)],zv]}),n})();function N1(n,e){1&n&&p._UZ(0,"span",10)}function O1(n,e){if(1&n){const t=p.EpF();p.TgZ(0,"button",11),p.NdJ("click",function(){return p.CHM(t),p.oxw().logout()}),p._uU(1,"Logout"),p.qZA()}}const P1=function(){return["/albums/recent"]},k1=function(){return["/profile/me"]},F1=function(){return["/albums/me"]};let L1=(()=>{class n{constructor(t){this.userService=t,this.title="firebase-demo"}signup(){this.userService.signUpUser(this.email,this.password,this.name),this.email=this.password=this.name=""}login(){this.userService.logInUser(this.email,this.password),this.email=this.password=""}logout(){this.userService.logOutUser()}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(TT))},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-root"]],decls:21,vars:12,consts:[[1,"navbar","navbar-expand-lg","navbar-light","bg-light"],[1,"navbar-brand"],["type","button","data-toggle","collapse","data-target","#navbarSupportedContent","aria-controls","navbarSupportedContent","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],["class","navbar-toggler-icon",4,"ngIf"],["id","navbarSupportedContent",1,"collapse","navbar-collapse"],[1,"navbar-nav","mr-auto"],[1,"nav-item"],[1,"nav-link",3,"routerLink"],[1,"nav-item","btn-danger",2,"padding-right","30px","padding-top","20px"],[3,"click",4,"ngIf"],[1,"navbar-toggler-icon"],[3,"click"]],template:function(t,r){1&t&&(p.TgZ(0,"nav",0),p.TgZ(1,"a",1),p._uU(2,"My Photo Application"),p.qZA(),p.TgZ(3,"button",2),p.YNc(4,N1,1,0,"span",3),p.ALo(5,"async"),p.qZA(),p.TgZ(6,"div",4),p.TgZ(7,"ul",5),p.TgZ(8,"li",6),p.TgZ(9,"a",7),p._uU(10,"Home"),p.qZA(),p.qZA(),p.TgZ(11,"li",6),p.TgZ(12,"a",7),p._uU(13,"Profile"),p.qZA(),p.qZA(),p.TgZ(14,"li",6),p.TgZ(15,"a",7),p._uU(16,"Albums"),p.qZA(),p.qZA(),p.TgZ(17,"li",8),p.YNc(18,O1,2,0,"button",9),p.ALo(19,"async"),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p._UZ(20,"router-outlet")),2&t&&(p.xp6(4),p.Q6J("ngIf",p.lcZ(5,5,r.userService.user)),p.xp6(5),p.Q6J("routerLink",p.DdM(9,P1)),p.xp6(3),p.Q6J("routerLink",p.DdM(10,k1)),p.xp6(3),p.Q6J("routerLink",p.DdM(11,F1)),p.xp6(3),p.Q6J("ngIf",p.lcZ(19,7,r.userService.user)))},directives:[Vr,Ra,gy],pipes:[Uu],styles:[""]}),n})(),V1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n,bootstrap:[L1]}),n.\u0275inj=p.cJS({providers:[TT],imports:[[ma,M1,a1,ku.hO.initializeApp(lv_firebaseConfig),vR,aw]]}),n})();(0,p.G48)(),ll().bootstrapModule(V1).catch(n=>console.error(n))},3394:(ze,fe,F)=>{"use strict";F.d(fe,{Z:()=>ke});var p=F(3854),X=F(3910),L=F(8026),ie=F(5422);class oe{constructor(ue,Ne){this._delegate=ue,this.firebase=Ne,(0,L._addComponent)(ue,new X.wA("app-compat",()=>this,"PUBLIC")),this.container=ue.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ue){this._delegate.automaticDataCollectionEnabled=ue}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ue=>{this._delegate.checkDestroyed(),ue()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,L.deleteApp)(this._delegate)))}_getService(ue,Ne=L._DEFAULT_ENTRY_NAME){var Le;this._delegate.checkDestroyed();const Ce=this._delegate.container.getProvider(ue);return!Ce.isInitialized()&&"EXPLICIT"===(null===(Le=Ce.getComponent())||void 0===Le?void 0:Le.instantiationMode)&&Ce.initialize(),Ce.getImmediate({identifier:Ne})}_removeServiceInstance(ue,Ne=L._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ue).clearInstance(Ne)}_addComponent(ue){(0,L._addComponent)(this._delegate,ue)}_addOrOverwriteComponent(ue){(0,L._addOrOverwriteComponent)(this._delegate,ue)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const me=new p.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),V=function ee(){const _e=function(_e){const ue={},Ne={__esModule:!0,initializeApp:function(Et,Oe={}){const Re=L.initializeApp(Et,Oe);if((0,p.r3)(ue,Re.name))return ue[Re.name];const je=new _e(Re,Ne);return ue[Re.name]=je,je},app:Ce,registerVersion:L.registerVersion,setLogLevel:L.setLogLevel,onLog:L.onLog,apps:null,SDK_VERSION:L.SDK_VERSION,INTERNAL:{registerComponent:function(Et){const Oe=Et.name,Re=Oe.replace("-compat","");if(L._registerComponent(Et)&&"PUBLIC"===Et.type){const je=(et=Ce())=>{if("function"!=typeof et[Re])throw me.create("invalid-app-argument",{appName:Oe});return et[Re]()};void 0!==Et.serviceProps&&(0,p.ZB)(je,Et.serviceProps),Ne[Re]=je,_e.prototype[Re]=function(...et){return this._getService.bind(this,Oe).apply(this,Et.multipleInstances?et:[])}}return"PUBLIC"===Et.type?Ne[Re]:null},removeApp:function(Et){delete ue[Et]},useAsService:function(Et,Oe){return"serverAuth"===Oe?null:Oe},modularAPIs:L}};function Ce(Et){if(!(0,p.r3)(ue,Et=Et||L._DEFAULT_ENTRY_NAME))throw me.create("no-app",{appName:Et});return ue[Et]}return Ne.default=Ne,Object.defineProperty(Ne,"apps",{get:function(){return Object.keys(ue).map(Et=>ue[Et])}}),Ce.App=_e,Ne}(oe);return _e.INTERNAL=Object.assign(Object.assign({},_e.INTERNAL),{createFirebaseNamespace:ee,extendNamespace:function(Ne){(0,p.ZB)(_e,Ne)},createSubscribe:p.ne,ErrorFactory:p.LL,deepExtend:p.ZB}),_e}(),k=new ie.Yd("@firebase/app-compat");if((0,p.jU)()&&void 0!==self.firebase){k.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const _e=self.firebase.SDK_VERSION;_e&&_e.indexOf("LITE")>=0&&k.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const ke=V;(0,L.registerVersion)("@firebase/app-compat","0.1.37",undefined)},8026:(ze,fe,F)=>{"use strict";F.r(fe),F.d(fe,{FirebaseError:()=>ie.ZR,SDK_VERSION:()=>vs,_DEFAULT_ENTRY_NAME:()=>Mr,_addComponent:()=>Ei,_addOrOverwriteComponent:()=>Us,_apps:()=>sr,_clearComponents:()=>Qi,_components:()=>Er,_getProvider:()=>$t,_registerComponent:()=>dn,_removeServiceInstance:()=>Nr,deleteApp:()=>br,getApp:()=>Or,getApps:()=>Te,initializeApp:()=>Un,onLog:()=>_n,registerVersion:()=>sn,setLogLevel:()=>Bs});var p=F(8239),X=F(3910),L=F(5422),ie=F(3854),oe=F(4359);class ne{constructor(ve){this.container=ve}getPlatformInfoString(){return this.container.getProviders().map(Ae=>{if(function(qe){const ve=qe.getComponent();return"VERSION"===(null==ve?void 0:ve.type)}(Ae)){const yt=Ae.getImmediate();return`${yt.library}/${yt.version}`}return null}).filter(Ae=>Ae).join(" ")}}const le="@firebase/app",V=new L.Yd("@firebase/app"),Mr="[DEFAULT]",Yc={[le]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},sr=new Map,Er=new Map;function Ei(qe,ve){try{qe.container.addComponent(ve)}catch(Ae){V.debug(`Component ${ve.name} failed to register with FirebaseApp ${qe.name}`,Ae)}}function Us(qe,ve){qe.container.addOrOverwriteComponent(ve)}function dn(qe){const ve=qe.name;if(Er.has(ve))return V.debug(`There were multiple attempts to register component ${ve}.`),!1;Er.set(ve,qe);for(const Ae of sr.values())Ei(Ae,qe);return!0}function $t(qe,ve){const Ae=qe.container.getProvider("heartbeat").getImmediate({optional:!0});return Ae&&Ae.triggerHeartbeat(),qe.container.getProvider(ve)}function Nr(qe,ve,Ae=Mr){$t(qe,ve).clearInstance(Ae)}function Qi(){Er.clear()}const mt=new ie.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Vn{constructor(ve,Ae,yt){this._isDeleted=!1,this._options=Object.assign({},ve),this._config=Object.assign({},Ae),this._name=Ae.name,this._automaticDataCollectionEnabled=Ae.automaticDataCollectionEnabled,this._container=yt,this.container.addComponent(new X.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ve){this.checkDestroyed(),this._automaticDataCollectionEnabled=ve}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(ve){this._isDeleted=ve}checkDestroyed(){if(this.isDeleted)throw mt.create("app-deleted",{appName:this._name})}}const vs="9.12.1";function Un(qe,ve={}){let Ae=qe;"object"!=typeof ve&&(ve={name:ve});const yt=Object.assign({name:Mr,automaticDataCollectionEnabled:!1},ve),bt=yt.name;if("string"!=typeof bt||!bt)throw mt.create("bad-app-name",{appName:String(bt)});if(Ae||(Ae=(0,ie.aH)()),!Ae)throw mt.create("no-options");const Wt=sr.get(bt);if(Wt){if((0,ie.vZ)(Ae,Wt.options)&&(0,ie.vZ)(yt,Wt.config))return Wt;throw mt.create("duplicate-app",{appName:bt})}const $=new X.H0(bt);for(const W of Er.values())$.addComponent(W);const j=new Vn(Ae,yt,$);return sr.set(bt,j),j}function Or(qe=Mr){const ve=sr.get(qe);if(!ve&&qe===Mr)return Un();if(!ve)throw mt.create("no-app",{appName:qe});return ve}function Te(){return Array.from(sr.values())}function br(qe){return Cn.apply(this,arguments)}function Cn(){return(Cn=(0,p.Z)(function*(qe){const ve=qe.name;sr.has(ve)&&(sr.delete(ve),yield Promise.all(qe.container.getProviders().map(Ae=>Ae.delete())),qe.isDeleted=!0)})).apply(this,arguments)}function sn(qe,ve,Ae){var yt;let bt=null!==(yt=Yc[qe])&&void 0!==yt?yt:qe;Ae&&(bt+=`-${Ae}`);const Wt=bt.match(/\s|\//),$=ve.match(/\s|\//);if(Wt||$){const j=[`Unable to register library "${bt}" with version "${ve}":`];return Wt&&j.push(`library name "${bt}" contains illegal characters (whitespace or "/")`),Wt&&$&&j.push("and"),$&&j.push(`version name "${ve}" contains illegal characters (whitespace or "/")`),void V.warn(j.join(" "))}dn(new X.wA(`${bt}-version`,()=>({library:bt,version:ve}),"VERSION"))}function _n(qe,ve){if(null!==qe&&"function"!=typeof qe)throw mt.create("invalid-log-argument");(0,L.Am)(qe,ve)}function Bs(qe){(0,L.Ub)(qe)}const Pr="firebase-heartbeat-store";let kr=null;function si(){return kr||(kr=(0,oe.X3)("firebase-heartbeat-database",1,{upgrade:(qe,ve)=>{0===ve&&qe.createObjectStore(Pr)}}).catch(qe=>{throw mt.create("idb-open",{originalErrorMessage:qe.message})})),kr}function nt(){return(nt=(0,p.Z)(function*(qe){var ve;try{return(yield si()).transaction(Pr).objectStore(Pr).get(bi(qe))}catch(Ae){if(Ae instanceof ie.ZR)V.warn(Ae.message);else{const yt=mt.create("idb-get",{originalErrorMessage:null===(ve=Ae)||void 0===ve?void 0:ve.message});V.warn(yt.message)}}})).apply(this,arguments)}function tt(qe,ve){return Wn.apply(this,arguments)}function Wn(){return(Wn=(0,p.Z)(function*(qe,ve){var Ae;try{const bt=(yield si()).transaction(Pr,"readwrite");return yield bt.objectStore(Pr).put(ve,bi(qe)),bt.done}catch(yt){if(yt instanceof ie.ZR)V.warn(yt.message);else{const bt=mt.create("idb-set",{originalErrorMessage:null===(Ae=yt)||void 0===Ae?void 0:Ae.message});V.warn(bt.message)}}})).apply(this,arguments)}function bi(qe){return`${qe.name}!${qe.options.appId}`}class Kt{constructor(ve){this.container=ve,this._heartbeatsCache=null;const Ae=this.container.getProvider("app").getImmediate();this._storage=new za(Ae),this._heartbeatsCachePromise=this._storage.read().then(yt=>(this._heartbeatsCache=yt,yt))}triggerHeartbeat(){var ve=this;return(0,p.Z)(function*(){const yt=ve.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),bt=ho();if(null===ve._heartbeatsCache&&(ve._heartbeatsCache=yield ve._heartbeatsCachePromise),ve._heartbeatsCache.lastSentHeartbeatDate!==bt&&!ve._heartbeatsCache.heartbeats.some(Wt=>Wt.date===bt))return ve._heartbeatsCache.heartbeats.push({date:bt,agent:yt}),ve._heartbeatsCache.heartbeats=ve._heartbeatsCache.heartbeats.filter(Wt=>{const $=new Date(Wt.date).valueOf();return Date.now()-$<=2592e6}),ve._storage.overwrite(ve._heartbeatsCache)})()}getHeartbeatsHeader(){var ve=this;return(0,p.Z)(function*(){if(null===ve._heartbeatsCache&&(yield ve._heartbeatsCachePromise),null===ve._heartbeatsCache||0===ve._heartbeatsCache.heartbeats.length)return"";const Ae=ho(),{heartbeatsToSend:yt,unsentEntries:bt}=function(qe,ve=1024){const Ae=[];let yt=qe.slice();for(const bt of qe){const Wt=Ae.find($=>$.agent===bt.agent);if(Wt){if(Wt.dates.push(bt.date),Ke(Ae)>ve){Wt.dates.pop();break}}else if(Ae.push({agent:bt.agent,dates:[bt.date]}),Ke(Ae)>ve){Ae.pop();break}yt=yt.slice(1)}return{heartbeatsToSend:Ae,unsentEntries:yt}}(ve._heartbeatsCache.heartbeats),Wt=(0,ie.L)(JSON.stringify({version:2,heartbeats:yt}));return ve._heartbeatsCache.lastSentHeartbeatDate=Ae,bt.length>0?(ve._heartbeatsCache.heartbeats=bt,yield ve._storage.overwrite(ve._heartbeatsCache)):(ve._heartbeatsCache.heartbeats=[],ve._storage.overwrite(ve._heartbeatsCache)),Wt})()}}function ho(){return(new Date).toISOString().substring(0,10)}class za{constructor(ve){this.app=ve,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,p.Z)(function*(){return!!(0,ie.hl)()&&(0,ie.eu)().then(()=>!0).catch(()=>!1)})()}read(){var ve=this;return(0,p.Z)(function*(){return(yield ve._canUseIndexedDBPromise)&&(yield function(qe){return nt.apply(this,arguments)}(ve.app))||{heartbeats:[]}})()}overwrite(ve){var Ae=this;return(0,p.Z)(function*(){var yt;if(yield Ae._canUseIndexedDBPromise){const Wt=yield Ae.read();return tt(Ae.app,{lastSentHeartbeatDate:null!==(yt=ve.lastSentHeartbeatDate)&&void 0!==yt?yt:Wt.lastSentHeartbeatDate,heartbeats:ve.heartbeats})}})()}add(ve){var Ae=this;return(0,p.Z)(function*(){var yt;if(yield Ae._canUseIndexedDBPromise){const Wt=yield Ae.read();return tt(Ae.app,{lastSentHeartbeatDate:null!==(yt=ve.lastSentHeartbeatDate)&&void 0!==yt?yt:Wt.lastSentHeartbeatDate,heartbeats:[...Wt.heartbeats,...ve.heartbeats]})}})()}}function Ke(qe){return(0,ie.L)(JSON.stringify({version:2,heartbeats:qe})).length}dn(new X.wA("platform-logger",ve=>new ne(ve),"PRIVATE")),dn(new X.wA("heartbeat",ve=>new Kt(ve),"PRIVATE")),sn(le,"0.8.2",""),sn(le,"0.8.2","esm2017"),sn("fire-js","")},3910:(ze,fe,F)=>{"use strict";F.d(fe,{wA:()=>L,H0:()=>le});var p=F(8239),X=F(3854);class L{constructor(V,k,Y){this.name=V,this.instanceFactory=k,this.type=Y,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(V){return this.instantiationMode=V,this}setMultipleInstances(V){return this.multipleInstances=V,this}setServiceProps(V){return this.serviceProps=V,this}setInstanceCreatedCallback(V){return this.onInstanceCreated=V,this}}const ie="[DEFAULT]";class oe{constructor(V,k){this.name=V,this.container=k,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(V){const k=this.normalizeInstanceIdentifier(V);if(!this.instancesDeferred.has(k)){const Y=new X.BH;if(this.instancesDeferred.set(k,Y),this.isInitialized(k)||this.shouldAutoInitialize())try{const K=this.getOrInitializeService({instanceIdentifier:k});K&&Y.resolve(K)}catch(K){}}return this.instancesDeferred.get(k).promise}getImmediate(V){var k;const Y=this.normalizeInstanceIdentifier(null==V?void 0:V.identifier),K=null!==(k=null==V?void 0:V.optional)&&void 0!==k&&k;if(!this.isInitialized(Y)&&!this.shouldAutoInitialize()){if(K)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Y})}catch(se){if(K)return null;throw se}}getComponent(){return this.component}setComponent(V){if(V.name!==this.name)throw Error(`Mismatching Component ${V.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=V,this.shouldAutoInitialize()){if("EAGER"===V.instantiationMode)try{this.getOrInitializeService({instanceIdentifier:ie})}catch(k){}for(const[k,Y]of this.instancesDeferred.entries()){const K=this.normalizeInstanceIdentifier(k);try{const se=this.getOrInitializeService({instanceIdentifier:K});Y.resolve(se)}catch(se){}}}}clearInstance(V=ie){this.instancesDeferred.delete(V),this.instancesOptions.delete(V),this.instances.delete(V)}delete(){var V=this;return(0,p.Z)(function*(){const k=Array.from(V.instances.values());yield Promise.all([...k.filter(Y=>"INTERNAL"in Y).map(Y=>Y.INTERNAL.delete()),...k.filter(Y=>"_delete"in Y).map(Y=>Y._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(V=ie){return this.instances.has(V)}getOptions(V=ie){return this.instancesOptions.get(V)||{}}initialize(V={}){const{options:k={}}=V,Y=this.normalizeInstanceIdentifier(V.instanceIdentifier);if(this.isInitialized(Y))throw Error(`${this.name}(${Y}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const K=this.getOrInitializeService({instanceIdentifier:Y,options:k});for(const[se,ke]of this.instancesDeferred.entries())Y===this.normalizeInstanceIdentifier(se)&&ke.resolve(K);return K}onInit(V,k){var Y;const K=this.normalizeInstanceIdentifier(k),se=null!==(Y=this.onInitCallbacks.get(K))&&void 0!==Y?Y:new Set;se.add(V),this.onInitCallbacks.set(K,se);const ke=this.instances.get(K);return ke&&V(ke,K),()=>{se.delete(V)}}invokeOnInitCallbacks(V,k){const Y=this.onInitCallbacks.get(k);if(Y)for(const K of Y)try{K(V,k)}catch(se){}}getOrInitializeService({instanceIdentifier:V,options:k={}}){let Y=this.instances.get(V);if(!Y&&this.component&&(Y=this.component.instanceFactory(this.container,{instanceIdentifier:(ee=V,ee===ie?void 0:ee),options:k}),this.instances.set(V,Y),this.instancesOptions.set(V,k),this.invokeOnInitCallbacks(Y,V),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,V,Y)}catch(K){}var ee;return Y||null}normalizeInstanceIdentifier(V=ie){return this.component?this.component.multipleInstances?V:ie:V}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class le{constructor(V){this.name=V,this.providers=new Map}addComponent(V){const k=this.getProvider(V.name);if(k.isComponentSet())throw new Error(`Component ${V.name} has already been registered with ${this.name}`);k.setComponent(V)}addOrOverwriteComponent(V){this.getProvider(V.name).isComponentSet()&&this.providers.delete(V.name),this.addComponent(V)}getProvider(V){if(this.providers.has(V))return this.providers.get(V);const k=new oe(V,this);return this.providers.set(V,k),k}getProviders(){return Array.from(this.providers.values())}}},5422:(ze,fe,F)=>{"use strict";F.d(fe,{in:()=>X,Yd:()=>me,Ub:()=>le,Am:()=>ee});const p=[];var X=(()=>{return(V=X||(X={}))[V.DEBUG=0]="DEBUG",V[V.VERBOSE=1]="VERBOSE",V[V.INFO=2]="INFO",V[V.WARN=3]="WARN",V[V.ERROR=4]="ERROR",V[V.SILENT=5]="SILENT",X;var V})();const L={debug:X.DEBUG,verbose:X.VERBOSE,info:X.INFO,warn:X.WARN,error:X.ERROR,silent:X.SILENT},ie=X.INFO,oe={[X.DEBUG]:"log",[X.VERBOSE]:"log",[X.INFO]:"info",[X.WARN]:"warn",[X.ERROR]:"error"},ne=(V,k,...Y)=>{if(k<V.logLevel)return;const K=(new Date).toISOString(),se=oe[k];if(!se)throw new Error(`Attempted to log a message with an invalid logType (value: ${k})`);console[se](`[${K}]  ${V.name}:`,...Y)};class me{constructor(k){this.name=k,this._logLevel=ie,this._logHandler=ne,this._userLogHandler=null,p.push(this)}get logLevel(){return this._logLevel}set logLevel(k){if(!(k in X))throw new TypeError(`Invalid value "${k}" assigned to \`logLevel\``);this._logLevel=k}setLogLevel(k){this._logLevel="string"==typeof k?L[k]:k}get logHandler(){return this._logHandler}set logHandler(k){if("function"!=typeof k)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=k}get userLogHandler(){return this._userLogHandler}set userLogHandler(k){this._userLogHandler=k}debug(...k){this._userLogHandler&&this._userLogHandler(this,X.DEBUG,...k),this._logHandler(this,X.DEBUG,...k)}log(...k){this._userLogHandler&&this._userLogHandler(this,X.VERBOSE,...k),this._logHandler(this,X.VERBOSE,...k)}info(...k){this._userLogHandler&&this._userLogHandler(this,X.INFO,...k),this._logHandler(this,X.INFO,...k)}warn(...k){this._userLogHandler&&this._userLogHandler(this,X.WARN,...k),this._logHandler(this,X.WARN,...k)}error(...k){this._userLogHandler&&this._userLogHandler(this,X.ERROR,...k),this._logHandler(this,X.ERROR,...k)}}function le(V){p.forEach(k=>{k.setLogLevel(V)})}function ee(V,k){for(const Y of p){let K=null;k&&k.level&&(K=L[k.level]),Y.userLogHandler=null===V?null:(se,ke,..._e)=>{const ue=_e.map(Ne=>{if(null==Ne)return null;if("string"==typeof Ne)return Ne;if("number"==typeof Ne||"boolean"==typeof Ne)return Ne.toString();if(Ne instanceof Error)return Ne.message;try{return JSON.stringify(Ne)}catch(Le){return null}}).filter(Ne=>Ne).join(" ");ke>=(null!=K?K:se.logLevel)&&V({level:X[ke].toLowerCase(),message:ue,args:_e,type:se.name})}}}},4359:(ze,fe,F)=>{"use strict";F.d(fe,{Lj:()=>Je,X3:()=>Ce});var p=F(8239);let L,ie;const me=new WeakMap,le=new WeakMap,ee=new WeakMap,V=new WeakMap,k=new WeakMap;let se={get(Oe,Re,je){if(Oe instanceof IDBTransaction){if("done"===Re)return le.get(Oe);if("objectStoreNames"===Re)return Oe.objectStoreNames||ee.get(Oe);if("store"===Re)return je.objectStoreNames[1]?void 0:je.objectStore(je.objectStoreNames[0])}return Ne(Oe[Re])},set:(Oe,Re,je)=>(Oe[Re]=je,!0),has:(Oe,Re)=>Oe instanceof IDBTransaction&&("done"===Re||"store"===Re)||Re in Oe};function ue(Oe){return"function"==typeof Oe?function(Oe){return Oe!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(ie||(ie=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(Oe)?function(...Re){return Oe.apply(Le(this),Re),Ne(me.get(this))}:function(...Re){return Ne(Oe.apply(Le(this),Re))}:function(Re,...je){const et=Oe.call(Le(this),Re,...je);return ee.set(et,Re.sort?Re.sort():[Re]),Ne(et)}}(Oe):(Oe instanceof IDBTransaction&&function(Oe){if(le.has(Oe))return;const Re=new Promise((je,et)=>{const rt=()=>{Oe.removeEventListener("complete",Tt),Oe.removeEventListener("error",Ge),Oe.removeEventListener("abort",Ge)},Tt=()=>{je(),rt()},Ge=()=>{et(Oe.error||new DOMException("AbortError","AbortError")),rt()};Oe.addEventListener("complete",Tt),Oe.addEventListener("error",Ge),Oe.addEventListener("abort",Ge)});le.set(Oe,Re)}(Oe),((Oe,Re)=>Re.some(je=>Oe instanceof je))(Oe,L||(L=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(Oe,se):Oe)}function Ne(Oe){if(Oe instanceof IDBRequest)return function(Oe){const Re=new Promise((je,et)=>{const rt=()=>{Oe.removeEventListener("success",Tt),Oe.removeEventListener("error",Ge)},Tt=()=>{je(Ne(Oe.result)),rt()},Ge=()=>{et(Oe.error),rt()};Oe.addEventListener("success",Tt),Oe.addEventListener("error",Ge)});return Re.then(je=>{je instanceof IDBCursor&&me.set(je,Oe)}).catch(()=>{}),k.set(Re,Oe),Re}(Oe);if(V.has(Oe))return V.get(Oe);const Re=ue(Oe);return Re!==Oe&&(V.set(Oe,Re),k.set(Re,Oe)),Re}const Le=Oe=>k.get(Oe);function Ce(Oe,Re,{blocked:je,upgrade:et,blocking:rt,terminated:Tt}={}){const Ge=indexedDB.open(Oe,Re),Mn=Ne(Ge);return et&&Ge.addEventListener("upgradeneeded",ii=>{et(Ne(Ge.result),ii.oldVersion,ii.newVersion,Ne(Ge.transaction))}),je&&Ge.addEventListener("blocked",()=>je()),Mn.then(ii=>{Tt&&ii.addEventListener("close",()=>Tt()),rt&&ii.addEventListener("versionchange",()=>rt())}).catch(()=>{}),Mn}function Je(Oe,{blocked:Re}={}){const je=indexedDB.deleteDatabase(Oe);return Re&&je.addEventListener("blocked",()=>Re()),Ne(je).then(()=>{})}const ot=["get","getKey","getAll","getAllKeys","count"],Be=["put","add","delete","clear"],Lt=new Map;function Et(Oe,Re){if(!(Oe instanceof IDBDatabase)||Re in Oe||"string"!=typeof Re)return;if(Lt.get(Re))return Lt.get(Re);const je=Re.replace(/FromIndex$/,""),et=Re!==je,rt=Be.includes(je);if(!(je in(et?IDBIndex:IDBObjectStore).prototype)||!rt&&!ot.includes(je))return;const Tt=function(){var Ge=(0,p.Z)(function*(Mn,...ii){const ki=this.transaction(Mn,rt?"readwrite":"readonly");let Mr=ki.store;return et&&(Mr=Mr.index(ii.shift())),(yield Promise.all([Mr[je](...ii),rt&&ki.done]))[0]});return function(ii){return Ge.apply(this,arguments)}}();return Lt.set(Re,Tt),Tt}var Oe;se=dO(lO({},Oe=se),{get:(Re,je,et)=>Et(Re,je)||Oe.get(Re,je,et),has:(Re,je)=>!!Et(Re,je)||Oe.has(Re,je)})},8239:(ze,fe,F)=>{"use strict";function p(L,ie,oe,ne,me,le,ee){try{var V=L[le](ee),k=V.value}catch(Y){return void oe(Y)}V.done?ie(k):Promise.resolve(k).then(ne,me)}function X(L){return function(){var ie=this,oe=arguments;return new Promise(function(ne,me){var le=L.apply(ie,oe);function ee(k){p(le,ne,me,ee,V,"next",k)}function V(k){p(le,ne,me,ee,V,"throw",k)}ee(void 0)})}}F.d(fe,{Z:()=>X})}},ze=>{ze(ze.s=1378)}]);