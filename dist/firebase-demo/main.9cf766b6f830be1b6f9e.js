var y1=Object.defineProperty,_1=Object.defineProperties,v1=Object.getOwnPropertyDescriptors,GN=Object.getOwnPropertySymbols,E1=Object.prototype.hasOwnProperty,b1=Object.prototype.propertyIsEnumerable,qN=(We,me,F)=>me in We?y1(We,me,{enumerable:!0,configurable:!0,writable:!0,value:F}):We[me]=F,WN=(We,me)=>{for(var F in me||(me={}))E1.call(me,F)&&qN(We,F,me[F]);if(GN)for(var F of GN(me))b1.call(me,F)&&qN(We,F,me[F]);return We},zN=(We,me)=>_1(We,v1(me));(self.webpackChunkfirebase_demo=self.webpackChunkfirebase_demo||[]).push([[179],{8255:We=>{function me(F){return Promise.resolve().then(()=>{var g=new Error("Cannot find module '"+F+"'");throw g.code="MODULE_NOT_FOUND",g})}me.keys=()=>[],me.resolve=me,me.id=8255,We.exports=me},3018:(We,me,F)=>{"use strict";F.d(me,{deG:()=>Nm,tb:()=>SD,AFp:()=>DD,ip1:()=>R0,CZH:()=>bd,hGG:()=>sv,z2F:()=>na,sBO:()=>CC,Sil:()=>cm,_Vd:()=>Ba,EJc:()=>k0,SBq:()=>Ko,qLn:()=>no,vpe:()=>kt,gxx:()=>Iu,tBr:()=>hc,XFs:()=>Xe,OlP:()=>bn,zs3:()=>xn,ZZ4:()=>Ug,aQg:()=>b_,soG:()=>am,YKP:()=>gf,v3s:()=>Mx,h0i:()=>Pu,PXZ:()=>fo,R0b:()=>lo,FiY:()=>eo,Lbi:()=>N0,g9A:()=>AD,Qsj:()=>yC,FYo:()=>Vc,JOm:()=>gs,Tiy:()=>E_,q3G:()=>Sn,tp0:()=>Ia,EAV:()=>kx,Rgc:()=>Hg,dDg:()=>kD,DyG:()=>ba,q4F:()=>Uc,GfV:()=>ku,s_b:()=>$g,ifc:()=>Tt,eFA:()=>L0,G48:()=>VD,Gpc:()=>fe,X6Q:()=>dm,_c5:()=>Bx,VLi:()=>MM,c2e:()=>O0,zSh:()=>Bo,wAp:()=>dt,vHH:()=>De,EiD:()=>vp,mCW:()=>Dl,qzn:()=>Hr,JVY:()=>Bm,pB0:()=>fp,eBb:()=>xv,L6k:()=>jm,LAX:()=>pc,cg1:()=>Pi,Tjo:()=>po,kL8:()=>tf,yhl:()=>fc,dqk:()=>Ye,sIi:()=>jh,CqO:()=>Kl,QGY:()=>vg,F4k:()=>PE,RDi:()=>Hi,AaK:()=>K,z3N:()=>Ns,qOj:()=>Uy,TTD:()=>Bi,_Bn:()=>cf,xp6:()=>it,uIk:()=>SE,ekj:()=>jE,Suo:()=>rD,Xpm:()=>ze,lG2:()=>ia,Yz7:()=>yt,cJS:()=>bs,oAB:()=>Dn,Yjl:()=>mo,Y36:()=>Zh,_UZ:()=>vs,qZA:()=>Rc,TgZ:()=>Xy,EpF:()=>Mc,n5z:()=>cs,Ikx:()=>XE,LFG:()=>Pn,$8M:()=>Rs,NdJ:()=>FE,CRH:()=>iD,oxw:()=>bg,ALo:()=>j_,lcZ:()=>s0,Q6J:()=>Kh,DdM:()=>L_,iGM:()=>zS,CHM:()=>tu,LSH:()=>to,kYT:()=>Ut,YNc:()=>de,_uU:()=>a_,Oqu:()=>Dg,hij:()=>Tg});var g=F(9765),X=F(5319),L=F(7574),ae=F(6682),ie=F(2441);var ce=F(1307);function ee(){return new g.xQ}function V(i){for(let s in i)if(i[s]===V)return s;throw Error("Could not find renamed property on target object.")}function Y(i,s){for(const o in s)s.hasOwnProperty(o)&&!i.hasOwnProperty(o)&&(i[o]=s[o])}function K(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(K).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const s=i.toString();if(null==s)return""+s;const o=s.indexOf("\n");return-1===o?s:s.substring(0,o)}function le(i,s){return null==i||""===i?null===s?"":s:null==s||""===s?i:i+" "+s}const be=V({__forward_ref__:V});function fe(i){return i.__forward_ref__=fe,i.toString=function(){return K(this())},i}function he(i){return Te(i)?i():i}function Te(i){return"function"==typeof i&&i.hasOwnProperty(be)&&i.__forward_ref__===fe}class De extends Error{constructor(s,o){super(function(i,s){return`${i?`NG0${i}: `:""}${s}`}(s,o)),this.code=s}}function Be(i){return"string"==typeof i?i:null==i?"":String(i)}function Lt(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():Be(i)}function je(i,s){const o=s?` in ${s}`:"";throw new De("201",`No provider for ${Lt(i)} found${o}`)}function dn(i,s){null==i&&function(i,s,o,u){throw new Error(`ASSERTION ERROR: ${i}`+(null==u?"":` [Expected=> ${o} ${u} ${s} <=Actual]`))}(s,i,null,"!=")}function yt(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function bs(i){return{providers:i.providers||[],imports:i.imports||[]}}function Un(i){return Mr(i,sn)||Mr(i,Hs)}function Mr(i,s){return i.hasOwnProperty(s)?i[s]:null}function Cn(i){return i&&(i.hasOwnProperty(_n)||i.hasOwnProperty(ws))?i[_n]:null}const sn=V({\u0275prov:V}),_n=V({\u0275inj:V}),Hs=V({ngInjectableDef:V}),ws=V({ngInjectorDef:V});var Xe=(()=>((Xe=Xe||{})[Xe.Default=0]="Default",Xe[Xe.Host=1]="Host",Xe[Xe.Self=2]="Self",Xe[Xe.SkipSelf=4]="SkipSelf",Xe[Xe.Optional=8]="Optional",Xe))();let Nr;function si(i){const s=Nr;return Nr=i,s}function hn(i,s,o){const u=Un(i);return u&&"root"==u.providedIn?void 0===u.value?u.value=u.factory():u.value:o&Xe.Optional?null:void 0!==s?s:void je(K(i),"Injector")}function tt(i){return{toString:i}.toString()}var zn=(()=>((zn=zn||{})[zn.OnPush=0]="OnPush",zn[zn.Default=1]="Default",zn))(),Tt=(()=>((Tt=Tt||{})[Tt.Emulated=0]="Emulated",Tt[Tt.None=2]="None",Tt[Tt.ShadowDom=3]="ShadowDom",Tt))();const Kt="undefined"!=typeof globalThis&&globalThis,go="undefined"!=typeof window&&window,on="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Ye=Kt||"undefined"!=typeof global&&global||go||on,ve={},xe=[],_t=V({\u0275cmp:V}),bt=V({\u0275dir:V}),zt=V({\u0275pipe:V}),$=V({\u0275mod:V}),j=V({\u0275loc:V}),z=V({\u0275fac:V}),pe=V({__NG_ELEMENT_ID__:V});let oe=0;function ze(i){return tt(()=>{const o={},u={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:o,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===zn.OnPush,directiveDefs:null,pipeDefs:null,selectors:i.selectors||xe,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||Tt.Emulated,id:"c",styles:i.styles||xe,_:null,setInput:null,schemas:i.schemas||null,tView:null},l=i.directives,d=i.features,m=i.pipes;return u.id+=oe++,u.inputs=pr(i.inputs,o),u.outputs=pr(i.outputs),d&&d.forEach(v=>v(u)),u.directiveDefs=l?()=>("function"==typeof l?l():l).map(Xt):null,u.pipeDefs=m?()=>("function"==typeof m?m():m).map(Zn):null,u})}function Xt(i){return Nn(i)||function(i){return i[bt]||null}(i)}function Zn(i){return function(i){return i[zt]||null}(i)}const Kn={};function Dn(i){return tt(()=>{const s={type:i.type,bootstrap:i.bootstrap||xe,declarations:i.declarations||xe,imports:i.imports||xe,exports:i.exports||xe,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null};return null!=i.id&&(Kn[i.id]=i.type),s})}function Ut(i,s){return tt(()=>{const o=Yn(i,!0);o.declarations=s.declarations||xe,o.imports=s.imports||xe,o.exports=s.exports||xe})}function pr(i,s){if(null==i)return ve;const o={};for(const u in i)if(i.hasOwnProperty(u)){let l=i[u],d=l;Array.isArray(l)&&(d=l[1],l=l[0]),o[l]=u,s&&(s[l]=d)}return o}const ia=ze;function mo(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,onDestroy:i.type.prototype.ngOnDestroy||null}}function Nn(i){return i[_t]||null}function Yn(i,s){const o=i[$]||null;if(!o&&!0===s)throw new Error(`Type ${K(i)} does not have '\u0275mod' property.`);return o}function is(i){return Array.isArray(i)&&"object"==typeof i[1]}function Tn(i){return Array.isArray(i)&&!0===i[1]}function ju(i){return 0!=(8&i.flags)}function Hu(i){return 2==(2&i.flags)}function Is(i){return 1==(1&i.flags)}function Ai(i){return null!==i.template}function $u(i){return 0!=(512&i[2])}function Fr(i,s){return i.hasOwnProperty(z)?i[z]:null}class ss{constructor(s,o,u){this.previousValue=s,this.currentValue=o,this.firstChange=u}isFirstChange(){return this.firstChange}}function Bi(){return Gu}function Gu(i){return i.type.prototype.ngOnChanges&&(i.setInput=Wf),Gd}function Gd(){const i=Ja(this),s=null==i?void 0:i.current;if(s){const o=i.previous;if(o===ve)i.previous=s;else for(let u in s)o[u]=s[u];i.current=null,this.ngOnChanges(s)}}function Wf(i,s,o,u){const l=Ja(i)||function(i,s){return i[rl]=s}(i,{previous:ve,current:null}),d=l.current||(l.current={}),m=l.previous,v=this.declaredInputs[o],b=m[v];d[v]=new ss(b&&b.currentValue,s,m===ve),i[u]=s}Bi.ngInherit=!0;const rl="__ngSimpleChanges__";function Ja(i){return i[rl]||null}let ca;function Hi(i){ca=i}function Yt(i){return!!i.listen}const Cs={createRenderer:(i,s)=>void 0!==ca?ca:"undefined"!=typeof document?document:void 0};function Vt(i){for(;Array.isArray(i);)i=i[0];return i}function Ds(i,s){return Vt(s[i])}function oi(i,s){return Vt(s[i.index])}function Ts(i,s){return i.data[s]}function ar(i,s){const o=s[i];return is(o)?o:o[0]}function Cr(i){return 4==(4&i[2])}function Xa(i){return 128==(128&i[2])}function os(i,s){return null==s?null:i[s]}function bo(i){i[18]=0}function eu(i,s){i[5]+=s;let o=i,u=i[3];for(;null!==u&&(1===s&&1===o[5]||-1===s&&0===o[5]);)u[5]+=s,o=u,u=u[3]}const ht={lFrame:ga(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function la(){return ht.bindingsEnabled}function Ee(){return ht.lFrame.lView}function Bt(){return ht.lFrame.tView}function tu(i){return ht.lFrame.contextLView=i,i[8]}function gn(){let i=Ku();for(;null!==i&&64===i.type;)i=i.parent;return i}function Ku(){return ht.lFrame.currentTNode}function Si(i,s){const o=ht.lFrame;o.currentTNode=i,o.isParent=s}function da(){return ht.lFrame.isParent}function ha(){return ht.isInCheckNoChangesMode}function as(i){ht.isInCheckNoChangesMode=i}function ur(){const i=ht.lFrame;let s=i.bindingRootIndex;return-1===s&&(s=i.bindingRootIndex=i.tView.bindingStartIndex),s}function Ks(){return ht.lFrame.bindingIndex++}function al(i,s){const o=ht.lFrame;o.bindingIndex=o.bindingRootIndex=i,nu(s)}function nu(i){ht.lFrame.currentDirectiveIndex=i}function Yd(){return ht.lFrame.currentQueryIndex}function Ju(i){ht.lFrame.currentQueryIndex=i}function Zf(i){const s=i[1];return 2===s.type?s.declTNode:1===s.type?i[6]:null}function Xu(i,s,o){if(o&Xe.SkipSelf){let l=s,d=i;for(;!(l=l.parent,null!==l||o&Xe.Host||(l=Zf(d),null===l||(d=d[15],10&l.type))););if(null===l)return!1;s=l,i=d}const u=ht.lFrame=Qd();return u.currentTNode=s,u.lView=i,!0}function To(i){const s=Qd(),o=i[1];ht.lFrame=s,s.currentTNode=o.firstChild,s.lView=i,s.tView=o,s.contextLView=i,s.bindingIndex=o.bindingStartIndex,s.inI18n=!1}function Qd(){const i=ht.lFrame,s=null===i?null:i.child;return null===s?ga(i):s}function ga(i){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=s),s}function ul(){const i=ht.lFrame;return ht.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const Am=ul;function ec(){const i=ul();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function Vr(){return ht.lFrame.selectedIndex}function ai(i){ht.lFrame.selectedIndex=i}function En(){const i=ht.lFrame;return Ts(i.tView,i.selectedIndex)}function ma(i,s){for(let o=s.directiveStart,u=s.directiveEnd;o<u;o++){const d=i.data[o].type.prototype,{ngAfterContentInit:m,ngAfterContentChecked:v,ngAfterViewInit:b,ngAfterViewChecked:C,ngOnDestroy:S}=d;m&&(i.contentHooks||(i.contentHooks=[])).push(-o,m),v&&((i.contentHooks||(i.contentHooks=[])).push(o,v),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(o,v)),b&&(i.viewHooks||(i.viewHooks=[])).push(-o,b),C&&((i.viewHooks||(i.viewHooks=[])).push(o,C),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(o,C)),null!=S&&(i.destroyHooks||(i.destroyHooks=[])).push(o,S)}}function tc(i,s,o){nc(i,s,3,o)}function cl(i,s,o,u){(3&i[2])===o&&nc(i,s,o,u)}function su(i,s){let o=i[2];(3&o)===s&&(o&=2047,o+=1,i[2]=o)}function nc(i,s,o,u){const d=null!=u?u:-1,m=s.length-1;let v=0;for(let b=void 0!==u?65535&i[18]:0;b<m;b++)if("number"==typeof s[b+1]){if(v=s[b],null!=u&&v>=u)break}else s[b]<0&&(i[18]+=65536),(v<d||-1==d)&&(ll(i,o,s,b),i[18]=(4294901760&i[18])+b+2),b++}function ll(i,s,o,u){const l=o[u]<0,d=o[u+1],v=i[l?-o[u]:o[u]];if(l){if(i[2]>>11<i[18]>>16&&(3&i[2])===s){i[2]+=2048;try{d.call(v)}finally{}}}else try{d.call(v)}finally{}}class ya{constructor(s,o,u){this.factory=s,this.resolving=!1,this.canSeeViewProviders=o,this.injectImpl=u}}function ou(i,s,o){const u=Yt(i);let l=0;for(;l<o.length;){const d=o[l];if("number"==typeof d){if(0!==d)break;l++;const m=o[l++],v=o[l++],b=o[l++];u?i.setAttribute(s,v,b,m):s.setAttributeNS(m,v,b)}else{const m=d,v=o[++l];ep(m)?u&&i.setProperty(s,m,v):u?i.setAttribute(s,m,v):s.setAttribute(m,v),l++}}return l}function rc(i){return 3===i||4===i||6===i}function ep(i){return 64===i.charCodeAt(0)}function ic(i,s){if(null!==s&&0!==s.length)if(null===i||0===i.length)i=s.slice();else{let o=-1;for(let u=0;u<s.length;u++){const l=s[u];"number"==typeof l?o=l:0===o||tp(i,o,l,null,-1===o||2===o?s[++u]:null)}}return i}function tp(i,s,o,u,l){let d=0,m=i.length;if(-1===s)m=-1;else for(;d<i.length;){const v=i[d++];if("number"==typeof v){if(v===s){m=-1;break}if(v>s){m=d-1;break}}}for(;d<i.length;){const v=i[d];if("number"==typeof v)break;if(v===o){if(null===u)return void(null!==l&&(i[d+1]=l));if(u===i[d+1])return void(i[d+2]=l)}d++,null!==u&&d++,null!==l&&d++}-1!==m&&(i.splice(m,0,s),d=m+1),i.splice(d++,0,o),null!==u&&i.splice(d++,0,u),null!==l&&i.splice(d++,0,l)}function _a(i){return-1!==i}function Gi(i){return 32767&i}function au(i,s){let o=function(i){return i>>16}(i),u=s;for(;o>0;)u=u[15],o--;return u}let sc=!0;function hl(i){const s=sc;return sc=i,s}let ft=0;function So(i,s){const o=oc(i,s);if(-1!==o)return o;const u=s[1];u.firstCreatePass&&(i.injectorIndex=s.length,Dr(u.data,i),Dr(s,null),Dr(u.blueprint,null));const l=Ys(i,s),d=i.injectorIndex;if(_a(l)){const m=Gi(l),v=au(l,s),b=v[1].data;for(let C=0;C<8;C++)s[d+C]=v[m+C]|b[m+C]}return s[d+8]=l,d}function Dr(i,s){i.push(0,0,0,0,0,0,0,0,s)}function oc(i,s){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===s[i.injectorIndex+8]?-1:i.injectorIndex}function Ys(i,s){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let o=0,u=null,l=s;for(;null!==l;){const d=l[1],m=d.type;if(u=2===m?d.declTNode:1===m?l[6]:null,null===u)return-1;if(o++,l=l[15],-1!==u.injectorIndex)return u.injectorIndex|o<<16}return-1}function li(i,s,o){!function(i,s,o){let u;"string"==typeof o?u=o.charCodeAt(0)||0:o.hasOwnProperty(pe)&&(u=o[pe]),null==u&&(u=o[pe]=ft++);const l=255&u;s.data[i+(l>>5)]|=1<<l}(i,s,o)}function rh(i,s,o){if(o&Xe.Optional)return i;je(s,"NodeInjector")}function xs(i,s,o,u){if(o&Xe.Optional&&void 0===u&&(u=null),0==(o&(Xe.Self|Xe.Host))){const l=i[9],d=si(void 0);try{return l?l.get(s,u,o&Xe.Optional):hn(s,u,o&Xe.Optional)}finally{si(d)}}return rh(u,s,o)}function Ur(i,s,o,u=Xe.Default,l){if(null!==i){const d=function(i){if("string"==typeof i)return i.charCodeAt(0)||0;const s=i.hasOwnProperty(pe)?i[pe]:void 0;return"number"==typeof s?s>=0?255&s:xo:s}(o);if("function"==typeof d){if(!Xu(s,i,u))return u&Xe.Host?rh(l,o,u):xs(s,o,u,l);try{const m=d(u);if(null!=m||u&Xe.Optional)return m;je(o)}finally{Am()}}else if("number"==typeof d){let m=null,v=oc(i,s),b=-1,C=u&Xe.Host?s[16][6]:null;for((-1===v||u&Xe.SkipSelf)&&(b=-1===v?Ys(i,s):s[v+8],-1!==b&&Qs(u,!1)?(m=s[1],v=Gi(b),s=au(b,s)):v=-1);-1!==v;){const S=s[1];if(uc(d,v,S.data)){const N=sh(v,s,o,m,u,C);if(N!==ih)return N}b=s[v+8],-1!==b&&Qs(u,s[1].data[v+8]===C)&&uc(d,v,s)?(m=S,v=Gi(b),s=au(b,s)):v=-1}}}return xs(s,o,u,l)}const ih={};function xo(){return new us(gn(),Ee())}function sh(i,s,o,u,l,d){const m=s[1],v=m.data[i+8],S=Qt(v,m,o,null==u?Hu(v)&&sc:u!=m&&0!=(3&v.type),l&Xe.Host&&d===v);return null!==S?va(s,m,S,v):ih}function Qt(i,s,o,u,l){const d=i.providerIndexes,m=s.data,v=1048575&d,b=i.directiveStart,S=d>>20,k=l?v+S:i.directiveEnd;for(let H=u?v:v+S;H<k;H++){const W=m[H];if(H<b&&o===W||H>=b&&W.type===o)return H}if(l){const H=m[b];if(H&&Ai(H)&&H.type===o)return b}return null}function va(i,s,o,u){let l=i[o];const d=s.data;if(function(i){return i instanceof ya}(l)){const m=l;m.resolving&&function(i,s){throw new De("200",`Circular dependency in DI detected for ${i}`)}(Lt(d[o]));const v=hl(m.canSeeViewProviders);m.resolving=!0;const b=m.injectImpl?si(m.injectImpl):null;Xu(i,u,Xe.Default);try{l=i[o]=m.factory(void 0,d,i,u),s.firstCreatePass&&o>=u.directiveStart&&function(i,s,o){const{ngOnChanges:u,ngOnInit:l,ngDoCheck:d}=s.type.prototype;if(u){const m=Gu(s);(o.preOrderHooks||(o.preOrderHooks=[])).push(i,m),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(i,m)}l&&(o.preOrderHooks||(o.preOrderHooks=[])).push(0-i,l),d&&((o.preOrderHooks||(o.preOrderHooks=[])).push(i,d),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(i,d))}(o,d[o],s)}finally{null!==b&&si(b),hl(v),m.resolving=!1,Am()}}return l}function uc(i,s,o){return!!(o[s+(i>>5)]&1<<i)}function Qs(i,s){return!(i&Xe.Self||i&Xe.Host&&s)}class us{constructor(s,o){this._tNode=s,this._lView=o}get(s,o,u){return Ur(this._tNode,this._lView,s,u,o)}}function cs(i){return tt(()=>{const s=i.prototype.constructor,o=s[z]||Js(s),u=Object.prototype;let l=Object.getPrototypeOf(i.prototype).constructor;for(;l&&l!==u;){const d=l[z]||Js(l);if(d&&d!==o)return d;l=Object.getPrototypeOf(l)}return d=>new d})}function Js(i){return Te(i)?()=>{const s=Js(he(i));return s&&s()}:Fr(i)}function Rs(i){return function(i,s){if("class"===s)return i.classes;if("style"===s)return i.styles;const o=i.attrs;if(o){const u=o.length;let l=0;for(;l<u;){const d=o[l];if(rc(d))break;if(0===d)l+=2;else if("number"==typeof d)for(l++;l<u&&"string"==typeof o[l];)l++;else{if(d===s)return o[l+1];l+=2}}}return null}(gn(),i)}const Ro="__parameters__";function qi(i,s,o){return tt(()=>{const u=function(i){return function(...o){if(i){const u=i(...o);for(const l in u)this[l]=u[l]}}}(s);function l(...d){if(this instanceof l)return u.apply(this,d),this;const m=new l(...d);return v.annotation=m,v;function v(b,C,S){const N=b.hasOwnProperty(Ro)?b[Ro]:Object.defineProperty(b,Ro,{value:[]})[Ro];for(;N.length<=S;)N.push(null);return(N[S]=N[S]||[]).push(m),b}}return o&&(l.prototype=Object.create(o.prototype)),l.prototype.ngMetadataName=i,l.annotationCls=l,l})}class bn{constructor(s,o){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof o?this.__NG_ELEMENT_ID__=o:void 0!==o&&(this.\u0275prov=yt({token:this,providedIn:o.providedIn||"root",factory:o.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Nm=new bn("AnalyzeForEntryComponents"),ba=Function;function jr(i,s){void 0===s&&(s=i);for(let o=0;o<i.length;o++){let u=i[o];Array.isArray(u)?(s===i&&(s=i.slice(0,o)),jr(u,s)):s!==i&&s.push(u)}return s}function hi(i,s){i.forEach(o=>Array.isArray(o)?hi(o,s):s(o))}function yl(i,s,o){s>=i.length?i.push(o):i.splice(s,0,o)}function wa(i,s){return s>=i.length-1?i.pop():i.splice(s,1)[0]}function $n(i,s,o){let u=On(i,s);return u>=0?i[1|u]=o:(u=~u,function(i,s,o,u){let l=i.length;if(l==s)i.push(o,u);else if(1===l)i.push(u,i[0]),i[0]=o;else{for(l--,i.push(i[l-1],i[l]);l>s;)i[l]=i[l-2],l--;i[s]=o,i[s+1]=u}}(i,u,s,o)),u}function du(i,s){const o=On(i,s);if(o>=0)return i[1|o]}function On(i,s){return function(i,s,o){let u=0,l=i.length>>o;for(;l!==u;){const d=u+(l-u>>1),m=i[d<<o];if(s===m)return d<<o;m>s?l=d:u=d+1}return~(l<<o)}(i,s,1)}const re={},we="__NG_DI_FLAG__",Le="ngTempTokenPath",vt=/\n/gm,ut="__source",Xn=V({provide:String,useValue:V});let xi;function hs(i){const s=xi;return xi=i,s}function fs(i,s=Xe.Default){if(void 0===xi)throw new Error("inject() must be called from an injection context");return null===xi?hn(i,void 0,s):xi.get(i,s&Xe.Optional?null:void 0,s)}function Pn(i,s=Xe.Default){return(Nr||fs)(he(i),s)}function yr(i){const s=[];for(let o=0;o<i.length;o++){const u=he(i[o]);if(Array.isArray(u)){if(0===u.length)throw new Error("Arguments array must have arguments.");let l,d=Xe.Default;for(let m=0;m<u.length;m++){const v=u[m],b=up(v);"number"==typeof b?-1===b?l=v.token:d|=b:l=v}s.push(Pn(l,d))}else s.push(Pn(u))}return s}function pi(i,s){return i[we]=s,i.prototype[we]=s,i}function up(i){return i[we]}function er(i,s,o,u){const l=i[Le];throw s[ut]&&l.unshift(s[ut]),i.message=function(i,s,o,u=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.substr(2):i;let l=K(s);if(Array.isArray(s))l=s.map(K).join(" -> ");else if("object"==typeof s){let d=[];for(let m in s)if(s.hasOwnProperty(m)){let v=s[m];d.push(m+":"+("string"==typeof v?JSON.stringify(v):K(v)))}l=`{${d.join(", ")}}`}return`${o}${u?"("+u+")":""}[${l}]: ${i.replace(vt,"\n  ")}`}("\n"+i.message,l,o,u),i.ngTokenPath=l,i[Le]=null,i}const hc=pi(qi("Inject",i=>({token:i})),-1),eo=pi(qi("Optional"),8),Ia=pi(qi("SkipSelf"),4);let Po;function Da(i){var s;return(null===(s=function(){if(void 0===Po&&(Po=null,Ye.trustedTypes))try{Po=Ye.trustedTypes.createPolicy("angular",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch(i){}return Po}())||void 0===s?void 0:s.createHTML(i))||i}class yu{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Tv extends yu{getTypeName(){return"HTML"}}class Av extends yu{getTypeName(){return"Style"}}class Sv extends yu{getTypeName(){return"Script"}}class Um extends yu{getTypeName(){return"URL"}}class hp extends yu{getTypeName(){return"ResourceURL"}}function Ns(i){return i instanceof yu?i.changingThisBreaksApplicationSecurity:i}function Hr(i,s){const o=fc(i);if(null!=o&&o!==s){if("ResourceURL"===o&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${o} (see https://g.co/ng/security#xss)`)}return o===s}function fc(i){return i instanceof yu&&i.getTypeName()||null}function Bm(i){return new Tv(i)}function jm(i){return new Av(i)}function xv(i){return new Sv(i)}function pc(i){return new Um(i)}function fp(i){return new hp(i)}class gh{constructor(s){this.inertDocumentHelper=s}getInertBodyElement(s){s="<body><remove></remove>"+s;try{const o=(new window.DOMParser).parseFromString(Da(s),"text/html").body;return null===o?this.inertDocumentHelper.getInertBodyElement(s):(o.removeChild(o.firstChild),o)}catch(o){return null}}}class $m{constructor(s){if(this.defaultDoc=s,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const o=this.inertDocument.createElement("html");this.inertDocument.appendChild(o);const u=this.inertDocument.createElement("body");o.appendChild(u)}}getInertBodyElement(s){const o=this.inertDocument.createElement("template");if("content"in o)return o.innerHTML=Da(s),o;const u=this.inertDocument.createElement("body");return u.innerHTML=Da(s),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(u),u}stripCustomNsAttrs(s){const o=s.attributes;for(let l=o.length-1;0<l;l--){const m=o.item(l).name;("xmlns:ns1"===m||0===m.indexOf("ns1:"))&&s.removeAttribute(m)}let u=s.firstChild;for(;u;)u.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(u),u=u.nextSibling}}const mh=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Cl=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Dl(i){return(i=String(i)).match(mh)||i.match(Cl)?i:"unsafe:"+i}function Os(i){const s={};for(const o of i.split(","))s[o]=!0;return s}function _u(...i){const s={};for(const o of i)for(const u in o)o.hasOwnProperty(u)&&(s[u]=!0);return s}const qm=Os("area,br,col,hr,img,wbr"),gp=Os("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),mc=Os("rp,rt"),_h=_u(qm,_u(gp,Os("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),_u(mc,Os("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),_u(mc,gp)),mp=Os("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),yc=Os("srcset"),Aa=_u(mp,yc,Os("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Os("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),zm=Os("script,style,template");class vh{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(s){let o=s.firstChild,u=!0;for(;o;)if(o.nodeType===Node.ELEMENT_NODE?u=this.startElement(o):o.nodeType===Node.TEXT_NODE?this.chars(o.nodeValue):this.sanitizedSomething=!0,u&&o.firstChild)o=o.firstChild;else for(;o;){o.nodeType===Node.ELEMENT_NODE&&this.endElement(o);let l=this.checkClobberedElement(o,o.nextSibling);if(l){o=l;break}o=this.checkClobberedElement(o,o.parentNode)}return this.buf.join("")}startElement(s){const o=s.nodeName.toLowerCase();if(!_h.hasOwnProperty(o))return this.sanitizedSomething=!0,!zm.hasOwnProperty(o);this.buf.push("<"),this.buf.push(o);const u=s.attributes;for(let l=0;l<u.length;l++){const d=u.item(l),m=d.name,v=m.toLowerCase();if(!Aa.hasOwnProperty(v)){this.sanitizedSomething=!0;continue}let b=d.value;mp[v]&&(b=Dl(b)),yc[v]&&(i=b,b=(i=String(i)).split(",").map(s=>Dl(s.trim())).join(", ")),this.buf.push(" ",m,'="',Eh(b),'"')}var i;return this.buf.push(">"),!0}endElement(s){const o=s.nodeName.toLowerCase();_h.hasOwnProperty(o)&&!qm.hasOwnProperty(o)&&(this.buf.push("</"),this.buf.push(o),this.buf.push(">"))}chars(s){this.buf.push(Eh(s))}checkClobberedElement(s,o){if(o&&(s.compareDocumentPosition(o)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${s.outerHTML}`);return o}}const yp=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,_p=/([^\#-~ |!])/g;function Eh(i){return i.replace(/&/g,"&amp;").replace(yp,function(s){return"&#"+(1024*(s.charCodeAt(0)-55296)+(s.charCodeAt(1)-56320)+65536)+";"}).replace(_p,function(s){return"&#"+s.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Tl;function vp(i,s){let o=null;try{Tl=Tl||function(i){const s=new $m(i);return function(){try{return!!(new window.DOMParser).parseFromString(Da(""),"text/html")}catch(i){return!1}}()?new gh(s):s}(i);let u=s?String(s):"";o=Tl.getInertBodyElement(u);let l=5,d=u;do{if(0===l)throw new Error("Failed to sanitize html because the input is unstable");l--,u=d,d=o.innerHTML,o=Tl.getInertBodyElement(u)}while(u!==d);return Da((new vh).sanitizeChildren(Al(o)||o))}finally{if(o){const u=Al(o)||o;for(;u.firstChild;)u.removeChild(u.firstChild)}}}function Al(i){return"content"in i&&function(i){return i.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===i.nodeName}(i)?i.content:null}var Sn=(()=>((Sn=Sn||{})[Sn.NONE=0]="NONE",Sn[Sn.HTML=1]="HTML",Sn[Sn.STYLE=2]="STYLE",Sn[Sn.SCRIPT=3]="SCRIPT",Sn[Sn.URL=4]="URL",Sn[Sn.RESOURCE_URL=5]="RESOURCE_URL",Sn))();function to(i){const s=function(){const i=Ee();return i&&i[12]}();return s?s.sanitize(Sn.URL,i)||"":Hr(i,"URL")?Ns(i):Dl(Be(i))}const wh="__ngContext__";function un(i,s){i[wh]=s}function xl(i){const s=function(i){return i[wh]||null}(i);return s?Array.isArray(s)?s:s.lView:null}function wc(i){return i.ngOriginalError}function gi(i,...s){i.error(...s)}class no{constructor(){this._console=console}handleError(s){const o=this._findOriginalError(s),u=this._findContext(s),l=(i=s)&&i.ngErrorLogger||gi;var i;l(this._console,"ERROR",s),o&&l(this._console,"ORIGINAL ERROR",o),u&&l(this._console,"ERROR CONTEXT",u)}_findContext(s){return s?s.ngDebugContext||this._findContext(wc(s)):null}_findOriginalError(s){let o=s&&wc(s);for(;o&&wc(o);)o=wc(o);return o||null}}const xp=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Ye))();function _r(i){return i instanceof Function?i():i}var gs=(()=>((gs=gs||{})[gs.Important=1]="Important",gs[gs.DashCase=2]="DashCase",gs))();function kp(i,s){return undefined(i,s)}function _(i){const s=i[3];return Tn(s)?s[3]:s}function E(i){return x(i[13])}function T(i){return x(i[4])}function x(i){for(;null!==i&&!Tn(i);)i=i[4];return i}function J(i,s,o,u,l){if(null!=u){let d,m=!1;Tn(u)?d=u:is(u)&&(m=!0,u=u[0]);const v=Vt(u);0===i&&null!==o?null==l?oy(s,o,v):ro(s,o,v,l||null,!0):1===i&&null!==o?ro(s,o,v,l||null,!0):2===i?function(i,s,o){const u=ay(i,s);u&&function(i,s,o,u){Yt(i)?i.removeChild(s,o,u):s.removeChild(o)}(i,u,s,o)}(s,v,m):3===i&&s.destroyNode(v),null!=d&&function(i,s,o,u,l){const d=o[7];d!==Vt(o)&&J(s,i,u,d,l);for(let v=10;v<o.length;v++){const b=o[v];Up(b[1],b,i,s,u,d)}}(s,i,d,o,l)}}function Qe(i,s,o){return Yt(i)?i.createElement(s,o):null===o?i.createElement(s):i.createElementNS(o,s)}function Pp(i,s){const o=i[9],u=o.indexOf(s),l=s[3];1024&s[2]&&(s[2]&=-1025,eu(l,-1)),o.splice(u,1)}function kl(i,s){if(i.length<=10)return;const o=10+s,u=i[o];if(u){const l=u[17];null!==l&&l!==i&&Pp(l,u),s>0&&(i[o-1][4]=u[4]);const d=wa(i,10+s);!function(i,s){Up(i,s,s[11],2,null,null),s[0]=null,s[6]=null}(u[1],u);const m=d[19];null!==m&&m.detachView(d[1]),u[3]=null,u[4]=null,u[2]&=-129}return u}function Fp(i,s){if(!(256&s[2])){const o=s[11];Yt(o)&&o.destroyNode&&Up(i,s,o,3,null,null),function(i){let s=i[13];if(!s)return Pl(i[1],i);for(;s;){let o=null;if(is(s))o=s[13];else{const u=s[10];u&&(o=u)}if(!o){for(;s&&!s[4]&&s!==i;)is(s)&&Pl(s[1],s),s=s[3];null===s&&(s=i),is(s)&&Pl(s[1],s),o=s&&s[4]}s=o}}(s)}}function Pl(i,s){if(!(256&s[2])){s[2]&=-129,s[2]|=256,function(i,s){let o;if(null!=i&&null!=(o=i.destroyHooks))for(let u=0;u<o.length;u+=2){const l=s[o[u]];if(!(l instanceof ya)){const d=o[u+1];if(Array.isArray(d))for(let m=0;m<d.length;m+=2){const v=l[d[m]],b=d[m+1];try{b.call(v)}finally{}}else try{d.call(l)}finally{}}}}(i,s),function(i,s){const o=i.cleanup,u=s[7];let l=-1;if(null!==o)for(let d=0;d<o.length-1;d+=2)if("string"==typeof o[d]){const m=o[d+1],v="function"==typeof m?m(s):Vt(s[m]),b=u[l=o[d+2]],C=o[d+3];"boolean"==typeof C?v.removeEventListener(o[d],b,C):C>=0?u[l=C]():u[l=-C].unsubscribe(),d+=2}else{const m=u[l=o[d+1]];o[d].call(m)}if(null!==u){for(let d=l+1;d<u.length;d++)u[d]();s[7]=null}}(i,s),1===s[1].type&&Yt(s[11])&&s[11].destroy();const o=s[17];if(null!==o&&Tn(s[3])){o!==s[3]&&Pp(o,s);const u=s[19];null!==u&&u.detachView(i)}}}function qr(i,s,o){return function(i,s,o){let u=s;for(;null!==u&&40&u.type;)u=(s=u).parent;if(null===u)return o[0];if(2&u.flags){const l=i.data[u.directiveStart].encapsulation;if(l===Tt.None||l===Tt.Emulated)return null}return oi(u,o)}(i,s.parent,o)}function ro(i,s,o,u,l){Yt(i)?i.insertBefore(s,o,u,l):s.insertBefore(o,u,l)}function oy(i,s,o){Yt(i)?i.appendChild(s,o):s.appendChild(o)}function bu(i,s,o,u,l){null!==u?ro(i,s,o,u,l):oy(i,s,o)}function ay(i,s){return Yt(i)?i.parentNode(s):s.parentNode}let Uv=function(i,s,o){return 40&i.type?oi(i,o):null};function Vp(i,s,o,u){const l=qr(i,u,s),d=s[11],v=function(i,s,o){return Uv(i,s,o)}(u.parent||s[6],u,s);if(null!=l)if(Array.isArray(o))for(let b=0;b<o.length;b++)bu(d,l,o[b],v,!1);else bu(d,l,o,v,!1)}function Mh(i,s){if(null!==s){const o=s.type;if(3&o)return oi(s,i);if(4&o)return wu(-1,i[s.index]);if(8&o){const u=s.child;if(null!==u)return Mh(i,u);{const l=i[s.index];return Tn(l)?wu(-1,l):Vt(l)}}if(32&o)return kp(s,i)()||Vt(i[s.index]);{const u=PT(i,s);return null!==u?Array.isArray(u)?u[0]:Mh(_(i[16]),u):Mh(i,s.next)}}return null}function PT(i,s){return null!==s?i[16][6].projection[s.projection]:null}function wu(i,s){const o=10+i+1;if(o<s.length){const u=s[o],l=u[1].firstChild;if(null!==l)return Mh(u,l)}return s[7]}function $v(i,s,o,u,l,d,m){for(;null!=o;){const v=u[o.index],b=o.type;if(m&&0===s&&(v&&un(Vt(v),u),o.flags|=4),64!=(64&o.flags))if(8&b)$v(i,s,o.child,u,l,d,!1),J(s,i,l,v,d);else if(32&b){const C=kp(o,u);let S;for(;S=C();)J(s,i,l,S,d);J(s,i,l,v,d)}else 16&b?Gv(i,s,u,o,l,d):J(s,i,l,v,d);o=m?o.projectionNext:o.next}}function Up(i,s,o,u,l,d){$v(o,u,i.firstChild,s,l,d,!1)}function Gv(i,s,o,u,l,d){const m=o[16],b=m[6].projection[u.projection];if(Array.isArray(b))for(let C=0;C<b.length;C++)J(s,i,l,b[C],d);else $v(i,s,b,m[3],l,d,!0)}function yw(i,s,o){Yt(i)?i.setAttribute(s,"style",o):s.style.cssText=o}function cy(i,s,o){Yt(i)?""===o?i.removeAttribute(s,"class"):i.setAttribute(s,"class",o):s.className=o}function _w(i,s,o){let u=i.length;for(;;){const l=i.indexOf(s,o);if(-1===l)return l;if(0===l||i.charCodeAt(l-1)<=32){const d=s.length;if(l+d===u||i.charCodeAt(l+d)<=32)return l}o=l+1}}const vw="ng-template";function qv(i,s,o){let u=0;for(;u<i.length;){let l=i[u++];if(o&&"class"===l){if(l=i[u],-1!==_w(l.toLowerCase(),s,0))return!0}else if(1===l){for(;u<i.length&&"string"==typeof(l=i[u++]);)if(l.toLowerCase()===s)return!0;return!1}}return!1}function Ew(i){return 4===i.type&&i.value!==vw}function UT(i,s,o){return s===(4!==i.type||o?i.value:vw)}function bw(i,s,o){let u=4;const l=i.attrs||[],d=function(i){for(let s=0;s<i.length;s++)if(rc(i[s]))return s;return i.length}(l);let m=!1;for(let v=0;v<s.length;v++){const b=s[v];if("number"!=typeof b){if(!m)if(4&u){if(u=2|1&u,""!==b&&!UT(i,b,o)||""===b&&1===s.length){if(Vo(u))return!1;m=!0}}else{const C=8&u?b:s[++v];if(8&u&&null!==i.attrs){if(!qv(i.attrs,C,o)){if(Vo(u))return!1;m=!0}continue}const N=qR(8&u?"class":b,l,Ew(i),o);if(-1===N){if(Vo(u))return!1;m=!0;continue}if(""!==C){let k;k=N>d?"":l[N+1].toLowerCase();const H=8&u?k:null;if(H&&-1!==_w(H,C,0)||2&u&&C!==k){if(Vo(u))return!1;m=!0}}}}else{if(!m&&!Vo(u)&&!Vo(b))return!1;if(m&&Vo(b))continue;m=!1,u=b|1&u}}return Vo(u)||m}function Vo(i){return 0==(1&i)}function qR(i,s,o,u){if(null===s)return-1;let l=0;if(u||!o){let d=!1;for(;l<s.length;){const m=s[l];if(m===i)return l;if(3===m||6===m)d=!0;else{if(1===m||2===m){let v=s[++l];for(;"string"==typeof v;)v=s[++l];continue}if(4===m)break;if(0===m){l+=4;continue}}l+=d?1:2}return-1}return function(i,s){let o=i.indexOf(4);if(o>-1)for(o++;o<i.length;){const u=i[o];if("number"==typeof u)return-1;if(u===s)return o;o++}return-1}(s,i)}function ww(i,s,o=!1){for(let u=0;u<s.length;u++)if(bw(i,s[u],o))return!0;return!1}function Bp(i,s){return i?":not("+s.trim()+")":s}function Cc(i){let s=i[0],o=1,u=2,l="",d=!1;for(;o<i.length;){let m=i[o];if("string"==typeof m)if(2&u){const v=i[++o];l+="["+m+(v.length>0?'="'+v+'"':"")+"]"}else 8&u?l+="."+m:4&u&&(l+=" "+m);else""!==l&&!Vo(m)&&(s+=Bp(d,l),l=""),u=m,d=d||!Vo(u);o++}return""!==l&&(s+=Bp(d,l)),s}const lt={};function it(i){ly(Bt(),Ee(),Vr()+i,ha())}function ly(i,s,o,u){if(!u)if(3==(3&s[2])){const d=i.preOrderCheckHooks;null!==d&&tc(s,d,o)}else{const d=i.preOrderHooks;null!==d&&cl(s,d,0,o)}ai(o)}function wt(i,s){return i<<17|s<<2}function ms(i){return i>>17&32767}function Wv(i){return 2|i}function Uo(i){return(131068&i)>>2}function zv(i,s){return-131069&i|s<<2}function Zv(i){return 1|i}function Jv(i,s){const o=i.contentQueries;if(null!==o)for(let u=0;u<o.length;u+=2){const l=o[u],d=o[u+1];if(-1!==d){const m=i.data[d];Ju(l),m.contentQueries(2,s[d],d)}}}function Vl(i,s,o,u,l,d,m,v,b,C){const S=s.blueprint.slice();return S[0]=l,S[2]=140|u,bo(S),S[3]=S[15]=i,S[8]=o,S[10]=m||i&&i[10],S[11]=v||i&&i[11],S[12]=b||i&&i[12]||null,S[9]=C||i&&i[9]||null,S[6]=d,S[16]=2==s.type?i[16]:S,S}function Dc(i,s,o,u,l){let d=i.data[s];if(null===d)d=function(i,s,o,u,l){const d=Ku(),m=da(),b=i.data[s]=function(i,s,o,u,l,d){return{type:o,index:u,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:l,attrs:d,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,m?d:d&&d.parent,o,s,u,l);return null===i.firstChild&&(i.firstChild=b),null!==d&&(m?null==d.child&&null!==b.parent&&(d.child=b):null===d.next&&(d.next=b)),b}(i,s,o,u,l),ht.lFrame.inI18n&&(d.flags|=64);else if(64&d.type){d.type=o,d.value=u,d.attrs=l;const m=function(){const i=ht.lFrame,s=i.currentTNode;return i.isParent?s:s.parent}();d.injectorIndex=null===m?-1:m.injectorIndex}return Si(d,!0),d}function Tc(i,s,o,u){if(0===o)return-1;const l=s.length;for(let d=0;d<o;d++)s.push(u),i.blueprint.push(u),i.data.push(null);return l}function Nh(i,s,o){To(s);try{const u=i.viewQuery;null!==u&&Lh(1,u,o);const l=i.template;null!==l&&Xv(i,s,l,1,o),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&Jv(i,s),i.staticViewQueries&&Lh(2,i.viewQuery,o);const d=i.components;null!==d&&function(i,s){for(let o=0;o<s.length;o++)Jp(i,s[o])}(s,d)}catch(u){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),u}finally{s[2]&=-5,ec()}}function Ul(i,s,o,u){const l=s[2];if(256==(256&l))return;To(s);const d=ha();try{bo(s),function(i){ht.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==o&&Xv(i,s,o,2,u);const m=3==(3&l);if(!d)if(m){const C=i.preOrderCheckHooks;null!==C&&tc(s,C,null)}else{const C=i.preOrderHooks;null!==C&&cl(s,C,0,null),su(s,0)}if(function(i){for(let s=E(i);null!==s;s=T(s)){if(!s[2])continue;const o=s[9];for(let u=0;u<o.length;u++){const l=o[u],d=l[3];0==(1024&l[2])&&eu(d,1),l[2]|=1024}}}(s),function(i){for(let s=E(i);null!==s;s=T(s))for(let o=10;o<s.length;o++){const u=s[o],l=u[1];Xa(u)&&Ul(l,u,l.template,u[8])}}(s),null!==i.contentQueries&&Jv(i,s),!d)if(m){const C=i.contentCheckHooks;null!==C&&tc(s,C)}else{const C=i.contentHooks;null!==C&&cl(s,C,1),su(s,1)}!function(i,s){const o=i.hostBindingOpCodes;if(null!==o)try{for(let u=0;u<o.length;u++){const l=o[u];if(l<0)ai(~l);else{const d=l,m=o[++u],v=o[++u];al(m,d),v(2,s[d])}}}finally{ai(-1)}}(i,s);const v=i.components;null!==v&&function(i,s){for(let o=0;o<s.length;o++)Zi(i,s[o])}(s,v);const b=i.viewQuery;if(null!==b&&Lh(2,b,u),!d)if(m){const C=i.viewCheckHooks;null!==C&&tc(s,C)}else{const C=i.viewHooks;null!==C&&cl(s,C,2),su(s,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),d||(s[2]&=-73),1024&s[2]&&(s[2]&=-1025,eu(s[3],-1))}finally{ec()}}function KT(i,s,o,u){const l=s[10],d=!ha(),m=Cr(s);try{d&&!m&&l.begin&&l.begin(),m&&Nh(i,s,u),Ul(i,s,o,u)}finally{d&&!m&&l.end&&l.end()}}function Xv(i,s,o,u,l){const d=Vr(),m=2&u;try{ai(-1),m&&s.length>20&&ly(i,s,20,ha()),o(u,l)}finally{ai(d)}}function Kp(i,s,o){!la()||(function(i,s,o,u){const l=o.directiveStart,d=o.directiveEnd;i.firstCreatePass||So(o,s),un(u,s);const m=o.initialInputs;for(let v=l;v<d;v++){const b=i.data[v],C=Ai(b);C&&Fh(s,o,b);const S=va(s,i,v,o);un(S,s),null!==m&&Bl(0,v-l,S,b,0,m),C&&(ar(o.index,s)[8]=S)}}(i,s,o,oi(o,s)),128==(128&o.flags)&&function(i,s,o){const u=o.directiveStart,l=o.directiveEnd,m=o.index,v=ht.lFrame.currentDirectiveIndex;try{ai(m);for(let b=u;b<l;b++){const C=i.data[b],S=s[b];nu(b),(null!==C.hostBindings||0!==C.hostVars||null!==C.hostAttrs)&&Ph(C,S)}}finally{ai(-1),nu(v)}}(i,s,o))}function vy(i,s,o=oi){const u=s.localNames;if(null!==u){let l=s.index+1;for(let d=0;d<u.length;d+=2){const m=u[d+1],v=-1===m?o(s,i):i[m];i[l++]=v}}}function Ow(i){const s=i.tView;return null===s||s.incompleteFirstPass?i.tView=Oh(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):s}function Oh(i,s,o,u,l,d,m,v,b,C){const S=20+u,N=S+l,k=function(i,s){const o=[];for(let u=0;u<s;u++)o.push(u<i?null:lt);return o}(S,N),H="function"==typeof C?C():C;return k[1]={type:i,blueprint:k,template:o,queries:null,viewQuery:v,declTNode:s,data:k.slice().fill(null,S),bindingStartIndex:S,expandoStartIndex:N,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof d?d():d,pipeRegistry:"function"==typeof m?m():m,firstChild:null,schemas:b,consts:H,incompleteFirstPass:!1}}function Yp(i,s,o,u){const l=zw(s);null===o?l.push(u):(l.push(o),i.firstCreatePass&&xy(i).push(u,l.length-1))}function kw(i,s,o){for(let u in i)if(i.hasOwnProperty(u)){const l=i[u];(o=null===o?{}:o).hasOwnProperty(u)?o[u].push(s,l):o[u]=[s,l]}return o}function ks(i,s,o,u,l,d,m,v){const b=oi(s,o);let S,C=s.inputs;!v&&null!=C&&(S=C[u])?(lE(i,o,S,u,l),Hu(s)&&function(i,s){const o=ar(s,i);16&o[2]||(o[2]|=64)}(o,s.index)):3&s.type&&(u=function(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(u),l=null!=m?m(l,s.value||"",u):l,Yt(d)?d.setProperty(b,u,l):ep(u)||(b.setProperty?b.setProperty(u,l):b[u]=l))}function kh(i,s,o,u){let l=!1;if(la()){const d=function(i,s,o){const u=i.directiveRegistry;let l=null;if(u)for(let d=0;d<u.length;d++){const m=u[d];ww(o,m.selectors,!1)&&(l||(l=[]),li(So(o,s),i,m.type),Ai(m)?(iE(i,o),l.unshift(m)):l.push(m))}return l}(i,s,o),m=null===u?null:{"":-1};if(null!==d){l=!0,jw(o,i.data.length,d.length);for(let S=0;S<d.length;S++){const N=d[S];N.providersResolver&&N.providersResolver(N)}let v=!1,b=!1,C=Tc(i,s,d.length,null);for(let S=0;S<d.length;S++){const N=d[S];o.mergedAttrs=ic(o.mergedAttrs,N.hostAttrs),Hw(i,o,s,C,N),Iy(C,N,m),null!==N.contentQueries&&(o.flags|=8),(null!==N.hostBindings||null!==N.hostAttrs||0!==N.hostVars)&&(o.flags|=128);const k=N.type.prototype;!v&&(k.ngOnChanges||k.ngOnInit||k.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(o.index),v=!0),!b&&(k.ngOnChanges||k.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(o.index),b=!0),C++}!function(i,s){const u=s.directiveEnd,l=i.data,d=s.attrs,m=[];let v=null,b=null;for(let C=s.directiveStart;C<u;C++){const S=l[C],N=S.inputs,k=null===d||Ew(s)?null:$w(N,d);m.push(k),v=kw(N,C,v),b=kw(S.outputs,C,b)}null!==v&&(v.hasOwnProperty("class")&&(s.flags|=16),v.hasOwnProperty("style")&&(s.flags|=32)),s.initialInputs=m,s.inputs=v,s.outputs=b}(i,o)}m&&function(i,s,o){if(s){const u=i.localNames=[];for(let l=0;l<s.length;l+=2){const d=o[s[l+1]];if(null==d)throw new De("301",`Export of name '${s[l+1]}' not found!`);u.push(s[l],d)}}}(o,u,m)}return o.mergedAttrs=ic(o.mergedAttrs,o.attrs),l}function wy(i,s,o,u,l,d){const m=d.hostBindings;if(m){let v=i.hostBindingOpCodes;null===v&&(v=i.hostBindingOpCodes=[]);const b=~s.index;(function(i){let s=i.length;for(;s>0;){const o=i[--s];if("number"==typeof o&&o<0)return o}return 0})(v)!=b&&v.push(b),v.push(u,l,m)}}function Ph(i,s){null!==i.hostBindings&&i.hostBindings(1,s)}function iE(i,s){s.flags|=2,(i.components||(i.components=[])).push(s.index)}function Iy(i,s,o){if(o){if(s.exportAs)for(let u=0;u<s.exportAs.length;u++)o[s.exportAs[u]]=i;Ai(s)&&(o[""]=i)}}function jw(i,s,o){i.flags|=1,i.directiveStart=s,i.directiveEnd=s+o,i.providerIndexes=s}function Hw(i,s,o,u,l){i.data[u]=l;const d=l.factory||(l.factory=Fr(l.type)),m=new ya(d,Ai(l),null);i.blueprint[u]=m,o[u]=m,wy(i,s,0,u,Tc(i,o,l.hostVars,lt),l)}function Fh(i,s,o){const u=oi(s,i),l=Ow(o),d=i[10],m=Xp(i,Vl(i,l,null,o.onPush?64:16,u,s,d,d.createRenderer(u,o),null,null));i[s.index]=m}function Na(i,s,o,u,l,d){const m=oi(i,s);!function(i,s,o,u,l,d,m){if(null==d)Yt(i)?i.removeAttribute(s,l,o):s.removeAttribute(l);else{const v=null==m?Be(d):m(d,u||"",l);Yt(i)?i.setAttribute(s,l,v,o):o?s.setAttributeNS(o,l,v):s.setAttribute(l,v)}}(s[11],m,d,i.value,o,u,l)}function Bl(i,s,o,u,l,d){const m=d[s];if(null!==m){const v=u.setInput;for(let b=0;b<m.length;){const C=m[b++],S=m[b++],N=m[b++];null!==v?u.setInput(o,N,C,S):o[S]=N}}}function $w(i,s){let o=null,u=0;for(;u<s.length;){const l=s[u];if(0!==l)if(5!==l){if("number"==typeof l)break;i.hasOwnProperty(l)&&(null===o&&(o=[]),o.push(l,i[l],s[u+1])),u+=2}else u+=2;else u+=4}return o}function aE(i,s,o,u){return new Array(i,!0,!1,s,null,0,u,o,null,null)}function Zi(i,s){const o=ar(s,i);if(Xa(o)){const u=o[1];80&o[2]?Ul(u,o,u.template,o[8]):o[5]>0&&Cy(o)}}function Cy(i){for(let u=E(i);null!==u;u=T(u))for(let l=10;l<u.length;l++){const d=u[l];if(1024&d[2]){const m=d[1];Ul(m,d,m.template,d[8])}else d[5]>0&&Cy(d)}const o=i[1].components;if(null!==o)for(let u=0;u<o.length;u++){const l=ar(o[u],i);Xa(l)&&l[5]>0&&Cy(l)}}function Jp(i,s){const o=ar(s,i),u=o[1];(function(i,s){for(let o=s.length;o<i.blueprint.length;o++)s.push(i.blueprint[o])})(u,o),Nh(u,o,o[8])}function Xp(i,s){return i[13]?i[14][4]=s:i[13]=s,i[14]=s,s}function eg(i){for(;i;){i[2]|=64;const s=_(i);if($u(i)&&!s)return i;i=s}return null}function jl(i,s,o){const u=s[10];u.begin&&u.begin();try{Ul(i,s,i.template,o)}catch(l){throw Ry(s,l),l}finally{u.end&&u.end()}}function Ay(i){!function(i){for(let s=0;s<i.components.length;s++){const o=i.components[s],u=xl(o),l=u[1];KT(l,u,l.template,o)}}(i[8])}function Lh(i,s,o){Ju(0),s(i,o)}const Ww=(()=>Promise.resolve(null))();function zw(i){return i[7]||(i[7]=[])}function xy(i){return i.cleanup||(i.cleanup=[])}function Ry(i,s){const o=i[9],u=o?o.get(no,null):null;u&&u.handleError(s)}function lE(i,s,o,u,l){for(let d=0;d<o.length;){const m=o[d++],v=o[d++],b=s[m],C=i.data[m];null!==C.setInput?C.setInput(b,l,u,v):b[v]=l}}function Oa(i,s,o){const u=Ds(s,i);!function(i,s,o){Yt(i)?i.setValue(s,o):s.textContent=o}(i[11],u,o)}function ng(i,s,o){let u=o?i.styles:null,l=o?i.classes:null,d=0;if(null!==s)for(let m=0;m<s.length;m++){const v=s[m];"number"==typeof v?d=v:1==d?l=le(l,v):2==d&&(u=le(u,v+": "+s[++m]+";"))}o?i.styles=u:i.stylesWithoutHost=u,o?i.classes=l:i.classesWithoutHost=l}const Iu=new bn("INJECTOR",-1);class Vh{get(s,o=re){if(o===re){const u=new Error(`NullInjectorError: No provider for ${K(s)}!`);throw u.name="NullInjectorError",u}return o}}const Bo=new bn("Set Injector scope."),Hl={},rA={};let dE;function hE(){return void 0===dE&&(dE=new Vh),dE}function Kw(i,s=null,o=null,u){return new $l(i,o,s||hE(),u)}class $l{constructor(s,o,u,l=null){this.parent=u,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const d=[];o&&hi(o,v=>this.processProvider(v,s,o)),hi([s],v=>this.processInjectorType(v,[],d)),this.records.set(Iu,cn(void 0,this));const m=this.records.get(Bo);this.scope=null!=m?m.value:null,this.source=l||("object"==typeof s?null:K(s))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(s=>s.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(s,o=re,u=Xe.Default){this.assertNotDestroyed();const l=hs(this),d=si(void 0);try{if(!(u&Xe.SkipSelf)){let v=this.records.get(s);if(void 0===v){const b=("function"==typeof(i=s)||"object"==typeof i&&i instanceof bn)&&Un(s);v=b&&this.injectableDefInScope(b)?cn(jo(s),Hl):null,this.records.set(s,v)}if(null!=v)return this.hydrate(s,v)}return(u&Xe.Self?hE():this.parent).get(s,o=u&Xe.Optional&&o===re?null:o)}catch(m){if("NullInjectorError"===m.name){if((m[Le]=m[Le]||[]).unshift(K(s)),l)throw m;return er(m,s,"R3InjectorError",this.source)}throw m}finally{si(d),hs(l)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(s=>this.get(s))}toString(){const s=[];return this.records.forEach((u,l)=>s.push(K(l))),`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(s,o,u){if(!(s=he(s)))return!1;let l=Cn(s);const d=null==l&&s.ngModule||void 0,m=void 0===d?s:d,v=-1!==u.indexOf(m);if(void 0!==d&&(l=Cn(d)),null==l)return!1;if(null!=l.imports&&!v){let S;u.push(m);try{hi(l.imports,N=>{this.processInjectorType(N,o,u)&&(void 0===S&&(S=[]),S.push(N))})}finally{}if(void 0!==S)for(let N=0;N<S.length;N++){const{ngModule:k,providers:H}=S[N];hi(H,W=>this.processProvider(W,k,H||xe))}}this.injectorDefTypes.add(m);const b=Fr(m)||(()=>new m);this.records.set(m,cn(b,Hl));const C=l.providers;if(null!=C&&!v){const S=s;hi(C,N=>this.processProvider(N,S,C))}return void 0!==d&&void 0!==s.providers}processProvider(s,o,u){let l=Uh(s=he(s))?s:he(s&&s.provide);const d=(i=s,ig(i)?cn(void 0,i.useValue):cn(fE(i),Hl));var i;if(Uh(s)||!0!==s.multi)this.records.get(l);else{let m=this.records.get(l);m||(m=cn(void 0,Hl,!0),m.factory=()=>yr(m.multi),this.records.set(l,m)),l=s,m.multi.push(s)}this.records.set(l,d)}hydrate(s,o){return o.value===Hl&&(o.value=rA,o.value=o.factory()),"object"==typeof o.value&&o.value&&null!==(i=o.value)&&"object"==typeof i&&"function"==typeof i.ngOnDestroy&&this.onDestroy.add(o.value),o.value;var i}injectableDefInScope(s){if(!s.providedIn)return!1;const o=he(s.providedIn);return"string"==typeof o?"any"===o||o===this.scope:this.injectorDefTypes.has(o)}}function jo(i){const s=Un(i),o=null!==s?s.factory:Fr(i);if(null!==o)return o;if(i instanceof bn)throw new Error(`Token ${K(i)} is missing a \u0275prov definition.`);if(i instanceof Function)return function(i){const s=i.length;if(s>0){const u=function(i,s){const o=[];for(let u=0;u<i;u++)o.push(s);return o}(s,"?");throw new Error(`Can't resolve all parameters for ${K(i)}: (${u.join(", ")}).`)}const o=function(i){const s=i&&(i[sn]||i[Hs]);if(s){const o=function(i){if(i.hasOwnProperty("name"))return i.name;const s=(""+i).match(/^function\s*([^\s(]+)/);return null===s?"":s[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${o}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${o}" class.`),s}return null}(i);return null!==o?()=>o.factory(i):()=>new i}(i);throw new Error("unreachable")}function fE(i,s,o){let u;if(Uh(i)){const l=he(i);return Fr(l)||jo(l)}if(ig(i))u=()=>he(i.useValue);else if(function(i){return!(!i||!i.useFactory)}(i))u=()=>i.useFactory(...yr(i.deps||[]));else if(function(i){return!(!i||!i.useExisting)}(i))u=()=>Pn(he(i.useExisting));else{const l=he(i&&(i.useClass||i.provide));if(!function(i){return!!i.deps}(i))return Fr(l)||jo(l);u=()=>new l(...yr(i.deps))}return u}function cn(i,s,o=!1){return{factory:i,value:s,multi:o?[]:void 0}}function ig(i){return null!==i&&"object"==typeof i&&Xn in i}function Uh(i){return"function"==typeof i}const Cu=function(i,s,o){return function(i,s=null,o=null,u){const l=Kw(i,s,o,u);return l._resolveInjectorDefTypes(),l}({name:o},s,i,o)};let xn=(()=>{class i{static create(o,u){return Array.isArray(o)?Cu(o,u,""):Cu(o.providers,o.parent,o.name||"")}}return i.THROW_IF_NOT_FOUND=re,i.NULL=new Vh,i.\u0275prov=yt({token:i,providedIn:"any",factory:()=>Pn(Iu)}),i.__NG_ELEMENT_ID__=-1,i})();function iI(i,s){ma(xl(i)[1],gn())}function Uy(i){let s=function(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),o=!0;const u=[i];for(;s;){let l;if(Ai(i))l=s.\u0275cmp||s.\u0275dir;else{if(s.\u0275cmp)throw new Error("Directives cannot inherit Components");l=s.\u0275dir}if(l){if(o){u.push(l);const m=i;m.inputs=By(i.inputs),m.declaredInputs=By(i.declaredInputs),m.outputs=By(i.outputs);const v=l.hostBindings;v&&TE(i,v);const b=l.viewQuery,C=l.contentQueries;if(b&&oI(i,b),C&&DE(i,C),Y(i.inputs,l.inputs),Y(i.declaredInputs,l.declaredInputs),Y(i.outputs,l.outputs),Ai(l)&&l.data.animation){const S=i.data;S.animation=(S.animation||[]).concat(l.data.animation)}}const d=l.features;if(d)for(let m=0;m<d.length;m++){const v=d[m];v&&v.ngInherit&&v(i),v===Uy&&(o=!1)}}s=Object.getPrototypeOf(s)}!function(i){let s=0,o=null;for(let u=i.length-1;u>=0;u--){const l=i[u];l.hostVars=s+=l.hostVars,l.hostAttrs=ic(l.hostAttrs,o=ic(o,l.hostAttrs))}}(u)}function By(i){return i===ve?{}:i===xe?[]:i}function oI(i,s){const o=i.viewQuery;i.viewQuery=o?(u,l)=>{s(u,l),o(u,l)}:s}function DE(i,s){const o=i.contentQueries;i.contentQueries=o?(u,l,d)=>{s(u,l,d),o(u,l,d)}:s}function TE(i,s){const o=i.hostBindings;i.hostBindings=o?(u,l)=>{s(u,l),o(u,l)}:s}let mg=null;function oo(){if(!mg){const i=Ye.Symbol;if(i&&i.iterator)mg=i.iterator;else{const s=Object.getOwnPropertyNames(Map.prototype);for(let o=0;o<s.length;++o){const u=s[o];"entries"!==u&&"size"!==u&&Map.prototype[u]===Map.prototype.entries&&(mg=u)}}}return mg}class ao{constructor(s){this.wrapped=s}static wrap(s){return new ao(s)}static unwrap(s){return ao.isWrapped(s)?s.wrapped:s}static isWrapped(s){return s instanceof ao}}function jh(i){return!!Ki(i)&&(Array.isArray(i)||!(i instanceof Map)&&oo()in i)}function Ki(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function Ho(i,s,o){return i[s]=o}function lr(i,s,o){return!Object.is(i[s],o)&&(i[s]=o,!0)}function SE(i,s,o,u){const l=Ee();return lr(l,Ks(),s)&&(Bt(),Na(En(),l,i,s,o,u)),SE}function de(i,s,o,u,l,d,m,v){const b=Ee(),C=Bt(),S=i+20,N=C.firstCreatePass?function(i,s,o,u,l,d,m,v,b){const C=s.consts,S=Dc(s,i,4,m||null,os(C,v));kh(s,o,S,os(C,b)),ma(s,S);const N=S.tViews=Oh(2,S,u,l,d,s.directiveRegistry,s.pipeRegistry,null,s.schemas,C);return null!==s.queries&&(s.queries.template(s,S),N.queries=s.queries.embeddedTView(S)),S}(S,C,b,s,o,u,l,d,m):C.data[S];Si(N,!1);const k=b[11].createComment("");Vp(C,b,k,N),un(k,b),Xp(b,b[S]=aE(k,b,k,N)),Is(N)&&Kp(C,b,N),null!=m&&vy(b,N,v)}function Zh(i,s=Xe.Default){const o=Ee();return null===o?Pn(i,s):Ur(gn(),o,he(i),s)}function Kh(i,s,o){const u=Ee();return lr(u,Ks(),s)&&ks(Bt(),En(),u,i,s,u[11],o,!1),Kh}function Ar(i,s,o,u,l){const m=l?"class":"style";lE(i,o,s.inputs[m],m,u)}function Xy(i,s,o,u){const l=Ee(),d=Bt(),m=20+i,v=l[11],b=l[m]=Qe(v,s,ht.lFrame.currentNamespace),C=d.firstCreatePass?function(i,s,o,u,l,d,m){const v=s.consts,C=Dc(s,i,2,l,os(v,d));return kh(s,o,C,os(v,m)),null!==C.attrs&&ng(C,C.attrs,!1),null!==C.mergedAttrs&&ng(C,C.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,C),C}(m,d,l,0,s,o,u):d.data[m];Si(C,!0);const S=C.mergedAttrs;null!==S&&ou(v,b,S);const N=C.classes;null!==N&&cy(v,b,N);const k=C.styles;null!==k&&yw(v,b,k),64!=(64&C.flags)&&Vp(d,l,b,C),0===ht.lFrame.elementDepthCount&&un(b,l),ht.lFrame.elementDepthCount++,Is(C)&&(Kp(d,l,C),function(i,s,o){if(ju(s)){const l=s.directiveEnd;for(let d=s.directiveStart;d<l;d++){const m=i.data[d];m.contentQueries&&m.contentQueries(1,o[d],d)}}}(d,C,l)),null!==u&&vy(l,C)}function Rc(){let i=gn();da()?ht.lFrame.isParent=!1:(i=i.parent,Si(i,!1));const s=i;ht.lFrame.elementDepthCount--;const o=Bt();o.firstCreatePass&&(ma(o,i),ju(i)&&o.queries.elementEnd(i)),null!=s.classesWithoutHost&&function(i){return 0!=(16&i.flags)}(s)&&Ar(o,s,Ee(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function(i){return 0!=(32&i.flags)}(s)&&Ar(o,s,Ee(),s.stylesWithoutHost,!1)}function vs(i,s,o,u){Xy(i,s,o,u),Rc()}function Mc(){return Ee()}function vg(i){return!!i&&"function"==typeof i.then}function PE(i){return!!i&&"function"==typeof i.subscribe}const Kl=PE;function FE(i,s,o,u){const l=Ee(),d=Bt(),m=gn();return function(i,s,o,u,l,d,m,v){const b=Is(u),S=i.firstCreatePass&&xy(i),N=s[8],k=zw(s);let H=!0;if(3&u.type||v){const Q=oi(u,s),Oe=v?v(Q):Q,ye=k.length,st=v?gt=>v(Vt(gt[u.index])):u.index;if(Yt(o)){let gt=null;if(!v&&b&&(gt=function(i,s,o,u){const l=i.cleanup;if(null!=l)for(let d=0;d<l.length-1;d+=2){const m=l[d];if(m===o&&l[d+1]===u){const v=s[7],b=l[d+2];return v.length>b?v[b]:null}"string"==typeof m&&(d+=2)}return null}(i,s,l,u.index)),null!==gt)(gt.__ngLastListenerFn__||gt).__ngNextListenerFn__=d,gt.__ngLastListenerFn__=d,H=!1;else{d=ka(u,s,N,d,!1);const qt=o.listen(Oe,l,d);k.push(d,qt),S&&S.push(l,st,ye,ye+1)}}else d=ka(u,s,N,d,!0),Oe.addEventListener(l,d,m),k.push(d),S&&S.push(l,st,ye,m)}else d=ka(u,s,N,d,!1);const W=u.outputs;let ue;if(H&&null!==W&&(ue=W[l])){const Q=ue.length;if(Q)for(let Oe=0;Oe<Q;Oe+=2){const Er=s[ue[Oe]][ue[Oe+1]].subscribe(d),Bs=k.length;k.push(d,Er),S&&S.push(l,u.index,Bs,-(Bs+1))}}}(d,l,l[11],m,i,s,!!o,u),FE}function LE(i,s,o,u){try{return!1!==o(u)}catch(l){return Ry(i,l),!1}}function ka(i,s,o,u,l){return function d(m){if(m===Function)return u;const v=2&i.flags?ar(i.index,s):s;0==(32&s[2])&&eg(v);let b=LE(s,0,u,m),C=d.__ngNextListenerFn__;for(;C;)b=LE(s,0,C,m)&&b,C=C.__ngNextListenerFn__;return l&&!1===b&&(m.preventDefault(),m.returnValue=!1),b}}function bg(i=1){return function(i){return(ht.lFrame.contextLView=function(i,s){for(;i>0;)s=s[15],i--;return s}(i,ht.lFrame.contextLView))[8]}(i)}function wI(i,s,o,u,l){const d=i[o+1],m=null===s;let v=u?ms(d):Uo(d),b=!1;for(;0!==v&&(!1===b||m);){const S=i[v+1];II(i[v],s)&&(b=!0,i[v+1]=u?Zv(S):Wv(S)),v=u?ms(S):Uo(S)}b&&(i[o+1]=u?Wv(d):Zv(d))}function II(i,s){return null===i||null==s||(Array.isArray(i)?i[1]:i)===s||!(!Array.isArray(i)||"string"!=typeof s)&&On(i,s)>=0}function jE(i,s){return function(i,s,o,u){const l=Ee(),d=Bt(),m=function(i){const s=ht.lFrame,o=s.bindingIndex;return s.bindingIndex=s.bindingIndex+i,o}(2);d.firstUpdatePass&&function(i,s,o,u){const l=i.data;if(null===l[o+1]){const d=l[Vr()],m=function(i,s){return s>=i.expandoStartIndex}(i,o);(function(i,s){return 0!=(i.flags&(s?16:32))})(d,u)&&null===s&&!m&&(s=!1),s=function(i,s,o,u){const l=function(i){const s=ht.lFrame.currentDirectiveIndex;return-1===s?null:i[s]}(i);let d=u?s.residualClasses:s.residualStyles;if(null===l)0===(u?s.classBindings:s.styleBindings)&&(o=Jh(o=kc(null,i,s,o,u),s.attrs,u),d=null);else{const m=s.directiveStylingLast;if(-1===m||i[m]!==l)if(o=kc(l,i,s,o,u),null===d){let b=function(i,s,o){const u=o?s.classBindings:s.styleBindings;if(0!==Uo(u))return i[ms(u)]}(i,s,u);void 0!==b&&Array.isArray(b)&&(b=kc(null,i,s,b[1],u),b=Jh(b,s.attrs,u),function(i,s,o,u){i[ms(o?s.classBindings:s.styleBindings)]=u}(i,s,u,b))}else d=function(i,s,o){let u;const l=s.directiveEnd;for(let d=1+s.directiveStylingLast;d<l;d++)u=Jh(u,i[d].hostAttrs,o);return Jh(u,s.attrs,o)}(i,s,u)}return void 0!==d&&(u?s.residualClasses=d:s.residualStyles=d),o}(l,d,s,u),function(i,s,o,u,l,d){let m=d?s.classBindings:s.styleBindings,v=ms(m),b=Uo(m);i[u]=o;let S,C=!1;if(Array.isArray(o)){const N=o;S=N[1],(null===S||On(N,S)>0)&&(C=!0)}else S=o;if(l)if(0!==b){const k=ms(i[v+1]);i[u+1]=wt(k,v),0!==k&&(i[k+1]=zv(i[k+1],u)),i[v+1]=function(i,s){return 131071&i|s<<17}(i[v+1],u)}else i[u+1]=wt(v,0),0!==v&&(i[v+1]=zv(i[v+1],u)),v=u;else i[u+1]=wt(b,0),0===v?v=u:i[b+1]=zv(i[b+1],u),b=u;C&&(i[u+1]=Wv(i[u+1])),wI(i,S,u,!0),wI(i,S,u,!1),function(i,s,o,u,l){const d=l?i.residualClasses:i.residualStyles;null!=d&&"string"==typeof s&&On(d,s)>=0&&(o[u+1]=Zv(o[u+1]))}(s,S,i,u,d),m=wt(v,b),d?s.classBindings=m:s.styleBindings=m}(l,d,s,o,m,u)}}(d,i,m,u),s!==lt&&lr(l,m,s)&&function(i,s,o,u,l,d,m,v){if(!(3&s.type))return;const b=i.data,C=b[v+1];ed(function(i){return 1==(1&i)}(C)?ki(b,s,o,l,Uo(C),m):void 0)||(ed(d)||function(i){return 2==(2&i)}(C)&&(d=ki(b,null,o,l,v,m)),function(i,s,o,u,l){const d=Yt(i);if(s)l?d?i.addClass(o,u):o.classList.add(u):d?i.removeClass(o,u):o.classList.remove(u);else{let m=-1===u.indexOf("-")?void 0:gs.DashCase;if(null==l)d?i.removeStyle(o,u,m):o.style.removeProperty(u);else{const v="string"==typeof l&&l.endsWith("!important");v&&(l=l.slice(0,-10),m|=gs.Important),d?i.setStyle(o,u,l,m):o.style.setProperty(u,l,v?"important":"")}}}(u,m,Ds(Vr(),o),l,d))}(d,d.data[Vr()],l,l[11],i,l[m+1]=function(i,s){return null==i||("string"==typeof s?i+=s:"object"==typeof i&&(i=K(Ns(i)))),i}(s,o),u,m)}(i,s,null,!0),jE}function kc(i,s,o,u,l){let d=null;const m=o.directiveEnd;let v=o.directiveStylingLast;for(-1===v?v=o.directiveStart:v++;v<m&&(d=s[v],u=Jh(u,d.hostAttrs,l),d!==i);)v++;return null!==i&&(o.directiveStylingLast=v),u}function Jh(i,s,o){const u=o?1:2;let l=-1;if(null!==s)for(let d=0;d<s.length;d++){const m=s[d];"number"==typeof m?l=m:l===u&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),$n(i,m,!!o||s[++d]))}return void 0===i?null:i}function ki(i,s,o,u,l,d){const m=null===s;let v;for(;l>0;){const b=i[l],C=Array.isArray(b),S=C?b[1]:b,N=null===S;let k=o[l+1];k===lt&&(k=N?xe:void 0);let H=N?du(k,u):S===u?k:void 0;if(C&&!ed(H)&&(H=du(b,u)),ed(H)&&(v=H,m))return v;const W=i[l+1];l=m?ms(W):Uo(W)}if(null!==s){let b=d?s.residualClasses:s.residualStyles;null!=b&&(v=du(b,u))}return v}function ed(i){return void 0!==i}function a_(i,s=""){const o=Ee(),u=Bt(),l=i+20,d=u.firstCreatePass?Dc(u,l,1,s,null):u.data[l],m=o[l]=function(i,s){return Yt(i)?i.createText(s):i.createTextNode(s)}(o[11],s);Vp(u,o,m,d),Si(d,!1)}function Dg(i){return Tg("",i,""),Dg}function Tg(i,s,o){const u=Ee(),l=function(i,s,o,u){return lr(i,Ks(),o)?s+Be(o)+u:lt}(u,i,s,o);return l!==lt&&Oa(u,Vr(),l),Tg}function XE(i,s,o){const u=Ee();return lr(u,Ks(),s)&&ks(Bt(),En(),u,i,s,u[11],o,!0),XE}const Ht=void 0;var qI=["en",[["a","p"],["AM","PM"],Ht],[["AM","PM"],Ht,Ht],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ht,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ht,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ht,"{1} 'at' {0}",Ht],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(i){const s=Math.floor(Math.abs(i)),o=i.toString().replace(/^[^.]*\.?/,"").length;return 1===s&&0===o?1:5}];let Ls={};function Pi(i){const s=function(i){return i.toLowerCase().replace(/_/g,"-")}(i);let o=eb(s);if(o)return o;const u=s.split("-")[0];if(o=eb(u),o)return o;if("en"===u)return qI;throw new Error(`Missing locale data for the locale "${i}".`)}function tf(i){return Pi(i)[dt.PluralCase]}function eb(i){return i in Ls||(Ls[i]=Ye.ng&&Ye.ng.common&&Ye.ng.common.locales&&Ye.ng.common.locales[i]),Ls[i]}var dt=(()=>((dt=dt||{})[dt.LocaleId=0]="LocaleId",dt[dt.DayPeriodsFormat=1]="DayPeriodsFormat",dt[dt.DayPeriodsStandalone=2]="DayPeriodsStandalone",dt[dt.DaysFormat=3]="DaysFormat",dt[dt.DaysStandalone=4]="DaysStandalone",dt[dt.MonthsFormat=5]="MonthsFormat",dt[dt.MonthsStandalone=6]="MonthsStandalone",dt[dt.Eras=7]="Eras",dt[dt.FirstDayOfWeek=8]="FirstDayOfWeek",dt[dt.WeekendRange=9]="WeekendRange",dt[dt.DateFormat=10]="DateFormat",dt[dt.TimeFormat=11]="TimeFormat",dt[dt.DateTimeFormat=12]="DateTimeFormat",dt[dt.NumberSymbols=13]="NumberSymbols",dt[dt.NumberFormats=14]="NumberFormats",dt[dt.CurrencyCode=15]="CurrencyCode",dt[dt.CurrencySymbol=16]="CurrencySymbol",dt[dt.CurrencyName=17]="CurrencyName",dt[dt.Currencies=18]="Currencies",dt[dt.Directionality=19]="Directionality",dt[dt.PluralCase=20]="PluralCase",dt[dt.ExtraData=21]="ExtraData",dt))();const Ot="en-US";let nb=Ot;function d_(i){dn(i,"Expected localeId to be defined"),"string"==typeof i&&(nb=i.toLowerCase().replace(/_/g,"-"))}function Pg(i,s,o,u,l){if(i=he(i),Array.isArray(i))for(let d=0;d<i.length;d++)Pg(i[d],s,o,u,l);else{const d=Bt(),m=Ee();let v=Uh(i)?i:he(i.provide),b=fE(i);const C=gn(),S=1048575&C.providerIndexes,N=C.directiveStart,k=C.providerIndexes>>20;if(Uh(i)||!i.multi){const H=new ya(b,l,Zh),W=g_(v,s,l?S:S+k,N);-1===W?(li(So(C,m),d,v),Fg(d,i,s.length),s.push(v),C.directiveStart++,C.directiveEnd++,l&&(C.providerIndexes+=1048576),o.push(H),m.push(H)):(o[W]=H,m[W]=H)}else{const H=g_(v,s,S+k,N),W=g_(v,s,S,S+k),ue=H>=0&&o[H],Q=W>=0&&o[W];if(l&&!Q||!l&&!ue){li(So(C,m),d,v);const Oe=function(i,s,o,u,l){const d=new ya(i,o,Zh);return d.multi=[],d.index=s,d.componentProviders=0,mb(d,l,u&&!o),d}(l?pC:KA,o.length,l,u,b);!l&&Q&&(o[W].providerFactory=Oe),Fg(d,i,s.length,0),s.push(v),C.directiveStart++,C.directiveEnd++,l&&(C.providerIndexes+=1048576),o.push(Oe),m.push(Oe)}else Fg(d,i,H>-1?H:W,mb(o[l?W:H],b,!l&&u));!l&&u&&Q&&o[W].componentProviders++}}}function Fg(i,s,o,u){const l=Uh(s);if(l||function(i){return!!i.useClass}(s)){const m=(s.useClass||s).prototype.ngOnDestroy;if(m){const v=i.destroyHooks||(i.destroyHooks=[]);if(!l&&s.multi){const b=v.indexOf(o);-1===b?v.push(o,[u,m]):v[b+1].push(u,m)}else v.push(o,m)}}}function mb(i,s,o){return o&&i.componentProviders++,i.multi.push(s)-1}function g_(i,s,o,u){for(let l=o;l<u;l++)if(s[l]===i)return l;return-1}function KA(i,s,o,u){return m_(this.multi,[])}function pC(i,s,o,u){const l=this.multi;let d;if(this.providerFactory){const m=this.providerFactory.componentProviders,v=va(o,o[1],this.providerFactory.index,u);d=v.slice(0,m),m_(l,d);for(let b=m;b<v.length;b++)d.push(v[b])}else d=[],m_(l,d);return d}function m_(i,s){for(let o=0;o<i.length;o++)s.push((0,i[o])());return s}function cf(i,s=[]){return o=>{o.providersResolver=(u,l)=>function(i,s,o){const u=Bt();if(u.firstCreatePass){const l=Ai(i);Pg(o,u.data,u.blueprint,l,!0),Pg(s,u.data,u.blueprint,l,!1)}}(u,l?l(i):i,s)}}class gC{}const mC="ngComponent";class YA{resolveComponentFactory(s){throw function(i){const s=Error(`No component factory found for ${K(i)}. Did you add it to @NgModule.entryComponents?`);return s[mC]=i,s}(s)}}let Ba=(()=>{class i{}return i.NULL=new YA,i})();function Lg(...i){}function df(i,s){return new Ko(oi(i,s))}const JA=function(){return df(gn(),Ee())};let Ko=(()=>{class i{constructor(o){this.nativeElement=o}}return i.__NG_ELEMENT_ID__=JA,i})();function hf(i){return i instanceof Ko?i.nativeElement:i}class Vc{}let yC=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>vC(),i})();const vC=function(){const i=Ee(),o=ar(gn().index,i);return function(i){return i[11]}(is(o)?o:i)};let E_=(()=>{class i{}return i.\u0275prov=yt({token:i,providedIn:"root",factory:()=>null}),i})();class ku{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const Uc=new ku("12.2.16");class bb{constructor(){}supports(s){return jh(s)}create(s){return new ff(s)}}const ld=(i,s)=>s;class ff{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||ld}forEachItem(s){let o;for(o=this._itHead;null!==o;o=o._next)s(o)}forEachOperation(s){let o=this._itHead,u=this._removalsHead,l=0,d=null;for(;o||u;){const m=!u||o&&o.currentIndex<bC(u,l,d)?o:u,v=bC(m,l,d),b=m.currentIndex;if(m===u)l--,u=u._nextRemoved;else if(o=o._next,null==m.previousIndex)l++;else{d||(d=[]);const C=v-l,S=b-l;if(C!=S){for(let k=0;k<C;k++){const H=k<d.length?d[k]:d[k]=0,W=H+k;S<=W&&W<C&&(d[k]=H+1)}d[m.previousIndex]=S-C}}v!==b&&s(m,v,b)}}forEachPreviousItem(s){let o;for(o=this._previousItHead;null!==o;o=o._nextPrevious)s(o)}forEachAddedItem(s){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)s(o)}forEachMovedItem(s){let o;for(o=this._movesHead;null!==o;o=o._nextMoved)s(o)}forEachRemovedItem(s){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)s(o)}forEachIdentityChange(s){let o;for(o=this._identityChangesHead;null!==o;o=o._nextIdentityChange)s(o)}diff(s){if(null==s&&(s=[]),!jh(s))throw new Error(`Error trying to diff '${K(s)}'. Only arrays and iterables are allowed`);return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let l,d,m,o=this._itHead,u=!1;if(Array.isArray(s)){this.length=s.length;for(let v=0;v<this.length;v++)d=s[v],m=this._trackByFn(v,d),null!==o&&Object.is(o.trackById,m)?(u&&(o=this._verifyReinsertion(o,d,m,v)),Object.is(o.item,d)||this._addIdentityChange(o,d)):(o=this._mismatch(o,d,m,v),u=!0),o=o._next}else l=0,function(i,s){if(Array.isArray(i))for(let o=0;o<i.length;o++)s(i[o]);else{const o=i[oo()]();let u;for(;!(u=o.next()).done;)s(u.value)}}(s,v=>{m=this._trackByFn(l,v),null!==o&&Object.is(o.trackById,m)?(u&&(o=this._verifyReinsertion(o,v,m,l)),Object.is(o.item,v)||this._addIdentityChange(o,v)):(o=this._mismatch(o,v,m,l),u=!0),o=o._next,l++}),this.length=l;return this._truncate(o),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,o,u,l){let d;return null===s?d=this._itTail:(d=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null))?(Object.is(s.item,o)||this._addIdentityChange(s,o),this._reinsertAfter(s,d,l)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(u,l))?(Object.is(s.item,o)||this._addIdentityChange(s,o),this._moveAfter(s,d,l)):s=this._addAfter(new EC(o,u),d,l),s}_verifyReinsertion(s,o,u,l){let d=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null);return null!==d?s=this._reinsertAfter(d,s._prev,l):s.currentIndex!=l&&(s.currentIndex=l,this._addToMoves(s,l)),s}_truncate(s){for(;null!==s;){const o=s._next;this._addToRemovals(this._unlink(s)),s=o}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,o,u){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const l=s._prevRemoved,d=s._nextRemoved;return null===l?this._removalsHead=d:l._nextRemoved=d,null===d?this._removalsTail=l:d._prevRemoved=l,this._insertAfter(s,o,u),this._addToMoves(s,u),s}_moveAfter(s,o,u){return this._unlink(s),this._insertAfter(s,o,u),this._addToMoves(s,u),s}_addAfter(s,o,u){return this._insertAfter(s,o,u),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,o,u){const l=null===o?this._itHead:o._next;return s._next=l,s._prev=o,null===l?this._itTail=s:l._prev=s,null===o?this._itHead=s:o._next=s,null===this._linkedRecords&&(this._linkedRecords=new wb),this._linkedRecords.put(s),s.currentIndex=u,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const o=s._prev,u=s._next;return null===o?this._itHead=u:o._next=u,null===u?this._itTail=o:u._prev=o,s}_addToMoves(s,o){return s.previousIndex===o||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new wb),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,o){return s.item=o,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class EC{constructor(s,o){this.item=s,this.trackById=o,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Bc{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,o){let u;for(u=this._head;null!==u;u=u._nextDup)if((null===o||o<=u.currentIndex)&&Object.is(u.trackById,s))return u;return null}remove(s){const o=s._prevDup,u=s._nextDup;return null===o?this._head=u:o._nextDup=u,null===u?this._tail=o:u._prevDup=o,null===this._head}}class wb{constructor(){this.map=new Map}put(s){const o=s.trackById;let u=this.map.get(o);u||(u=new Bc,this.map.set(o,u)),u.add(s)}get(s,o){const l=this.map.get(s);return l?l.get(s,o):null}remove(s){const o=s.trackById;return this.map.get(o).remove(s)&&this.map.delete(o),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function bC(i,s,o){const u=i.previousIndex;if(null===u)return u;let l=0;return o&&u<o.length&&(l=o[u]),u+s+l}class wC{constructor(){}supports(s){return s instanceof Map||Ki(s)}create(){return new XA}}class XA{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let o;for(o=this._mapHead;null!==o;o=o._next)s(o)}forEachPreviousItem(s){let o;for(o=this._previousMapHead;null!==o;o=o._nextPrevious)s(o)}forEachChangedItem(s){let o;for(o=this._changesHead;null!==o;o=o._nextChanged)s(o)}forEachAddedItem(s){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)s(o)}forEachRemovedItem(s){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)s(o)}diff(s){if(s){if(!(s instanceof Map||Ki(s)))throw new Error(`Error trying to diff '${K(s)}'. Only maps and objects are allowed`)}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let o=this._mapHead;if(this._appendAfter=null,this._forEach(s,(u,l)=>{if(o&&o.key===l)this._maybeAddToChanges(o,u),this._appendAfter=o,o=o._next;else{const d=this._getOrCreateRecordForKey(l,u);o=this._insertBeforeOrAppend(o,d)}}),o){o._prev&&(o._prev._next=null),this._removalsHead=o;for(let u=o;null!==u;u=u._nextRemoved)u===this._mapHead&&(this._mapHead=null),this._records.delete(u.key),u._nextRemoved=u._next,u.previousValue=u.currentValue,u.currentValue=null,u._prev=null,u._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,o){if(s){const u=s._prev;return o._next=s,o._prev=u,s._prev=o,u&&(u._next=o),s===this._mapHead&&(this._mapHead=o),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=o,o._prev=this._appendAfter):this._mapHead=o,this._appendAfter=o,null}_getOrCreateRecordForKey(s,o){if(this._records.has(s)){const l=this._records.get(s);this._maybeAddToChanges(l,o);const d=l._prev,m=l._next;return d&&(d._next=m),m&&(m._prev=d),l._next=null,l._prev=null,l}const u=new eS(s);return this._records.set(s,u),u.currentValue=o,this._addToAdditions(u),u}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,o){Object.is(o,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=o,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,o){s instanceof Map?s.forEach(o):Object.keys(s).forEach(u=>o(s[u],u))}}class eS{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Vg(){return new Ug([new bb])}let Ug=(()=>{class i{constructor(o){this.factories=o}static create(o,u){if(null!=u){const l=u.factories.slice();o=o.concat(l)}return new i(o)}static extend(o){return{provide:i,useFactory:u=>i.create(o,u||Vg()),deps:[[i,new Ia,new eo]]}}find(o){const u=this.factories.find(l=>l.supports(o));if(null!=u)return u;throw new Error(`Cannot find a differ supporting object '${o}' of type '${function(i){return i.name||typeof i}(o)}'`)}}return i.\u0275prov=yt({token:i,providedIn:"root",factory:Vg}),i})();function Ib(){return new b_([new wC])}let b_=(()=>{class i{constructor(o){this.factories=o}static create(o,u){if(u){const l=u.factories.slice();o=o.concat(l)}return new i(o)}static extend(o){return{provide:i,useFactory:u=>i.create(o,u||Ib()),deps:[[i,new Ia,new eo]]}}find(o){const u=this.factories.find(l=>l.supports(o));if(u)return u;throw new Error(`Cannot find a differ supporting object '${o}'`)}}return i.\u0275prov=yt({token:i,providedIn:"root",factory:Ib}),i})();function Bg(i,s,o,u,l=!1){for(;null!==o;){const d=s[o.index];if(null!==d&&u.push(Vt(d)),Tn(d))for(let v=10;v<d.length;v++){const b=d[v],C=b[1].firstChild;null!==C&&Bg(b[1],b,C,u)}const m=o.type;if(8&m)Bg(i,s,o.child,u);else if(32&m){const v=kp(o,s);let b;for(;b=v();)u.push(b)}else if(16&m){const v=PT(s,o);if(Array.isArray(v))u.push(...v);else{const b=_(s[16]);Bg(b[1],b,v,u,!0)}}o=l?o.projectionNext:o.next}return u}class Yo{constructor(s,o){this._lView=s,this._cdRefInjectingView=o,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const s=this._lView,o=s[1];return Bg(o,s,o.firstChild,[])}get context(){return this._lView[8]}set context(s){this._lView[8]=s}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[3];if(Tn(s)){const o=s[8],u=o?o.indexOf(this):-1;u>-1&&(kl(s,u),wa(o,u))}this._attachedToViewContainer=!1}Fp(this._lView[1],this._lView)}onDestroy(s){Yp(this._lView[1],this._lView,null,s)}markForCheck(){eg(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){jl(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(i,s,o){as(!0);try{jl(i,s,o)}finally{as(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var s;this._appRef=null,Up(this._lView[1],s=this._lView,s[11],2,null,null)}attachToAppRef(s){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=s}}class jg extends Yo{constructor(s){super(s),this._view=s}detectChanges(){Ay(this._view)}checkNoChanges(){!function(i){as(!0);try{Ay(i)}finally{as(!1)}}(this._view)}get context(){return null}}const rS=function(i){return function(i,s,o){if(Hu(i)&&!o){const u=ar(i.index,s);return new Yo(u,u)}return 47&i.type?new Yo(s[16],s):null}(gn(),Ee(),16==(16&i))};let CC=(()=>{class i{}return i.__NG_ELEMENT_ID__=rS,i})();const Cb=[new wC],oS=new Ug([new bb]),aS=new b_(Cb),DC=function(){return pf(gn(),Ee())};let Hg=(()=>{class i{}return i.__NG_ELEMENT_ID__=DC,i})();const w_=Hg,cS=class extends w_{constructor(s,o,u){super(),this._declarationLView=s,this._declarationTContainer=o,this.elementRef=u}createEmbeddedView(s){const o=this._declarationTContainer.tViews,u=Vl(this._declarationLView,o,s,16,null,o.declTNode,null,null,null,null);u[17]=this._declarationLView[this._declarationTContainer.index];const d=this._declarationLView[19];return null!==d&&(u[19]=d.createEmbeddedView(o)),Nh(o,u,s),new Yo(u)}};function pf(i,s){return 4&i.type?new cS(s,i,df(i,s)):null}class Pu{}class gf{}const Db=function(){return Sb(gn(),Ee())};let $g=(()=>{class i{}return i.__NG_ELEMENT_ID__=Db,i})();const SC=$g,Tb=class extends SC{constructor(s,o,u){super(),this._lContainer=s,this._hostTNode=o,this._hostLView=u}get element(){return df(this._hostTNode,this._hostLView)}get injector(){return new us(this._hostTNode,this._hostLView)}get parentInjector(){const s=Ys(this._hostTNode,this._hostLView);if(_a(s)){const o=au(s,this._hostLView),u=Gi(s);return new us(o[1].data[u+8],o)}return new us(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const o=C_(this._lContainer);return null!==o&&o[s]||null}get length(){return this._lContainer.length-10}createEmbeddedView(s,o,u){const l=s.createEmbeddedView(o||{});return this.insert(l,u),l}createComponent(s,o,u,l,d){const m=u||this.parentInjector;if(!d&&null==s.ngModule&&m){const b=m.get(Pu,null);b&&(d=b)}const v=s.create(m,l,void 0,d);return this.insert(v.hostView,o),v}insert(s,o){const u=s._lView,l=u[1];if(Tn(u[3])){const S=this.indexOf(s);if(-1!==S)this.detach(S);else{const N=u[3],k=new Tb(N,N[6],N[3]);k.detach(k.indexOf(s))}}const d=this._adjustIndex(o),m=this._lContainer;!function(i,s,o,u){const l=10+u,d=o.length;u>0&&(o[l-1][4]=s),u<d-10?(s[4]=o[l],yl(o,10+u,s)):(o.push(s),s[4]=null),s[3]=o;const m=s[17];null!==m&&o!==m&&function(i,s){const o=i[9];s[16]!==s[3][3][16]&&(i[2]=!0),null===o?i[9]=[s]:o.push(s)}(m,s);const v=s[19];null!==v&&v.insertView(i),s[2]|=128}(l,u,m,d);const v=wu(d,m),b=u[11],C=ay(b,m[7]);return null!==C&&function(i,s,o,u,l,d){u[0]=l,u[6]=s,Up(i,u,o,1,l,d)}(l,m[6],b,u,C,v),s.attachToViewContainerRef(),yl(Ab(m),d,s),s}move(s,o){return this.insert(s,o)}indexOf(s){const o=C_(this._lContainer);return null!==o?o.indexOf(s):-1}remove(s){const o=this._adjustIndex(s,-1),u=kl(this._lContainer,o);u&&(wa(Ab(this._lContainer),o),Fp(u[1],u))}detach(s){const o=this._adjustIndex(s,-1),u=kl(this._lContainer,o);return u&&null!=wa(Ab(this._lContainer),o)?new Yo(u):null}_adjustIndex(s,o=0){return null==s?this.length+o:s}};function C_(i){return i[8]}function Ab(i){return i[8]||(i[8]=[])}function Sb(i,s){let o;const u=s[i.index];if(Tn(u))o=u;else{let l;if(8&i.type)l=Vt(u);else{const d=s[11];l=d.createComment("");const m=oi(i,s);ro(d,ay(d,m),l,function(i,s){return Yt(i)?i.nextSibling(s):s.nextSibling}(d,m),!1)}s[i.index]=o=aE(u,s,l,i),Xp(s,o)}return new Tb(o,i,s)}const Gc={};class k_ extends Ba{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const o=Nn(s);return new P_(o,this.ngModule)}}function GC(i){const s=[];for(let o in i)i.hasOwnProperty(o)&&s.push({propName:i[o],templateName:o});return s}const US=new bn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>xp});class P_ extends gC{constructor(s,o){super(),this.componentDef=s,this.ngModule=o,this.componentType=s.type,this.selector=s.selectors.map(Cc).join(","),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!o}get inputs(){return GC(this.componentDef.inputs)}get outputs(){return GC(this.componentDef.outputs)}create(s,o,u,l){const d=(l=l||this.ngModule)?function(i,s){return{get:(o,u,l)=>{const d=i.get(o,Gc,l);return d!==Gc||u===Gc?d:s.get(o,u,l)}}}(s,l.injector):s,m=d.get(Vc,Cs),v=d.get(E_,null),b=m.createRenderer(null,this.componentDef),C=this.componentDef.selectors[0][0]||"div",S=u?function(i,s,o){if(Yt(i))return i.selectRootElement(s,o===Tt.ShadowDom);let u="string"==typeof s?i.querySelector(s):s;return u.textContent="",u}(b,u,this.componentDef.encapsulation):Qe(m.createRenderer(null,this.componentDef),C,function(i){const s=i.toLowerCase();return"svg"===s?"http://www.w3.org/2000/svg":"math"===s?"http://www.w3.org/1998/MathML/":null}(C)),N=this.componentDef.onPush?576:528,k=function(i,s){return{components:[],scheduler:i||xp,clean:Ww,playerHandler:s||null,flags:0}}(),H=Oh(0,null,null,1,0,null,null,null,null,null),W=Vl(null,H,k,N,null,null,m,b,v,d);let ue,Q;To(W);try{const Oe=function(i,s,o,u,l,d){const m=o[1];o[20]=i;const b=Dc(m,20,2,"#host",null),C=b.mergedAttrs=s.hostAttrs;null!==C&&(ng(b,C,!0),null!==i&&(ou(l,i,C),null!==b.classes&&cy(l,i,b.classes),null!==b.styles&&yw(l,i,b.styles)));const S=u.createRenderer(i,s),N=Vl(o,Ow(s),null,s.onPush?64:16,o[20],b,u,S,d||null,null);return m.firstCreatePass&&(li(So(b,o),m,s.type),iE(m,b),jw(b,o.length,1)),Xp(o,N),o[20]=N}(S,this.componentDef,W,m,b);if(S)if(u)ou(b,S,["ng-version",Uc.full]);else{const{attrs:ye,classes:st}=function(i){const s=[],o=[];let u=1,l=2;for(;u<i.length;){let d=i[u];if("string"==typeof d)2===l?""!==d&&s.push(d,i[++u]):8===l&&o.push(d);else{if(!Vo(l))break;l=d}u++}return{attrs:s,classes:o}}(this.componentDef.selectors[0]);ye&&ou(b,S,ye),st&&st.length>0&&cy(b,S,st.join(" "))}if(Q=Ts(H,20),void 0!==o){const ye=Q.projection=[];for(let st=0;st<this.ngContentSelectors.length;st++){const gt=o[st];ye.push(null!=gt?Array.from(gt):null)}}ue=function(i,s,o,u,l){const d=o[1],m=function(i,s,o){const u=gn();i.firstCreatePass&&(o.providersResolver&&o.providersResolver(o),Hw(i,u,s,Tc(i,s,1,null),o));const l=va(s,i,u.directiveStart,u);un(l,s);const d=oi(u,s);return d&&un(d,s),l}(d,o,s);if(u.components.push(m),i[8]=m,l&&l.forEach(b=>b(m,s)),s.contentQueries){const b=gn();s.contentQueries(1,m,b.directiveStart)}const v=gn();return!d.firstCreatePass||null===s.hostBindings&&null===s.hostAttrs||(ai(v.index),wy(o[1],v,0,v.directiveStart,v.directiveEnd,s),Ph(s,m)),m}(Oe,this.componentDef,W,k,[iI]),Nh(H,W,null)}finally{ec()}return new qC(this.componentType,ue,df(Q,W),W,Q)}}class qC extends class{}{constructor(s,o,u,l,d){super(),this.location=u,this._rootLView=l,this._tNode=d,this.instance=o,this.hostView=this.changeDetectorRef=new jg(l),this.componentType=s}get injector(){return new us(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}const xf=new Map;class BS extends Pu{constructor(s,o){super(),this._parent=o,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new k_(this);const u=Yn(s),l=s[j]||null;l&&d_(l),this._bootstrapComponents=_r(u.bootstrap),this._r3Injector=Kw(s,o,[{provide:Pu,useValue:this},{provide:Ba,useValue:this.componentFactoryResolver}],K(s)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(s)}get(s,o=xn.THROW_IF_NOT_FOUND,u=Xe.Default){return s===xn||s===Pu||s===Iu?this:this._r3Injector.get(s,o,u)}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(o=>o()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class Xb extends gf{constructor(s){super(),this.moduleType=s,null!==Yn(s)&&function(i){const s=new Set;!function o(u){const l=Yn(u,!0),d=l.id;null!==d&&(function(i,s,o){if(s&&s!==o)throw new Error(`Duplicate module registered for ${i} - ${K(s)} vs ${K(s.name)}`)}(d,xf.get(d),u),xf.set(d,u));const m=_r(l.imports);for(const v of m)s.has(v)||(s.add(v),o(v))}(i)}(s)}create(s){return new BS(this.moduleType,s)}}function L_(i,s,o){const u=ur()+i,l=Ee();return l[u]===lt?Ho(l,u,o?s.call(o):s()):function(i,s){return i[s]}(l,u)}function KC(i,s,o,u,l,d){const m=s+o;return lr(i,m,l)?Ho(i,m+1,d?u.call(d,l):u(l)):function(i,s){const o=i[s];return o===lt?void 0:o}(i,m+1)}function j_(i,s){const o=Bt();let u;const l=i+20;o.firstCreatePass?(u=function(i,s){if(s)for(let o=s.length-1;o>=0;o--){const u=s[o];if(i===u.name)return u}throw new De("302",`The pipe '${i}' could not be found!`)}(s,o.pipeRegistry),o.data[l]=u,u.onDestroy&&(o.destroyHooks||(o.destroyHooks=[])).push(l,u.onDestroy)):u=o.data[l];const d=u.factory||(u.factory=Fr(u.type)),m=si(Zh);try{const v=hl(!1),b=d();return hl(v),function(i,s,o,u){o>=i.data.length&&(i.data[o]=null,i.blueprint[o]=null),s[o]=u}(o,Ee(),l,b),b}finally{si(m)}}function s0(i,s,o){const u=i+20,l=Ee(),d=function(i,s){return i[s]}(l,u);return function(i,s){ao.isWrapped(s)&&(s=ao.unwrap(s),i[ht.lFrame.bindingIndex]=lt);return s}(l,function(i,s){return i[1].data[s].pure}(l,u)?KC(l,ur(),s,d.transform,o,d):d.transform(o))}function Nf(i){return s=>{setTimeout(i,void 0,s)}}const kt=class extends g.xQ{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,o,u){var l,d,m;let v=s,b=o||(()=>null),C=u;if(s&&"object"==typeof s){const N=s;v=null===(l=N.next)||void 0===l?void 0:l.bind(N),b=null===(d=N.error)||void 0===d?void 0:d.bind(N),C=null===(m=N.complete)||void 0===m?void 0:m.bind(N)}this.__isAsync&&(b=Nf(b),v&&(v=Nf(v)),C&&(C=Nf(C)));const S=super.subscribe({next:v,error:b,complete:C});return s instanceof X.w&&s.add(S),S}};function XC(){return this._results[oo()]()}class nm{constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const o=oo(),u=nm.prototype;u[o]||(u[o]=XC)}get changes(){return this._changes||(this._changes=new kt)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,o){return this._results.reduce(s,o)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,o){const u=this;u.dirty=!1;const l=jr(s);(this._changesDetected=!function(i,s,o){if(i.length!==s.length)return!1;for(let u=0;u<i.length;u++){let l=i[u],d=s[u];if(o&&(l=o(l),d=o(d)),d!==l)return!1}return!0}(u._results,l,o))&&(u._results=l,u.length=l.length,u.last=l[this.length-1],u.first=l[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class yn{constructor(s){this.queryList=s,this.matches=null}clone(){return new yn(this.queryList)}setDirty(){this.queryList.setDirty()}}class ei{constructor(s=[]){this.queries=s}createEmbeddedView(s){const o=s.queries;if(null!==o){const u=null!==s.contentQueries?s.contentQueries[0]:o.length,l=[];for(let d=0;d<u;d++){const m=o.getByIndex(d);l.push(this.queries[m.indexInDeclarationView].clone())}return new ei(l)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let o=0;o<this.queries.length;o++)null!==f0(s,o).matches&&this.queries[o].setDirty()}}class ea{constructor(s,o,u=null){this.predicate=s,this.flags=o,this.read=u}}class H_{constructor(s=[]){this.queries=s}elementStart(s,o){for(let u=0;u<this.queries.length;u++)this.queries[u].elementStart(s,o)}elementEnd(s){for(let o=0;o<this.queries.length;o++)this.queries[o].elementEnd(s)}embeddedTView(s){let o=null;for(let u=0;u<this.length;u++){const l=null!==o?o.length:0,d=this.getByIndex(u).embeddedTView(s,l);d&&(d.indexInDeclarationView=u,null!==o?o.push(d):o=[d])}return null!==o?new H_(o):null}template(s,o){for(let u=0;u<this.queries.length;u++)this.queries[u].template(s,o)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class u0{constructor(s,o=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=o}elementStart(s,o){this.isApplyingToNode(o)&&this.matchTNode(s,o)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,o){this.elementStart(s,o)}embeddedTView(s,o){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,o),new u0(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const o=this._declarationNodeIndex;let u=s.parent;for(;null!==u&&8&u.type&&u.index!==o;)u=u.parent;return o===(null!==u?u.index:-1)}return this._appliesToNextNode}matchTNode(s,o){const u=this.metadata.predicate;if(Array.isArray(u))for(let l=0;l<u.length;l++){const d=u[l];this.matchTNodeWithReadOption(s,o,$_(o,d)),this.matchTNodeWithReadOption(s,o,Qt(o,s,d,!1,!1))}else u===Hg?4&o.type&&this.matchTNodeWithReadOption(s,o,-1):this.matchTNodeWithReadOption(s,o,Qt(o,s,u,!1,!1))}matchTNodeWithReadOption(s,o,u){if(null!==u){const l=this.metadata.read;if(null!==l)if(l===Ko||l===$g||l===Hg&&4&o.type)this.addMatch(o.index,-2);else{const d=Qt(o,s,l,!1,!1);null!==d&&this.addMatch(o.index,d)}else this.addMatch(o.index,u)}}addMatch(s,o){null===this.matches?this.matches=[s,o]:this.matches.push(s,o)}}function $_(i,s){const o=i.localNames;if(null!==o)for(let u=0;u<o.length;u+=2)if(o[u]===s)return o[u+1];return null}function c0(i,s,o,u){return-1===o?function(i,s){return 11&i.type?df(i,s):4&i.type?pf(i,s):null}(s,i):-2===o?function(i,s,o){return o===Ko?df(s,i):o===Hg?pf(s,i):o===$g?Sb(s,i):void 0}(i,s,u):va(i,i[1],o,s)}function im(i,s,o,u){const l=s[19].queries[u];if(null===l.matches){const d=i.data,m=o.matches,v=[];for(let b=0;b<m.length;b+=2){const C=m[b];v.push(C<0?null:c0(s,d[C],m[b+1],o.metadata.read))}l.matches=v}return l.matches}function l0(i,s,o,u){const l=i.queries.getByIndex(o),d=l.matches;if(null!==d){const m=im(i,s,l,o);for(let v=0;v<d.length;v+=2){const b=d[v];if(b>0)u.push(m[v/2]);else{const C=d[v+1],S=s[-b];for(let N=10;N<S.length;N++){const k=S[N];k[17]===k[3]&&l0(k[1],k,C,u)}if(null!==S[9]){const N=S[9];for(let k=0;k<N.length;k++){const H=N[k];l0(H[1],H,C,u)}}}}}return u}function zS(i){const s=Ee(),o=Bt(),u=Yd();Ju(u+1);const l=f0(o,u);if(i.dirty&&Cr(s)===(2==(2&l.metadata.flags))){if(null===l.matches)i.reset([]);else{const d=l.crossesNgTemplate?l0(o,s,u,[]):im(o,s,l,u);i.reset(d,hf),i.notifyOnChanges()}return!0}return!1}function rD(i,s,o,u){const l=Bt();if(l.firstCreatePass){const d=gn();(function(i,s,o){null===i.queries&&(i.queries=new H_),i.queries.track(new u0(s,o))})(l,new ea(s,o,u),d.index),function(i,s){const o=i.contentQueries||(i.contentQueries=[]);s!==(o.length?o[o.length-1]:-1)&&o.push(i.queries.length-1,s)}(l,i),2==(2&o)&&(l.staticContentQueries=!0)}!function(i,s,o){const u=new nm(4==(4&o));Yp(i,s,u,u.destroy),null===s[19]&&(s[19]=new ei),s[19].queries.push(new yn(u))}(l,Ee(),o)}function iD(){return i=Ee(),s=Yd(),i[19].queries[s].queryList;var i,s}function f0(i,s){return i.queries.getByIndex(s)}const R0=new bn("Application Initializer");let bd=(()=>{class i{constructor(o){this.appInits=o,this.resolve=Lg,this.reject=Lg,this.initialized=!1,this.done=!1,this.donePromise=new Promise((u,l)=>{this.resolve=u,this.reject=l})}runInitializers(){if(this.initialized)return;const o=[],u=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let l=0;l<this.appInits.length;l++){const d=this.appInits[l]();if(vg(d))o.push(d);else if(Kl(d)){const m=new Promise((v,b)=>{d.subscribe({complete:v,error:b})});o.push(m)}}Promise.all(o).then(()=>{u()}).catch(l=>{this.reject(l)}),0===o.length&&u(),this.initialized=!0}}return i.\u0275fac=function(o){return new(o||i)(Pn(R0,8))},i.\u0275prov=yt({token:i,factory:i.\u0275fac}),i})();const DD=new bn("AppId"),TD={provide:DD,useFactory:function(){return`${M0()}${M0()}${M0()}`},deps:[]};function M0(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const AD=new bn("Platform Initializer"),N0=new bn("Platform ID"),SD=new bn("appBootstrapListener");let O0=(()=>{class i{log(o){console.log(o)}warn(o){console.warn(o)}}return i.\u0275fac=function(o){return new(o||i)},i.\u0275prov=yt({token:i,factory:i.\u0275fac}),i})();const am=new bn("LocaleId"),k0=new bn("DefaultCurrencyCode");class um{constructor(s,o){this.ngModuleFactory=s,this.componentFactories=o}}const Q_=function(i){return new Xb(i)},mx=Q_,yx=function(i){return Promise.resolve(Q_(i))},RD=function(i){const s=Q_(i),u=_r(Yn(i).declarations).reduce((l,d)=>{const m=Nn(d);return m&&l.push(new P_(m)),l},[]);return new um(s,u)},_x=RD,bx=function(i){return Promise.resolve(RD(i))};let cm=(()=>{class i{constructor(){this.compileModuleSync=mx,this.compileModuleAsync=yx,this.compileModuleAndAllComponentsSync=_x,this.compileModuleAndAllComponentsAsync=bx}clearCache(){}clearCacheFor(o){}getModuleId(o){}}return i.\u0275fac=function(o){return new(o||i)},i.\u0275prov=yt({token:i,factory:i.\u0275fac}),i})();const Lf=(()=>Promise.resolve(0))();function lm(i){"undefined"==typeof Zone?Lf.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class lo{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:o=!1,shouldCoalesceRunChangeDetection:u=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new kt(!1),this.onMicrotaskEmpty=new kt(!1),this.onStable=new kt(!1),this.onError=new kt(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const l=this;l._nesting=0,l._outer=l._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(l._inner=l._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(l._inner=l._inner.fork(Zone.longStackTraceZoneSpec)),l.shouldCoalesceEventChangeDetection=!u&&o,l.shouldCoalesceRunChangeDetection=u,l.lastRequestAnimationFrameId=-1,l.nativeRequestAnimationFrame=function(){let i=Ye.requestAnimationFrame,s=Ye.cancelAnimationFrame;if("undefined"!=typeof Zone&&i&&s){const o=i[Zone.__symbol__("OriginalDelegate")];o&&(i=o);const u=s[Zone.__symbol__("OriginalDelegate")];u&&(s=u)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function(i){const s=()=>{!function(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(Ye,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,F0(i),i.isCheckStableRunning=!0,J_(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),F0(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(o,u,l,d,m,v)=>{try{return ND(i),o.invokeTask(l,d,m,v)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===d.type||i.shouldCoalesceRunChangeDetection)&&s(),OD(i)}},onInvoke:(o,u,l,d,m,v,b)=>{try{return ND(i),o.invoke(l,d,m,v,b)}finally{i.shouldCoalesceRunChangeDetection&&s(),OD(i)}},onHasTask:(o,u,l,d)=>{o.hasTask(l,d),u===l&&("microTask"==d.change?(i._hasPendingMicrotasks=d.microTask,F0(i),J_(i)):"macroTask"==d.change&&(i.hasPendingMacrotasks=d.macroTask))},onHandleError:(o,u,l,d)=>(o.handleError(l,d),i.runOutsideAngular(()=>i.onError.emit(d)),!1)})}(l)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!lo.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(lo.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(s,o,u){return this._inner.run(s,o,u)}runTask(s,o,u,l){const d=this._inner,m=d.scheduleEventTask("NgZoneEvent: "+l,s,Ix,Lg,Lg);try{return d.runTask(m,o,u)}finally{d.cancelTask(m)}}runGuarded(s,o,u){return this._inner.runGuarded(s,o,u)}runOutsideAngular(s){return this._outer.run(s)}}const Ix={};function J_(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function F0(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function ND(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function OD(i){i._nesting--,J_(i)}class Dx{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new kt,this.onMicrotaskEmpty=new kt,this.onStable=new kt,this.onError=new kt}run(s,o,u){return s.apply(o,u)}runGuarded(s,o,u){return s.apply(o,u)}runOutsideAngular(s){return s()}runTask(s,o,u,l){return s.apply(o,u)}}let kD=(()=>{class i{constructor(o){this._ngZone=o,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),o.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{lo.assertNotInAngularZone(),lm(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())lm(()=>{for(;0!==this._callbacks.length;){let o=this._callbacks.pop();clearTimeout(o.timeoutId),o.doneCb(this._didWork)}this._didWork=!1});else{let o=this.getPendingTasks();this._callbacks=this._callbacks.filter(u=>!u.updateCb||!u.updateCb(o)||(clearTimeout(u.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(o=>({source:o.source,creationLocation:o.creationLocation,data:o.data})):[]}addCallback(o,u,l){let d=-1;u&&u>0&&(d=setTimeout(()=>{this._callbacks=this._callbacks.filter(m=>m.timeoutId!==d),o(this._didWork,this.getPendingTasks())},u)),this._callbacks.push({doneCb:o,timeoutId:d,updateCb:l})}whenStable(o,u,l){if(l&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(o,u,l),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(o,u,l){return[]}}return i.\u0275fac=function(o){return new(o||i)(Pn(lo))},i.\u0275prov=yt({token:i,factory:i.\u0275fac}),i})(),PD=(()=>{class i{constructor(){this._applications=new Map,X_.addToWindow(this)}registerApplication(o,u){this._applications.set(o,u)}unregisterApplication(o){this._applications.delete(o)}unregisterAllApplications(){this._applications.clear()}getTestability(o){return this._applications.get(o)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(o,u=!0){return X_.findTestabilityInTree(this,o,u)}}return i.\u0275fac=function(o){return new(o||i)},i.\u0275prov=yt({token:i,factory:i.\u0275fac}),i})();class RM{addToWindow(s){}findTestabilityInTree(s,o,u){return null}}function MM(i){X_=i}let X_=new RM,FD=!0,LD=!1;function dm(){return LD=!0,FD}function VD(){if(LD)throw new Error("Cannot enable prod mode after platform setup.");FD=!1}let ho;const Wc=new bn("AllowMultipleToken");class fo{constructor(s,o){this.name=s,this.token=o}}function L0(i,s,o=[]){const u=`Platform: ${s}`,l=new bn(u);return(d=[])=>{let m=Vf();if(!m||m.injector.get(Wc,!1))if(i)i(o.concat(d).concat({provide:l,useValue:!0}));else{const v=o.concat(d).concat({provide:l,useValue:!0},{provide:Bo,useValue:"platform"});!function(i){if(ho&&!ho.destroyed&&!ho.injector.get(Wc,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");ho=i.get(Fi);const s=i.get(AD,null);s&&s.forEach(o=>o())}(xn.create({providers:v,name:u}))}return function(i){const s=Vf();if(!s)throw new Error("No platform exists!");if(!s.injector.get(i,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return s}(l)}}function Vf(){return ho&&!ho.destroyed?ho:null}let Fi=(()=>{class i{constructor(o){this._injector=o,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(o,u){const v=function(i,s){let o;return o="noop"===i?new Dx:("zone.js"===i?void 0:i)||new lo({enableLongStackTrace:dm(),shouldCoalesceEventChangeDetection:!!(null==s?void 0:s.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==s?void 0:s.ngZoneRunCoalescing)}),o}(u?u.ngZone:void 0,{ngZoneEventCoalescing:u&&u.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:u&&u.ngZoneRunCoalescing||!1}),b=[{provide:lo,useValue:v}];return v.run(()=>{const C=xn.create({providers:b,parent:this.injector,name:o.moduleType.name}),S=o.create(C),N=S.injector.get(no,null);if(!N)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return v.runOutsideAngular(()=>{const k=v.onError.subscribe({next:H=>{N.handleError(H)}});S.onDestroy(()=>{fm(this._modules,S),k.unsubscribe()})}),function(i,s,o){try{const u=o();return vg(u)?u.catch(l=>{throw s.runOutsideAngular(()=>i.handleError(l)),l}):u}catch(u){throw s.runOutsideAngular(()=>i.handleError(u)),u}}(N,v,()=>{const k=S.injector.get(bd);return k.runInitializers(),k.donePromise.then(()=>(d_(S.injector.get(am,Ot)||Ot),this._moduleDoBootstrap(S),S))})})}bootstrapModule(o,u=[]){const l=Cd({},u);return function(i,s,o){const u=new Xb(o);return Promise.resolve(u)}(0,0,o).then(d=>this.bootstrapModuleFactory(d,l))}_moduleDoBootstrap(o){const u=o.injector.get(na);if(o._bootstrapComponents.length>0)o._bootstrapComponents.forEach(l=>u.bootstrap(l));else{if(!o.instance.ngDoBootstrap)throw new Error(`The module ${K(o.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);o.instance.ngDoBootstrap(u)}this._modules.push(o)}onDestroy(o){this._destroyListeners.push(o)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(o=>o.destroy()),this._destroyListeners.forEach(o=>o()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(o){return new(o||i)(Pn(xn))},i.\u0275prov=yt({token:i,factory:i.\u0275fac}),i})();function Cd(i,s){return Array.isArray(s)?s.reduce(Cd,i):Object.assign(Object.assign({},i),s)}let na=(()=>{class i{constructor(o,u,l,d,m){this._zone=o,this._injector=u,this._exceptionHandler=l,this._componentFactoryResolver=d,this._initStatus=m,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const v=new L.y(C=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{C.next(this._stable),C.complete()})}),b=new L.y(C=>{let S;this._zone.runOutsideAngular(()=>{S=this._zone.onStable.subscribe(()=>{lo.assertNotInAngularZone(),lm(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,C.next(!0))})})});const N=this._zone.onUnstable.subscribe(()=>{lo.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{C.next(!1)}))});return()=>{S.unsubscribe(),N.unsubscribe()}});this.isStable=(0,ae.T)(v,b.pipe(i=>(0,ce.x)()(function(i,s){return function(u){let l;l="function"==typeof i?i:function(){return i};const d=Object.create(u,ie.N);return d.source=u,d.subjectFactory=l,d}}(ee)(i))))}bootstrap(o,u){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let l;l=o instanceof gC?o:this._componentFactoryResolver.resolveComponentFactory(o),this.componentTypes.push(l.componentType);const d=function(i){return i.isBoundToModule}(l)?void 0:this._injector.get(Pu),v=l.create(xn.NULL,[],u||l.selector,d),b=v.location.nativeElement,C=v.injector.get(kD,null),S=C&&v.injector.get(PD);return C&&S&&S.registerApplication(b,C),v.onDestroy(()=>{this.detachView(v.hostView),fm(this.components,v),S&&S.unregisterApplication(b)}),this._loadComponent(v),v}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let o of this._views)o.detectChanges()}catch(o){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(o))}finally{this._runningTick=!1}}attachView(o){const u=o;this._views.push(u),u.attachToAppRef(this)}detachView(o){const u=o;fm(this._views,u),u.detachFromAppRef()}_loadComponent(o){this.attachView(o.hostView),this.tick(),this.components.push(o),this._injector.get(SD,[]).concat(this._bootstrapListeners).forEach(l=>l(o))}ngOnDestroy(){this._views.slice().forEach(o=>o.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return i.\u0275fac=function(o){return new(o||i)(Pn(lo),Pn(xn),Pn(no),Pn(Ba),Pn(bd))},i.\u0275prov=yt({token:i,factory:i.\u0275fac}),i})();function fm(i,s){const o=i.indexOf(s);o>-1&&i.splice(o,1)}class Mx{}class Ox{}const qD={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let kx=(()=>{class i{constructor(o,u){this._compiler=o,this._config=u||qD}load(o){return this.loadAndCompile(o)}loadAndCompile(o){let[u,l]=o.split("#");return void 0===l&&(l="default"),F(8255)(u).then(d=>d[l]).then(d=>U0(d,u,l)).then(d=>this._compiler.compileModuleAsync(d))}loadFactory(o){let[u,l]=o.split("#"),d="NgFactory";return void 0===l&&(l="default",d=""),F(8255)(this._config.factoryPathPrefix+u+this._config.factoryPathSuffix).then(m=>m[l+d]).then(m=>U0(m,u,l))}}return i.\u0275fac=function(o){return new(o||i)(Pn(cm),Pn(Ox,8))},i.\u0275prov=yt({token:i,factory:i.\u0275fac}),i})();function U0(i,s,o){if(!i)throw new Error(`Cannot find '${o}' in '${s}'`);return i}const po=function(i){return null},Bx=L0(null,"core",[{provide:N0,useValue:"unknown"},{provide:Fi,deps:[xn]},{provide:PD,deps:[]},{provide:O0,deps:[]}]),JD=[{provide:na,useClass:na,deps:[lo,xn,no,Ba,bd]},{provide:US,deps:[lo],useFactory:function(i){let s=[];return i.onStable.subscribe(()=>{for(;s.length;)s.pop()()}),function(o){s.push(o)}}},{provide:bd,useClass:bd,deps:[[new eo,R0]]},{provide:cm,useClass:cm,deps:[]},TD,{provide:Ug,useFactory:function(){return oS},deps:[]},{provide:b_,useFactory:function(){return aS},deps:[]},{provide:am,useFactory:function(i){return d_(i=i||"undefined"!=typeof $localize&&$localize.locale||Ot),i},deps:[[new hc(am),new eo,new Ia]]},{provide:k0,useValue:"USD"}];let sv=(()=>{class i{constructor(o){}}return i.\u0275fac=function(o){return new(o||i)(Pn(na))},i.\u0275mod=Dn({type:i}),i.\u0275inj=bs({providers:JD}),i})()},8939:(We,me,F)=>{"use strict";F.d(me,{hO:()=>K,xv:()=>ee,Dh:()=>ce,GT:()=>ne,cc:()=>le,on:()=>P,pX:()=>ie});var g=F(3018),X=F(7841),L=F(9173);We=F.hmd(We);const ae=["ngOnDestroy"],ie=(Te,Me,De,Ze={})=>new Proxy(Te,{get:(at,Be)=>De.runOutsideAngular(()=>{var Lt;if(Te[Be])return(null===(Lt=null==Ze?void 0:Ze.spy)||void 0===Lt?void 0:Lt.get)&&Ze.spy.get(Be,Te[Be]),Te[Be];if(ae.indexOf(Be)>-1)return()=>{};const Et=Me.toPromise().then(Pe=>{const ke=Pe&&Pe[Be];return"function"==typeof ke?ke.bind(Pe):ke&&ke.then?ke.then(je=>De.run(()=>je)):De.run(()=>ke)});return new Proxy(()=>{},{get:(Pe,ke)=>Et[ke],apply:(Pe,ke,je)=>Et.then(et=>{var rt;const Dt=et&&et(...je);return(null===(rt=null==Ze?void 0:Ze.spy)||void 0===rt?void 0:rt.apply)&&Ze.spy.apply(Be,je,Dt),Dt})})})}),ne=(Te,Me)=>{Me.forEach(De=>{Object.getOwnPropertyNames(De.prototype||De).forEach(Ze=>{Object.defineProperty(Te.prototype,Ze,Object.getOwnPropertyDescriptor(De.prototype||De,Ze))})})};class _e{constructor(Me){return Me}}const ce=new g.OlP("angularfire2.app.options"),ee=new g.OlP("angularfire2.app.name");function P(Te,Me,De){const at="object"==typeof De&&De||{};at.name=at.name||"string"==typeof De&&De||"[DEFAULT]";const Lt=X.Z.apps.filter(Et=>Et&&Et.name===at.name)[0]||Me.runOutsideAngular(()=>X.Z.initializeApp(Te,at));try{JSON.stringify(Te)!==JSON.stringify(Lt.options)&&V("error",`${Lt.name} Firebase App already initialized with different options${We.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(Et){}return new _e(Lt)}const V=(Te,...Me)=>{(0,g.X6Q)()&&"undefined"!=typeof console&&console[Te](...Me)},Y={provide:_e,useFactory:P,deps:[ce,g.R0b,[new g.FiY,ee]]};let K=(()=>{class Te{constructor(De){X.Z.registerVersion("angularfire",L.q4.full,"core"),X.Z.registerVersion("angularfire",L.q4.full,"app-compat"),X.Z.registerVersion("angular",g.q4F.full,De.toString())}static initializeApp(De,Ze){return{ngModule:Te,providers:[{provide:ce,useValue:De},{provide:ee,useValue:Ze}]}}}return Te.\u0275fac=function(De){return new(De||Te)(g.LFG(g.Lbi))},Te.\u0275mod=g.oAB({type:Te}),Te.\u0275inj=g.cJS({providers:[Y]}),Te})();function le(Te,Me,De,Ze,at){const[,Be,Lt]=globalThis.\u0275AngularfireInstanceCache.find(Et=>Et[0]===Te)||[];if(Be)return function(Te,Me){try{return Te.toString()===Me.toString()}catch(De){return Te===Me}}(at,Lt)||(he("error",`${Me} was already initialized on the ${De} Firebase App with different settings.${fe?" You may need to reload as Firebase is not HMR aware.":""}`),he("warn",{is:at,was:Lt})),Be;{const Et=Ze();return globalThis.\u0275AngularfireInstanceCache.push([Te,Et,at]),Et}}const fe=!!We.hot,he=(Te,...Me)=>{(0,g.X6Q)()&&"undefined"!=typeof console&&console[Te](...Me)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},9173:(We,me,F)=>{"use strict";F.d(me,{q4:()=>lu,iC:()=>hu,HU:()=>lc,vb:()=>Oo,JM:()=>ah});var g=F(3018),X=F(2329),L=F(8239),ae=F(8026),ie=F(3854),ne=F(3910),_e=F(5422),ce=F(4359);const ee="@firebase/installations",P="0.5.15",Y=`w:${P}`,K="FIS_v2",Me=new ie.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function De(I){return I instanceof ie.ZR&&I.code.includes("request-failed")}function Ze({projectId:I}){return`https://firebaseinstallations.googleapis.com/v1/projects/${I}/installations`}function at(I){return{token:I.token,requestStatus:2,expiresIn:et(I.expiresIn),creationTime:Date.now()}}function Be(I,A){return Lt.apply(this,arguments)}function Lt(){return(Lt=(0,L.Z)(function*(I,A){const U=(yield A.json()).error;return Me.create("request-failed",{requestName:I,serverCode:U.code,serverMessage:U.message,serverStatus:U.status})})).apply(this,arguments)}function Et({apiKey:I}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I})}function Pe(I,{refreshToken:A}){const M=Et(I);return M.append("Authorization",function(I){return`${K} ${I}`}(A)),M}function ke(I){return je.apply(this,arguments)}function je(){return(je=(0,L.Z)(function*(I){const A=yield I();return A.status>=500&&A.status<600?I():A})).apply(this,arguments)}function et(I){return Number(I.replace("s","000"))}function Dt(I,A){return Ge.apply(this,arguments)}function Ge(){return(Ge=(0,L.Z)(function*({appConfig:I,heartbeatServiceProvider:A},{fid:M}){const U=Ze(I),Z=Et(I),re=A.getImmediate({optional:!0});if(re){const vt=yield re.getHeartbeatsHeader();vt&&Z.append("x-firebase-client",vt)}const Le={method:"POST",headers:Z,body:JSON.stringify({fid:M,authVersion:K,appId:I.appId,sdkVersion:Y})},ct=yield ke(()=>fetch(U,Le));if(ct.ok){const vt=yield ct.json();return{fid:vt.fid||M,registrationStatus:2,refreshToken:vt.refreshToken,authToken:at(vt.authToken)}}throw yield Be("Create Installation",ct)})).apply(this,arguments)}function Mn(I){return new Promise(A=>{setTimeout(A,I)})}const Li=/^[cdef][\w-]{21}$/;function Yc(){try{const I=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(I),I[0]=112+I[0]%16;const M=function(I){return function(I){return btoa(String.fromCharCode(...I)).replace(/\+/g,"-").replace(/\//g,"_")}(I).substr(0,22)}(I);return Li.test(M)?M:""}catch(I){return""}}function br(I){return`${I.appName}!${I.appId}`}const wi=new Map;function js(I,A){const M=br(I);Rr(M,A),function(I,A){const M=(!Vi&&"BroadcastChannel"in self&&(Vi=new BroadcastChannel("[Firebase] FID Change"),Vi.onmessage=I=>{Rr(I.data.key,I.data.fid)}),Vi);M&&M.postMessage({key:I,fid:A}),0===wi.size&&Vi&&(Vi.close(),Vi=null)}(M,A)}function Rr(I,A){const M=wi.get(I);if(M)for(const U of M)U(A)}let Vi=null;const Mr="firebase-installations-store";let Se=null;function wr(){return Se||(Se=(0,ce.X3)("firebase-installations-database",1,{upgrade:(I,A)=>{0===A&&I.createObjectStore(Mr)}})),Se}function Cn(I,A){return sn.apply(this,arguments)}function sn(){return(sn=(0,L.Z)(function*(I,A){const M=br(I),Z=(yield wr()).transaction(Mr,"readwrite"),re=Z.objectStore(Mr),we=yield re.get(M);return yield re.put(A,M),yield Z.done,(!we||we.fid!==A.fid)&&js(I,A.fid),A})).apply(this,arguments)}function _n(I){return Hs.apply(this,arguments)}function Hs(){return(Hs=(0,L.Z)(function*(I){const A=br(I),U=(yield wr()).transaction(Mr,"readwrite");yield U.objectStore(Mr).delete(A),yield U.done})).apply(this,arguments)}function ws(I,A){return Xe.apply(this,arguments)}function Xe(){return(Xe=(0,L.Z)(function*(I,A){const M=br(I),Z=(yield wr()).transaction(Mr,"readwrite"),re=Z.objectStore(Mr),we=yield re.get(M),Le=A(we);return void 0===Le?yield re.delete(M):yield re.put(Le,M),yield Z.done,Le&&(!we||we.fid!==Le.fid)&&js(I,Le.fid),Le})).apply(this,arguments)}function Nr(I){return Or.apply(this,arguments)}function Or(){return(Or=(0,L.Z)(function*(I){let A;const M=yield ws(I.appConfig,U=>{const Z=si(U),re=hn(I,Z);return A=re.registrationPromise,re.installationEntry});return""===M.fid?{installationEntry:yield A}:{installationEntry:M,registrationPromise:A}})).apply(this,arguments)}function si(I){return Tt(I||{fid:Yc(),registrationStatus:0})}function hn(I,A){if(0===A.registrationStatus){if(!navigator.onLine)return{installationEntry:A,registrationPromise:Promise.reject(Me.create("app-offline"))};const M={fid:A.fid,registrationStatus:1,registrationTime:Date.now()},U=function(I,A){return tt.apply(this,arguments)}(I,M);return{installationEntry:M,registrationPromise:U}}return 1===A.registrationStatus?{installationEntry:A,registrationPromise:zn(I)}:{installationEntry:A}}function tt(){return(tt=(0,L.Z)(function*(I,A){try{const M=yield Dt(I,A);return Cn(I.appConfig,M)}catch(M){throw De(M)&&409===M.customData.serverCode?yield _n(I.appConfig):yield Cn(I.appConfig,{fid:A.fid,registrationStatus:0}),M}})).apply(this,arguments)}function zn(I){return Ii.apply(this,arguments)}function Ii(){return(Ii=(0,L.Z)(function*(I){let A=yield Ci(I.appConfig);for(;1===A.registrationStatus;)yield Mn(100),A=yield Ci(I.appConfig);if(0===A.registrationStatus){const{installationEntry:M,registrationPromise:U}=yield Nr(I);return U||M}return A})).apply(this,arguments)}function Ci(I){return ws(I,A=>{if(!A)throw Me.create("installation-not-found");return Tt(A)})}function Tt(I){return function(I){return 1===I.registrationStatus&&I.registrationTime+1e4<Date.now()}(I)?{fid:I.fid,registrationStatus:0}:I}function go(I,A){return on.apply(this,arguments)}function on(){return(on=(0,L.Z)(function*({appConfig:I,heartbeatServiceProvider:A},M){const U=za(I,M),Z=Pe(I,M),re=A.getImmediate({optional:!0});if(re){const vt=yield re.getHeartbeatsHeader();vt&&Z.append("x-firebase-client",vt)}const Le={method:"POST",headers:Z,body:JSON.stringify({installation:{sdkVersion:Y,appId:I.appId}})},ct=yield ke(()=>fetch(U,Le));if(ct.ok)return at(yield ct.json());throw yield Be("Generate Auth Token",ct)})).apply(this,arguments)}function za(I,{fid:A}){return`${Ze(I)}/${A}/authTokens:generate`}function Ye(I){return $s.apply(this,arguments)}function $s(){return($s=(0,L.Z)(function*(I,A=!1){let M;const U=yield ws(I.appConfig,re=>{if(!zt(re))throw Me.create("not-registered");const we=re.authToken;if(!A&&$(we))return re;if(1===we.requestStatus)return M=qe(I,A),re;{if(!navigator.onLine)throw Me.create("app-offline");const Le=z(re);return M=_t(I,Le),Le}});return M?yield M:U.authToken})).apply(this,arguments)}function qe(I,A){return ve.apply(this,arguments)}function ve(){return(ve=(0,L.Z)(function*(I,A){let M=yield xe(I.appConfig);for(;1===M.authToken.requestStatus;)yield Mn(100),M=yield xe(I.appConfig);const U=M.authToken;return 0===U.requestStatus?Ye(I,A):U})).apply(this,arguments)}function xe(I){return ws(I,A=>{if(!zt(A))throw Me.create("not-registered");return function(I){return 1===I.requestStatus&&I.requestTime+1e4<Date.now()}(A.authToken)?Object.assign(Object.assign({},A),{authToken:{requestStatus:0}}):A})}function _t(I,A){return bt.apply(this,arguments)}function bt(){return(bt=(0,L.Z)(function*(I,A){try{const M=yield go(I,A),U=Object.assign(Object.assign({},A),{authToken:M});return yield Cn(I.appConfig,U),M}catch(M){if(!De(M)||401!==M.customData.serverCode&&404!==M.customData.serverCode){const U=Object.assign(Object.assign({},A),{authToken:{requestStatus:0}});yield Cn(I.appConfig,U)}else yield _n(I.appConfig);throw M}})).apply(this,arguments)}function zt(I){return void 0!==I&&2===I.registrationStatus}function $(I){return 2===I.requestStatus&&!function(I){const A=Date.now();return A<I.creationTime||I.creationTime+I.expiresIn<A+36e5}(I)}function z(I){const A={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},I),{authToken:A})}function ze(){return(ze=(0,L.Z)(function*(I){const A=I,{installationEntry:M,registrationPromise:U}=yield Nr(A);return U?U.catch(console.error):Ye(A).catch(console.error),M.fid})).apply(this,arguments)}function Xt(){return(Xt=(0,L.Z)(function*(I,A=!1){const M=I;return yield Zn(M),(yield Ye(M,A)).token})).apply(this,arguments)}function Zn(I){return Kn.apply(this,arguments)}function Kn(){return(Kn=(0,L.Z)(function*(I){const{registrationPromise:A}=yield Nr(I);A&&(yield A)})).apply(this,arguments)}function Yn(I){return Me.create("missing-app-config-values",{valueName:I})}const Od="installations";(0,ae._registerComponent)(new ne.wA(Od,I=>{const A=I.getProvider("app").getImmediate(),M=function(I){if(!I||!I.options)throw Yn("App Configuration");if(!I.name)throw Yn("App Name");const A=["projectId","apiKey","appId"];for(const M of A)if(!I.options[M])throw Yn(M);return{appName:I.name,projectId:I.options.projectId,apiKey:I.options.apiKey,appId:I.options.appId}}(A);return{app:A,appConfig:M,heartbeatServiceProvider:(0,ae._getProvider)(A,"heartbeat"),_delete:()=>Promise.resolve()}},"PUBLIC")),(0,ae._registerComponent)(new ne.wA("installations-internal",I=>{const A=I.getProvider("app").getImmediate(),M=(0,ae._getProvider)(A,Od).getImmediate();return{getId:()=>function(I){return ze.apply(this,arguments)}(M),getToken:Z=>function(I){return Xt.apply(this,arguments)}(M,Z)}},"PRIVATE")),(0,ae.registerVersion)(ee,P),(0,ae.registerVersion)(ee,P,"esm2017");const vn="@firebase/remote-config",fn=new ie.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class kd{constructor(A,M,U,Z){this.client=A,this.storage=M,this.storageCache=U,this.logger=Z}isCachedDataFresh(A,M){if(!M)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const U=Date.now()-M,Z=U<=A;return this.logger.debug(`Config fetch cache check. Cache age millis: ${U}. Cache max age millis (minimumFetchIntervalMillis setting): ${A}. Is cache hit: ${Z}.`),Z}fetch(A){var M=this;return(0,L.Z)(function*(){const[U,Z]=yield Promise.all([M.storage.getLastSuccessfulFetchTimestampMillis(),M.storage.getLastSuccessfulFetchResponse()]);if(Z&&M.isCachedDataFresh(A.cacheMaxAgeMillis,U))return Z;A.eTag=Z&&Z.eTag;const re=yield M.client.fetch(A),we=[M.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===re.status&&we.push(M.storage.setLastSuccessfulFetchResponse(re)),yield Promise.all(we),re})()}}function is(I=navigator){return I.languages&&I.languages[0]||I.language}class Tn{constructor(A,M,U,Z,re,we){this.firebaseInstallations=A,this.sdkVersion=M,this.namespace=U,this.projectId=Z,this.apiKey=re,this.appId=we}fetch(A){var M=this;return(0,L.Z)(function*(){var U,Z,re;const[we,Le]=yield Promise.all([M.firebaseInstallations.getId(),M.firebaseInstallations.getToken()]),vt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${M.projectId}/namespaces/${M.namespace}:fetch?key=${M.apiKey}`,Ue={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":A.eTag||"*"},ut={sdk_version:M.sdkVersion,app_instance_id:we,app_instance_id_token:Le,app_id:M.appId,language_code:is()},kn={method:"POST",headers:Ue,body:JSON.stringify(ut)},Xn=fetch(vt,kn),xi=new Promise((yr,pi)=>{A.signal.addEventListener(()=>{const up=new Error("The operation was aborted.");up.name="AbortError",pi(up)})});let hs;try{yield Promise.race([Xn,xi]),hs=yield Xn}catch(yr){let pi="fetch-client-network";throw"AbortError"===(null===(U=yr)||void 0===U?void 0:U.name)&&(pi="fetch-timeout"),fn.create(pi,{originalErrorMessage:null===(Z=yr)||void 0===Z?void 0:Z.message})}let fs=hs.status;const Pn=hs.headers.get("ETag")||void 0;let fi,ko;if(200===hs.status){let yr;try{yr=yield hs.json()}catch(pi){throw fn.create("fetch-client-parse",{originalErrorMessage:null===(re=pi)||void 0===re?void 0:re.message})}fi=yr.entries,ko=yr.state}if("INSTANCE_STATE_UNSPECIFIED"===ko?fs=500:"NO_CHANGE"===ko?fs=304:("NO_TEMPLATE"===ko||"EMPTY_CONFIG"===ko)&&(fi={}),304!==fs&&200!==fs)throw fn.create("fetch-status",{httpStatus:fs});return{status:fs,eTag:Pn,config:fi}})()}}class Is{constructor(A,M){this.client=A,this.storage=M}fetch(A){var M=this;return(0,L.Z)(function*(){const U=(yield M.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return M.attemptFetch(A,U)})()}attemptFetch(A,{throttleEndTimeMillis:M,backoffCount:U}){var Z=this;return(0,L.Z)(function*(){yield function(I,A){return new Promise((M,U)=>{const Z=Math.max(A-Date.now(),0),re=setTimeout(M,Z);I.addEventListener(()=>{clearTimeout(re),U(fn.create("fetch-throttle",{throttleEndTimeMillis:A}))})})}(A.signal,M);try{const re=yield Z.client.fetch(A);return yield Z.storage.deleteThrottleMetadata(),re}catch(re){if(!function(I){if(!(I instanceof ie.ZR&&I.customData))return!1;const A=Number(I.customData.httpStatus);return 429===A||500===A||503===A||504===A}(re))throw re;const we={throttleEndTimeMillis:Date.now()+(0,ie.$s)(U),backoffCount:U+1};return yield Z.storage.setThrottleMetadata(we),Z.attemptFetch(A,we)}})()}}class Gf{constructor(A,M,U,Z,re){this.app=A,this._client=M,this._storageCache=U,this._storage=Z,this._logger=re,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function ua(I,A){var M;const U=I.target.error||void 0;return fn.create(A,{originalErrorMessage:U&&(null===(M=U)||void 0===M?void 0:M.message)})}const _o="app_namespace_store";class tl{constructor(A,M,U,Z=function(){return new Promise((I,A)=>{var M;try{const U=indexedDB.open("firebase_remote_config",1);U.onerror=Z=>{A(ua(Z,"storage-open"))},U.onsuccess=Z=>{I(Z.target.result)},U.onupgradeneeded=Z=>{0===Z.oldVersion&&Z.target.result.createObjectStore(_o,{keyPath:"compositeKey"})}}catch(U){A(fn.create("storage-open",{originalErrorMessage:null===(M=U)||void 0===M?void 0:M.message}))}})}()){this.appId=A,this.appName=M,this.namespace=U,this.openDbPromise=Z}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(A){return this.set("last_fetch_status",A)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(A){return this.set("last_successful_fetch_timestamp_millis",A)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(A){return this.set("last_successful_fetch_response",A)}getActiveConfig(){return this.get("active_config")}setActiveConfig(A){return this.set("active_config",A)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(A){return this.set("active_config_etag",A)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(A){return this.set("throttle_metadata",A)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(A){var M=this;return(0,L.Z)(function*(){const U=yield M.openDbPromise;return new Promise((Z,re)=>{var we;const ct=U.transaction([_o],"readonly").objectStore(_o),vt=M.createCompositeKey(A);try{const Ue=ct.get(vt);Ue.onerror=ut=>{re(ua(ut,"storage-get"))},Ue.onsuccess=ut=>{const kn=ut.target.result;Z(kn?kn.value:void 0)}}catch(Ue){re(fn.create("storage-get",{originalErrorMessage:null===(we=Ue)||void 0===we?void 0:we.message}))}})})()}set(A,M){var U=this;return(0,L.Z)(function*(){const Z=yield U.openDbPromise;return new Promise((re,we)=>{var Le;const vt=Z.transaction([_o],"readwrite").objectStore(_o),Ue=U.createCompositeKey(A);try{const ut=vt.put({compositeKey:Ue,value:M});ut.onerror=kn=>{we(ua(kn,"storage-set"))},ut.onsuccess=()=>{re()}}catch(ut){we(fn.create("storage-set",{originalErrorMessage:null===(Le=ut)||void 0===Le?void 0:Le.message}))}})})()}delete(A){var M=this;return(0,L.Z)(function*(){const U=yield M.openDbPromise;return new Promise((Z,re)=>{var we;const ct=U.transaction([_o],"readwrite").objectStore(_o),vt=M.createCompositeKey(A);try{const Ue=ct.delete(vt);Ue.onerror=ut=>{re(ua(ut,"storage-delete"))},Ue.onsuccess=()=>{Z()}}catch(Ue){re(fn.create("storage-delete",{originalErrorMessage:null===(we=Ue)||void 0===we?void 0:we.message}))}})})()}createCompositeKey(A){return[this.appId,this.appName,this.namespace,A].join()}}class Ld{constructor(A){this.storage=A}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var A=this;return(0,L.Z)(function*(){const M=A.storage.getLastFetchStatus(),U=A.storage.getLastSuccessfulFetchTimestampMillis(),Z=A.storage.getActiveConfig(),re=yield M;re&&(A.lastFetchStatus=re);const we=yield U;we&&(A.lastSuccessfulFetchTimestampMillis=we);const Le=yield Z;Le&&(A.activeConfig=Le)})()}setLastFetchStatus(A){return this.lastFetchStatus=A,this.storage.setLastFetchStatus(A)}setLastSuccessfulFetchTimestampMillis(A){return this.lastSuccessfulFetchTimestampMillis=A,this.storage.setLastSuccessfulFetchTimestampMillis(A)}setActiveConfig(A){return this.activeConfig=A,this.storage.setActiveConfig(A)}}function nl(){return Ud.apply(this,arguments)}function Ud(){return(Ud=(0,L.Z)(function*(){if(!(0,ie.hl)())return!1;try{return yield(0,ie.eu)()}catch(I){return!1}})).apply(this,arguments)}(0,ae._registerComponent)(new ne.wA("remote-config",function(A,{instanceIdentifier:M}){const U=A.getProvider("app").getImmediate(),Z=A.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw fn.create("registration-window");if(!(0,ie.hl)())throw fn.create("indexed-db-unavailable");const{projectId:re,apiKey:we,appId:Le}=U.options;if(!re)throw fn.create("registration-project-id");if(!we)throw fn.create("registration-api-key");if(!Le)throw fn.create("registration-app-id");const ct=new tl(Le,U.name,M=M||"firebase"),vt=new Ld(ct),Ue=new _e.Yd(vn);Ue.logLevel=_e.in.ERROR;const ut=new Tn(Z,ae.SDK_VERSION,M,re,we,Le),kn=new Is(ut,ct),Xn=new kd(kn,ct,vt,Ue),xi=new Gf(U,Xn,vt,ct,Ue);return function(I){const A=(0,ie.m9)(I);A._initializePromise||(A._initializePromise=A._storageCache.loadFromStorage().then(()=>{A._isInitializationComplete=!0}))}(xi),xi},"PUBLIC").setMultipleInstances(!0)),(0,ae.registerVersion)(vn,"0.3.14"),(0,ae.registerVersion)(vn,"0.3.14","esm2017");const Bd="/firebase-messaging-sw.js",Dm="/firebase-cloud-messaging-push-scope",Ka="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Ya="google.c.a.c_id",Hd="google.c.a.c_l",$d="google.c.a.ts",Qa="google.c.a.e";var Fr=(()=>{return(I=Fr||(Fr={})).PUSH_RECEIVED="push-received",I.NOTIFICATION_CLICKED="notification-clicked",Fr;var I})();function ss(I){const A=new Uint8Array(I);return btoa(String.fromCharCode(...A)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Bi(I){const M=(I+"=".repeat((4-I.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),U=atob(M),Z=new Uint8Array(U.length);for(let re=0;re<U.length;++re)Z[re]=U.charCodeAt(re);return Z}const Gu="fcm_token_details_db",Wf="fcm_token_object_Store";function rl(I){return Ja.apply(this,arguments)}function Ja(){return Ja=(0,L.Z)(function*(I){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(re=>re.name).includes(Gu))return null;let A=null;return(yield(0,ce.X3)(Gu,5,{upgrade:(U=(0,L.Z)(function*(Z,re,we,Le){var ct;if(re<2||!Z.objectStoreNames.contains(Wf))return;const vt=Le.objectStore(Wf),Ue=yield vt.index("fcmSenderId").get(I);if(yield vt.clear(),Ue)if(2===re){const ut=Ue;if(!ut.auth||!ut.p256dh||!ut.endpoint)return;A={token:ut.fcmToken,createTime:null!==(ct=ut.createTime)&&void 0!==ct?ct:Date.now(),subscriptionOptions:{auth:ut.auth,p256dh:ut.p256dh,endpoint:ut.endpoint,swScope:ut.swScope,vapidKey:"string"==typeof ut.vapidKey?ut.vapidKey:ss(ut.vapidKey)}}}else if(3===re){const ut=Ue;A={token:ut.fcmToken,createTime:ut.createTime,subscriptionOptions:{auth:ss(ut.auth),p256dh:ss(ut.p256dh),endpoint:ut.endpoint,swScope:ut.swScope,vapidKey:ss(ut.vapidKey)}}}else if(4===re){const ut=Ue;A={token:ut.fcmToken,createTime:ut.createTime,subscriptionOptions:{auth:ss(ut.auth),p256dh:ss(ut.p256dh),endpoint:ut.endpoint,swScope:ut.swScope,vapidKey:ss(ut.vapidKey)}}}}),function(re,we,Le,ct){return U.apply(this,arguments)})})).close(),yield(0,ce.Lj)(Gu),yield(0,ce.Lj)("fcm_vapid_details_db"),yield(0,ce.Lj)("undefined"),il(A)?A:null;var U}),Ja.apply(this,arguments)}function il(I){if(!I||!I.subscriptionOptions)return!1;const{subscriptionOptions:A}=I;return"number"==typeof I.createTime&&I.createTime>0&&"string"==typeof I.token&&I.token.length>0&&"string"==typeof A.auth&&A.auth.length>0&&"string"==typeof A.p256dh&&A.p256dh.length>0&&"string"==typeof A.endpoint&&A.endpoint.length>0&&"string"==typeof A.swScope&&A.swScope.length>0&&"string"==typeof A.vapidKey&&A.vapidKey.length>0}const jn="firebase-messaging-store";let ji=null;function Wu(){return ji||(ji=(0,ce.X3)("firebase-messaging-database",1,{upgrade:(I,A)=>{0===A&&I.createObjectStore(jn)}})),ji}function ca(I){return Hi.apply(this,arguments)}function Hi(){return(Hi=(0,L.Z)(function*(I){const A=Cs(I),U=yield(yield Wu()).transaction(jn).objectStore(jn).get(A);if(U)return U;{const Z=yield rl(I.appConfig.senderId);if(Z)return yield zu(I,Z),Z}})).apply(this,arguments)}function zu(I,A){return Eo.apply(this,arguments)}function Eo(){return(Eo=(0,L.Z)(function*(I,A){const M=Cs(I),Z=(yield Wu()).transaction(jn,"readwrite");return yield Z.objectStore(jn).put(A,M),yield Z.done,A})).apply(this,arguments)}function Yt(I){return Ws.apply(this,arguments)}function Ws(){return(Ws=(0,L.Z)(function*(I){const A=Cs(I),U=(yield Wu()).transaction(jn,"readwrite");yield U.objectStore(jn).delete(A),yield U.done})).apply(this,arguments)}function Cs({appConfig:I}){return I.appId}const Vt=new ie.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Wd(I,A){return zd.apply(this,arguments)}function zd(){return(zd=(0,L.Z)(function*(I,A){var M;const U=yield ar(I),Z=Xa(A),re={method:"POST",headers:U,body:JSON.stringify(Z)};let we;try{we=yield(yield fetch(zs(I.appConfig),re)).json()}catch(Le){throw Vt.create("token-subscribe-failed",{errorInfo:null===(M=Le)||void 0===M?void 0:M.toString()})}if(we.error)throw Vt.create("token-subscribe-failed",{errorInfo:we.error.message});if(!we.token)throw Vt.create("token-subscribe-no-token");return we.token})).apply(this,arguments)}function Ds(I,A){return oi.apply(this,arguments)}function oi(){return(oi=(0,L.Z)(function*(I,A){var M;const U=yield ar(I),Z=Xa(A.subscriptionOptions),re={method:"PATCH",headers:U,body:JSON.stringify(Z)};let we;try{we=yield(yield fetch(`${zs(I.appConfig)}/${A.token}`,re)).json()}catch(Le){throw Vt.create("token-update-failed",{errorInfo:null===(M=Le)||void 0===M?void 0:M.toString()})}if(we.error)throw Vt.create("token-update-failed",{errorInfo:we.error.message});if(!we.token)throw Vt.create("token-update-no-token");return we.token})).apply(this,arguments)}function Zu(I,A){return Ts.apply(this,arguments)}function Ts(){return(Ts=(0,L.Z)(function*(I,A){var M;const Z={method:"DELETE",headers:yield ar(I)};try{const we=yield(yield fetch(`${zs(I.appConfig)}/${A}`,Z)).json();if(we.error)throw Vt.create("token-unsubscribe-failed",{errorInfo:we.error.message})}catch(re){throw Vt.create("token-unsubscribe-failed",{errorInfo:null===(M=re)||void 0===M?void 0:M.toString()})}})).apply(this,arguments)}function zs({projectId:I}){return`https://fcmregistrations.googleapis.com/v1/projects/${I}/registrations`}function ar(I){return Cr.apply(this,arguments)}function Cr(){return(Cr=(0,L.Z)(function*({appConfig:I,installations:A}){const M=yield A.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I.apiKey,"x-goog-firebase-installations-auth":`FIS ${M}`})})).apply(this,arguments)}function Xa({p256dh:I,auth:A,endpoint:M,vapidKey:U}){const Z={web:{endpoint:M,auth:A,p256dh:I}};return U!==Ka&&(Z.web.applicationPubKey=U),Z}const Zd=6048e5;function os(I){return bo.apply(this,arguments)}function bo(){return(bo=(0,L.Z)(function*(I){const A=yield la(I.swRegistration,I.vapidKey),M={vapidKey:I.vapidKey,swScope:I.swRegistration.scope,endpoint:A.endpoint,auth:ss(A.getKey("auth")),p256dh:ss(A.getKey("p256dh"))},U=yield ca(I.firebaseDependencies);if(U){if(sl(U.subscriptionOptions,M))return Date.now()>=U.createTime+Zd?Tm(I,{token:U.token,createTime:Date.now(),subscriptionOptions:M}):U.token;try{yield Zu(I.firebaseDependencies,U.token)}catch(Z){console.warn(Z)}return wo(I.firebaseDependencies,M)}return wo(I.firebaseDependencies,M)})).apply(this,arguments)}function eu(I){return ht.apply(this,arguments)}function ht(){return(ht=(0,L.Z)(function*(I){const A=yield ca(I.firebaseDependencies);A&&(yield Zu(I.firebaseDependencies,A.token),yield Yt(I.firebaseDependencies));const M=yield I.swRegistration.pushManager.getSubscription();return!M||M.unsubscribe()})).apply(this,arguments)}function Tm(I,A){return As.apply(this,arguments)}function As(){return(As=(0,L.Z)(function*(I,A){try{const M=yield Ds(I.firebaseDependencies,A),U=Object.assign(Object.assign({},A),{token:M,createTime:Date.now()});return yield zu(I.firebaseDependencies,U),M}catch(M){throw yield eu(I),M}})).apply(this,arguments)}function wo(I,A){return Io.apply(this,arguments)}function Io(){return(Io=(0,L.Z)(function*(I,A){const U={token:yield Wd(I,A),createTime:Date.now(),subscriptionOptions:A};return yield zu(I,U),U.token})).apply(this,arguments)}function la(I,A){return Ss.apply(this,arguments)}function Ss(){return(Ss=(0,L.Z)(function*(I,A){return(yield I.pushManager.getSubscription())||I.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Bi(A)})})).apply(this,arguments)}function sl(I,A){return A.vapidKey===I.vapidKey&&A.endpoint===I.endpoint&&A.auth===I.auth&&A.p256dh===I.p256dh}function Ee(I){const A={from:I.from,collapseKey:I.collapse_key,messageId:I.fcmMessageId};return function(I,A){if(!A.notification)return;I.notification={};const M=A.notification.title;M&&(I.notification.title=M);const U=A.notification.body;U&&(I.notification.body=U);const Z=A.notification.image;Z&&(I.notification.image=Z)}(A,I),function(I,A){!A.data||(I.data=A.data)}(A,I),function(I,A){var M,U,Z,re,we;if(!A.fcmOptions&&!(null===(M=A.notification)||void 0===M?void 0:M.click_action))return;I.fcmOptions={};const Le=null!==(Z=null===(U=A.fcmOptions)||void 0===U?void 0:U.link)&&void 0!==Z?Z:null===(re=A.notification)||void 0===re?void 0:re.click_action;Le&&(I.fcmOptions.link=Le);const ct=null===(we=A.fcmOptions)||void 0===we?void 0:we.analytics_label;ct&&(I.fcmOptions.analyticsLabel=ct)}(A,I),A}function Ku(I){return"object"==typeof I&&!!I&&Ya in I}function Co(I,A){const M=[];for(let U=0;U<I.length;U++)M.push(I.charAt(U)),U<A.length&&M.push(A.charAt(U));return M.join("")}function da(I){return Vt.create("missing-app-config-values",{valueName:I})}Co("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Co("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Zs{constructor(A,M,U){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Z=function(I){if(!I||!I.options)throw da("App Configuration Object");if(!I.name)throw da("App Name");const A=["projectId","apiKey","appId","messagingSenderId"],{options:M}=I;for(const U of A)if(!M[U])throw da(U);return{appName:I.name,projectId:M.projectId,apiKey:M.apiKey,appId:M.appId,senderId:M.messagingSenderId}}(A);this.firebaseDependencies={app:A,appConfig:Z,installations:M,analyticsProvider:U}}_delete(){return Promise.resolve()}}function Kd(I){return Yu.apply(this,arguments)}function Yu(){return(Yu=(0,L.Z)(function*(I){var A;try{I.swRegistration=yield navigator.serviceWorker.register(Bd,{scope:Dm}),I.swRegistration.update().catch(()=>{})}catch(M){throw Vt.create("failed-service-worker-registration",{browserErrorMessage:null===(A=M)||void 0===A?void 0:A.message})}})).apply(this,arguments)}function ha(I,A){return as.apply(this,arguments)}function as(){return(as=(0,L.Z)(function*(I,A){if(!A&&!I.swRegistration&&(yield Kd(I)),A||!I.swRegistration){if(!(A instanceof ServiceWorkerRegistration))throw Vt.create("invalid-sw-registration");I.swRegistration=A}})).apply(this,arguments)}function ur(I,A){return Lr.apply(this,arguments)}function Lr(){return(Lr=(0,L.Z)(function*(I,A){A?I.vapidKey=A:I.vapidKey||(I.vapidKey=Ka)})).apply(this,arguments)}function Ks(){return(Ks=(0,L.Z)(function*(I,A){if(!navigator)throw Vt.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Vt.create("permission-blocked");return yield ur(I,null==A?void 0:A.vapidKey),yield ha(I,null==A?void 0:A.serviceWorkerRegistration),os(I)})).apply(this,arguments)}function $i(I,A,M){return ol.apply(this,arguments)}function ol(){return(ol=(0,L.Z)(function*(I,A,M){const U=Qu(A);(yield I.firebaseDependencies.analyticsProvider.get()).logEvent(U,{message_id:M[Ya],message_name:M[Hd],message_time:M[$d],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Qu(I){switch(I){case Fr.NOTIFICATION_CLICKED:return"notification_open";case Fr.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function fa(){return(fa=(0,L.Z)(function*(I,A){const M=A.data;if(!M.isFirebaseMessaging)return;I.onMessageHandler&&M.messageType===Fr.PUSH_RECEIVED&&("function"==typeof I.onMessageHandler?I.onMessageHandler(Ee(M)):I.onMessageHandler.next(Ee(M)));const U=M.data;Ku(U)&&"1"===U[Qa]&&(yield $i(I,M.messageType,U))})).apply(this,arguments)}const nu="@firebase/messaging";function Xu(){return To.apply(this,arguments)}function To(){return(To=(0,L.Z)(function*(){try{yield(0,ie.eu)()}catch(I){return!1}return"undefined"!=typeof window&&(0,ie.hl)()&&(0,ie.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}(0,ae._registerComponent)(new ne.wA("messaging",I=>{const A=new Zs(I.getProvider("app").getImmediate(),I.getProvider("installations-internal").getImmediate(),I.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",M=>function(I,A){return fa.apply(this,arguments)}(A,M)),A},"PUBLIC")),(0,ae._registerComponent)(new ne.wA("messaging-internal",I=>{const A=I.getProvider("messaging").getImmediate();return{getToken:U=>function(I,A){return Ks.apply(this,arguments)}(A,U)}},"PRIVATE")),(0,ae.registerVersion)(nu,"0.9.19"),(0,ae.registerVersion)(nu,"0.9.19","esm2017");const ai="analytics",En="firebase_id",iu="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Xd="https://www.googletagmanager.com/gtag/js",Hn=new _e.Yd("@firebase/analytics");function eh(I){return Promise.all(I.map(A=>A.catch(M=>M)))}function ma(I,A){const M=document.createElement("script");M.src=`${Xd}?l=${I}&id=${A}`,M.async=!0,document.head.appendChild(M)}function cl(I,A,M,U,Z,re){return su.apply(this,arguments)}function su(){return(su=(0,L.Z)(function*(I,A,M,U,Z,re){const we=U[Z];try{if(we)yield A[we];else{const ct=(yield eh(M)).find(vt=>vt.measurementId===Z);ct&&(yield A[ct.appId])}}catch(Le){Hn.error(Le)}I("config",Z,re)})).apply(this,arguments)}function nc(I,A,M,U,Z){return ll.apply(this,arguments)}function ll(){return(ll=(0,L.Z)(function*(I,A,M,U,Z){try{let re=[];if(Z&&Z.send_to){let we=Z.send_to;Array.isArray(we)||(we=[we]);const Le=yield eh(M);for(const ct of we){const vt=Le.find(ut=>ut.measurementId===ct),Ue=vt&&A[vt.appId];if(!Ue){re=[];break}re.push(Ue)}}0===re.length&&(re=Object.values(A)),yield Promise.all(re),I("event",U,Z||{})}catch(re){Hn.error(re)}})).apply(this,arguments)}function Sm(I){const A=window.document.getElementsByTagName("script");for(const M of Object.values(A))if(M.src&&M.src.includes(Xd)&&M.src.includes(I))return M;return null}const mr=new ie.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Xf=new class{constructor(A={},M=1e3){this.throttleMetadata=A,this.intervalMillis=M}getThrottleMetadata(A){return this.throttleMetadata[A]}setThrottleMetadata(A,M){this.throttleMetadata[A]=M}deleteThrottleMetadata(A){delete this.throttleMetadata[A]}};function xm(I){return new Headers({Accept:"application/json","x-goog-api-key":I})}function ou(I){return rc.apply(this,arguments)}function rc(){return(rc=(0,L.Z)(function*(I){var A;const{appId:M,apiKey:U}=I,Z={method:"GET",headers:xm(U)},re=iu.replace("{app-id}",M),we=yield fetch(re,Z);if(200!==we.status&&304!==we.status){let Le="";try{const ct=yield we.json();(null===(A=ct.error)||void 0===A?void 0:A.message)&&(Le=ct.error.message)}catch(ct){}throw mr.create("config-fetch-failed",{httpStatus:we.status,responseMessage:Le})}return we.json()})).apply(this,arguments)}function ep(I){return ic.apply(this,arguments)}function ic(){return(ic=(0,L.Z)(function*(I,A=Xf,M){const{appId:U,apiKey:Z,measurementId:re}=I.options;if(!U)throw mr.create("no-app-id");if(!Z){if(re)return{measurementId:re,appId:U};throw mr.create("no-api-key")}const we=A.getThrottleMetadata(U)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Le=new au;return setTimeout((0,L.Z)(function*(){Le.abort()}),void 0!==M?M:6e4),tp({appId:U,apiKey:Z,measurementId:re},we,Le,A)})).apply(this,arguments)}function tp(I,A,M){return _a.apply(this,arguments)}function _a(){return(_a=(0,L.Z)(function*(I,{throttleEndTimeMillis:A,backoffCount:M},U,Z=Xf){var re,we;const{appId:Le,measurementId:ct}=I;try{yield Gi(U,A)}catch(vt){if(ct)return Hn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ct} provided in the "measurementId" field in the local Firebase config. [${null===(re=vt)||void 0===re?void 0:re.message}]`),{appId:Le,measurementId:ct};throw vt}try{const vt=yield ou(I);return Z.deleteThrottleMetadata(Le),vt}catch(vt){const Ue=vt;if(!dl(Ue)){if(Z.deleteThrottleMetadata(Le),ct)return Hn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ct} provided in the "measurementId" field in the local Firebase config. [${null==Ue?void 0:Ue.message}]`),{appId:Le,measurementId:ct};throw vt}const ut=503===Number(null===(we=null==Ue?void 0:Ue.customData)||void 0===we?void 0:we.httpStatus)?(0,ie.$s)(M,Z.intervalMillis,30):(0,ie.$s)(M,Z.intervalMillis),kn={throttleEndTimeMillis:Date.now()+ut,backoffCount:M+1};return Z.setThrottleMetadata(Le,kn),Hn.debug(`Calling attemptFetch again in ${ut} millis`),tp(I,kn,U,Z)}})).apply(this,arguments)}function Gi(I,A){return new Promise((M,U)=>{const Z=Math.max(A-Date.now(),0),re=setTimeout(M,Z);I.addEventListener(()=>{clearTimeout(re),U(mr.create("fetch-throttle",{throttleEndTimeMillis:A}))})})}function dl(I){if(!(I instanceof ie.ZR&&I.customData))return!1;const A=Number(I.customData.httpStatus);return 429===A||500===A||503===A||504===A}class au{constructor(){this.listeners=[]}addEventListener(A){this.listeners.push(A)}abort(){this.listeners.forEach(A=>A())}}let sc,li;function nh(){return(nh=(0,L.Z)(function*(I,A,M,U,Z){if(Z&&Z.global)I("event",M,U);else{const re=yield A;I("event",M,Object.assign(Object.assign({},U),{send_to:re}))}})).apply(this,arguments)}function uu(I){li=I}function rh(I){sc=I}function xs(){return Ur.apply(this,arguments)}function Ur(){return(Ur=(0,L.Z)(function*(){var I;if(!(0,ie.hl)())return Hn.warn(mr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ie.eu)()}catch(A){return Hn.warn(mr.create("indexeddb-unavailable",{errorInfo:null===(I=A)||void 0===I?void 0:I.toString()}).message),!1}return!0})).apply(this,arguments)}function xo(){return(xo=(0,L.Z)(function*(I,A,M,U,Z,re,we){var Le;const ct=ep(I);ct.then(Xn=>{M[Xn.measurementId]=Xn.appId,I.options.measurementId&&Xn.measurementId!==I.options.measurementId&&Hn.warn(`The measurement ID in the local Firebase config (${I.options.measurementId}) does not match the measurement ID fetched from the server (${Xn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Xn=>Hn.error(Xn)),A.push(ct);const vt=xs().then(Xn=>{if(Xn)return U.getId()}),[Ue,ut]=yield Promise.all([ct,vt]);Sm(re)||ma(re,Ue.measurementId),li&&(Z("consent","default",li),uu(void 0)),Z("js",new Date);const kn=null!==(Le=null==we?void 0:we.config)&&void 0!==Le?Le:{};return kn.origin="firebase",kn.update=!0,null!=ut&&(kn[En]=ut),Z("config",Ue.measurementId,kn),sc&&(Z("set",sc),rh(void 0)),Ue.measurementId})).apply(this,arguments)}class sh{constructor(A){this.app=A}_delete(){return delete Qt[this.app.options.appId],Promise.resolve()}}let Qt={},va=[];const ac={};let us,cs,uc="dataLayer",Js=!1;function Ro(I,A,M){!function(){const I=[];if((0,ie.ru)()&&I.push("This is a browser extension environment."),(0,ie.zI)()||I.push("Cookies are not available."),I.length>0){const A=I.map((U,Z)=>`(${Z+1}) ${U}`).join(" "),M=mr.create("invalid-analytics-context",{errorInfo:A});Hn.warn(M.message)}}();const U=I.options.appId;if(!U)throw mr.create("no-app-id");if(!I.options.apiKey){if(!I.options.measurementId)throw mr.create("no-api-key");Hn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${I.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Qt[U])throw mr.create("already-exists",{id:U});if(!Js){!function(I){let A=[];Array.isArray(window[I])?A=window[I]:window[I]=A}(uc);const{wrappedGtag:re,gtagCore:we}=function(I,A,M,U,Z){let re=function(...we){window[U].push(arguments)};return window[Z]&&"function"==typeof window[Z]&&(re=window[Z]),window[Z]=function(I,A,M,U){function re(){return(re=(0,L.Z)(function*(we,Le,ct){try{"event"===we?yield nc(I,A,M,Le,ct):"config"===we?yield cl(I,A,M,U,Le,ct):"consent"===we?I("consent","update",ct):I("set",Le)}catch(vt){Hn.error(vt)}})).apply(this,arguments)}return function(we,Le,ct){return re.apply(this,arguments)}}(re,I,A,M),{gtagCore:re,wrappedGtag:window[Z]}}(Qt,va,ac,uc,"gtag");cs=re,us=we,Js=!0}return Qt[U]=function(I,A,M,U,Z,re,we){return xo.apply(this,arguments)}(I,va,ac,A,us,uc,M),new sh(I)}function Qn(){return qi.apply(this,arguments)}function qi(){return(qi=(0,L.Z)(function*(){if((0,ie.ru)()||!(0,ie.zI)()||!(0,ie.hl)())return!1;try{return yield(0,ie.eu)()}catch(I){return!1}})).apply(this,arguments)}const gl="@firebase/analytics";(0,ae._registerComponent)(new ne.wA(ai,(A,{options:M})=>Ro(A.getProvider("app").getImmediate(),A.getProvider("installations-internal").getImmediate(),M),"PUBLIC")),(0,ae._registerComponent)(new ne.wA("analytics-internal",function(A){try{const M=A.getProvider(ai).getImmediate();return{logEvent:(U,Z,re)=>function(I,A,M,U){I=(0,ie.m9)(I),function(I,A,M,U,Z){return nh.apply(this,arguments)}(cs,Qt[I.app.options.appId],A,M,U).catch(Z=>Hn.error(Z))}(M,U,Z,re)}}catch(M){throw mr.create("interop-component-reg-failed",{reason:M})}},"PRIVATE")),(0,ae.registerVersion)(gl,"0.8.3"),(0,ae.registerVersion)(gl,"0.8.3","esm2017");var Mo=F(6465);const oh=new(F(6102).v)(Mo.o);var ip=F(7771),sp=F(3342),Br=F(3101),ds=F(309);const lu=new g.GfV("7.4.1"),An="__angularfire_symbol__analyticsIsSupportedValue",ba="__angularfire_symbol__analyticsIsSupported",No="__angularfire_symbol__remoteConfigIsSupportedValue",cc="__angularfire_symbol__remoteConfigIsSupported",ml="__angularfire_symbol__messagingIsSupportedValue",jr="__angularfire_symbol__messagingIsSupported";function ah(I,A,M){if(A){if(1===A.length)return A[0];const re=A.filter(we=>we.app===M);if(1===re.length)return re[0]}return M.container.getProvider(I).getImmediate({optional:!0})}globalThis[ba]||(globalThis[ba]=Qn().then(I=>globalThis[An]=I).catch(()=>globalThis[An]=!1)),globalThis[jr]||(globalThis[jr]=Xu().then(I=>globalThis[ml]=I).catch(()=>globalThis[ml]=!1)),globalThis[cc]||(globalThis[cc]=nl().then(I=>globalThis[No]=I).catch(()=>globalThis[No]=!1));const Oo=(I,A)=>{const M=A?[A]:(0,X.C6)(),U=[];return M.forEach(Z=>{Z.container.getProvider(I).instances.forEach(we=>{U.includes(we)||U.push(we)})}),U};function Jn(){}class _l{constructor(A,M=ip.N){this.zone=A,this.delegate=M}now(){return this.delegate.now()}schedule(A,M,U){const Z=this.zone;return this.delegate.schedule(function(we){Z.runGuarded(()=>{A.apply(this,[we])})},M,U)}}class op{constructor(A){this.zone=A,this.task=null}call(A,M){const U=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Jn,{},Jn,Jn)),M.pipe((0,sp.b)({next:U,complete:U,error:U})).subscribe(A).add(U)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let lc=(()=>{class I{constructor(M){this.ngZone=M,this.outsideAngular=M.runOutsideAngular(()=>new _l(Zone.current)),this.insideAngular=M.run(()=>new _l(Zone.current,oh)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return I.\u0275fac=function(M){return new(M||I)(g.LFG(g.R0b))},I.\u0275prov=g.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();function $n(){const I=globalThis.\u0275AngularFireScheduler;if(!I)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return I}function hu(I){return $n(),function(I){return function(M){return(M=M.lift(new op(I.ngZone))).pipe((0,Br.R)(I.outsideAngular),(0,ds.QV)(I.insideAngular))}}($n())(I)}},3854:(We,me,F)=>{"use strict";F.d(me,{BH:()=>xr,LL:()=>wi,ZR:()=>br,zI:()=>Pe,US:()=>ne,tV:()=>ee,L:()=>ce,$s:()=>xe,r3:()=>Un,Sg:()=>Yc,ne:()=>Or,vZ:()=>Cn,ZB:()=>V,pd:()=>Xe,aH:()=>ii,Pz:()=>Li,m9:()=>zt,z$:()=>K,jU:()=>fe,ru:()=>he,xb:()=>Se,w1:()=>De,hl:()=>Lt,uI:()=>le,UG:()=>be,b$:()=>Te,G6:()=>Be,xO:()=>Hs,zd:()=>ws,eu:()=>Et});const ae=function($){const j=[];let z=0;for(let pe=0;pe<$.length;pe++){let oe=$.charCodeAt(pe);oe<128?j[z++]=oe:oe<2048?(j[z++]=oe>>6|192,j[z++]=63&oe|128):55296==(64512&oe)&&pe+1<$.length&&56320==(64512&$.charCodeAt(pe+1))?(oe=65536+((1023&oe)<<10)+(1023&$.charCodeAt(++pe)),j[z++]=oe>>18|240,j[z++]=oe>>12&63|128,j[z++]=oe>>6&63|128,j[z++]=63&oe|128):(j[z++]=oe>>12|224,j[z++]=oe>>6&63|128,j[z++]=63&oe|128)}return j},ne={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray($,j){if(!Array.isArray($))throw Error("encodeByteArray takes an array as a parameter");this.init_();const z=j?this.byteToCharMapWebSafe_:this.byteToCharMap_,pe=[];for(let oe=0;oe<$.length;oe+=3){const ze=$[oe],St=oe+1<$.length,Xt=St?$[oe+1]:0,Zn=oe+2<$.length,Kn=Zn?$[oe+2]:0;let pr=(15&Xt)<<2|Kn>>6,ia=63&Kn;Zn||(ia=64,St||(pr=64)),pe.push(z[ze>>2],z[(3&ze)<<4|Xt>>4],z[pr],z[ia])}return pe.join("")},encodeString($,j){return this.HAS_NATIVE_SUPPORT&&!j?btoa($):this.encodeByteArray(ae($),j)},decodeString($,j){return this.HAS_NATIVE_SUPPORT&&!j?atob($):function($){const j=[];let z=0,pe=0;for(;z<$.length;){const oe=$[z++];if(oe<128)j[pe++]=String.fromCharCode(oe);else if(oe>191&&oe<224){const ze=$[z++];j[pe++]=String.fromCharCode((31&oe)<<6|63&ze)}else if(oe>239&&oe<365){const Zn=((7&oe)<<18|(63&$[z++])<<12|(63&$[z++])<<6|63&$[z++])-65536;j[pe++]=String.fromCharCode(55296+(Zn>>10)),j[pe++]=String.fromCharCode(56320+(1023&Zn))}else{const ze=$[z++],St=$[z++];j[pe++]=String.fromCharCode((15&oe)<<12|(63&ze)<<6|63&St)}}return j.join("")}(this.decodeStringToByteArray($,j))},decodeStringToByteArray($,j){this.init_();const z=j?this.charToByteMapWebSafe_:this.charToByteMap_,pe=[];for(let oe=0;oe<$.length;){const ze=z[$.charAt(oe++)],Xt=oe<$.length?z[$.charAt(oe)]:0;++oe;const Kn=oe<$.length?z[$.charAt(oe)]:64;++oe;const Ut=oe<$.length?z[$.charAt(oe)]:64;if(++oe,null==ze||null==Xt||null==Kn||null==Ut)throw Error();pe.push(ze<<2|Xt>>4),64!==Kn&&(pe.push(Xt<<4&240|Kn>>2),64!==Ut&&pe.push(Kn<<6&192|Ut))}return pe},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let $=0;$<this.ENCODED_VALS.length;$++)this.byteToCharMap_[$]=this.ENCODED_VALS.charAt($),this.charToByteMap_[this.byteToCharMap_[$]]=$,this.byteToCharMapWebSafe_[$]=this.ENCODED_VALS_WEBSAFE.charAt($),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[$]]=$,$>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt($)]=$,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt($)]=$)}}},ce=function($){return function($){const j=ae($);return ne.encodeByteArray(j,!0)}($).replace(/\./g,"")},ee=function($){try{return ne.decodeString($,!0)}catch(j){console.error("base64Decode failed: ",j)}return null};function V($,j){if(!(j instanceof Object))return j;switch(j.constructor){case Date:return new Date(j.getTime());case Object:void 0===$&&($={});break;case Array:$=[];break;default:return j}for(const z in j)!j.hasOwnProperty(z)||!Y(z)||($[z]=V($[z],j[z]));return $}function Y($){return"__proto__"!==$}function K(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function le(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(K())}function be(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch($){return!1}}function fe(){return"object"==typeof self&&self.self===self}function he(){const $="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof $&&void 0!==$.id}function Te(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function De(){const $=K();return $.indexOf("MSIE ")>=0||$.indexOf("Trident/")>=0}function Be(){return!be()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Lt(){return"object"==typeof indexedDB}function Et(){return new Promise(($,j)=>{try{let z=!0;const pe="validate-browser-context-for-indexeddb-analytics-module",oe=self.indexedDB.open(pe);oe.onsuccess=()=>{oe.result.close(),z||self.indexedDB.deleteDatabase(pe),$(!0)},oe.onupgradeneeded=()=>{z=!1},oe.onerror=()=>{var ze;j((null===(ze=oe.error)||void 0===ze?void 0:ze.message)||"")}}catch(z){j(z)}})}function Pe(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}const Dt=()=>{try{return function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if("undefined"==typeof process||void 0===process.env)return;const $=process.env.__FIREBASE_DEFAULTS__;return $?JSON.parse($):void 0})()||(()=>{if("undefined"==typeof document)return;let $;try{$=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(z){return}const j=$&&ee($[1]);return j&&JSON.parse(j)})()}catch($){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${$}`)}},ii=()=>{var $;return null===($=Dt())||void 0===$?void 0:$.config},Li=$=>{var j;return null===(j=Dt())||void 0===j?void 0:j[`_${$}`]};class xr{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((j,z)=>{this.resolve=j,this.reject=z})}wrapCallback(j){return(z,pe)=>{z?this.reject(z):this.resolve(pe),"function"==typeof j&&(this.promise.catch(()=>{}),1===j.length?j(z):j(z,pe))}}}function Yc($,j){if($.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const pe=j||"demo-project",oe=$.iat||0,ze=$.sub||$.user_id;if(!ze)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const St=Object.assign({iss:`https://securetoken.google.com/${pe}`,aud:pe,iat:oe,exp:oe+3600,auth_time:oe,sub:ze,user_id:ze,firebase:{sign_in_provider:"custom",identities:{}}},$);return[ce(JSON.stringify({alg:"none",type:"JWT"})),ce(JSON.stringify(St)),""].join(".")}class br extends Error{constructor(j,z,pe){super(z),this.code=j,this.customData=pe,this.name="FirebaseError",Object.setPrototypeOf(this,br.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,wi.prototype.create)}}class wi{constructor(j,z,pe){this.service=j,this.serviceName=z,this.errors=pe}create(j,...z){const pe=z[0]||{},oe=`${this.service}/${j}`,ze=this.errors[j],St=ze?function($,j){return $.replace(dn,(z,pe)=>{const oe=j[pe];return null!=oe?String(oe):`<${pe}?>`})}(ze,pe):"Error";return new br(oe,`${this.serviceName}: ${St} (${oe}).`,pe)}}const dn=/\{\$([^}]+)}/g;function Un($,j){return Object.prototype.hasOwnProperty.call($,j)}function Se($){for(const j in $)if(Object.prototype.hasOwnProperty.call($,j))return!1;return!0}function Cn($,j){if($===j)return!0;const z=Object.keys($),pe=Object.keys(j);for(const oe of z){if(!pe.includes(oe))return!1;const ze=$[oe],St=j[oe];if(sn(ze)&&sn(St)){if(!Cn(ze,St))return!1}else if(ze!==St)return!1}for(const oe of pe)if(!z.includes(oe))return!1;return!0}function sn($){return null!==$&&"object"==typeof $}function Hs($){const j=[];for(const[z,pe]of Object.entries($))Array.isArray(pe)?pe.forEach(oe=>{j.push(encodeURIComponent(z)+"="+encodeURIComponent(oe))}):j.push(encodeURIComponent(z)+"="+encodeURIComponent(pe));return j.length?"&"+j.join("&"):""}function ws($){const j={};return $.replace(/^\?/,"").split("&").forEach(pe=>{if(pe){const[oe,ze]=pe.split("=");j[decodeURIComponent(oe)]=decodeURIComponent(ze)}}),j}function Xe($){const j=$.indexOf("?");if(!j)return"";const z=$.indexOf("#",j);return $.substring(j,z>0?z:void 0)}function Or($,j){const z=new si($,j);return z.subscribe.bind(z)}class si{constructor(j,z){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=z,this.task.then(()=>{j(this)}).catch(pe=>{this.error(pe)})}next(j){this.forEachObserver(z=>{z.next(j)})}error(j){this.forEachObserver(z=>{z.error(j)}),this.close(j)}complete(){this.forEachObserver(j=>{j.complete()}),this.close()}subscribe(j,z,pe){let oe;if(void 0===j&&void 0===z&&void 0===pe)throw new Error("Missing Observer.");oe=function($,j){if("object"!=typeof $||null===$)return!1;for(const z of["next","error","complete"])if(z in $&&"function"==typeof $[z])return!0;return!1}(j)?j:{next:j,error:z,complete:pe},void 0===oe.next&&(oe.next=tt),void 0===oe.error&&(oe.error=tt),void 0===oe.complete&&(oe.complete=tt);const ze=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?oe.error(this.finalError):oe.complete()}catch(St){}}),this.observers.push(oe),ze}unsubscribeOne(j){void 0===this.observers||void 0===this.observers[j]||(delete this.observers[j],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(j){if(!this.finalized)for(let z=0;z<this.observers.length;z++)this.sendOne(z,j)}sendOne(j,z){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[j])try{z(this.observers[j])}catch(pe){"undefined"!=typeof console&&console.error&&console.error(pe)}})}close(j){this.finalized||(this.finalized=!0,void 0!==j&&(this.finalError=j),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function tt(){}function xe($,j=1e3,z=2){const pe=j*Math.pow(z,$),oe=Math.round(.5*pe*(Math.random()-.5)*2);return Math.min(144e5,pe+oe)}function zt($){return $&&$._delegate?$._delegate:$}},2329:(We,me,F)=>{"use strict";F.d(me,{Mq:()=>g.getApp,C6:()=>g.getApps});var g=F(8026);(0,g.registerVersion)("firebase","9.12.1","app")},7841:(We,me,F)=>{"use strict";F.d(me,{Z:()=>g.Z});var g=F(3394);g.Z.registerVersion("firebase","9.12.1","app-compat")},8241:(We,me,F)=>{"use strict";F.r(me);var g=F(8239),X=F(3394),L=F(3854),ae=F(8026),ie=F(5422);function ee(_,h){var p={};for(var E in _)Object.prototype.hasOwnProperty.call(_,E)&&h.indexOf(E)<0&&(p[E]=_[E]);if(null!=_&&"function"==typeof Object.getOwnPropertySymbols){var T=0;for(E=Object.getOwnPropertySymbols(_);T<E.length;T++)h.indexOf(E[T])<0&&Object.prototype.propertyIsEnumerable.call(_,E[T])&&(p[E[T]]=_[E[T]])}return p}var Mn=F(3910);const js=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},dn=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},$t=new L.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),ns=new ie.Yd("@firebase/auth");function Vi(_,...h){ns.logLevel<=ie.in.ERROR&&ns.error(`Auth (${ae.SDK_VERSION}): ${_}`,...h)}function yt(_,...h){throw Mr(_,...h)}function Vn(_,...h){return Mr(_,...h)}function bs(_,h,p){const E=Object.assign(Object.assign({},dn()),{[h]:p});return new L.LL("auth","Firebase",E).create(h,{appName:_.name})}function Un(_,h,p){if(!(h instanceof p))throw p.name!==h.constructor.name&&yt(_,"argument-error"),bs(_,"argument-error",`Type of ${h.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Mr(_,...h){if("string"!=typeof _){const p=h[0],E=[...h.slice(1)];return E[0]&&(E[0].appName=_.name),_._errorFactory.create(p,...E)}return $t.create(_,...h)}function Se(_,h,...p){if(!_)throw Mr(h,...p)}function wr(_){const h="INTERNAL ASSERTION FAILED: "+_;throw Vi(h),new Error(h)}function Cn(_,h){_||wr(h)}const sn=new Map;function _n(_){Cn(_ instanceof Function,"Expected a class definition");let h=sn.get(_);return h?(Cn(h instanceof _,"Instance stored in cache mismatched with class"),h):(h=new _,sn.set(_,h),h)}function Xe(){var _;return"undefined"!=typeof self&&(null===(_=self.location)||void 0===_?void 0:_.href)||""}function Nr(){return"http:"===Or()||"https:"===Or()}function Or(){var _;return"undefined"!=typeof self&&(null===(_=self.location)||void 0===_?void 0:_.protocol)||null}class nt{constructor(h,p){this.shortDelay=h,this.longDelay=p,Cn(p>h,"Short delay should be less than long delay!"),this.isMobile=(0,L.uI)()||(0,L.b$)()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Nr()||(0,L.ru)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function tt(_,h){Cn(_.emulator,"Emulator should always be set here");const{url:p}=_.emulator;return h?`${p}${h.startsWith("/")?h.slice(1):h}`:p}class zn{static initialize(h,p,E){this.fetchImpl=h,p&&(this.headersImpl=p),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void wr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void wr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void wr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Ii={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Ci=new nt(3e4,6e4);function Tt(_,h){return _.tenantId&&!h.tenantId?Object.assign(Object.assign({},h),{tenantId:_.tenantId}):h}function Kt(_,h,p,E){return go.apply(this,arguments)}function go(){return(go=(0,g.Z)(function*(_,h,p,E,T={}){return on(_,T,(0,g.Z)(function*(){let x={},B={};E&&("GET"===h?B=E:x={body:JSON.stringify(E)});const J=(0,L.xO)(Object.assign({key:_.config.apiKey},B)).slice(1),Ae=yield _._getAdditionalHeaders();return Ae["Content-Type"]="application/json",_.languageCode&&(Ae["X-Firebase-Locale"]=_.languageCode),zn.fetch()(qe(_,_.config.apiHost,p,J),Object.assign({method:h,headers:Ae,referrerPolicy:"no-referrer"},x))}))})).apply(this,arguments)}function on(_,h,p){return za.apply(this,arguments)}function za(){return(za=(0,g.Z)(function*(_,h,p){_._canInitEmulator=!1;const E=Object.assign(Object.assign({},Ii),h);try{const T=new ve(_),x=yield Promise.race([p(),T.promise]);T.clearNetworkTimeout();const B=yield x.json();if("needConfirmation"in B)throw xe(_,"account-exists-with-different-credential",B);if(x.ok&&!("errorMessage"in B))return B;{const J=x.ok?B.errorMessage:B.error.message,[Ae,Ie]=J.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Ae)throw xe(_,"credential-already-in-use",B);if("EMAIL_EXISTS"===Ae)throw xe(_,"email-already-in-use",B);if("USER_DISABLED"===Ae)throw xe(_,"user-disabled",B);const Ke=E[Ae]||Ae.toLowerCase().replace(/[_\s]+/g,"-");if(Ie)throw bs(_,Ke,Ie);yt(_,Ke)}}catch(T){if(T instanceof L.ZR)throw T;yt(_,"network-request-failed")}})).apply(this,arguments)}function Ye(_,h,p,E){return $s.apply(this,arguments)}function $s(){return($s=(0,g.Z)(function*(_,h,p,E,T={}){const x=yield Kt(_,h,p,E,T);return"mfaPendingCredential"in x&&yt(_,"multi-factor-auth-required",{_serverResponse:x}),x})).apply(this,arguments)}function qe(_,h,p,E){const T=`${h}${p}?${E}`;return _.config.emulator?tt(_.config,T):`${_.config.apiScheme}://${T}`}class ve{constructor(h){this.auth=h,this.timer=null,this.promise=new Promise((p,E)=>{this.timer=setTimeout(()=>E(Vn(this.auth,"network-request-failed")),Ci.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function xe(_,h,p){const E={appName:_.name};p.email&&(E.email=p.email),p.phoneNumber&&(E.phoneNumber=p.phoneNumber);const T=Vn(_,h,E);return T.customData._tokenResponse=p,T}function bt(){return(bt=(0,g.Z)(function*(_,h){return Kt(_,"POST","/v1/accounts:delete",h)})).apply(this,arguments)}function zt(_,h){return $.apply(this,arguments)}function $(){return($=(0,g.Z)(function*(_,h){return Kt(_,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function j(_,h){return z.apply(this,arguments)}function z(){return(z=(0,g.Z)(function*(_,h){return Kt(_,"POST","/v1/accounts:lookup",h)})).apply(this,arguments)}function pe(_){if(_)try{const h=new Date(Number(_));if(!isNaN(h.getTime()))return h.toUTCString()}catch(h){}}function St(){return(St=(0,g.Z)(function*(_,h=!1){const p=(0,L.m9)(_),E=yield p.getIdToken(h),T=Zn(E);Se(T&&T.exp&&T.auth_time&&T.iat,p.auth,"internal-error");const x="object"==typeof T.firebase?T.firebase:void 0,B=null==x?void 0:x.sign_in_provider;return{claims:T,token:E,authTime:pe(Xt(T.auth_time)),issuedAtTime:pe(Xt(T.iat)),expirationTime:pe(Xt(T.exp)),signInProvider:B||null,signInSecondFactor:(null==x?void 0:x.sign_in_second_factor)||null}})).apply(this,arguments)}function Xt(_){return 1e3*Number(_)}function Zn(_){var h;const[p,E,T]=_.split(".");if(void 0===p||void 0===E||void 0===T)return Vi("JWT malformed, contained fewer than 3 sections"),null;try{const x=(0,L.tV)(E);return x?JSON.parse(x):(Vi("Failed to decode base64 JWT payload"),null)}catch(x){return Vi("Caught error parsing JWT payload as JSON",null===(h=x)||void 0===h?void 0:h.toString()),null}}function Dn(_,h){return Ut.apply(this,arguments)}function Ut(){return(Ut=(0,g.Z)(function*(_,h,p=!1){if(p)return h;try{return yield h}catch(E){throw E instanceof L.ZR&&pr(E)&&_.auth.currentUser===_&&(yield _.auth.signOut()),E}})).apply(this,arguments)}function pr({code:_}){return"auth/user-disabled"===_||"auth/user-token-expired"===_}class ia{constructor(h){this.user=h,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(h){var p;if(h){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const T=(null!==(p=this.user.stsTokenManager.expirationTime)&&void 0!==p?p:0)-Date.now()-3e5;return Math.max(0,T)}}schedule(h=!1){var p=this;if(!this.isRunning)return;const E=this.getInterval(h);this.timerId=setTimeout((0,g.Z)(function*(){yield p.iteration()}),E)}iteration(){var h=this;return(0,g.Z)(function*(){var p;try{yield h.user.getIdToken(!0)}catch(E){return void("auth/network-request-failed"===(null===(p=E)||void 0===p?void 0:p.code)&&h.schedule(!0))}h.schedule()})()}}class mo{constructor(h,p){this.createdAt=h,this.lastLoginAt=p,this._initializeTime()}_initializeTime(){this.lastSignInTime=pe(this.lastLoginAt),this.creationTime=pe(this.createdAt)}_copy(h){this.createdAt=h.createdAt,this.lastLoginAt=h.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Nn(_){return rs.apply(this,arguments)}function rs(){return(rs=(0,g.Z)(function*(_){var h;const p=_.auth,E=yield _.getIdToken(),T=yield Dn(_,j(p,{idToken:E}));Se(null==T?void 0:T.users.length,p,"internal-error");const x=T.users[0];_._notifyReloadListener(x);const B=(null===(h=x.providerUserInfo)||void 0===h?void 0:h.length)?Di(x.providerUserInfo):[],J=Od(_.providerData,B),Ke=!!_.isAnonymous&&!(_.email&&x.passwordHash||(null==J?void 0:J.length)),Qe={uid:x.localId,displayName:x.displayName||null,photoURL:x.photoUrl||null,email:x.email||null,emailVerified:x.emailVerified||!1,phoneNumber:x.phoneNumber||null,tenantId:x.tenantId||null,providerData:J,metadata:new mo(x.createdAt,x.lastLoginAt),isAnonymous:Ke};Object.assign(_,Qe)})).apply(this,arguments)}function Yn(){return(Yn=(0,g.Z)(function*(_){const h=(0,L.m9)(_);yield Nn(h),yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)})).apply(this,arguments)}function Od(_,h){return[..._.filter(E=>!h.some(T=>T.providerId===E.providerId)),...h]}function Di(_){return _.map(h=>{var{providerId:p}=h,E=ee(h,["providerId"]);return{providerId:p,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}function xt(){return(xt=(0,g.Z)(function*(_,h){const p=yield on(_,{},(0,g.Z)(function*(){const E=(0,L.xO)({grant_type:"refresh_token",refresh_token:h}).slice(1),{tokenApiHost:T,apiKey:x}=_.config,B=qe(_,T,"/v1/token",`key=${x}`),J=yield _._getAdditionalHeaders();return J["Content-Type"]="application/x-www-form-urlencoded",zn.fetch()(B,{method:"POST",headers:J,body:E})}));return{accessToken:p.access_token,expiresIn:p.expires_in,refreshToken:p.refresh_token}})).apply(this,arguments)}class en{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(h){Se(h.idToken,"internal-error"),Se(void 0!==h.idToken,"internal-error"),Se(void 0!==h.refreshToken,"internal-error");const p="expiresIn"in h&&void 0!==h.expiresIn?Number(h.expiresIn):function(_){const h=Zn(_);return Se(h,"internal-error"),Se(void 0!==h.exp,"internal-error"),Se(void 0!==h.iat,"internal-error"),Number(h.exp)-Number(h.iat)}(h.idToken);this.updateTokensAndExpiration(h.idToken,h.refreshToken,p)}getToken(h,p=!1){var E=this;return(0,g.Z)(function*(){return Se(!E.accessToken||E.refreshToken,h,"user-token-expired"),p||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(h,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(h,p){var E=this;return(0,g.Z)(function*(){const{accessToken:T,refreshToken:x,expiresIn:B}=yield function(_,h){return xt.apply(this,arguments)}(h,p);E.updateTokensAndExpiration(T,x,Number(B))})()}updateTokensAndExpiration(h,p,E){this.refreshToken=p||null,this.accessToken=h||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(h,p){const{refreshToken:E,accessToken:T,expirationTime:x}=p,B=new en;return E&&(Se("string"==typeof E,"internal-error",{appName:h}),B.refreshToken=E),T&&(Se("string"==typeof T,"internal-error",{appName:h}),B.accessToken=T),x&&(Se("number"==typeof x,"internal-error",{appName:h}),B.expirationTime=x),B}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(h){this.accessToken=h.accessToken,this.refreshToken=h.refreshToken,this.expirationTime=h.expirationTime}_clone(){return Object.assign(new en,this.toJSON())}_performRefresh(){return wr("not implemented")}}function vn(_,h){Se("string"==typeof _||void 0===_,"internal-error",{appName:h})}class kr{constructor(h){var{uid:p,auth:E,stsTokenManager:T}=h,x=ee(h,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ia(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=p,this.auth=E,this.stsTokenManager=T,this.accessToken=T.accessToken,this.displayName=x.displayName||null,this.email=x.email||null,this.emailVerified=x.emailVerified||!1,this.phoneNumber=x.phoneNumber||null,this.photoURL=x.photoURL||null,this.isAnonymous=x.isAnonymous||!1,this.tenantId=x.tenantId||null,this.providerData=x.providerData?[...x.providerData]:[],this.metadata=new mo(x.createdAt||void 0,x.lastLoginAt||void 0)}getIdToken(h){var p=this;return(0,g.Z)(function*(){const E=yield Dn(p,p.stsTokenManager.getToken(p.auth,h));return Se(E,p.auth,"internal-error"),p.accessToken!==E&&(p.accessToken=E,yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)),E})()}getIdTokenResult(h){return function(_){return St.apply(this,arguments)}(this,h)}reload(){return function(_){return Yn.apply(this,arguments)}(this)}_assign(h){this!==h&&(Se(this.uid===h.uid,this.auth,"internal-error"),this.displayName=h.displayName,this.photoURL=h.photoURL,this.email=h.email,this.emailVerified=h.emailVerified,this.phoneNumber=h.phoneNumber,this.isAnonymous=h.isAnonymous,this.tenantId=h.tenantId,this.providerData=h.providerData.map(p=>Object.assign({},p)),this.metadata._copy(h.metadata),this.stsTokenManager._assign(h.stsTokenManager))}_clone(h){return new kr(Object.assign(Object.assign({},this),{auth:h,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(h){Se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=h,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(h){this.reloadListener?this.reloadListener(h):this.reloadUserInfo=h}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(h,p=!1){var E=this;return(0,g.Z)(function*(){let T=!1;h.idToken&&h.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(h),T=!0),p&&(yield Nn(E)),yield E.auth._persistUserIfCurrent(E),T&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var h=this;return(0,g.Z)(function*(){const p=yield h.getIdToken();return yield Dn(h,function(_,h){return bt.apply(this,arguments)}(h.auth,{idToken:p})),h.stsTokenManager.clearRefreshToken(),h.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(h=>Object.assign({},h)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(h,p){var E,T,x,B,J,Ae,Ie,Ke;const Qe=null!==(E=p.displayName)&&void 0!==E?E:void 0,Gt=null!==(T=p.email)&&void 0!==T?T:void 0,tr=null!==(x=p.phoneNumber)&&void 0!==x?x:void 0,Lo=null!==(B=p.photoURL)&&void 0!==B?B:void 0,Sh=null!==(J=p.tenantId)&&void 0!==J?J:void 0,xa=null!==(Ae=p._redirectEventId)&&void 0!==Ae?Ae:void 0,iy=null!==(Ie=p.createdAt)&&void 0!==Ie?Ie:void 0,Pp=null!==(Ke=p.lastLoginAt)&&void 0!==Ke?Ke:void 0,{uid:kl,emailVerified:Fp,isAnonymous:Pl,providerData:Lp,stsTokenManager:sy}=p;Se(kl&&sy,h,"internal-error");const qr=en.fromJSON(this.name,sy);Se("string"==typeof kl,h,"internal-error"),vn(Qe,h.name),vn(Gt,h.name),Se("boolean"==typeof Fp,h,"internal-error"),Se("boolean"==typeof Pl,h,"internal-error"),vn(tr,h.name),vn(Lo,h.name),vn(Sh,h.name),vn(xa,h.name),vn(iy,h.name),vn(Pp,h.name);const xh=new kr({uid:kl,auth:h,email:Gt,emailVerified:Fp,displayName:Qe,isAnonymous:Pl,photoURL:Lo,phoneNumber:tr,tenantId:Sh,stsTokenManager:qr,createdAt:iy,lastLoginAt:Pp});return Lp&&Array.isArray(Lp)&&(xh.providerData=Lp.map(ro=>Object.assign({},ro))),xa&&(xh._redirectEventId=xa),xh}static _fromIdTokenResponse(h,p,E=!1){return(0,g.Z)(function*(){const T=new en;T.updateFromServerResponse(p);const x=new kr({uid:p.localId,auth:h,stsTokenManager:T,isAnonymous:E});return yield Nn(x),x})()}}const gr=(()=>{class _{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,g.Z)(function*(){return!0})()}_set(p,E){var T=this;return(0,g.Z)(function*(){T.storage[p]=E})()}_get(p){var E=this;return(0,g.Z)(function*(){const T=E.storage[p];return void 0===T?null:T})()}_remove(p){var E=this;return(0,g.Z)(function*(){delete E.storage[p]})()}_addListener(p,E){}_removeListener(p,E){}}return _.type="NONE",_})();function tn(_,h,p){return`firebase:${_}:${h}:${p}`}class fn{constructor(h,p,E){this.persistence=h,this.auth=p,this.userKey=E;const{config:T,name:x}=this.auth;this.fullUserKey=tn(this.userKey,T.apiKey,x),this.fullPersistenceKey=tn("persistence",T.apiKey,x),this.boundEventHandler=p._onStorageEvent.bind(p),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(h){return this.persistence._set(this.fullUserKey,h.toJSON())}getCurrentUser(){var h=this;return(0,g.Z)(function*(){const p=yield h.persistence._get(h.fullUserKey);return p?kr._fromJSON(h.auth,p):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(h){var p=this;return(0,g.Z)(function*(){if(p.persistence===h)return;const E=yield p.getCurrentUser();return yield p.removeCurrentUser(),p.persistence=h,E?p.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(h,p,E="authUser"){return(0,g.Z)(function*(){if(!p.length)return new fn(_n(gr),h,E);const T=(yield Promise.all(p.map(function(){var Ie=(0,g.Z)(function*(Ke){if(yield Ke._isAvailable())return Ke});return function(Ke){return Ie.apply(this,arguments)}}()))).filter(Ie=>Ie);let x=T[0]||_n(gr);const B=tn(E,h.config.apiKey,h.name);let J=null;for(const Ie of p)try{const Ke=yield Ie._get(B);if(Ke){const Qe=kr._fromJSON(h,Ke);Ie!==x&&(J=Qe),x=Ie;break}}catch(Ke){}const Ae=T.filter(Ie=>Ie._shouldAllowMigration);return x._shouldAllowMigration&&Ae.length?(x=Ae[0],J&&(yield x._set(B,J.toJSON())),yield Promise.all(p.map(function(){var Ie=(0,g.Z)(function*(Ke){if(Ke!==x)try{yield Ke._remove(B)}catch(Qe){}});return function(Ke){return Ie.apply(this,arguments)}}())),new fn(x,h,E)):new fn(x,h,E)})()}}function sa(_){const h=_.toLowerCase();if(h.includes("opera/")||h.includes("opr/")||h.includes("opios/"))return"Opera";if(Bu(h))return"IEMobile";if(h.includes("msie")||h.includes("trident/"))return"IE";if(h.includes("edge/"))return"Edge";if(At(h))return"Firefox";if(h.includes("silk/"))return"Silk";if(Ir(h))return"Blackberry";if(aa(h))return"Webos";if(oa(h))return"Safari";if((h.includes("chrome/")||Gs(h))&&!h.includes("edge/"))return"Chrome";if(Ti(h))return"Android";{const E=_.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==E?void 0:E.length))return E[1]}return"Other"}function At(_=(0,L.z$)()){return/firefox\//i.test(_)}function oa(_=(0,L.z$)()){const h=_.toLowerCase();return h.includes("safari/")&&!h.includes("chrome/")&&!h.includes("crios/")&&!h.includes("android")}function Gs(_=(0,L.z$)()){return/crios\//i.test(_)}function Bu(_=(0,L.z$)()){return/iemobile/i.test(_)}function Ti(_=(0,L.z$)()){return/android/i.test(_)}function Ir(_=(0,L.z$)()){return/blackberry/i.test(_)}function aa(_=(0,L.z$)()){return/webos/i.test(_)}function Pr(_=(0,L.z$)()){return/iphone|ipad|ipod/i.test(_)||/macintosh/i.test(_)&&/mobile/i.test(_)}function Qc(_=(0,L.z$)()){return Pr(_)||Ti(_)||aa(_)||Ir(_)||/windows phone/i.test(_)||Bu(_)}function Xc(_,h=[]){let p;switch(_){case"Browser":p=sa((0,L.z$)());break;case"Worker":p=`${sa((0,L.z$)())}-${_}`;break;default:p=_}const E=h.length?h.join(","):"FirebaseCore-web";return`${p}/JsCore/${ae.SDK_VERSION}/${E}`}class el{constructor(h){this.auth=h,this.queue=[]}pushCallback(h,p){const E=x=>new Promise((B,J)=>{try{B(h(x))}catch(Ae){J(Ae)}});E.onAbort=p,this.queue.push(E);const T=this.queue.length-1;return()=>{this.queue[T]=()=>Promise.resolve()}}runMiddleware(h){var p=this;return(0,g.Z)(function*(){var E;if(p.auth.currentUser===h)return;const T=[];try{for(const x of p.queue)yield x(h),x.onAbort&&T.push(x.onAbort)}catch(x){T.reverse();for(const B of T)try{B()}catch(J){}throw p.auth._errorFactory.create("login-blocked",{originalMessage:null===(E=x)||void 0===E?void 0:E.message})}})()}}class qs{constructor(h,p,E){this.app=h,this.heartbeatServiceProvider=p,this.config=E,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new or(this),this.idTokenSubscription=new or(this),this.beforeStateQueue=new el(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=$t,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=h.name,this.clientVersion=E.sdkClientVersion}_initializeWithPersistence(h,p){var E=this;return p&&(this._popupRedirectResolver=_n(p)),this._initializationPromise=this.queue((0,g.Z)(function*(){var T,x;if(!E._deleted&&(E.persistenceManager=yield fn.create(E,h),!E._deleted)){if(null===(T=E._popupRedirectResolver)||void 0===T?void 0:T._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch(B){}yield E.initializeCurrentUser(p),E.lastNotifiedUid=(null===(x=E.currentUser)||void 0===x?void 0:x.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var h=this;return(0,g.Z)(function*(){if(h._deleted)return;const p=yield h.assertedPersistence.getCurrentUser();if(h.currentUser||p){if(h.currentUser&&p&&h.currentUser.uid===p.uid)return h._currentUser._assign(p),void(yield h.currentUser.getIdToken());yield h._updateCurrentUser(p,!0)}})()}initializeCurrentUser(h){var p=this;return(0,g.Z)(function*(){var E;const T=yield p.assertedPersistence.getCurrentUser();let x=T,B=!1;if(h&&p.config.authDomain){yield p.getOrInitRedirectPersistenceManager();const J=null===(E=p.redirectUser)||void 0===E?void 0:E._redirectEventId,Ae=null==x?void 0:x._redirectEventId,Ie=yield p.tryRedirectSignIn(h);(!J||J===Ae)&&(null==Ie?void 0:Ie.user)&&(x=Ie.user,B=!0)}if(!x)return p.directlySetCurrentUser(null);if(!x._redirectEventId){if(B)try{yield p.beforeStateQueue.runMiddleware(x)}catch(J){x=T,p._popupRedirectResolver._overrideRedirectResult(p,()=>Promise.reject(J))}return x?p.reloadAndSetCurrentUserOrClear(x):p.directlySetCurrentUser(null)}return Se(p._popupRedirectResolver,p,"argument-error"),yield p.getOrInitRedirectPersistenceManager(),p.redirectUser&&p.redirectUser._redirectEventId===x._redirectEventId?p.directlySetCurrentUser(x):p.reloadAndSetCurrentUserOrClear(x)})()}tryRedirectSignIn(h){var p=this;return(0,g.Z)(function*(){let E=null;try{E=yield p._popupRedirectResolver._completeRedirectFn(p,h,!0)}catch(T){yield p._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(h){var p=this;return(0,g.Z)(function*(){var E;try{yield Nn(h)}catch(T){if("auth/network-request-failed"!==(null===(E=T)||void 0===E?void 0:E.code))return p.directlySetCurrentUser(null)}return p.directlySetCurrentUser(h)})()}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const _=navigator;return _.languages&&_.languages[0]||_.language||null}()}_delete(){var h=this;return(0,g.Z)(function*(){h._deleted=!0})()}updateCurrentUser(h){var p=this;return(0,g.Z)(function*(){const E=h?(0,L.m9)(h):null;return E&&Se(E.auth.config.apiKey===p.config.apiKey,p,"invalid-user-token"),p._updateCurrentUser(E&&E._clone(p))})()}_updateCurrentUser(h,p=!1){var E=this;return(0,g.Z)(function*(){if(!E._deleted)return h&&Se(E.tenantId===h.tenantId,E,"tenant-id-mismatch"),p||(yield E.beforeStateQueue.runMiddleware(h)),E.queue((0,g.Z)(function*(){yield E.directlySetCurrentUser(h),E.notifyAuthListeners()}))})()}signOut(){var h=this;return(0,g.Z)(function*(){return yield h.beforeStateQueue.runMiddleware(null),(h.redirectPersistenceManager||h._popupRedirectResolver)&&(yield h._setRedirectUser(null)),h._updateCurrentUser(null,!0)})()}setPersistence(h){var p=this;return this.queue((0,g.Z)(function*(){yield p.assertedPersistence.setPersistence(_n(h))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(h){this._errorFactory=new L.LL("auth","Firebase",h())}onAuthStateChanged(h,p,E){return this.registerStateListener(this.authStateSubscription,h,p,E)}beforeAuthStateChanged(h,p){return this.beforeStateQueue.pushCallback(h,p)}onIdTokenChanged(h,p,E){return this.registerStateListener(this.idTokenSubscription,h,p,E)}toJSON(){var h;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(h=this._currentUser)||void 0===h?void 0:h.toJSON()}}_setRedirectUser(h,p){var E=this;return(0,g.Z)(function*(){const T=yield E.getOrInitRedirectPersistenceManager(p);return null===h?T.removeCurrentUser():T.setCurrentUser(h)})()}getOrInitRedirectPersistenceManager(h){var p=this;return(0,g.Z)(function*(){if(!p.redirectPersistenceManager){const E=h&&_n(h)||p._popupRedirectResolver;Se(E,p,"argument-error"),p.redirectPersistenceManager=yield fn.create(p,[_n(E._redirectPersistence)],"redirectUser"),p.redirectUser=yield p.redirectPersistenceManager.getCurrentUser()}return p.redirectPersistenceManager})()}_redirectUserForId(h){var p=this;return(0,g.Z)(function*(){var E,T;return p._isInitialized&&(yield p.queue((0,g.Z)(function*(){}))),(null===(E=p._currentUser)||void 0===E?void 0:E._redirectEventId)===h?p._currentUser:(null===(T=p.redirectUser)||void 0===T?void 0:T._redirectEventId)===h?p.redirectUser:null})()}_persistUserIfCurrent(h){var p=this;return(0,g.Z)(function*(){if(h===p.currentUser)return p.queue((0,g.Z)(function*(){return p.directlySetCurrentUser(h)}))})()}_notifyListenersIfCurrent(h){h===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var h,p;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(p=null===(h=this.currentUser)||void 0===h?void 0:h.uid)&&void 0!==p?p:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(h,p,E,T){if(this._deleted)return()=>{};const x="function"==typeof p?p:p.next.bind(p),B=this._isInitialized?Promise.resolve():this._initializationPromise;return Se(B,this,"internal-error"),B.then(()=>x(this.currentUser)),"function"==typeof p?h.addObserver(p,E,T):h.addObserver(p)}directlySetCurrentUser(h){var p=this;return(0,g.Z)(function*(){p.currentUser&&p.currentUser!==h&&p._currentUser._stopProactiveRefresh(),h&&p.isProactiveRefreshEnabled&&h._startProactiveRefresh(),p.currentUser=h,h?yield p.assertedPersistence.setCurrentUser(h):yield p.assertedPersistence.removeCurrentUser()})()}queue(h){return this.operations=this.operations.then(h,h),this.operations}get assertedPersistence(){return Se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(h){!h||this.frameworks.includes(h)||(this.frameworks.push(h),this.frameworks.sort(),this.clientVersion=Xc(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var h=this;return(0,g.Z)(function*(){var p;const E={"X-Client-Version":h.clientVersion};h.app.options.appId&&(E["X-Firebase-gmpid"]=h.app.options.appId);const T=yield null===(p=h.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===p?void 0:p.getHeartbeatsHeader();return T&&(E["X-Firebase-Client"]=T),E})()}}function pn(_){return(0,L.m9)(_)}class or{constructor(h){this.auth=h,this.observer=null,this.addObserver=(0,L.ne)(p=>this.observer=p)}get next(){return Se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function is(_){const h=_.indexOf(":");return h<0?"":_.substr(0,h+1)}function ju(_){if(!_)return null;const h=Number(_);return isNaN(h)?null:h}class Is{constructor(h,p){this.providerId=h,this.signInMethod=p}toJSON(){return wr("not implemented")}_getIdTokenResponse(h){return wr("not implemented")}_linkToIdToken(h,p){return wr("not implemented")}_getReauthenticationResolver(h){return wr("not implemented")}}function Ai(_,h){return $u.apply(this,arguments)}function $u(){return($u=(0,g.Z)(function*(_,h){return Kt(_,"POST","/v1/accounts:resetPassword",Tt(_,h))})).apply(this,arguments)}function Gf(_,h){return ua.apply(this,arguments)}function ua(){return(ua=(0,g.Z)(function*(_,h){return Kt(_,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function _o(_,h){return Pd.apply(this,arguments)}function Pd(){return(Pd=(0,g.Z)(function*(_,h){return Kt(_,"POST","/v1/accounts:update",Tt(_,h))})).apply(this,arguments)}function Fd(){return(Fd=(0,g.Z)(function*(_,h){return Ye(_,"POST","/v1/accounts:signInWithPassword",Tt(_,h))})).apply(this,arguments)}function tl(_,h){return Ld.apply(this,arguments)}function Ld(){return(Ld=(0,g.Z)(function*(_,h){return Kt(_,"POST","/v1/accounts:sendOobCode",Tt(_,h))})).apply(this,arguments)}function Cm(_,h){return qf.apply(this,arguments)}function qf(){return(qf=(0,g.Z)(function*(_,h){return tl(_,h)})).apply(this,arguments)}function Vd(_,h){return nl.apply(this,arguments)}function nl(){return(nl=(0,g.Z)(function*(_,h){return tl(_,h)})).apply(this,arguments)}function Ud(_,h){return Bd.apply(this,arguments)}function Bd(){return(Bd=(0,g.Z)(function*(_,h){return tl(_,h)})).apply(this,arguments)}function Dm(_,h){return Ka.apply(this,arguments)}function Ka(){return(Ka=(0,g.Z)(function*(_,h){return tl(_,h)})).apply(this,arguments)}function Ya(){return(Ya=(0,g.Z)(function*(_,h){return Ye(_,"POST","/v1/accounts:signInWithEmailLink",Tt(_,h))})).apply(this,arguments)}function $d(){return($d=(0,g.Z)(function*(_,h){return Ye(_,"POST","/v1/accounts:signInWithEmailLink",Tt(_,h))})).apply(this,arguments)}class Qa extends Is{constructor(h,p,E,T=null){super("password",E),this._email=h,this._password=p,this._tenantId=T}static _fromEmailAndPassword(h,p){return new Qa(h,p,"password")}static _fromEmailAndCode(h,p,E=null){return new Qa(h,p,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h;if((null==p?void 0:p.email)&&(null==p?void 0:p.password)){if("password"===p.signInMethod)return this._fromEmailAndPassword(p.email,p.password);if("emailLink"===p.signInMethod)return this._fromEmailAndCode(p.email,p.password,p.tenantId)}return null}_getIdTokenResponse(h){var p=this;return(0,g.Z)(function*(){switch(p.signInMethod){case"password":return function(_,h){return Fd.apply(this,arguments)}(h,{returnSecureToken:!0,email:p._email,password:p._password});case"emailLink":return function(_,h){return Ya.apply(this,arguments)}(h,{email:p._email,oobCode:p._password});default:yt(h,"internal-error")}})()}_linkToIdToken(h,p){var E=this;return(0,g.Z)(function*(){switch(E.signInMethod){case"password":return Gf(h,{idToken:p,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function(_,h){return $d.apply(this,arguments)}(h,{idToken:p,email:E._email,oobCode:E._password});default:yt(h,"internal-error")}})()}_getReauthenticationResolver(h){return this._getIdTokenResponse(h)}}function vo(_,h){return Fr.apply(this,arguments)}function Fr(){return(Fr=(0,g.Z)(function*(_,h){return Ye(_,"POST","/v1/accounts:signInWithIdp",Tt(_,h))})).apply(this,arguments)}class Bi extends Is{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(h){const p=new Bi(h.providerId,h.signInMethod);return h.idToken||h.accessToken?(h.idToken&&(p.idToken=h.idToken),h.accessToken&&(p.accessToken=h.accessToken),h.nonce&&!h.pendingToken&&(p.nonce=h.nonce),h.pendingToken&&(p.pendingToken=h.pendingToken)):h.oauthToken&&h.oauthTokenSecret?(p.accessToken=h.oauthToken,p.secret=h.oauthTokenSecret):yt("argument-error"),p}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h,{providerId:E,signInMethod:T}=p,x=ee(p,["providerId","signInMethod"]);if(!E||!T)return null;const B=new Bi(E,T);return B.idToken=x.idToken||void 0,B.accessToken=x.accessToken||void 0,B.secret=x.secret,B.nonce=x.nonce,B.pendingToken=x.pendingToken||null,B}_getIdTokenResponse(h){return vo(h,this.buildRequest())}_linkToIdToken(h,p){const E=this.buildRequest();return E.idToken=p,vo(h,E)}_getReauthenticationResolver(h){const p=this.buildRequest();return p.autoCreate=!1,vo(h,p)}buildRequest(){const h={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)h.pendingToken=this.pendingToken;else{const p={};this.idToken&&(p.id_token=this.idToken),this.accessToken&&(p.access_token=this.accessToken),this.secret&&(p.oauth_token_secret=this.secret),p.providerId=this.providerId,this.nonce&&!this.pendingToken&&(p.nonce=this.nonce),h.postBody=(0,L.xO)(p)}return h}}function Gu(_,h){return Gd.apply(this,arguments)}function Gd(){return(Gd=(0,g.Z)(function*(_,h){return Kt(_,"POST","/v1/accounts:sendVerificationCode",Tt(_,h))})).apply(this,arguments)}function rl(){return(rl=(0,g.Z)(function*(_,h){return Ye(_,"POST","/v1/accounts:signInWithPhoneNumber",Tt(_,h))})).apply(this,arguments)}function il(){return(il=(0,g.Z)(function*(_,h){const p=yield Ye(_,"POST","/v1/accounts:signInWithPhoneNumber",Tt(_,h));if(p.temporaryProof)throw xe(_,"account-exists-with-different-credential",p);return p})).apply(this,arguments)}const qu={USER_NOT_FOUND:"user-not-found"};function jn(){return(jn=(0,g.Z)(function*(_,h){return Ye(_,"POST","/v1/accounts:signInWithPhoneNumber",Tt(_,Object.assign(Object.assign({},h),{operation:"REAUTH"})),qu)})).apply(this,arguments)}class ji extends Is{constructor(h){super("phone","phone"),this.params=h}static _fromVerification(h,p){return new ji({verificationId:h,verificationCode:p})}static _fromTokenResponse(h,p){return new ji({phoneNumber:h,temporaryProof:p})}_getIdTokenResponse(h){return function(_,h){return rl.apply(this,arguments)}(h,this._makeVerificationRequest())}_linkToIdToken(h,p){return function(_,h){return il.apply(this,arguments)}(h,Object.assign({idToken:p},this._makeVerificationRequest()))}_getReauthenticationResolver(h){return function(_,h){return jn.apply(this,arguments)}(h,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:h,phoneNumber:p,verificationId:E,verificationCode:T}=this.params;return h&&p?{temporaryProof:h,phoneNumber:p}:{sessionInfo:E,code:T}}toJSON(){const h={providerId:this.providerId};return this.params.phoneNumber&&(h.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(h.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(h.verificationCode=this.params.verificationCode),this.params.verificationId&&(h.verificationId=this.params.verificationId),h}static fromJSON(h){"string"==typeof h&&(h=JSON.parse(h));const{verificationId:p,verificationCode:E,phoneNumber:T,temporaryProof:x}=h;return E||p||T||x?new ji({verificationId:p,verificationCode:E,phoneNumber:T,temporaryProof:x}):null}}class Hi{constructor(h){var p,E,T,x,B,J;const Ae=(0,L.zd)((0,L.pd)(h)),Ie=null!==(p=Ae.apiKey)&&void 0!==p?p:null,Ke=null!==(E=Ae.oobCode)&&void 0!==E?E:null,Qe=function(_){switch(_){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(T=Ae.mode)&&void 0!==T?T:null);Se(Ie&&Ke&&Qe,"argument-error"),this.apiKey=Ie,this.operation=Qe,this.code=Ke,this.continueUrl=null!==(x=Ae.continueUrl)&&void 0!==x?x:null,this.languageCode=null!==(B=Ae.languageCode)&&void 0!==B?B:null,this.tenantId=null!==(J=Ae.tenantId)&&void 0!==J?J:null}static parseLink(h){const p=function(_){const h=(0,L.zd)((0,L.pd)(_)).link,p=h?(0,L.zd)((0,L.pd)(h)).deep_link_id:null,E=(0,L.zd)((0,L.pd)(_)).deep_link_id;return(E?(0,L.zd)((0,L.pd)(E)).link:null)||E||p||h||_}(h);try{return new Hi(p)}catch(E){return null}}}let Eo=(()=>{class _{constructor(){this.providerId=_.PROVIDER_ID}static credential(p,E){return Qa._fromEmailAndPassword(p,E)}static credentialWithLink(p,E){const T=Hi.parseLink(E);return Se(T,"argument-error"),Qa._fromEmailAndCode(p,T.code,T.tenantId)}}return _.PROVIDER_ID="password",_.EMAIL_PASSWORD_SIGN_IN_METHOD="password",_.EMAIL_LINK_SIGN_IN_METHOD="emailLink",_})();class Yt{constructor(h){this.providerId=h,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(h){this.defaultLanguageCode=h}setCustomParameters(h){return this.customParameters=h,this}getCustomParameters(){return this.customParameters}}class Ws extends Yt{constructor(){super(...arguments),this.scopes=[]}addScope(h){return this.scopes.includes(h)||this.scopes.push(h),this}getScopes(){return[...this.scopes]}}class Cs extends Ws{static credentialFromJSON(h){const p="string"==typeof h?JSON.parse(h):h;return Se("providerId"in p&&"signInMethod"in p,"argument-error"),Bi._fromParams(p)}credential(h){return this._credential(Object.assign(Object.assign({},h),{nonce:h.rawNonce}))}_credential(h){return Se(h.idToken||h.accessToken,"argument-error"),Bi._fromParams(Object.assign(Object.assign({},h),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(h){return Cs.oauthCredentialFromTaggedObject(h)}static credentialFromError(h){return Cs.oauthCredentialFromTaggedObject(h.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:p,oauthAccessToken:E,oauthTokenSecret:T,pendingToken:x,nonce:B,providerId:J}=h;if(!E&&!T&&!p&&!x||!J)return null;try{return new Cs(J)._credential({idToken:p,accessToken:E,nonce:B,pendingToken:x})}catch(Ae){return null}}}let qd=(()=>{class _ extends Ws{constructor(){super("facebook.com")}static credential(p){return Bi._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.FACEBOOK_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return _.credentialFromTaggedObject(p)}static credentialFromError(p){return _.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return _.credential(p.oauthAccessToken)}catch(E){return null}}}return _.FACEBOOK_SIGN_IN_METHOD="facebook.com",_.PROVIDER_ID="facebook.com",_})(),Vt=(()=>{class _ extends Ws{constructor(){super("google.com"),this.addScope("profile")}static credential(p,E){return Bi._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.GOOGLE_SIGN_IN_METHOD,idToken:p,accessToken:E})}static credentialFromResult(p){return _.credentialFromTaggedObject(p)}static credentialFromError(p){return _.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:E,oauthAccessToken:T}=p;if(!E&&!T)return null;try{return _.credential(E,T)}catch(x){return null}}}return _.GOOGLE_SIGN_IN_METHOD="google.com",_.PROVIDER_ID="google.com",_})(),Wd=(()=>{class _ extends Ws{constructor(){super("github.com")}static credential(p){return Bi._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.GITHUB_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return _.credentialFromTaggedObject(p)}static credentialFromError(p){return _.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return _.credential(p.oauthAccessToken)}catch(E){return null}}}return _.GITHUB_SIGN_IN_METHOD="github.com",_.PROVIDER_ID="github.com",_})();class Ds extends Is{constructor(h,p){super(h,h),this.pendingToken=p}_getIdTokenResponse(h){return vo(h,this.buildRequest())}_linkToIdToken(h,p){const E=this.buildRequest();return E.idToken=p,vo(h,E)}_getReauthenticationResolver(h){const p=this.buildRequest();return p.autoCreate=!1,vo(h,p)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h,{providerId:E,signInMethod:T,pendingToken:x}=p;return E&&T&&x&&E===T?new Ds(E,x):null}static _create(h,p){return new Ds(h,p)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Zu extends Yt{constructor(h){Se(h.startsWith("saml."),"argument-error"),super(h)}static credentialFromResult(h){return Zu.samlCredentialFromTaggedObject(h)}static credentialFromError(h){return Zu.samlCredentialFromTaggedObject(h.customData||{})}static credentialFromJSON(h){const p=Ds.fromJSON(h);return Se(p,"argument-error"),p}static samlCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{pendingToken:p,providerId:E}=h;if(!p||!E)return null;try{return Ds._create(E,p)}catch(T){return null}}}let Ts=(()=>{class _ extends Ws{constructor(){super("twitter.com")}static credential(p,E){return Bi._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.TWITTER_SIGN_IN_METHOD,oauthToken:p,oauthTokenSecret:E})}static credentialFromResult(p){return _.credentialFromTaggedObject(p)}static credentialFromError(p){return _.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthAccessToken:E,oauthTokenSecret:T}=p;if(!E||!T)return null;try{return _.credential(E,T)}catch(x){return null}}}return _.TWITTER_SIGN_IN_METHOD="twitter.com",_.PROVIDER_ID="twitter.com",_})();function zs(_,h){return ar.apply(this,arguments)}function ar(){return(ar=(0,g.Z)(function*(_,h){return Ye(_,"POST","/v1/accounts:signUp",Tt(_,h))})).apply(this,arguments)}class Cr{constructor(h){this.user=h.user,this.providerId=h.providerId,this._tokenResponse=h._tokenResponse,this.operationType=h.operationType}static _fromIdTokenResponse(h,p,E,T=!1){return(0,g.Z)(function*(){const x=yield kr._fromIdTokenResponse(h,E,T),B=Xa(E);return new Cr({user:x,providerId:B,_tokenResponse:E,operationType:p})})()}static _forOperation(h,p,E){return(0,g.Z)(function*(){yield h._updateTokensIfNecessary(E,!0);const T=Xa(E);return new Cr({user:h,providerId:T,_tokenResponse:E,operationType:p})})()}}function Xa(_){return _.providerId?_.providerId:"phoneNumber"in _?"phone":null}function os(){return(os=(0,g.Z)(function*(_){var h;const p=pn(_);if(yield p._initializationPromise,null===(h=p.currentUser)||void 0===h?void 0:h.isAnonymous)return new Cr({user:p.currentUser,providerId:null,operationType:"signIn"});const E=yield zs(p,{returnSecureToken:!0}),T=yield Cr._fromIdTokenResponse(p,"signIn",E,!0);return yield p._updateCurrentUser(T.user),T})).apply(this,arguments)}class bo extends L.ZR{constructor(h,p,E,T){var x;super(p.code,p.message),this.operationType=E,this.user=T,Object.setPrototypeOf(this,bo.prototype),this.customData={appName:h.name,tenantId:null!==(x=h.tenantId)&&void 0!==x?x:void 0,_serverResponse:p.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(h,p,E,T){return new bo(h,p,E,T)}}function eu(_,h,p,E){return("reauthenticate"===h?p._getReauthenticationResolver(_):p._getIdTokenResponse(_)).catch(x=>{throw"auth/multi-factor-auth-required"===x.code?bo._fromErrorAndOperation(_,x,h,E):x})}function ht(_){return new Set(_.map(({providerId:h})=>h).filter(h=>!!h))}function As(){return(As=(0,g.Z)(function*(_,h){const p=(0,L.m9)(_);yield la(!0,p,h);const{providerUserInfo:E}=yield zt(p.auth,{idToken:yield p.getIdToken(),deleteProvider:[h]}),T=ht(E||[]);return p.providerData=p.providerData.filter(x=>T.has(x.providerId)),T.has("phone")||(p.phoneNumber=null),yield p.auth._persistUserIfCurrent(p),p})).apply(this,arguments)}function wo(_,h){return Io.apply(this,arguments)}function Io(){return(Io=(0,g.Z)(function*(_,h,p=!1){const E=yield Dn(_,h._linkToIdToken(_.auth,yield _.getIdToken()),p);return Cr._forOperation(_,"link",E)})).apply(this,arguments)}function la(_,h,p){return Ss.apply(this,arguments)}function Ss(){return(Ss=(0,g.Z)(function*(_,h,p){yield Nn(h);const T=!1===_?"provider-already-linked":"no-such-provider";Se(ht(h.providerData).has(p)===_,h.auth,T)})).apply(this,arguments)}function sl(_,h){return Ee.apply(this,arguments)}function Ee(){return(Ee=(0,g.Z)(function*(_,h,p=!1){var E;const{auth:T}=_,x="reauthenticate";try{const B=yield Dn(_,eu(T,x,h,_),p);Se(B.idToken,T,"internal-error");const J=Zn(B.idToken);Se(J,T,"internal-error");const{sub:Ae}=J;return Se(_.uid===Ae,T,"user-mismatch"),Cr._forOperation(_,x,B)}catch(B){throw"auth/user-not-found"===(null===(E=B)||void 0===E?void 0:E.code)&&yt(T,"user-mismatch"),B}})).apply(this,arguments)}function Bt(_,h){return tu.apply(this,arguments)}function tu(){return(tu=(0,g.Z)(function*(_,h,p=!1){const E="signIn",T=yield eu(_,E,h),x=yield Cr._fromIdTokenResponse(_,E,T);return p||(yield _._updateCurrentUser(x.user)),x})).apply(this,arguments)}function gn(_,h){return Ku.apply(this,arguments)}function Ku(){return(Ku=(0,g.Z)(function*(_,h){return Bt(pn(_),h)})).apply(this,arguments)}function Co(_,h){return Si.apply(this,arguments)}function Si(){return(Si=(0,g.Z)(function*(_,h){const p=(0,L.m9)(_);return yield la(!1,p,h.providerId),wo(p,h)})).apply(this,arguments)}function da(_,h){return Zs.apply(this,arguments)}function Zs(){return(Zs=(0,g.Z)(function*(_,h){return sl((0,L.m9)(_),h)})).apply(this,arguments)}function Kd(_,h){return Yu.apply(this,arguments)}function Yu(){return(Yu=(0,g.Z)(function*(_,h){return Ye(_,"POST","/v1/accounts:signInWithCustomToken",Tt(_,h))})).apply(this,arguments)}function as(){return(as=(0,g.Z)(function*(_,h){const p=pn(_),E=yield Kd(p,{token:h,returnSecureToken:!0}),T=yield Cr._fromIdTokenResponse(p,"signIn",E);return yield p._updateCurrentUser(T.user),T})).apply(this,arguments)}class ur{constructor(h,p){this.factorId=h,this.uid=p.mfaEnrollmentId,this.enrollmentTime=new Date(p.enrolledAt).toUTCString(),this.displayName=p.displayName}static _fromServerResponse(h,p){return"phoneInfo"in p?Lr._fromServerResponse(h,p):yt(h,"internal-error")}}class Lr extends ur{constructor(h){super("phone",h),this.phoneNumber=h.phoneInfo}static _fromServerResponse(h,p){return new Lr(p)}}function Do(_,h,p){var E;Se((null===(E=p.url)||void 0===E?void 0:E.length)>0,_,"invalid-continue-uri"),Se(void 0===p.dynamicLinkDomain||p.dynamicLinkDomain.length>0,_,"invalid-dynamic-link-domain"),h.continueUrl=p.url,h.dynamicLinkDomain=p.dynamicLinkDomain,h.canHandleCodeInApp=p.handleCodeInApp,p.iOS&&(Se(p.iOS.bundleId.length>0,_,"missing-ios-bundle-id"),h.iOSBundleId=p.iOS.bundleId),p.android&&(Se(p.android.packageName.length>0,_,"missing-android-pkg-name"),h.androidInstallApp=p.android.installApp,h.androidMinimumVersionCode=p.android.minimumVersion,h.androidPackageName=p.android.packageName)}function $i(){return($i=(0,g.Z)(function*(_,h,p){const E=(0,L.m9)(_),T={requestType:"PASSWORD_RESET",email:h};p&&Do(E,T,p),yield Vd(E,T)})).apply(this,arguments)}function Qu(){return(Qu=(0,g.Z)(function*(_,h,p){yield Ai((0,L.m9)(_),{oobCode:h,newPassword:p})})).apply(this,arguments)}function fa(){return(fa=(0,g.Z)(function*(_,h){yield _o((0,L.m9)(_),{oobCode:h})})).apply(this,arguments)}function nu(_,h){return pa.apply(this,arguments)}function pa(){return(pa=(0,g.Z)(function*(_,h){const p=(0,L.m9)(_),E=yield Ai(p,{oobCode:h}),T=E.requestType;switch(Se(T,p,"internal-error"),T){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Se(E.newEmail,p,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Se(E.mfaInfo,p,"internal-error");default:Se(E.email,p,"internal-error")}let x=null;return E.mfaInfo&&(x=ur._fromServerResponse(pn(p),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:x},operation:T}})).apply(this,arguments)}function Ju(){return(Ju=(0,g.Z)(function*(_,h){const{data:p}=yield nu((0,L.m9)(_),h);return p.email})).apply(this,arguments)}function Xu(){return(Xu=(0,g.Z)(function*(_,h,p){const E=pn(_),T=yield zs(E,{returnSecureToken:!0,email:h,password:p}),x=yield Cr._fromIdTokenResponse(E,"signIn",T);return yield E._updateCurrentUser(x.user),x})).apply(this,arguments)}function ga(){return(ga=(0,g.Z)(function*(_,h,p){const E=(0,L.m9)(_),T={requestType:"EMAIL_SIGNIN",email:h};Se(p.handleCodeInApp,E,"argument-error"),p&&Do(E,T,p),yield Ud(E,T)})).apply(this,arguments)}function ec(){return(ec=(0,g.Z)(function*(_,h,p){const E=(0,L.m9)(_),T=Eo.credentialWithLink(h,p||Xe());return Se(T._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),gn(E,T)})).apply(this,arguments)}function Jd(_,h){return Kf.apply(this,arguments)}function Kf(){return(Kf=(0,g.Z)(function*(_,h){return Kt(_,"POST","/v1/accounts:createAuthUri",Tt(_,h))})).apply(this,arguments)}function ai(){return(ai=(0,g.Z)(function*(_,h){const E={identifier:h,continueUri:Nr()?Xe():"http://localhost"},{signinMethods:T}=yield Jd((0,L.m9)(_),E);return T||[]})).apply(this,arguments)}function ru(){return(ru=(0,g.Z)(function*(_,h){const p=(0,L.m9)(_),T={requestType:"VERIFY_EMAIL",idToken:yield _.getIdToken()};h&&Do(p.auth,T,h);const{email:x}=yield Cm(p.auth,T);x!==_.email&&(yield _.reload())})).apply(this,arguments)}function iu(){return(iu=(0,g.Z)(function*(_,h,p){const E=(0,L.m9)(_),x={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield _.getIdToken(),newEmail:h};p&&Do(E.auth,x,p);const{email:B}=yield Dm(E.auth,x);B!==_.email&&(yield _.reload())})).apply(this,arguments)}function Xd(_,h){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,g.Z)(function*(_,h){return Kt(_,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function ma(){return(ma=(0,g.Z)(function*(_,{displayName:h,photoURL:p}){if(void 0===h&&void 0===p)return;const E=(0,L.m9)(_),x={idToken:yield E.getIdToken(),displayName:h,photoUrl:p,returnSecureToken:!0},B=yield Dn(E,Xd(E.auth,x));E.displayName=B.displayName||null,E.photoURL=B.photoUrl||null;const J=E.providerData.find(({providerId:Ae})=>"password"===Ae);J&&(J.displayName=E.displayName,J.photoURL=E.photoURL),yield E._updateTokensIfNecessary(B)})).apply(this,arguments)}function su(_,h,p){return nc.apply(this,arguments)}function nc(){return(nc=(0,g.Z)(function*(_,h,p){const{auth:E}=_,x={idToken:yield _.getIdToken(),returnSecureToken:!0};h&&(x.email=h),p&&(x.password=p);const B=yield Dn(_,Gf(E,x));yield _._updateTokensIfNecessary(B,!0)})).apply(this,arguments)}class ui{constructor(h,p,E={}){this.isNewUser=h,this.providerId=p,this.profile=E}}class ya extends ui{constructor(h,p,E,T){super(h,p,E),this.username=T}}class Sm extends ui{constructor(h,p){super(h,"facebook.com",p)}}class Qf extends ya{constructor(h,p){super(h,"github.com",p,"string"==typeof(null==p?void 0:p.login)?null==p?void 0:p.login:null)}}class mr extends ui{constructor(h,p){super(h,"google.com",p)}}class th extends ya{constructor(h,p,E){super(h,"twitter.com",p,E)}}function Jf(_){const{user:h,_tokenResponse:p}=_;return h.isAnonymous&&!p?{providerId:null,isNewUser:!1,profile:null}:function(_){var h,p;if(!_)return null;const{providerId:E}=_,T=_.rawUserInfo?JSON.parse(_.rawUserInfo):{},x=_.isNewUser||"identitytoolkit#SignupNewUserResponse"===_.kind;if(!E&&(null==_?void 0:_.idToken)){const B=null===(p=null===(h=Zn(_.idToken))||void 0===h?void 0:h.firebase)||void 0===p?void 0:p.sign_in_provider;if(B)return new ui(x,"anonymous"!==B&&"custom"!==B?B:null)}if(!E)return null;switch(E){case"facebook.com":return new Sm(x,T);case"github.com":return new Qf(x,T);case"google.com":return new mr(x,T);case"twitter.com":return new th(x,T,_.screenName||null);case"custom":case"anonymous":return new ui(x,null);default:return new ui(x,E,T)}}(p)}class Gi{constructor(h,p,E){this.type=h,this.credential=p,this.auth=E}static _fromIdtoken(h,p){return new Gi("enroll",h,p)}static _fromMfaPendingCredential(h){return new Gi("signin",h)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(h){var p,E;if(null==h?void 0:h.multiFactorSession){if(null===(p=h.multiFactorSession)||void 0===p?void 0:p.pendingCredential)return Gi._fromMfaPendingCredential(h.multiFactorSession.pendingCredential);if(null===(E=h.multiFactorSession)||void 0===E?void 0:E.idToken)return Gi._fromIdtoken(h.multiFactorSession.idToken)}return null}}class dl{constructor(h,p,E){this.session=h,this.hints=p,this.signInResolver=E}static _fromError(h,p){const E=pn(h),T=p.customData._serverResponse,x=(T.mfaInfo||[]).map(J=>ur._fromServerResponse(E,J));Se(T.mfaPendingCredential,E,"internal-error");const B=Gi._fromMfaPendingCredential(T.mfaPendingCredential);return new dl(B,x,function(){var J=(0,g.Z)(function*(Ae){const Ie=yield Ae._process(E,B);delete T.mfaInfo,delete T.mfaPendingCredential;const Ke=Object.assign(Object.assign({},T),{idToken:Ie.idToken,refreshToken:Ie.refreshToken});switch(p.operationType){case"signIn":const Qe=yield Cr._fromIdTokenResponse(E,p.operationType,Ke);return yield E._updateCurrentUser(Qe.user),Qe;case"reauthenticate":return Se(p.user,E,"internal-error"),Cr._forOperation(p.user,p.operationType,Ke);default:yt(E,"internal-error")}});return function(Ae){return J.apply(this,arguments)}}())}resolveSignIn(h){var p=this;return(0,g.Z)(function*(){return p.signInResolver(h)})()}}function sc(_,h){return Kt(_,"POST","/v2/accounts/mfaEnrollment:start",Tt(_,h))}class fl{constructor(h){this.user=h,this.enrolledFactors=[],h._onReload(p=>{p.mfaInfo&&(this.enrolledFactors=p.mfaInfo.map(E=>ur._fromServerResponse(h.auth,E)))})}static _fromUser(h){return new fl(h)}getSession(){var h=this;return(0,g.Z)(function*(){return Gi._fromIdtoken(yield h.user.getIdToken(),h.user.auth)})()}enroll(h,p){var E=this;return(0,g.Z)(function*(){const T=h,x=yield E.getSession(),B=yield Dn(E.user,T._process(E.user.auth,x,p));return yield E.user._updateTokensIfNecessary(B),E.user.reload()})()}unenroll(h){var p=this;return(0,g.Z)(function*(){var E;const T="string"==typeof h?h:h.uid,x=yield p.user.getIdToken(),B=yield Dn(p.user,function(_,h){return Kt(_,"POST","/v2/accounts/mfaEnrollment:withdraw",Tt(_,h))}(p.user.auth,{idToken:x,mfaEnrollmentId:T}));p.enrolledFactors=p.enrolledFactors.filter(({uid:J})=>J!==T),yield p.user._updateTokensIfNecessary(B);try{yield p.user.reload()}catch(J){if("auth/user-token-expired"!==(null===(E=J)||void 0===E?void 0:E.code))throw J}})()}}const mn=new WeakMap,ci="__sak";class So{constructor(h,p){this.storageRetriever=h,this.type=p}_isAvailable(){try{return this.storage?(this.storage.setItem(ci,"1"),this.storage.removeItem(ci),Promise.resolve(!0)):Promise.resolve(!1)}catch(h){return Promise.resolve(!1)}}_set(h,p){return this.storage.setItem(h,JSON.stringify(p)),Promise.resolve()}_get(h){const p=this.storage.getItem(h);return Promise.resolve(p?JSON.parse(p):null)}_remove(h){return this.storage.removeItem(h),Promise.resolve()}get storage(){return this.storageRetriever()}}const uu=(()=>{class _ extends So{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(p,E)=>this.onStorageEvent(p,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const _=(0,L.z$)();return oa(_)||Pr(_)}()&&function(){try{return!(!window||window===window.top)}catch(_){return!1}}(),this.fallbackToPolling=Qc(),this._shouldAllowMigration=!0}forAllChangedKeys(p){for(const E of Object.keys(this.listeners)){const T=this.storage.getItem(E),x=this.localCache[E];T!==x&&p(E,x,T)}}onStorageEvent(p,E=!1){if(!p.key)return void this.forAllChangedKeys((J,Ae,Ie)=>{this.notifyListeners(J,Ie)});const T=p.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const J=this.storage.getItem(T);if(p.newValue!==J)null!==p.newValue?this.storage.setItem(T,p.newValue):this.storage.removeItem(T);else if(this.localCache[T]===p.newValue&&!E)return}const x=()=>{const J=this.storage.getItem(T);!E&&this.localCache[T]===J||this.notifyListeners(T,J)},B=this.storage.getItem(T);(0,L.w1)()&&10===document.documentMode&&B!==p.newValue&&p.newValue!==p.oldValue?setTimeout(x,10):x()}notifyListeners(p,E){this.localCache[p]=E;const T=this.listeners[p];if(T)for(const x of Array.from(T))x(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((p,E,T)=>{this.onStorageEvent(new StorageEvent("storage",{key:p,oldValue:E,newValue:T}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(p,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[p]||(this.listeners[p]=new Set,this.localCache[p]=this.storage.getItem(p)),this.listeners[p].add(E)}_removeListener(p,E){this.listeners[p]&&(this.listeners[p].delete(E),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(p,E){var T=()=>super._set,x=this;return(0,g.Z)(function*(){yield T().call(x,p,E),x.localCache[p]=JSON.stringify(E)})()}_get(p){var E=()=>super._get,T=this;return(0,g.Z)(function*(){const x=yield E().call(T,p);return T.localCache[p]=JSON.stringify(x),x})()}_remove(p){var E=()=>super._remove,T=this;return(0,g.Z)(function*(){yield E().call(T,p),delete T.localCache[p]})()}}return _.type="LOCAL",_})(),xs=(()=>{class _ extends So{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(p,E){}_removeListener(p,E){}}return _.type="SESSION",_})();let ih=(()=>{class _{constructor(p){this.eventTarget=p,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(p){const E=this.receivers.find(x=>x.isListeningto(p));if(E)return E;const T=new _(p);return this.receivers.push(T),T}isListeningto(p){return this.eventTarget===p}handleEvent(p){var E=this;return(0,g.Z)(function*(){const T=p,{eventId:x,eventType:B,data:J}=T.data,Ae=E.handlersMap[B];if(!(null==Ae?void 0:Ae.size))return;T.ports[0].postMessage({status:"ack",eventId:x,eventType:B});const Ie=Array.from(Ae).map(function(){var Qe=(0,g.Z)(function*(Gt){return Gt(T.origin,J)});return function(Gt){return Qe.apply(this,arguments)}}()),Ke=yield function(_){return Promise.all(_.map(function(){var h=(0,g.Z)(function*(p){try{return{fulfilled:!0,value:yield p}}catch(E){return{fulfilled:!1,reason:E}}});return function(p){return h.apply(this,arguments)}}()))}(Ie);T.ports[0].postMessage({status:"done",eventId:x,eventType:B,response:Ke})})()}_subscribe(p,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[p]||(this.handlersMap[p]=new Set),this.handlersMap[p].add(E)}_unsubscribe(p,E){this.handlersMap[p]&&E&&this.handlersMap[p].delete(E),(!E||0===this.handlersMap[p].size)&&delete this.handlersMap[p],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return _.receivers=[],_})();function xo(_="",h=10){let p="";for(let E=0;E<h;E++)p+=Math.floor(10*Math.random());return _+p}class sh{constructor(h){this.target=h,this.handlers=new Set}removeMessageHandler(h){h.messageChannel&&(h.messageChannel.port1.removeEventListener("message",h.onMessage),h.messageChannel.port1.close()),this.handlers.delete(h)}_send(h,p,E=50){var T=this;return(0,g.Z)(function*(){const x="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!x)throw new Error("connection_unavailable");let B,J;return new Promise((Ae,Ie)=>{const Ke=xo("",20);x.port1.start();const Qe=setTimeout(()=>{Ie(new Error("unsupported_event"))},E);J={messageChannel:x,onMessage(Gt){const tr=Gt;if(tr.data.eventId===Ke)switch(tr.data.status){case"ack":clearTimeout(Qe),B=setTimeout(()=>{Ie(new Error("timeout"))},3e3);break;case"done":clearTimeout(B),Ae(tr.data.response);break;default:clearTimeout(Qe),clearTimeout(B),Ie(new Error("invalid_response"))}}},T.handlers.add(J),x.port1.addEventListener("message",J.onMessage),T.target.postMessage({eventType:h,eventId:Ke,data:p},[x.port2])}).finally(()=>{J&&T.removeMessageHandler(J)})})()}}function Qt(){return window}function ac(){return void 0!==Qt().WorkerGlobalScope&&"function"==typeof Qt().importScripts}function Qs(){return(Qs=(0,g.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(_){return null}})).apply(this,arguments)}const Js="firebaseLocalStorageDb",ls="firebaseLocalStorage",Ro="fbase_key";class Nt{constructor(h){this.request=h}toPromise(){return new Promise((h,p)=>{this.request.addEventListener("success",()=>{h(this.request.result)}),this.request.addEventListener("error",()=>{p(this.request.error)})})}}function di(_,h){return _.transaction([ls],h?"readwrite":"readonly").objectStore(ls)}function qi(){const _=indexedDB.open(Js,1);return new Promise((h,p)=>{_.addEventListener("error",()=>{p(_.error)}),_.addEventListener("upgradeneeded",()=>{const E=_.result;try{E.createObjectStore(ls,{keyPath:Ro})}catch(T){p(T)}}),_.addEventListener("success",(0,g.Z)(function*(){const E=_.result;E.objectStoreNames.contains(ls)?h(E):(E.close(),yield function(){const _=indexedDB.deleteDatabase(Js);return new Nt(_).toPromise()}(),h(yield qi()))}))})}function Rm(_,h,p){return Mm.apply(this,arguments)}function Mm(){return(Mm=(0,g.Z)(function*(_,h,p){const E=di(_,!0).put({[Ro]:h,value:p});return new Nt(E).toPromise()})).apply(this,arguments)}function pl(){return(pl=(0,g.Z)(function*(_,h){const p=di(_,!1).get(h),E=yield new Nt(p).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function rp(_,h){const p=di(_,!0).delete(h);return new Nt(p).toPromise()}const Ea=(()=>{class _{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var p=this;return(0,g.Z)(function*(){return p.db||(p.db=yield qi()),p.db})()}_withRetries(p){var E=this;return(0,g.Z)(function*(){let T=0;for(;;)try{const x=yield E._openDb();return yield p(x)}catch(x){if(T++>3)throw x;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var p=this;return(0,g.Z)(function*(){return ac()?p.initializeReceiver():p.initializeSender()})()}initializeReceiver(){var p=this;return(0,g.Z)(function*(){p.receiver=ih._getInstance(ac()?self:null),p.receiver._subscribe("keyChanged",function(){var E=(0,g.Z)(function*(T,x){return{keyProcessed:(yield p._poll()).includes(x.key)}});return function(T,x){return E.apply(this,arguments)}}()),p.receiver._subscribe("ping",function(){var E=(0,g.Z)(function*(T,x){return["keyChanged"]});return function(T,x){return E.apply(this,arguments)}}())})()}initializeSender(){var p=this;return(0,g.Z)(function*(){var E,T;if(p.activeServiceWorker=yield function(){return Qs.apply(this,arguments)}(),!p.activeServiceWorker)return;p.sender=new sh(p.activeServiceWorker);const x=yield p.sender._send("ping",{},800);!x||(null===(E=x[0])||void 0===E?void 0:E.fulfilled)&&(null===(T=x[0])||void 0===T?void 0:T.value.includes("keyChanged"))&&(p.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(p){var E=this;return(0,g.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function(){var _;return(null===(_=null==navigator?void 0:navigator.serviceWorker)||void 0===_?void 0:_.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:p},E.serviceWorkerReceiverAvailable?800:50)}catch(T){}})()}_isAvailable(){return(0,g.Z)(function*(){try{if(!indexedDB)return!1;const p=yield qi();return yield Rm(p,ci,"1"),yield rp(p,ci),!0}catch(p){}return!1})()}_withPendingWrite(p){var E=this;return(0,g.Z)(function*(){E.pendingWrites++;try{yield p()}finally{E.pendingWrites--}})()}_set(p,E){var T=this;return(0,g.Z)(function*(){return T._withPendingWrite((0,g.Z)(function*(){return yield T._withRetries(x=>Rm(x,p,E)),T.localCache[p]=E,T.notifyServiceWorker(p)}))})()}_get(p){var E=this;return(0,g.Z)(function*(){const T=yield E._withRetries(x=>function(_,h){return pl.apply(this,arguments)}(x,p));return E.localCache[p]=T,T})()}_remove(p){var E=this;return(0,g.Z)(function*(){return E._withPendingWrite((0,g.Z)(function*(){return yield E._withRetries(T=>rp(T,p)),delete E.localCache[p],E.notifyServiceWorker(p)}))})()}_poll(){var p=this;return(0,g.Z)(function*(){const E=yield p._withRetries(B=>{const J=di(B,!1).getAll();return new Nt(J).toPromise()});if(!E)return[];if(0!==p.pendingWrites)return[];const T=[],x=new Set;for(const{fbase_key:B,value:J}of E)x.add(B),JSON.stringify(p.localCache[B])!==JSON.stringify(J)&&(p.notifyListeners(B,J),T.push(B));for(const B of Object.keys(p.localCache))p.localCache[B]&&!x.has(B)&&(p.notifyListeners(B,null),T.push(B));return T})()}notifyListeners(p,E){this.localCache[p]=E;const T=this.listeners[p];if(T)for(const x of Array.from(T))x(E)}startPolling(){var p=this;this.stopPolling(),this.pollTimer=setInterval((0,g.Z)(function*(){return p._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(p,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[p]||(this.listeners[p]=new Set,this._get(p)),this.listeners[p].add(E)}_removeListener(p,E){this.listeners[p]&&(this.listeners[p].delete(E),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return _.type="LOCAL",_})();function Om(_,h){return Kt(_,"POST","/v2/accounts/mfaSignIn:start",Tt(_,h))}function oh(){return(oh=(0,g.Z)(function*(_){return(yield Kt(_,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function ip(_){return new Promise((h,p)=>{const E=document.createElement("script");E.setAttribute("src",_),E.onload=h,E.onerror=T=>{const x=Vn("internal-error");x.customData=T,p(x)},E.type="text/javascript",E.charset="UTF-8",function(){var _,h;return null!==(h=null===(_=document.getElementsByTagName("head"))||void 0===_?void 0:_[0])&&void 0!==h?h:document}().appendChild(E)})}function sp(_){return`__${_}${Math.floor(1e6*Math.random())}`}const lu=1e12;class An{constructor(h){this.auth=h,this.counter=lu,this._widgets=new Map}render(h,p){const E=this.counter;return this._widgets.set(E,new ba(h,this.auth.name,p||{})),this.counter++,E}reset(h){var p;const E=h||lu;null===(p=this._widgets.get(E))||void 0===p||p.delete(),this._widgets.delete(E)}getResponse(h){var p;return(null===(p=this._widgets.get(h||lu))||void 0===p?void 0:p.getResponse())||""}execute(h){var p=this;return(0,g.Z)(function*(){var E;return null===(E=p._widgets.get(h||lu))||void 0===E||E.execute(),""})()}}class ba{constructor(h,p,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const T="string"==typeof h?document.getElementById(h):h;Se(T,"argument-error",{appName:p}),this.container=T,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function(_){const h=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<50;E++)h.push(p.charAt(Math.floor(Math.random()*p.length)));return h.join("")}();const{callback:h,"expired-callback":p}=this.params;if(h)try{h(this.responseToken)}catch(E){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,p)try{p()}catch(E){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const cc=sp("rcb"),ml=new nt(3e4,6e4);class hi{constructor(){var h;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(h=Qt().grecaptcha)||void 0===h?void 0:h.render)}load(h,p=""){return Se((_=p).length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(_),h,"argument-error"),this.shouldResolveImmediately(p)?Promise.resolve(Qt().grecaptcha):new Promise((E,T)=>{const x=Qt().setTimeout(()=>{T(Vn(h,"network-request-failed"))},ml.get());Qt()[cc]=()=>{Qt().clearTimeout(x),delete Qt()[cc];const J=Qt().grecaptcha;if(!J)return void T(Vn(h,"internal-error"));const Ae=J.render;J.render=(Ie,Ke)=>{const Qe=Ae(Ie,Ke);return this.counter++,Qe},this.hostLanguage=p,E(J)},ip(`https://www.google.com/recaptcha/api.js??${(0,L.xO)({onload:cc,render:"explicit",hl:p})}`).catch(()=>{clearTimeout(x),T(Vn(h,"internal-error"))})});var _}clearedOneInstance(){this.counter--}shouldResolveImmediately(h){var p;return!!(null===(p=Qt().grecaptcha)||void 0===p?void 0:p.render)&&(h===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class wa{load(h){return(0,g.Z)(function*(){return new An(h)})()}clearedOneInstance(){}}const Ms="recaptcha",ah={theme:"light",type:"image"};class Oo{constructor(h,p=Object.assign({},ah),E){this.parameters=p,this.type=Ms,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=pn(E),this.isInvisible="invisible"===this.parameters.size,Se("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const T="string"==typeof h?document.getElementById(h):h;Se(T,this.auth,"argument-error"),this.container=T,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new wa:new hi,this.validateStartingState()}verify(){var h=this;return(0,g.Z)(function*(){h.assertNotDestroyed();const p=yield h.render(),E=h.getAssertedRecaptcha();return E.getResponse(p)||new Promise(x=>{const B=J=>{!J||(h.tokenChangeListeners.delete(B),x(J))};h.tokenChangeListeners.add(B),h.isInvisible&&E.execute(p)})})()}render(){try{this.assertNotDestroyed()}catch(h){return Promise.reject(h)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(h=>{throw this.renderPromise=null,h})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(h=>{this.container.removeChild(h)})}validateStartingState(){Se(!this.parameters.sitekey,this.auth,"argument-error"),Se(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Se("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(h){return p=>{if(this.tokenChangeListeners.forEach(E=>E(p)),"function"==typeof h)h(p);else if("string"==typeof h){const E=Qt()[h];"function"==typeof E&&E(p)}}}assertNotDestroyed(){Se(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var h=this;return(0,g.Z)(function*(){if(yield h.init(),!h.widgetId){let p=h.container;if(!h.isInvisible){const E=document.createElement("div");p.appendChild(E),p=E}h.widgetId=h.getAssertedRecaptcha().render(p,h.parameters)}return h.widgetId})()}init(){var h=this;return(0,g.Z)(function*(){Se(Nr()&&!ac(),h.auth,"internal-error"),yield function(){let _=null;return new Promise(h=>{"complete"!==document.readyState?(_=()=>h(),window.addEventListener("load",_)):h()}).catch(h=>{throw _&&window.removeEventListener("load",_),h})}(),h.recaptcha=yield h._recaptchaLoader.load(h.auth,h.auth.languageCode||void 0);const p=yield function(_){return oh.apply(this,arguments)}(h.auth);Se(p,h.auth,"internal-error"),h.parameters.sitekey=p})()}getAssertedRecaptcha(){return Se(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class _l{constructor(h,p){this.verificationId=h,this.onConfirmation=p}confirm(h){const p=ji._fromVerification(this.verificationId,h);return this.onConfirmation(p)}}function lc(){return(lc=(0,g.Z)(function*(_,h,p){const E=pn(_),T=yield Xs(E,h,(0,L.m9)(p));return new _l(T,x=>gn(E,x))})).apply(this,arguments)}function du(){return(du=(0,g.Z)(function*(_,h,p){const E=(0,L.m9)(_);yield la(!1,E,"phone");const T=yield Xs(E.auth,h,(0,L.m9)(p));return new _l(T,x=>Co(E,x))})).apply(this,arguments)}function vl(){return(vl=(0,g.Z)(function*(_,h,p){const E=(0,L.m9)(_),T=yield Xs(E.auth,h,(0,L.m9)(p));return new _l(T,x=>da(E,x))})).apply(this,arguments)}function Xs(_,h,p){return hu.apply(this,arguments)}function hu(){return(hu=(0,g.Z)(function*(_,h,p){var E;const T=yield p.verify();try{let x;if(Se("string"==typeof T,_,"argument-error"),Se(p.type===Ms,_,"argument-error"),x="string"==typeof h?{phoneNumber:h}:h,"session"in x){const B=x.session;if("phoneNumber"in x)return Se("enroll"===B.type,_,"internal-error"),(yield sc(_,{idToken:B.credential,phoneEnrollmentInfo:{phoneNumber:x.phoneNumber,recaptchaToken:T}})).phoneSessionInfo.sessionInfo;{Se("signin"===B.type,_,"internal-error");const J=(null===(E=x.multiFactorHint)||void 0===E?void 0:E.uid)||x.multiFactorUid;return Se(J,_,"missing-multi-factor-info"),(yield Om(_,{mfaPendingCredential:B.credential,mfaEnrollmentId:J,phoneSignInInfo:{recaptchaToken:T}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:B}=yield Gu(_,{phoneNumber:x.phoneNumber,recaptchaToken:T});return B}}finally{p._reset()}})).apply(this,arguments)}function El(){return(El=(0,g.Z)(function*(_,h){yield wo((0,L.m9)(_),h)})).apply(this,arguments)}let dc=(()=>{class _{constructor(p){this.providerId=_.PROVIDER_ID,this.auth=pn(p)}verifyPhoneNumber(p,E){return Xs(this.auth,p,(0,L.m9)(E))}static credential(p,E){return ji._fromVerification(p,E)}static credentialFromResult(p){return _.credentialFromTaggedObject(p)}static credentialFromError(p){return _.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{phoneNumber:E,temporaryProof:T}=p;return E&&T?ji._fromTokenResponse(E,T):null}}return _.PROVIDER_ID="phone",_.PHONE_SIGN_IN_METHOD="phone",_})();function I(_,h){return h?_n(h):(Se(_._popupRedirectResolver,_,"argument-error"),_._popupRedirectResolver)}class A extends Is{constructor(h){super("custom","custom"),this.params=h}_getIdTokenResponse(h){return vo(h,this._buildIdpRequest())}_linkToIdToken(h,p){return vo(h,this._buildIdpRequest(p))}_getReauthenticationResolver(h){return vo(h,this._buildIdpRequest())}_buildIdpRequest(h){const p={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return h&&(p.idToken=h),p}}function M(_){return Bt(_.auth,new A(_),_.bypassAuthState)}function U(_){const{auth:h,user:p}=_;return Se(p,h,"internal-error"),sl(p,new A(_),_.bypassAuthState)}function Z(_){return re.apply(this,arguments)}function re(){return(re=(0,g.Z)(function*(_){const{auth:h,user:p}=_;return Se(p,h,"internal-error"),wo(p,new A(_),_.bypassAuthState)})).apply(this,arguments)}class we{constructor(h,p,E,T,x=!1){this.auth=h,this.resolver=E,this.user=T,this.bypassAuthState=x,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(p)?p:[p]}execute(){var h=this;return new Promise(function(){var p=(0,g.Z)(function*(E,T){h.pendingPromise={resolve:E,reject:T};try{h.eventManager=yield h.resolver._initialize(h.auth),yield h.onExecution(),h.eventManager.registerConsumer(h)}catch(x){h.reject(x)}});return function(E,T){return p.apply(this,arguments)}}())}onAuthEvent(h){var p=this;return(0,g.Z)(function*(){const{urlResponse:E,sessionId:T,postBody:x,tenantId:B,error:J,type:Ae}=h;if(J)return void p.reject(J);const Ie={auth:p.auth,requestUri:E,sessionId:T,tenantId:B||void 0,postBody:x||void 0,user:p.user,bypassAuthState:p.bypassAuthState};try{p.resolve(yield p.getIdpTask(Ae)(Ie))}catch(Ke){p.reject(Ke)}})()}onError(h){this.reject(h)}getIdpTask(h){switch(h){case"signInViaPopup":case"signInViaRedirect":return M;case"linkViaPopup":case"linkViaRedirect":return Z;case"reauthViaPopup":case"reauthViaRedirect":return U;default:yt(this.auth,"internal-error")}}resolve(h){Cn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(h),this.unregisterAndCleanUp()}reject(h){Cn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(h),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Le=new nt(2e3,1e4);function vt(){return(vt=(0,g.Z)(function*(_,h,p){const E=pn(_);Un(_,h,Yt);const T=I(E,p);return new xi(E,"signInViaPopup",h,T).executeNotNull()})).apply(this,arguments)}function ut(){return(ut=(0,g.Z)(function*(_,h,p){const E=(0,L.m9)(_);Un(E.auth,h,Yt);const T=I(E.auth,p);return new xi(E.auth,"reauthViaPopup",h,T,E).executeNotNull()})).apply(this,arguments)}function Xn(){return(Xn=(0,g.Z)(function*(_,h,p){const E=(0,L.m9)(_);Un(E.auth,h,Yt);const T=I(E.auth,p);return new xi(E.auth,"linkViaPopup",h,T,E).executeNotNull()})).apply(this,arguments)}let xi=(()=>{class _ extends we{constructor(p,E,T,x,B){super(p,E,x,B),this.provider=T,this.authWindow=null,this.pollId=null,_.currentPopupAction&&_.currentPopupAction.cancel(),_.currentPopupAction=this}executeNotNull(){var p=this;return(0,g.Z)(function*(){const E=yield p.execute();return Se(E,p.auth,"internal-error"),E})()}onExecution(){var p=this;return(0,g.Z)(function*(){Cn(1===p.filter.length,"Popup operations only handle one event");const E=xo();p.authWindow=yield p.resolver._openPopup(p.auth,p.provider,p.filter[0],E),p.authWindow.associatedEvent=E,p.resolver._originValidation(p.auth).catch(T=>{p.reject(T)}),p.resolver._isIframeWebStorageSupported(p.auth,T=>{T||p.reject(Vn(p.auth,"web-storage-unsupported"))}),p.pollUserCancellation()})()}get eventId(){var p;return(null===(p=this.authWindow)||void 0===p?void 0:p.associatedEvent)||null}cancel(){this.reject(Vn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,_.currentPopupAction=null}pollUserCancellation(){const p=()=>{var E,T;this.pollId=(null===(T=null===(E=this.authWindow)||void 0===E?void 0:E.window)||void 0===T?void 0:T.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Vn(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(p,Le.get())};p()}}return _.currentPopupAction=null,_})();const fs=new Map;class Pn extends we{constructor(h,p,E=!1){super(h,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],p,void 0,E),this.eventId=null}execute(){var h=()=>super.execute,p=this;return(0,g.Z)(function*(){let E=fs.get(p.auth._key());if(!E){try{const x=(yield function(_,h){return ko.apply(this,arguments)}(p.resolver,p.auth))?yield h().call(p):null;E=()=>Promise.resolve(x)}catch(T){E=()=>Promise.reject(T)}fs.set(p.auth._key(),E)}return p.bypassAuthState||fs.set(p.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(h){var p=()=>super.onAuthEvent,E=this;return(0,g.Z)(function*(){if("signInViaRedirect"===h.type)return p().call(E,h);if("unknown"!==h.type){if(h.eventId){const T=yield E.auth._redirectUserForId(h.eventId);if(T)return E.user=T,p().call(E,h);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,g.Z)(function*(){})()}cleanUp(){}}function ko(){return(ko=(0,g.Z)(function*(_,h){const p=Iv(h),E=ps(_);if(!(yield E._isAvailable()))return!1;const T="true"===(yield E._get(p));return yield E._remove(p),T})).apply(this,arguments)}function yr(_,h){return pi.apply(this,arguments)}function pi(){return(pi=(0,g.Z)(function*(_,h){return ps(_)._set(Iv(h),"true")})).apply(this,arguments)}function er(_,h){fs.set(_._key(),h)}function ps(_){return _n(_._redirectPersistence)}function Iv(_){return tn("pendingRedirect",_.config.apiKey,_.name)}function fu(){return(fu=(0,g.Z)(function*(_,h,p){const E=pn(_);Un(_,h,Yt);const T=I(E,p);return yield yr(T,E),T._openRedirect(E,h,"signInViaRedirect")})).apply(this,arguments)}function uh(){return(uh=(0,g.Z)(function*(_,h,p){const E=(0,L.m9)(_);Un(E.auth,h,Yt);const T=I(E.auth,p);yield yr(T,E.auth);const x=yield Ca(E);return T._openRedirect(E.auth,h,"reauthViaRedirect",x)})).apply(this,arguments)}function pu(){return(pu=(0,g.Z)(function*(_,h,p){const E=(0,L.m9)(_);Un(E.auth,h,Yt);const T=I(E.auth,p);yield la(!1,E,h.providerId),yield yr(T,E.auth);const x=yield Ca(E);return T._openRedirect(E.auth,h,"linkViaRedirect",x)})).apply(this,arguments)}function jt(){return(jt=(0,g.Z)(function*(_,h){return yield pn(_)._initializationPromise,Wi(_,h,!1)})).apply(this,arguments)}function Wi(_,h){return mu.apply(this,arguments)}function mu(){return(mu=(0,g.Z)(function*(_,h,p=!1){const E=pn(_),T=I(E,h),B=yield new Pn(E,T,p).execute();return B&&!p&&(delete B.user._redirectEventId,yield E._persistUserIfCurrent(B.user),yield E._setRedirectUser(null,h)),B})).apply(this,arguments)}function Ca(_){return Fm.apply(this,arguments)}function Fm(){return(Fm=(0,g.Z)(function*(_){const h=xo(`${_.uid}:::`);return _._redirectEventId=h,yield _.auth._setRedirectUser(_),yield _.auth._persistUserIfCurrent(_),h})).apply(this,arguments)}class cp{constructor(h){this.auth=h,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(h){this.consumers.add(h),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,h)&&(this.sendToConsumer(this.queuedRedirectEvent,h),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(h){this.consumers.delete(h)}onEvent(h){if(this.hasEventBeenHandled(h))return!1;let p=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(h,E)&&(p=!0,this.sendToConsumer(h,E),this.saveEventToCache(h))}),this.hasHandledPotentialRedirect||!function(_){switch(_.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return wl(_);default:return!1}}(h)||(this.hasHandledPotentialRedirect=!0,p||(this.queuedRedirectEvent=h,p=!0)),p}sendToConsumer(h,p){var E;if(h.error&&!wl(h)){const T=(null===(E=h.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";p.onError(Vn(this.auth,T))}else p.onAuthEvent(h)}isEventForConsumer(h,p){const E=null===p.eventId||!!h.eventId&&h.eventId===p.eventId;return p.filter.includes(h.type)&&E}hasEventBeenHandled(h){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Cv(h))}saveEventToCache(h){this.cachedEventUids.add(Cv(h)),this.lastProcessedEventTime=Date.now()}}function Cv(_){return[_.type,_.eventId,_.sessionId,_.tenantId].filter(h=>h).join("-")}function wl({type:_,error:h}){return"unknown"===_&&"auth/no-auth-event"===(null==h?void 0:h.code)}function lp(_){return Po.apply(this,arguments)}function Po(){return(Po=(0,g.Z)(function*(_,h={}){return Kt(_,"GET","/v1/projects",h)})).apply(this,arguments)}const dp=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Da=/^https?/;function hh(){return(hh=(0,g.Z)(function*(_){if(_.config.emulator)return;const{authorizedDomains:h}=yield lp(_);for(const p of h)try{if(Dv(p))return}catch(E){}yt(_,"unauthorized-domain")})).apply(this,arguments)}function Dv(_){const h=Xe(),{protocol:p,hostname:E}=new URL(h);if(_.startsWith("chrome-extension://")){const B=new URL(_);return""===B.hostname&&""===E?"chrome-extension:"===p&&_.replace("chrome-extension://","")===h.replace("chrome-extension://",""):"chrome-extension:"===p&&B.hostname===E}if(!Da.test(p))return!1;if(dp.test(_))return E===_;const T=_.replace(/\./g,"\\.");return new RegExp("^(.+\\."+T+"|"+T+")$","i").test(E)}const fh=new nt(3e4,6e4);function ph(){const _=Qt().___jsl;if(null==_?void 0:_.H)for(const h of Object.keys(_.H))if(_.H[h].r=_.H[h].r||[],_.H[h].L=_.H[h].L||[],_.H[h].r=[..._.H[h].L],_.CP)for(let p=0;p<_.CP.length;p++)_.CP[p]=null}let Ta=null;function Vm(_){return Ta=Ta||function(_){return new Promise((h,p)=>{var E,T,x;function B(){ph(),gapi.load("gapi.iframes",{callback:()=>{h(gapi.iframes.getContext())},ontimeout:()=>{ph(),p(Vn(_,"network-request-failed"))},timeout:fh.get()})}if(null===(T=null===(E=Qt().gapi)||void 0===E?void 0:E.iframes)||void 0===T?void 0:T.Iframe)h(gapi.iframes.getContext());else{if(!(null===(x=Qt().gapi)||void 0===x?void 0:x.load)){const J=sp("iframefcb");return Qt()[J]=()=>{gapi.load?B():p(Vn(_,"network-request-failed"))},ip(`https://apis.google.com/js/api.js?onload=${J}`).catch(Ae=>p(Ae))}B()}}).catch(h=>{throw Ta=null,h})}(_),Ta}const yu=new nt(5e3,15e3),Sv={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Um=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function hp(_){const h=_.config;Se(h.authDomain,_,"auth-domain-config-required");const p=h.emulator?tt(h,"emulator/auth/iframe"):`https://${_.config.authDomain}/__/auth/iframe`,E={apiKey:h.apiKey,appName:_.name,v:ae.SDK_VERSION},T=Um.get(_.config.apiHost);T&&(E.eid=T);const x=_._getFrameworks();return x.length&&(E.fw=x.join(",")),`${p}?${(0,L.xO)(E).slice(1)}`}function Hr(){return Hr=(0,g.Z)(function*(_){const h=yield Vm(_),p=Qt().gapi;return Se(p,_,"internal-error"),h.open({where:document.body,url:hp(_),messageHandlersFilter:p.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Sv,dontclear:!0},E=>new Promise(function(){var T=(0,g.Z)(function*(x,B){yield E.restyle({setHideOnLeave:!1});const J=Vn(_,"network-request-failed"),Ae=Qt().setTimeout(()=>{B(J)},yu.get());function Ie(){Qt().clearTimeout(Ae),x(E)}E.ping(Ie).then(Ie,()=>{B(J)})});return function(x,B){return T.apply(this,arguments)}}()))}),Hr.apply(this,arguments)}const fc={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class fp{constructor(h){this.window=h,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(h){}}}function mh(_,h,p,E,T,x){Se(_.config.authDomain,_,"auth-domain-config-required"),Se(_.config.apiKey,_,"invalid-api-key");const B={apiKey:_.config.apiKey,appName:_.name,authType:p,redirectUrl:E,v:ae.SDK_VERSION,eventId:T};if(h instanceof Yt){h.setDefaultLanguage(_.languageCode),B.providerId=h.providerId||"",(0,L.xb)(h.getCustomParameters())||(B.customParameters=JSON.stringify(h.getCustomParameters()));for(const[Ae,Ie]of Object.entries(x||{}))B[Ae]=Ie}if(h instanceof Ws){const Ae=h.getScopes().filter(Ie=>""!==Ie);Ae.length>0&&(B.scopes=Ae.join(","))}_.tenantId&&(B.tid=_.tenantId);const J=B;for(const Ae of Object.keys(J))void 0===J[Ae]&&delete J[Ae];return`${function({config:_}){return _.emulator?tt(_,"emulator/auth/handler"):`https://${_.authDomain}/__/auth/handler`}(_)}?${(0,L.xO)(J).slice(1)}`}const Cl="webStorageSupport";class _u extends class{constructor(h){this.factorId=h}_process(h,p,E){switch(p.type){case"enroll":return this._finalizeEnroll(h,p.credential,E);case"signin":return this._finalizeSignIn(h,p.credential);default:return wr("unexpected MultiFactorSessionType")}}}{constructor(h){super("phone"),this.credential=h}static _fromCredential(h){return new _u(h)}_finalizeEnroll(h,p,E){return function(_,h){return Kt(_,"POST","/v2/accounts/mfaEnrollment:finalize",Tt(_,h))}(h,{idToken:p,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(h,p){return function(_,h){return Kt(_,"POST","/v2/accounts/mfaSignIn:finalize",Tt(_,h))}(h,{mfaPendingCredential:p,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let qm=(()=>{class _{constructor(){}static assertion(p){return _u._fromCredential(p)}}return _.FACTOR_ID="phone",_})();var _,gp="@firebase/auth",mc="0.20.10";class yh{constructor(h){this.auth=h,this.internalListeners=new Map}getUid(){var h;return this.assertAuthConfigured(),(null===(h=this.auth.currentUser)||void 0===h?void 0:h.uid)||null}getToken(h){var p=this;return(0,g.Z)(function*(){return p.assertAuthConfigured(),yield p.auth._initializationPromise,p.auth.currentUser?{accessToken:yield p.auth.currentUser.getIdToken(h)}:null})()}addAuthTokenListener(h){if(this.assertAuthConfigured(),this.internalListeners.has(h))return;const p=this.auth.onIdTokenChanged(E=>{var T;h((null===(T=E)||void 0===T?void 0:T.stsTokenManager.accessToken)||null)});this.internalListeners.set(h,p),this.updateProactiveRefresh()}removeAuthTokenListener(h){this.assertAuthConfigured();const p=this.internalListeners.get(h);!p||(this.internalListeners.delete(h),p(),this.updateProactiveRefresh())}assertAuthConfigured(){Se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Aa(){return window}function yp(){return yp=(0,g.Z)(function*(_,h,p){var E;const{BuildInfo:T}=Aa();Cn(h.sessionId,"AuthEvent did not contain a session ID");const x=yield Sn(h.sessionId),B={};return Pr()?B.ibi=T.packageName:Ti()?B.apn=T.packageName:yt(_,"operation-not-supported-in-this-environment"),T.displayName&&(B.appDisplayName=T.displayName),B.sessionId=x,mh(_,p,h.type,void 0,null!==(E=h.eventId)&&void 0!==E?E:void 0,B)}),yp.apply(this,arguments)}function Eh(){return Eh=(0,g.Z)(function*(_){const{BuildInfo:h}=Aa(),p={};Pr()?p.iosBundleId=h.packageName:Ti()?p.androidPackageName=h.packageName:yt(_,"operation-not-supported-in-this-environment"),yield lp(_,p)}),Eh.apply(this,arguments)}function Al(){return Al=(0,g.Z)(function*(_,h,p){const{cordova:E}=Aa();let T=()=>{};try{yield new Promise((x,B)=>{let J=null;function Ae(){var Qe;x();const Gt=null===(Qe=E.plugins.browsertab)||void 0===Qe?void 0:Qe.close;"function"==typeof Gt&&Gt(),"function"==typeof(null==p?void 0:p.close)&&p.close()}function Ie(){J||(J=window.setTimeout(()=>{B(Vn(_,"redirect-cancelled-by-user"))},2e3))}function Ke(){"visible"===(null==document?void 0:document.visibilityState)&&Ie()}h.addPassiveListener(Ae),document.addEventListener("resume",Ie,!1),Ti()&&document.addEventListener("visibilitychange",Ke,!1),T=()=>{h.removePassiveListener(Ae),document.removeEventListener("resume",Ie,!1),document.removeEventListener("visibilitychange",Ke,!1),J&&window.clearTimeout(J)}})}finally{T()}}),Al.apply(this,arguments)}function Sn(_){return Ep.apply(this,arguments)}function Ep(){return Ep=(0,g.Z)(function*(_){const h=bp(_),p=yield crypto.subtle.digest("SHA-256",h);return Array.from(new Uint8Array(p)).map(T=>T.toString(16).padStart(2,"0")).join("")}),Ep.apply(this,arguments)}function bp(_){if(Cn(/[0-9a-zA-Z]+/.test(_),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(_);const h=new ArrayBuffer(_.length),p=new Uint8Array(h);for(let E=0;E<_.length;E++)p[E]=_.charCodeAt(E);return p}(0,L.Pz)("authIdTokenMaxAge"),_="Browser",(0,ae._registerComponent)(new Mn.wA("auth",(h,{options:p})=>{const E=h.getProvider("app").getImmediate(),T=h.getProvider("heartbeat"),{apiKey:x,authDomain:B}=E.options;return((J,Ae)=>{Se(x&&!x.includes(":"),"invalid-api-key",{appName:J.name}),Se(!(null==B?void 0:B.includes(":")),"argument-error",{appName:J.name});const Ie={apiKey:x,authDomain:B,clientPlatform:_,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Xc(_)},Ke=new qs(J,Ae,Ie);return function(_,h){const p=(null==h?void 0:h.persistence)||[],E=(Array.isArray(p)?p:[p]).map(_n);(null==h?void 0:h.errorMap)&&_._updateErrorMap(h.errorMap),_._initializeWithPersistence(E,null==h?void 0:h.popupRedirectResolver)}(Ke,p),Ke})(E,T)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((h,p,E)=>{h.getProvider("auth-internal").initialize()})),(0,ae._registerComponent)(new Mn.wA("auth-internal",h=>{const p=pn(h.getProvider("auth").getImmediate());return new yh(p)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ae.registerVersion)(gp,mc,void 0),(0,ae.registerVersion)(gp,mc,"esm2017");class Zm extends cp{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(h=>{this.resolveInialized=h})}addPassiveListener(h){this.passiveListeners.add(h)}removePassiveListener(h){this.passiveListeners.delete(h)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(h){return this.resolveInialized(),this.passiveListeners.forEach(p=>p(h)),super.onEvent(h)}initialized(){var h=this;return(0,g.Z)(function*(){yield h.initPromise})()}}function Km(_){return wp.apply(this,arguments)}function wp(){return wp=(0,g.Z)(function*(_){const h=yield _c()._get(Sa(_));return h&&(yield _c()._remove(Sa(_))),h}),wp.apply(this,arguments)}function bh(){const _=[],h="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let p=0;p<20;p++){const E=Math.floor(Math.random()*h.length);_.push(h.charAt(E))}return _.join("")}function _c(){return _n(uu)}function Sa(_){return tn("authEvent",_.config.apiKey,_.name)}function Sl(_){if(!(null==_?void 0:_.includes("?")))return{};const[h,...p]=_.split("?");return(0,L.zd)(p.join("?"))}function xl(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Vn("no-auth-event")}}function Ec(){var _;return(null===(_=null==self?void 0:self.location)||void 0===_?void 0:_.protocol)||null}function bc(_=(0,L.z$)()){return!("file:"!==Ec()&&"ionic:"!==Ec()&&"capacitor:"!==Ec()||!_.toLowerCase().match(/iphone|ipad|ipod|android/))}function Eu(){try{const _=self.localStorage,h=xo();if(_)return _.setItem(h,"1"),_.removeItem(h),!function(_=(0,L.z$)()){return(0,L.w1)()&&11===(null==document?void 0:document.documentMode)||function(_=(0,L.z$)()){return/Edge\/\d+/.test(_)}(_)}()||(0,L.hl)()}catch(_){return Ml()&&(0,L.hl)()}return!1}function Ml(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Dp(){return("http:"===Ec()||"https:"===Ec()||(0,L.ru)()||bc())&&!((0,L.b$)()||(0,L.UG)())&&Eu()&&!Ml()}function Fv(){return bc()&&"undefined"!=typeof document}function wc(){return wc=(0,g.Z)(function*(){return!!Fv()&&new Promise(_=>{const h=setTimeout(()=>{_(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(h),_(!0)})})}),wc.apply(this,arguments)}const gi={LOCAL:"local",NONE:"none",SESSION:"session"},no=Se,Tp="persistence";function Ap(_){return Sp.apply(this,arguments)}function Sp(){return Sp=(0,g.Z)(function*(_){yield _._initializationPromise;const h=Nl(),p=tn(Tp,_.config.apiKey,_.name);h&&h.setItem(p,_._getPersistence())}),Sp.apply(this,arguments)}function Nl(){var _;try{return(null===(_="undefined"!=typeof window?window:null)||void 0===_?void 0:_.sessionStorage)||null}catch(h){return null}}const Gr=Se;class Fo{constructor(){this.browserResolver=_n(class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=xs,this._completeRedirectFn=Wi,this._overrideRedirectResult=er}_openPopup(h,p,E,T){var x=this;return(0,g.Z)(function*(){var B;Cn(null===(B=x.eventManagers[h._key()])||void 0===B?void 0:B.manager,"_initialize() not called before _openPopup()");const J=mh(h,p,E,Xe(),T);return function(_,h,p,E=500,T=600){const x=Math.max((window.screen.availHeight-T)/2,0).toString(),B=Math.max((window.screen.availWidth-E)/2,0).toString();let J="";const Ae=Object.assign(Object.assign({},fc),{width:E.toString(),height:T.toString(),top:x,left:B}),Ie=(0,L.z$)().toLowerCase();p&&(J=Gs(Ie)?"_blank":p),At(Ie)&&(h=h||"http://localhost",Ae.scrollbars="yes");const Ke=Object.entries(Ae).reduce((Gt,[tr,Lo])=>`${Gt}${tr}=${Lo},`,"");if(function(_=(0,L.z$)()){var h;return Pr(_)&&!!(null===(h=window.navigator)||void 0===h?void 0:h.standalone)}(Ie)&&"_self"!==J)return function(_,h){const p=document.createElement("a");p.href=_,p.target=h;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),p.dispatchEvent(E)}(h||"",J),new fp(null);const Qe=window.open(h||"",J,Ke);Se(Qe,_,"popup-blocked");try{Qe.focus()}catch(Gt){}return new fp(Qe)}(h,J,xo())})()}_openRedirect(h,p,E,T){var x=this;return(0,g.Z)(function*(){return yield x._originValidation(h),_=mh(h,p,E,Xe(),T),Qt().location.href=_,new Promise(()=>{});var _})()}_initialize(h){const p=h._key();if(this.eventManagers[p]){const{manager:T,promise:x}=this.eventManagers[p];return T?Promise.resolve(T):(Cn(x,"If manager is not set, promise should be"),x)}const E=this.initAndGetManager(h);return this.eventManagers[p]={promise:E},E.catch(()=>{delete this.eventManagers[p]}),E}initAndGetManager(h){var p=this;return(0,g.Z)(function*(){const E=yield function(_){return Hr.apply(this,arguments)}(h),T=new cp(h);return E.register("authEvent",x=>(Se(null==x?void 0:x.authEvent,h,"invalid-auth-event"),{status:T.onEvent(x.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),p.eventManagers[h._key()]={manager:T},p.iframes[h._key()]=E,T})()}_isIframeWebStorageSupported(h,p){this.iframes[h._key()].send(Cl,{type:Cl},T=>{var x;const B=null===(x=null==T?void 0:T[0])||void 0===x?void 0:x[Cl];void 0!==B&&p(!!B),yt(h,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(h){const p=h._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function(_){return hh.apply(this,arguments)}(h)),this.originValidationPromises[p]}get _shouldInitProactively(){return Qc()||oa()||Pr()}}),this.cordovaResolver=_n(class{constructor(){this._redirectPersistence=xs,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Wi,this._overrideRedirectResult=er}_initialize(h){var p=this;return(0,g.Z)(function*(){const E=h._key();let T=p.eventManagers.get(E);return T||(T=new Zm(h),p.eventManagers.set(E,T),p.attachCallbackListeners(h,T)),T})()}_openPopup(h){yt(h,"operation-not-supported-in-this-environment")}_openRedirect(h,p,E,T){var x=this;return(0,g.Z)(function*(){!function(_){var h,p,E,T,x,B,J,Ae,Ie,Ke;const Qe=Aa();Se("function"==typeof(null===(h=null==Qe?void 0:Qe.universalLinks)||void 0===h?void 0:h.subscribe),_,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Se(void 0!==(null===(p=null==Qe?void 0:Qe.BuildInfo)||void 0===p?void 0:p.packageName),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Se("function"==typeof(null===(x=null===(T=null===(E=null==Qe?void 0:Qe.cordova)||void 0===E?void 0:E.plugins)||void 0===T?void 0:T.browsertab)||void 0===x?void 0:x.openUrl),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Se("function"==typeof(null===(Ae=null===(J=null===(B=null==Qe?void 0:Qe.cordova)||void 0===B?void 0:B.plugins)||void 0===J?void 0:J.browsertab)||void 0===Ae?void 0:Ae.isAvailable),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Se("function"==typeof(null===(Ke=null===(Ie=null==Qe?void 0:Qe.cordova)||void 0===Ie?void 0:Ie.InAppBrowser)||void 0===Ke?void 0:Ke.open),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(h);const B=yield x._initialize(h);yield B.initialized(),B.resetRedirect(),fs.clear(),yield x._originValidation(h);const J=function(_,h,p=null){return{type:h,eventId:p,urlResponse:null,sessionId:bh(),postBody:null,tenantId:_.tenantId,error:Vn(_,"no-auth-event")}}(h,E,T);yield function(_,h){return _c()._set(Sa(_),h)}(h,J);const Ae=yield function(_,h,p){return yp.apply(this,arguments)}(h,J,p),Ie=yield function(_){const{cordova:h}=Aa();return new Promise(p=>{h.plugins.browsertab.isAvailable(E=>{let T=null;E?h.plugins.browsertab.openUrl(_):T=h.InAppBrowser.open(_,function(_=(0,L.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(_)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(_)}()?"_blank":"_system","location=yes"),p(T)})})}(Ae);return function(_,h,p){return Al.apply(this,arguments)}(h,B,Ie)})()}_isIframeWebStorageSupported(h,p){throw new Error("Method not implemented.")}_originValidation(h){const p=h._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function(_){return Eh.apply(this,arguments)}(h)),this.originValidationPromises[p]}attachCallbackListeners(h,p){const{universalLinks:E,handleOpenURL:T,BuildInfo:x}=Aa(),B=setTimeout((0,g.Z)(function*(){yield Km(h),p.onEvent(xl())}),500),J=function(){var Ke=(0,g.Z)(function*(Qe){clearTimeout(B);const Gt=yield Km(h);let tr=null;Gt&&(null==Qe?void 0:Qe.url)&&(tr=function(_,h){var p,E;const T=function(_){const h=Sl(_),p=h.link?decodeURIComponent(h.link):void 0,E=Sl(p).link,T=h.deep_link_id?decodeURIComponent(h.deep_link_id):void 0;return Sl(T).link||T||E||p||_}(h);if(T.includes("/__/auth/callback")){const x=Sl(T),B=x.firebaseError?function(_){try{return JSON.parse(_)}catch(h){return null}}(decodeURIComponent(x.firebaseError)):null,J=null===(E=null===(p=null==B?void 0:B.code)||void 0===p?void 0:p.split("auth/"))||void 0===E?void 0:E[1],Ae=J?Vn(J):null;return Ae?{type:_.type,eventId:_.eventId,tenantId:_.tenantId,error:Ae,urlResponse:null,sessionId:null,postBody:null}:{type:_.type,eventId:_.eventId,tenantId:_.tenantId,sessionId:_.sessionId,urlResponse:T,postBody:null}}return null}(Gt,Qe.url)),p.onEvent(tr||xl())});return function(Gt){return Ke.apply(this,arguments)}}();void 0!==E&&"function"==typeof E.subscribe&&E.subscribe(null,J);const Ae=T,Ie=`${x.packageName.toLowerCase()}://`;Aa().handleOpenURL=function(){var Ke=(0,g.Z)(function*(Qe){if(Qe.toLowerCase().startsWith(Ie)&&J({url:Qe}),"function"==typeof Ae)try{Ae(Qe)}catch(Gt){console.error(Gt)}});return function(Qe){return Ke.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=xs,this._completeRedirectFn=Wi,this._overrideRedirectResult=er}_initialize(h){var p=this;return(0,g.Z)(function*(){return yield p.selectUnderlyingResolver(),p.assertedUnderlyingResolver._initialize(h)})()}_openPopup(h,p,E,T){var x=this;return(0,g.Z)(function*(){return yield x.selectUnderlyingResolver(),x.assertedUnderlyingResolver._openPopup(h,p,E,T)})()}_openRedirect(h,p,E,T){var x=this;return(0,g.Z)(function*(){return yield x.selectUnderlyingResolver(),x.assertedUnderlyingResolver._openRedirect(h,p,E,T)})()}_isIframeWebStorageSupported(h,p){this.assertedUnderlyingResolver._isIframeWebStorageSupported(h,p)}_originValidation(h){return this.assertedUnderlyingResolver._originValidation(h)}get _shouldInitProactively(){return Fv()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Gr(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var h=this;return(0,g.Z)(function*(){if(h.underlyingResolver)return;const p=yield function(){return wc.apply(this,arguments)}();h.underlyingResolver=p?h.cordovaResolver:h.browserResolver})()}}function ey(_){return _.unwrap()}function ty(_){return xp(_)}function xp(_){const{_tokenResponse:h}=_ instanceof L.ZR?_.customData:_;if(!h)return null;if(!(_ instanceof L.ZR)&&"temporaryProof"in h&&"phoneNumber"in h)return dc.credentialFromResult(_);const p=h.providerId;if(!p||"password"===p)return null;let E;switch(p){case"google.com":E=Vt;break;case"facebook.com":E=qd;break;case"github.com":E=Wd;break;case"twitter.com":E=Ts;break;default:const{oauthIdToken:T,oauthAccessToken:x,oauthTokenSecret:B,pendingToken:J,nonce:Ae}=h;return x||B||T||J?J?p.startsWith("saml.")?Ds._create(p,J):Bi._fromParams({providerId:p,signInMethod:p,pendingToken:J,idToken:T,accessToken:x}):new Cs(p).credential({idToken:T,accessToken:x,rawNonce:Ae}):null}return _ instanceof L.ZR?E.credentialFromError(_):E.credentialFromResult(_)}function Ri(_,h){return h.catch(p=>{throw p instanceof L.ZR&&function(_,h){var p,E;const T=null===(p=h.customData)||void 0===p?void 0:p._tokenResponse;if("auth/multi-factor-auth-required"===(null===(E=h)||void 0===E?void 0:E.code))h.resolver=new Ic(_,function(_,h){var p;const E=(0,L.m9)(_),T=h;return Se(h.customData.operationType,E,"argument-error"),Se(null===(p=T.customData._serverResponse)||void 0===p?void 0:p.mfaPendingCredential,E,"argument-error"),dl._fromError(E,T)}(_,h));else if(T){const x=xp(h),B=h;x&&(B.credential=x,B.tenantId=T.tenantId||void 0,B.email=T.email||void 0,B.phoneNumber=T.phoneNumber||void 0)}}(_,p),p}).then(p=>{const T=p.user;return{operationType:p.operationType,credential:ty(p),additionalUserInfo:Jf(p),user:_r.getOrCreate(T)}})}function Rp(_,h){return Mp.apply(this,arguments)}function Mp(){return Mp=(0,g.Z)(function*(_,h){const p=yield h;return{verificationId:p.verificationId,confirm:E=>Ri(_,p.confirm(E))}}),Mp.apply(this,arguments)}class Ic{constructor(h,p){this.resolver=p,this.auth=function(_){return _.wrapped()}(h)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(h){return Ri(ey(this.auth),this.resolver.resolveSignIn(h))}}class _r{constructor(h){this._delegate=h,this.multiFactor=function(_){const h=(0,L.m9)(_);return mn.has(h)||mn.set(h,fl._fromUser(h)),mn.get(h)}(h)}static getOrCreate(h){return _r.USER_MAP.has(h)||_r.USER_MAP.set(h,new _r(h)),_r.USER_MAP.get(h)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(h){return this._delegate.getIdTokenResult(h)}getIdToken(h){return this._delegate.getIdToken(h)}linkAndRetrieveDataWithCredential(h){return this.linkWithCredential(h)}linkWithCredential(h){var p=this;return(0,g.Z)(function*(){return Ri(p.auth,Co(p._delegate,h))})()}linkWithPhoneNumber(h,p){var E=this;return(0,g.Z)(function*(){return Rp(E.auth,function(_,h,p){return du.apply(this,arguments)}(E._delegate,h,p))})()}linkWithPopup(h){var p=this;return(0,g.Z)(function*(){return Ri(p.auth,function(_,h,p){return Xn.apply(this,arguments)}(p._delegate,h,Fo))})()}linkWithRedirect(h){var p=this;return(0,g.Z)(function*(){return yield Ap(pn(p.auth)),function(_,h,p){return function(_,h,p){return pu.apply(this,arguments)}(_,h,p)}(p._delegate,h,Fo)})()}reauthenticateAndRetrieveDataWithCredential(h){return this.reauthenticateWithCredential(h)}reauthenticateWithCredential(h){var p=this;return(0,g.Z)(function*(){return Ri(p.auth,da(p._delegate,h))})()}reauthenticateWithPhoneNumber(h,p){return Rp(this.auth,function(_,h,p){return vl.apply(this,arguments)}(this._delegate,h,p))}reauthenticateWithPopup(h){return Ri(this.auth,function(_,h,p){return ut.apply(this,arguments)}(this._delegate,h,Fo))}reauthenticateWithRedirect(h){var p=this;return(0,g.Z)(function*(){return yield Ap(pn(p.auth)),function(_,h,p){return function(_,h,p){return uh.apply(this,arguments)}(_,h,p)}(p._delegate,h,Fo)})()}sendEmailVerification(h){return function(_,h){return ru.apply(this,arguments)}(this._delegate,h)}unlink(h){var p=this;return(0,g.Z)(function*(){return yield function(_,h){return As.apply(this,arguments)}(p._delegate,h),p})()}updateEmail(h){return function(_,h){return su((0,L.m9)(_),h,null)}(this._delegate,h)}updatePassword(h){return function(_,h){return su((0,L.m9)(_),null,h)}(this._delegate,h)}updatePhoneNumber(h){return function(_,h){return El.apply(this,arguments)}(this._delegate,h)}updateProfile(h){return function(_,h){return ma.apply(this,arguments)}(this._delegate,h)}verifyBeforeUpdateEmail(h,p){return function(_,h,p){return iu.apply(this,arguments)}(this._delegate,h,p)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}_r.USER_MAP=new WeakMap;const Ah=Se;let ny=(()=>{class _{constructor(p,E){if(this.app=p,E.isInitialized())return this._delegate=E.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:T}=p.options;Ah(T,"invalid-api-key",{appName:p.name}),Ah(T,"invalid-api-key",{appName:p.name});const x="undefined"!=typeof window?Fo:void 0;this._delegate=E.initialize({options:{persistence:gw(T,p.name),popupRedirectResolver:x}}),this._delegate._updateErrorMap(js),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?_r.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(p){this._delegate.languageCode=p}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(p){this._delegate.tenantId=p}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(p,E){!function(_,h,p){const E=pn(_);Se(E._canInitEmulator,E,"emulator-config-failed"),Se(/^https?:\/\//.test(h),E,"invalid-emulator-scheme");const T=!!(null==p?void 0:p.disableWarnings),x=is(h),{host:B,port:J}=function(_){const h=is(_),p=/(\/\/)?([^?#/]+)/.exec(_.substr(h.length));if(!p)return{host:"",port:null};const E=p[2].split("@").pop()||"",T=/^(\[[^\]]+\])(:|$)/.exec(E);if(T){const x=T[1];return{host:x,port:ju(E.substr(x.length+1))}}{const[x,B]=E.split(":");return{host:x,port:ju(B)}}}(h);E.config.emulator={url:`${x}//${B}${null===J?"":`:${J}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:B,port:J,protocol:x.replace(":",""),options:Object.freeze({disableWarnings:T})}),T||function(){function _(){const h=document.createElement("p"),p=h.style;h.innerText="Running in emulator mode. Do not use with production credentials.",p.position="fixed",p.width="100%",p.backgroundColor="#ffffff",p.border=".1em solid #000000",p.color="#b50000",p.bottom="0px",p.left="0px",p.margin="0px",p.zIndex="10000",p.textAlign="center",h.classList.add("firebase-emulator-warning"),document.body.appendChild(h)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",_):_())}()}(this._delegate,p,E)}applyActionCode(p){return function(_,h){return fa.apply(this,arguments)}(this._delegate,p)}checkActionCode(p){return nu(this._delegate,p)}confirmPasswordReset(p,E){return function(_,h,p){return Qu.apply(this,arguments)}(this._delegate,p,E)}createUserWithEmailAndPassword(p,E){var T=this;return(0,g.Z)(function*(){return Ri(T._delegate,function(_,h,p){return Xu.apply(this,arguments)}(T._delegate,p,E))})()}fetchProvidersForEmail(p){return this.fetchSignInMethodsForEmail(p)}fetchSignInMethodsForEmail(p){return function(_,h){return ai.apply(this,arguments)}(this._delegate,p)}isSignInWithEmailLink(p){return function(_,h){const p=Hi.parseLink(h);return"EMAIL_SIGNIN"===(null==p?void 0:p.operation)}(0,p)}getRedirectResult(){var p=this;return(0,g.Z)(function*(){Ah(Dp(),p._delegate,"operation-not-supported-in-this-environment");const E=yield function(_,h){return jt.apply(this,arguments)}(p._delegate,Fo);return E?Ri(p._delegate,Promise.resolve(E)):{credential:null,user:null}})()}addFrameworkForLogging(p){!function(_,h){pn(_)._logFramework(h)}(this._delegate,p)}onAuthStateChanged(p,E,T){const{next:x,error:B,complete:J}=Np(p,E,T);return this._delegate.onAuthStateChanged(x,B,J)}onIdTokenChanged(p,E,T){const{next:x,error:B,complete:J}=Np(p,E,T);return this._delegate.onIdTokenChanged(x,B,J)}sendSignInLinkToEmail(p,E){return function(_,h,p){return ga.apply(this,arguments)}(this._delegate,p,E)}sendPasswordResetEmail(p,E){return function(_,h,p){return $i.apply(this,arguments)}(this._delegate,p,E||void 0)}setPersistence(p){var E=this;return(0,g.Z)(function*(){let T;switch(function(_,h){no(Object.values(gi).includes(h),_,"invalid-persistence-type"),(0,L.b$)()?no(h!==gi.SESSION,_,"unsupported-persistence-type"):(0,L.UG)()?no(h===gi.NONE,_,"unsupported-persistence-type"):Ml()?no(h===gi.NONE||h===gi.LOCAL&&(0,L.hl)(),_,"unsupported-persistence-type"):no(h===gi.NONE||Eu(),_,"unsupported-persistence-type")}(E._delegate,p),p){case gi.SESSION:T=xs;break;case gi.LOCAL:T=(yield _n(Ea)._isAvailable())?Ea:uu;break;case gi.NONE:T=gr;break;default:return yt("argument-error",{appName:E._delegate.name})}return E._delegate.setPersistence(T)})()}signInAndRetrieveDataWithCredential(p){return this.signInWithCredential(p)}signInAnonymously(){return Ri(this._delegate,function(_){return os.apply(this,arguments)}(this._delegate))}signInWithCredential(p){return Ri(this._delegate,gn(this._delegate,p))}signInWithCustomToken(p){return Ri(this._delegate,function(_,h){return as.apply(this,arguments)}(this._delegate,p))}signInWithEmailAndPassword(p,E){return Ri(this._delegate,function(_,h,p){return gn((0,L.m9)(_),Eo.credential(h,p))}(this._delegate,p,E))}signInWithEmailLink(p,E){return Ri(this._delegate,function(_,h,p){return ec.apply(this,arguments)}(this._delegate,p,E))}signInWithPhoneNumber(p,E){return Rp(this._delegate,function(_,h,p){return lc.apply(this,arguments)}(this._delegate,p,E))}signInWithPopup(p){var E=this;return(0,g.Z)(function*(){return Ah(Dp(),E._delegate,"operation-not-supported-in-this-environment"),Ri(E._delegate,function(_,h,p){return vt.apply(this,arguments)}(E._delegate,p,Fo))})()}signInWithRedirect(p){var E=this;return(0,g.Z)(function*(){return Ah(Dp(),E._delegate,"operation-not-supported-in-this-environment"),yield Ap(E._delegate),function(_,h,p){return function(_,h,p){return fu.apply(this,arguments)}(_,h,p)}(E._delegate,p,Fo)})()}updateCurrentUser(p){return this._delegate.updateCurrentUser(p)}verifyPasswordResetCode(p){return function(_,h){return Ju.apply(this,arguments)}(this._delegate,p)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return _.Persistence=gi,_})();function Np(_,h,p){let E=_;"function"!=typeof _&&({next:E,error:h,complete:p}=_);const T=E;return{next:B=>T(B&&_r.getOrCreate(B)),error:h,complete:p}}function gw(_,h){const p=function(_,h){const p=Nl();if(!p)return[];const E=tn(Tp,_,h);switch(p.getItem(E)){case gi.NONE:return[gr];case gi.LOCAL:return[Ea,xs];case gi.SESSION:return[xs];default:return[]}}(_,h);if("undefined"!=typeof self&&!p.includes(Ea)&&p.push(Ea),"undefined"!=typeof window)for(const E of[uu,xs])p.includes(E)||p.push(E);return p.includes(gr)||p.push(gr),p}class gs{constructor(){this.providerId="phone",this._delegate=new dc(ey(X.Z.auth()))}static credential(h,p){return dc.credential(h,p)}verifyPhoneNumber(h,p){return this._delegate.verifyPhoneNumber(h,p)}unwrap(){return this._delegate}}gs.PHONE_SIGN_IN_METHOD=dc.PHONE_SIGN_IN_METHOD,gs.PROVIDER_ID=dc.PROVIDER_ID;const Op=Se;class kp{constructor(h,p,E=X.Z.app()){var T;Op(null===(T=E.options)||void 0===T?void 0:T.apiKey,"invalid-api-key",{appName:E.name}),this._delegate=new Oo(h,p,E.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function(_){_.INTERNAL.registerComponent(new Mn.wA("auth-compat",h=>{const p=h.getProvider("app-compat").getImmediate(),E=h.getProvider("auth");return new ny(p,E)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Eo,FacebookAuthProvider:qd,GithubAuthProvider:Wd,GoogleAuthProvider:Vt,OAuthProvider:Cs,SAMLAuthProvider:Zu,PhoneAuthProvider:gs,PhoneMultiFactorGenerator:qm,RecaptchaVerifier:kp,TwitterAuthProvider:Ts,Auth:ny,AuthCredential:Is,Error:L.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),_.registerVersion("@firebase/auth-compat","0.2.23")}(X.Z)},7574:(We,me,F)=>{"use strict";F.d(me,{y:()=>V});var g=F(7393),L=F(9181),ae=F(6490),ne=F(6554),_e=F(4487);var P=F(2494);let V=(()=>{class K{constructor(be){this._isScalar=!1,be&&(this._subscribe=be)}lift(be){const fe=new K;return fe.source=this,fe.operator=be,fe}subscribe(be,fe,he){const{operator:Te}=this,Me=function(K,le,be){if(K){if(K instanceof g.L)return K;if(K[L.b])return K[L.b]()}return K||le||be?new g.L(K,le,be):new g.L(ae.c)}(be,fe,he);if(Me.add(Te?Te.call(Me,this.source):this.source||P.v.useDeprecatedSynchronousErrorHandling&&!Me.syncErrorThrowable?this._subscribe(Me):this._trySubscribe(Me)),P.v.useDeprecatedSynchronousErrorHandling&&Me.syncErrorThrowable&&(Me.syncErrorThrowable=!1,Me.syncErrorThrown))throw Me.syncErrorValue;return Me}_trySubscribe(be){try{return this._subscribe(be)}catch(fe){P.v.useDeprecatedSynchronousErrorHandling&&(be.syncErrorThrown=!0,be.syncErrorValue=fe),function(K){for(;K;){const{closed:le,destination:be,isStopped:fe}=K;if(le||fe)return!1;K=be&&be instanceof g.L?be:null}return!0}(be)?be.error(fe):console.warn(fe)}}forEach(be,fe){return new(fe=Y(fe))((he,Te)=>{let Me;Me=this.subscribe(De=>{try{be(De)}catch(Ze){Te(Ze),Me&&Me.unsubscribe()}},Te,he)})}_subscribe(be){const{source:fe}=this;return fe&&fe.subscribe(be)}[ne.L](){return this}pipe(...be){return 0===be.length?this:function(K){return 0===K.length?_e.y:1===K.length?K[0]:function(be){return K.reduce((fe,he)=>he(fe),be)}}(be)(this)}toPromise(be){return new(be=Y(be))((fe,he)=>{let Te;this.subscribe(Me=>Te=Me,Me=>he(Me),()=>fe(Te))})}}return K.create=le=>new K(le),K})();function Y(K){if(K||(K=P.v.Promise||Promise),!K)throw new Error("no Promise impl found");return K}},6490:(We,me,F)=>{"use strict";F.d(me,{c:()=>L});var g=F(2494),X=F(4449);const L={closed:!0,next(ae){},error(ae){if(g.v.useDeprecatedSynchronousErrorHandling)throw ae;(0,X.z)(ae)},complete(){}}},9765:(We,me,F)=>{"use strict";F.d(me,{Yc:()=>_e,xQ:()=>ce});var g=F(7574),X=F(7393),L=F(5319),ae=F(7971),ie=F(8858),ne=F(9181);class _e extends X.L{constructor(V){super(V),this.destination=V}}let ce=(()=>{class P extends g.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[ne.b](){return new _e(this)}lift(Y){const K=new ee(this,this);return K.operator=Y,K}next(Y){if(this.closed)throw new ae.N;if(!this.isStopped){const{observers:K}=this,le=K.length,be=K.slice();for(let fe=0;fe<le;fe++)be[fe].next(Y)}}error(Y){if(this.closed)throw new ae.N;this.hasError=!0,this.thrownError=Y,this.isStopped=!0;const{observers:K}=this,le=K.length,be=K.slice();for(let fe=0;fe<le;fe++)be[fe].error(Y);this.observers.length=0}complete(){if(this.closed)throw new ae.N;this.isStopped=!0;const{observers:Y}=this,K=Y.length,le=Y.slice();for(let be=0;be<K;be++)le[be].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(Y){if(this.closed)throw new ae.N;return super._trySubscribe(Y)}_subscribe(Y){if(this.closed)throw new ae.N;return this.hasError?(Y.error(this.thrownError),L.w.EMPTY):this.isStopped?(Y.complete(),L.w.EMPTY):(this.observers.push(Y),new ie.W(this,Y))}asObservable(){const Y=new g.y;return Y.source=this,Y}}return P.create=(V,Y)=>new ee(V,Y),P})();class ee extends ce{constructor(V,Y){super(),this.destination=V,this.source=Y}next(V){const{destination:Y}=this;Y&&Y.next&&Y.next(V)}error(V){const{destination:Y}=this;Y&&Y.error&&this.destination.error(V)}complete(){const{destination:V}=this;V&&V.complete&&this.destination.complete()}_subscribe(V){const{source:Y}=this;return Y?this.source.subscribe(V):L.w.EMPTY}}},8858:(We,me,F)=>{"use strict";F.d(me,{W:()=>X});var g=F(5319);class X extends g.w{constructor(ae,ie){super(),this.subject=ae,this.subscriber=ie,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const ae=this.subject,ie=ae.observers;if(this.subject=null,!ie||0===ie.length||ae.isStopped||ae.closed)return;const ne=ie.indexOf(this.subscriber);-1!==ne&&ie.splice(ne,1)}}},7393:(We,me,F)=>{"use strict";F.d(me,{L:()=>_e});var g=F(9105),X=F(6490),L=F(5319),ae=F(9181),ie=F(2494),ne=F(4449);class _e extends L.w{constructor(P,V,Y){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=X.c;break;case 1:if(!P){this.destination=X.c;break}if("object"==typeof P){P instanceof _e?(this.syncErrorThrowable=P.syncErrorThrowable,this.destination=P,P.add(this)):(this.syncErrorThrowable=!0,this.destination=new ce(this,P));break}default:this.syncErrorThrowable=!0,this.destination=new ce(this,P,V,Y)}}[ae.b](){return this}static create(P,V,Y){const K=new _e(P,V,Y);return K.syncErrorThrowable=!1,K}next(P){this.isStopped||this._next(P)}error(P){this.isStopped||(this.isStopped=!0,this._error(P))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(P){this.destination.next(P)}_error(P){this.destination.error(P),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:P}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=P,this}}class ce extends _e{constructor(P,V,Y,K){super(),this._parentSubscriber=P;let le,be=this;(0,g.m)(V)?le=V:V&&(le=V.next,Y=V.error,K=V.complete,V!==X.c&&(be=Object.create(V),(0,g.m)(be.unsubscribe)&&this.add(be.unsubscribe.bind(be)),be.unsubscribe=this.unsubscribe.bind(this))),this._context=be,this._next=le,this._error=Y,this._complete=K}next(P){if(!this.isStopped&&this._next){const{_parentSubscriber:V}=this;ie.v.useDeprecatedSynchronousErrorHandling&&V.syncErrorThrowable?this.__tryOrSetError(V,this._next,P)&&this.unsubscribe():this.__tryOrUnsub(this._next,P)}}error(P){if(!this.isStopped){const{_parentSubscriber:V}=this,{useDeprecatedSynchronousErrorHandling:Y}=ie.v;if(this._error)Y&&V.syncErrorThrowable?(this.__tryOrSetError(V,this._error,P),this.unsubscribe()):(this.__tryOrUnsub(this._error,P),this.unsubscribe());else if(V.syncErrorThrowable)Y?(V.syncErrorValue=P,V.syncErrorThrown=!0):(0,ne.z)(P),this.unsubscribe();else{if(this.unsubscribe(),Y)throw P;(0,ne.z)(P)}}}complete(){if(!this.isStopped){const{_parentSubscriber:P}=this;if(this._complete){const V=()=>this._complete.call(this._context);ie.v.useDeprecatedSynchronousErrorHandling&&P.syncErrorThrowable?(this.__tryOrSetError(P,V),this.unsubscribe()):(this.__tryOrUnsub(V),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(P,V){try{P.call(this._context,V)}catch(Y){if(this.unsubscribe(),ie.v.useDeprecatedSynchronousErrorHandling)throw Y;(0,ne.z)(Y)}}__tryOrSetError(P,V,Y){if(!ie.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{V.call(this._context,Y)}catch(K){return ie.v.useDeprecatedSynchronousErrorHandling?(P.syncErrorValue=K,P.syncErrorThrown=!0,!0):((0,ne.z)(K),!0)}return!1}_unsubscribe(){const{_parentSubscriber:P}=this;this._context=null,this._parentSubscriber=null,P.unsubscribe()}}},5319:(We,me,F)=>{"use strict";F.d(me,{w:()=>ne});var g=F(9796),X=F(1555),L=F(9105);const ie=(()=>{function ce(ee){return Error.call(this),this.message=ee?`${ee.length} errors occurred during unsubscription:\n${ee.map((P,V)=>`${V+1}) ${P.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=ee,this}return ce.prototype=Object.create(Error.prototype),ce})();class ne{constructor(ee){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,ee&&(this._ctorUnsubscribe=!0,this._unsubscribe=ee)}unsubscribe(){let ee;if(this.closed)return;let{_parentOrParents:P,_ctorUnsubscribe:V,_unsubscribe:Y,_subscriptions:K}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,P instanceof ne)P.remove(this);else if(null!==P)for(let le=0;le<P.length;++le)P[le].remove(this);if((0,L.m)(Y)){V&&(this._unsubscribe=void 0);try{Y.call(this)}catch(le){ee=le instanceof ie?_e(le.errors):[le]}}if((0,g.k)(K)){let le=-1,be=K.length;for(;++le<be;){const fe=K[le];if((0,X.K)(fe))try{fe.unsubscribe()}catch(he){ee=ee||[],he instanceof ie?ee=ee.concat(_e(he.errors)):ee.push(he)}}}if(ee)throw new ie(ee)}add(ee){let P=ee;if(!ee)return ne.EMPTY;switch(typeof ee){case"function":P=new ne(ee);case"object":if(P===this||P.closed||"function"!=typeof P.unsubscribe)return P;if(this.closed)return P.unsubscribe(),P;if(!(P instanceof ne)){const K=P;P=new ne,P._subscriptions=[K]}break;default:throw new Error("unrecognized teardown "+ee+" added to Subscription.")}let{_parentOrParents:V}=P;if(null===V)P._parentOrParents=this;else if(V instanceof ne){if(V===this)return P;P._parentOrParents=[V,this]}else{if(-1!==V.indexOf(this))return P;V.push(this)}const Y=this._subscriptions;return null===Y?this._subscriptions=[P]:Y.push(P),P}remove(ee){const P=this._subscriptions;if(P){const V=P.indexOf(ee);-1!==V&&P.splice(V,1)}}}var ce;function _e(ce){return ce.reduce((ee,P)=>ee.concat(P instanceof ie?P.errors:P),[])}ne.EMPTY=((ce=new ne).closed=!0,ce)},2494:(We,me,F)=>{"use strict";F.d(me,{v:()=>X});let g=!1;const X={Promise:void 0,set useDeprecatedSynchronousErrorHandling(L){if(L){const ae=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+ae.stack)}else g&&console.log("RxJS: Back to a better error behavior. Thank you. <3");g=L},get useDeprecatedSynchronousErrorHandling(){return g}}},5345:(We,me,F)=>{"use strict";F.d(me,{IY:()=>ae,Ds:()=>ne,ft:()=>ce});var g=F(7393),X=F(7574),L=F(7444);class ae extends g.L{constructor(P){super(),this.parent=P}_next(P){this.parent.notifyNext(P)}_error(P){this.parent.notifyError(P),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class ne extends g.L{notifyNext(P){this.destination.next(P)}notifyError(P){this.destination.error(P)}notifyComplete(){this.destination.complete()}}function ce(ee,P){if(P.closed)return;if(ee instanceof X.y)return ee.subscribe(P);let V;try{V=(0,L.s)(ee)(P)}catch(Y){P.error(Y)}return V}},2441:(We,me,F)=>{"use strict";F.d(me,{c:()=>ie,N:()=>ne});var g=F(9765),X=F(7574),L=F(5319),ae=F(1307);class ie extends X.y{constructor(V,Y){super(),this.source=V,this.subjectFactory=Y,this._refCount=0,this._isComplete=!1}_subscribe(V){return this.getSubject().subscribe(V)}getSubject(){const V=this._subject;return(!V||V.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let V=this._connection;return V||(this._isComplete=!1,V=this._connection=new L.w,V.add(this.source.subscribe(new _e(this.getSubject(),this))),V.closed&&(this._connection=null,V=L.w.EMPTY)),V}refCount(){return(0,ae.x)()(this)}}const ne=(()=>{const P=ie.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:P._subscribe},_isComplete:{value:P._isComplete,writable:!0},getSubject:{value:P.getSubject},connect:{value:P.connect},refCount:{value:P.refCount}}})();class _e extends g.Yc{constructor(V,Y){super(V),this.connectable=Y}_error(V){this._unsubscribe(),super._error(V)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const V=this.connectable;if(V){this.connectable=null;const Y=V._connection;V._refCount=0,V._subject=null,V._connection=null,Y&&Y.unsubscribe()}}}},9193:(We,me,F)=>{"use strict";F.d(me,{E:()=>X,c:()=>L});var g=F(7574);const X=new g.y(ie=>ie.complete());function L(ie){return ie?function(ie){return new g.y(ne=>ie.schedule(()=>ne.complete()))}(ie):X}},4402:(We,me,F)=>{"use strict";F.d(me,{D:()=>be});var g=F(7574),X=F(7444),L=F(5319),ae=F(6554),_e=F(4087),ce=F(377),V=F(4072),Y=F(9489);function be(fe,he){return he?function(fe,he){if(null!=fe){if(function(fe){return fe&&"function"==typeof fe[ae.L]}(fe))return function(fe,he){return new g.y(Te=>{const Me=new L.w;return Me.add(he.schedule(()=>{const De=fe[ae.L]();Me.add(De.subscribe({next(Ze){Me.add(he.schedule(()=>Te.next(Ze)))},error(Ze){Me.add(he.schedule(()=>Te.error(Ze)))},complete(){Me.add(he.schedule(()=>Te.complete()))}}))})),Me})}(fe,he);if((0,V.t)(fe))return function(fe,he){return new g.y(Te=>{const Me=new L.w;return Me.add(he.schedule(()=>fe.then(De=>{Me.add(he.schedule(()=>{Te.next(De),Me.add(he.schedule(()=>Te.complete()))}))},De=>{Me.add(he.schedule(()=>Te.error(De)))}))),Me})}(fe,he);if((0,Y.z)(fe))return(0,_e.r)(fe,he);if(function(fe){return fe&&"function"==typeof fe[ce.hZ]}(fe)||"string"==typeof fe)return function(fe,he){if(!fe)throw new Error("Iterable cannot be null");return new g.y(Te=>{const Me=new L.w;let De;return Me.add(()=>{De&&"function"==typeof De.return&&De.return()}),Me.add(he.schedule(()=>{De=fe[ce.hZ](),Me.add(he.schedule(function(){if(Te.closed)return;let Ze,at;try{const Be=De.next();Ze=Be.value,at=Be.done}catch(Be){return void Te.error(Be)}at?Te.complete():(Te.next(Ze),this.schedule())}))})),Me})}(fe,he)}throw new TypeError((null!==fe&&typeof fe||fe)+" is not observable")}(fe,he):fe instanceof g.y?fe:new g.y((0,X.s)(fe))}},6693:(We,me,F)=>{"use strict";F.d(me,{n:()=>ae});var g=F(7574),X=F(5015),L=F(4087);function ae(ie,ne){return ne?(0,L.r)(ie,ne):new g.y((0,X.V)(ie))}},6682:(We,me,F)=>{"use strict";F.d(me,{T:()=>ie});var g=F(7574),X=F(4869),L=F(3282),ae=F(6693);function ie(...ne){let _e=Number.POSITIVE_INFINITY,ce=null,ee=ne[ne.length-1];return(0,X.K)(ee)?(ce=ne.pop(),ne.length>1&&"number"==typeof ne[ne.length-1]&&(_e=ne.pop())):"number"==typeof ee&&(_e=ne.pop()),null===ce&&1===ne.length&&ne[0]instanceof g.y?ne[0]:(0,L.J)(_e)((0,ae.n)(ne,ce))}},5917:(We,me,F)=>{"use strict";F.d(me,{of:()=>ae});var g=F(4869),X=F(6693),L=F(4087);function ae(...ie){let ne=ie[ie.length-1];return(0,g.K)(ne)?(ie.pop(),(0,L.r)(ie,ne)):(0,X.n)(ie)}},8002:(We,me,F)=>{"use strict";F.d(me,{U:()=>X});var g=F(7393);function X(ie,ne){return function(ce){if("function"!=typeof ie)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return ce.lift(new L(ie,ne))}}class L{constructor(ne,_e){this.project=ne,this.thisArg=_e}call(ne,_e){return _e.subscribe(new ae(ne,this.project,this.thisArg))}}class ae extends g.L{constructor(ne,_e,ce){super(ne),this.project=_e,this.count=0,this.thisArg=ce||this}_next(ne){let _e;try{_e=this.project.call(this.thisArg,ne,this.count++)}catch(ce){return void this.destination.error(ce)}this.destination.next(_e)}}},3282:(We,me,F)=>{"use strict";F.d(me,{J:()=>L});var g=F(9773),X=F(4487);function L(ae=Number.POSITIVE_INFINITY){return(0,g.zg)(X.y,ae)}},9773:(We,me,F)=>{"use strict";F.d(me,{zg:()=>ae});var g=F(8002),X=F(4402),L=F(5345);function ae(ce,ee,P=Number.POSITIVE_INFINITY){return"function"==typeof ee?V=>V.pipe(ae((Y,K)=>(0,X.D)(ce(Y,K)).pipe((0,g.U)((le,be)=>ee(Y,le,K,be))),P)):("number"==typeof ee&&(P=ee),V=>V.lift(new ie(ce,P)))}class ie{constructor(ee,P=Number.POSITIVE_INFINITY){this.project=ee,this.concurrent=P}call(ee,P){return P.subscribe(new ne(ee,this.project,this.concurrent))}}class ne extends L.Ds{constructor(ee,P,V=Number.POSITIVE_INFINITY){super(ee),this.project=P,this.concurrent=V,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(ee){this.active<this.concurrent?this._tryNext(ee):this.buffer.push(ee)}_tryNext(ee){let P;const V=this.index++;try{P=this.project(ee,V)}catch(Y){return void this.destination.error(Y)}this.active++,this._innerSub(P)}_innerSub(ee){const P=new L.IY(this),V=this.destination;V.add(P);const Y=(0,L.ft)(ee,P);Y!==P&&V.add(Y)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(ee){this.destination.next(ee)}notifyComplete(){const ee=this.buffer;this.active--,ee.length>0?this._next(ee.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},309:(We,me,F)=>{"use strict";F.d(me,{ht:()=>V,QV:()=>ee});var g=F(7393),X=F(9193),L=F(5917),ae=F(7574);class ce{constructor(le,be,fe){this.kind=le,this.value=be,this.error=fe,this.hasValue="N"===le}observe(le){switch(this.kind){case"N":return le.next&&le.next(this.value);case"E":return le.error&&le.error(this.error);case"C":return le.complete&&le.complete()}}do(le,be,fe){switch(this.kind){case"N":return le&&le(this.value);case"E":return be&&be(this.error);case"C":return fe&&fe()}}accept(le,be,fe){return le&&"function"==typeof le.next?this.observe(le):this.do(le,be,fe)}toObservable(){switch(this.kind){case"N":return(0,L.of)(this.value);case"E":return K=this.error,new ae.y(be=>be.error(K));case"C":return(0,X.c)()}var K;throw new Error("unexpected notification kind value")}static createNext(le){return void 0!==le?new ce("N",le):ce.undefinedValueNotification}static createError(le){return new ce("E",void 0,le)}static createComplete(){return ce.completeNotification}}function ee(K,le=0){return function(fe){return fe.lift(new P(K,le))}}ce.completeNotification=new ce("C"),ce.undefinedValueNotification=new ce("N",void 0);class P{constructor(le,be=0){this.scheduler=le,this.delay=be}call(le,be){return be.subscribe(new V(le,this.scheduler,this.delay))}}class V extends g.L{constructor(le,be,fe=0){super(le),this.scheduler=be,this.delay=fe}static dispatch(le){const{notification:be,destination:fe}=le;be.observe(fe),this.unsubscribe()}scheduleMessage(le){this.destination.add(this.scheduler.schedule(V.dispatch,this.delay,new Y(le,this.destination)))}_next(le){this.scheduleMessage(ce.createNext(le))}_error(le){this.scheduleMessage(ce.createError(le)),this.unsubscribe()}_complete(){this.scheduleMessage(ce.createComplete()),this.unsubscribe()}}class Y{constructor(le,be){this.notification=le,this.destination=be}}},1307:(We,me,F)=>{"use strict";F.d(me,{x:()=>X});var g=F(7393);function X(){return function(ne){return ne.lift(new L(ne))}}class L{constructor(ne){this.connectable=ne}call(ne,_e){const{connectable:ce}=this;ce._refCount++;const ee=new ae(ne,ce),P=_e.subscribe(ee);return ee.closed||(ee.connection=ce.connect()),P}}class ae extends g.L{constructor(ne,_e){super(ne),this.connectable=_e}_unsubscribe(){const{connectable:ne}=this;if(!ne)return void(this.connection=null);this.connectable=null;const _e=ne._refCount;if(_e<=0)return void(this.connection=null);if(ne._refCount=_e-1,_e>1)return void(this.connection=null);const{connection:ce}=this,ee=ne._connection;this.connection=null,ee&&(!ce||ee===ce)&&ee.unsubscribe()}}},3101:(We,me,F)=>{"use strict";F.d(me,{R:()=>he});var g=F(7574);let X=1;const L=Promise.resolve(),ae={};function ie(Me){return Me in ae&&(delete ae[Me],!0)}const ne={setImmediate(Me){const De=X++;return ae[De]=!0,L.then(()=>ie(De)&&Me()),De},clearImmediate(Me){ie(Me)}};var ce=F(6465),P=F(6102);const K=new class extends P.v{flush(De){this.active=!0,this.scheduled=void 0;const{actions:Ze}=this;let at,Be=-1,Lt=Ze.length;De=De||Ze.shift();do{if(at=De.execute(De.state,De.delay))break}while(++Be<Lt&&(De=Ze.shift()));if(this.active=!1,at){for(;++Be<Lt&&(De=Ze.shift());)De.unsubscribe();throw at}}}(class extends ce.o{constructor(De,Ze){super(De,Ze),this.scheduler=De,this.work=Ze}requestAsyncId(De,Ze,at=0){return null!==at&&at>0?super.requestAsyncId(De,Ze,at):(De.actions.push(this),De.scheduled||(De.scheduled=ne.setImmediate(De.flush.bind(De,null))))}recycleAsyncId(De,Ze,at=0){if(null!==at&&at>0||null===at&&this.delay>0)return super.recycleAsyncId(De,Ze,at);0===De.actions.length&&(ne.clearImmediate(Ze),De.scheduled=void 0)}});var le=F(9796);class fe extends g.y{constructor(De,Ze=0,at=K){var Me;super(),this.source=De,this.delayTime=Ze,this.scheduler=at,(!(!(0,le.k)(Me=Ze)&&Me-parseFloat(Me)+1>=0)||Ze<0)&&(this.delayTime=0),(!at||"function"!=typeof at.schedule)&&(this.scheduler=K)}static create(De,Ze=0,at=K){return new fe(De,Ze,at)}static dispatch(De){const{source:Ze,subscriber:at}=De;return this.add(Ze.subscribe(at))}_subscribe(De){return this.scheduler.schedule(fe.dispatch,this.delayTime,{source:this.source,subscriber:De})}}function he(Me,De=0){return function(at){return at.lift(new Te(Me,De))}}class Te{constructor(De,Ze){this.scheduler=De,this.delay=Ze}call(De,Ze){return new fe(Ze,this.delay,this.scheduler).subscribe(De)}}},3342:(We,me,F)=>{"use strict";F.d(me,{b:()=>ae});var g=F(7393);function X(){}var L=F(9105);function ae(_e,ce,ee){return function(V){return V.lift(new ie(_e,ce,ee))}}class ie{constructor(ce,ee,P){this.nextOrObserver=ce,this.error=ee,this.complete=P}call(ce,ee){return ee.subscribe(new ne(ce,this.nextOrObserver,this.error,this.complete))}}class ne extends g.L{constructor(ce,ee,P,V){super(ce),this._tapNext=X,this._tapError=X,this._tapComplete=X,this._tapError=P||X,this._tapComplete=V||X,(0,L.m)(ee)?(this._context=this,this._tapNext=ee):ee&&(this._context=ee,this._tapNext=ee.next||X,this._tapError=ee.error||X,this._tapComplete=ee.complete||X)}_next(ce){try{this._tapNext.call(this._context,ce)}catch(ee){return void this.destination.error(ee)}this.destination.next(ce)}_error(ce){try{this._tapError.call(this._context,ce)}catch(ee){return void this.destination.error(ee)}this.destination.error(ce)}_complete(){try{this._tapComplete.call(this._context)}catch(ce){return void this.destination.error(ce)}return this.destination.complete()}}},4087:(We,me,F)=>{"use strict";F.d(me,{r:()=>L});var g=F(7574),X=F(5319);function L(ae,ie){return new g.y(ne=>{const _e=new X.w;let ce=0;return _e.add(ie.schedule(function(){ce!==ae.length?(ne.next(ae[ce++]),ne.closed||_e.add(this.schedule())):ne.complete()})),_e})}},6465:(We,me,F)=>{"use strict";F.d(me,{o:()=>L});var g=F(5319);class X extends g.w{constructor(ie,ne){super()}schedule(ie,ne=0){return this}}class L extends X{constructor(ie,ne){super(ie,ne),this.scheduler=ie,this.work=ne,this.pending=!1}schedule(ie,ne=0){if(this.closed)return this;this.state=ie;const _e=this.id,ce=this.scheduler;return null!=_e&&(this.id=this.recycleAsyncId(ce,_e,ne)),this.pending=!0,this.delay=ne,this.id=this.id||this.requestAsyncId(ce,this.id,ne),this}requestAsyncId(ie,ne,_e=0){return setInterval(ie.flush.bind(ie,this),_e)}recycleAsyncId(ie,ne,_e=0){if(null!==_e&&this.delay===_e&&!1===this.pending)return ne;clearInterval(ne)}execute(ie,ne){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const _e=this._execute(ie,ne);if(_e)return _e;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ie,ne){let ce,_e=!1;try{this.work(ie)}catch(ee){_e=!0,ce=!!ee&&ee||new Error(ee)}if(_e)return this.unsubscribe(),ce}_unsubscribe(){const ie=this.id,ne=this.scheduler,_e=ne.actions,ce=_e.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==ce&&_e.splice(ce,1),null!=ie&&(this.id=this.recycleAsyncId(ne,ie,null)),this.delay=null}}},6102:(We,me,F)=>{"use strict";F.d(me,{v:()=>X});let g=(()=>{class L{constructor(ie,ne=L.now){this.SchedulerAction=ie,this.now=ne}schedule(ie,ne=0,_e){return new this.SchedulerAction(this,ie).schedule(_e,ne)}}return L.now=()=>Date.now(),L})();class X extends g{constructor(ae,ie=g.now){super(ae,()=>X.delegate&&X.delegate!==this?X.delegate.now():ie()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(ae,ie=0,ne){return X.delegate&&X.delegate!==this?X.delegate.schedule(ae,ie,ne):super.schedule(ae,ie,ne)}flush(ae){const{actions:ie}=this;if(this.active)return void ie.push(ae);let ne;this.active=!0;do{if(ne=ae.execute(ae.state,ae.delay))break}while(ae=ie.shift());if(this.active=!1,ne){for(;ae=ie.shift();)ae.unsubscribe();throw ne}}}},7771:(We,me,F)=>{"use strict";F.d(me,{c:()=>ne,N:()=>ie});var g=F(6465),L=F(6102);const ie=new class extends L.v{}(class extends g.o{constructor(ce,ee){super(ce,ee),this.scheduler=ce,this.work=ee}schedule(ce,ee=0){return ee>0?super.schedule(ce,ee):(this.delay=ee,this.state=ce,this.scheduler.flush(this),this)}execute(ce,ee){return ee>0||this.closed?super.execute(ce,ee):this._execute(ce,ee)}requestAsyncId(ce,ee,P=0){return null!==P&&P>0||null===P&&this.delay>0?super.requestAsyncId(ce,ee,P):ce.flush(this)}}),ne=ie},377:(We,me,F)=>{"use strict";F.d(me,{hZ:()=>X});const X="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},6554:(We,me,F)=>{"use strict";F.d(me,{L:()=>g});const g="function"==typeof Symbol&&Symbol.observable||"@@observable"},9181:(We,me,F)=>{"use strict";F.d(me,{b:()=>g});const g="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},7971:(We,me,F)=>{"use strict";F.d(me,{N:()=>X});const X=(()=>{function L(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return L.prototype=Object.create(Error.prototype),L})()},4449:(We,me,F)=>{"use strict";function g(X){setTimeout(()=>{throw X},0)}F.d(me,{z:()=>g})},4487:(We,me,F)=>{"use strict";function g(X){return X}F.d(me,{y:()=>g})},9796:(We,me,F)=>{"use strict";F.d(me,{k:()=>g});const g=Array.isArray||(X=>X&&"number"==typeof X.length)},9489:(We,me,F)=>{"use strict";F.d(me,{z:()=>g});const g=X=>X&&"number"==typeof X.length&&"function"!=typeof X},9105:(We,me,F)=>{"use strict";function g(X){return"function"==typeof X}F.d(me,{m:()=>g})},1555:(We,me,F)=>{"use strict";function g(X){return null!==X&&"object"==typeof X}F.d(me,{K:()=>g})},4072:(We,me,F)=>{"use strict";function g(X){return!!X&&"function"!=typeof X.subscribe&&"function"==typeof X.then}F.d(me,{t:()=>g})},4869:(We,me,F)=>{"use strict";function g(X){return X&&"function"==typeof X.schedule}F.d(me,{K:()=>g})},7444:(We,me,F)=>{"use strict";F.d(me,{s:()=>V});var g=F(5015),X=F(4449),ae=F(377),ne=F(6554),ce=F(9489),ee=F(4072),P=F(1555);const V=Y=>{if(Y&&"function"==typeof Y[ne.L])return(Y=>K=>{const le=Y[ne.L]();if("function"!=typeof le.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return le.subscribe(K)})(Y);if((0,ce.z)(Y))return(0,g.V)(Y);if((0,ee.t)(Y))return(Y=>K=>(Y.then(le=>{K.closed||(K.next(le),K.complete())},le=>K.error(le)).then(null,X.z),K))(Y);if(Y&&"function"==typeof Y[ae.hZ])return(Y=>K=>{const le=Y[ae.hZ]();for(;;){let be;try{be=le.next()}catch(fe){return K.error(fe),K}if(be.done){K.complete();break}if(K.next(be.value),K.closed)break}return"function"==typeof le.return&&K.add(()=>{le.return&&le.return()}),K})(Y);{const le=`You provided ${(0,P.K)(Y)?"an invalid object":`'${Y}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(le)}}},5015:(We,me,F)=>{"use strict";F.d(me,{V:()=>g});const g=X=>L=>{for(let ae=0,ie=X.length;ae<ie&&!L.closed;ae++)L.next(X[ae]);L.complete()}},2088:(We,me,F)=>{"use strict";var g=F(3018);let X=null;function L(){return X}const _e=new g.OlP("DocumentToken");let ce=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=(0,g.Yz7)({factory:ee,token:n,providedIn:"platform"}),n})();function ee(){return(0,g.LFG)(V)}const P=new g.OlP("Location Initialized");let V=(()=>{class n extends ce{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return L().getBaseHref(this._doc)}onPopState(t){const r=L().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=L().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,a){Y()?this._history.pushState(t,r,a):this.location.hash=a}replaceState(t,r,a){Y()?this._history.replaceState(t,r,a):this.location.hash=a}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(_e))},n.\u0275prov=(0,g.Yz7)({factory:K,token:n,providedIn:"platform"}),n})();function Y(){return!!window.history.pushState}function K(){return new V((0,g.LFG)(_e))}function le(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function be(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function fe(n){return n&&"?"!==n[0]?"?"+n:n}let he=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=(0,g.Yz7)({factory:Te,token:n,providedIn:"root"}),n})();function Te(n){const e=(0,g.LFG)(_e).location;return new De((0,g.LFG)(ce),e&&e.origin||"")}const Me=new g.OlP("appBaseHref");let De=(()=>{class n extends he{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return le(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+fe(this._platformLocation.search),a=this._platformLocation.hash;return a&&t?`${r}${a}`:r}pushState(t,r,a,c){const f=this.prepareExternalUrl(a+fe(c));this._platformLocation.pushState(t,r,f)}replaceState(t,r,a,c){const f=this.prepareExternalUrl(a+fe(c));this._platformLocation.replaceState(t,r,f)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,a;null===(a=(r=this._platformLocation).historyGo)||void 0===a||a.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ce),g.LFG(Me,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),Ze=(()=>{class n extends he{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=le(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,a,c){let f=this.prepareExternalUrl(a+fe(c));0==f.length&&(f=this._platformLocation.pathname),this._platformLocation.pushState(t,r,f)}replaceState(t,r,a,c){let f=this.prepareExternalUrl(a+fe(c));0==f.length&&(f=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,f)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,a;null===(a=(r=this._platformLocation).historyGo)||void 0===a||a.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ce),g.LFG(Me,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),at=(()=>{class n{constructor(t,r){this._subject=new g.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const a=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=be(Et(a)),this._platformStrategy.onPopState(c=>{this._subject.emit({url:this.path(!0),pop:!0,state:c.state,type:c.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+fe(r))}normalize(t){return n.stripTrailingSlash(function(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Et(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",a=null){this._platformStrategy.pushState(a,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+fe(r)),a)}replaceState(t,r="",a=null){this._platformStrategy.replaceState(a,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+fe(r)),a)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,a;null===(a=(r=this._platformStrategy).historyGo)||void 0===a||a.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(a=>a(t,r))}subscribe(t,r,a){return this._subject.subscribe({next:t,error:r,complete:a})}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(he),g.LFG(ce))},n.normalizeQueryParams=fe,n.joinWithSlash=le,n.stripTrailingSlash=be,n.\u0275prov=(0,g.Yz7)({factory:Be,token:n,providedIn:"root"}),n})();function Be(){return new at((0,g.LFG)(he),(0,g.LFG)(ce))}function Et(n){return n.replace(/\/index.html$/,"")}var je=(()=>((je=je||{})[je.Zero=0]="Zero",je[je.One=1]="One",je[je.Two=2]="Two",je[je.Few=3]="Few",je[je.Many=4]="Many",je[je.Other=5]="Other",je))();const Un=g.kL8;class gr{}let fn=(()=>{class n extends gr{constructor(t){super(),this.locale=t}getPluralCategory(t,r){switch(Un(r||this.locale)(t)){case je.Zero:return"zero";case je.One:return"one";case je.Two:return"two";case je.Few:return"few";case je.Many:return"many";default:return"other"}}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(g.soG))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();function At(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[a,c]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(a.trim()===e)return decodeURIComponent(c)}return null}let Pr=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Ui,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){rn("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){rn("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.s_b),g.Y36(g.Rgc))},n.\u0275dir=g.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class Ui{constructor(){this.$implicit=null,this.ngIf=null}}function rn(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,g.AaK)(e)}'.`)}class ju{createSubscription(e,t){return e.subscribe({next:t,error:r=>{throw r}})}dispose(e){e.unsubscribe()}onDestroy(e){e.unsubscribe()}}class Hu{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}onDestroy(e){}}const Is=new Hu,Ai=new ju;let $u=(()=>{class n{constructor(t){this._ref=t,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if((0,g.QGY)(t))return Is;if((0,g.F4k)(t))return Ai;throw function(n,e){return Error(`InvalidPipeArgument: '${e}' for pipe '${(0,g.AaK)(n)}'`)}(n,t)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.sBO,16))},n.\u0275pipe=g.Yjl({name:"async",type:n,pure:!1}),n})(),$d=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[{provide:gr,useClass:fn}]}),n})(),Ja=(()=>{class n{}return n.\u0275prov=(0,g.Yz7)({token:n,providedIn:"root",factory:()=>new il((0,g.LFG)(_e),window)}),n})();class il{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let a=r.currentNode;for(;a;){const c=a.shadowRoot;if(c){const f=c.getElementById(e)||c.querySelector(`[name="${e}"]`);if(f)return f}a=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),this.attemptFocus(t))}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,a=t.top+this.window.pageYOffset,c=this.offset();this.window.scrollTo(r-c[0],a-c[1])}attemptFocus(e){return e.focus(),this.document.activeElement===e}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=qu(this.window.history)||qu(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function qu(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class ji{}class ca extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var n;n=new ca,X||(X=n)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=(Hi=Hi||document.querySelector("base"),Hi?Hi.getAttribute("href"):null);return null==t?null:function(n){Eo=Eo||document.createElement("a"),Eo.setAttribute("href",n);const e=Eo.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Hi=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return At(document.cookie,e)}}let Eo,Hi=null;const Ws=new g.OlP("TRANSITION_ID"),qd=[{provide:g.ip1,useFactory:function(n,e,t){return()=>{t.get(g.CZH).donePromise.then(()=>{const r=L(),a=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let c=0;c<a.length;c++)r.remove(a[c])})}},deps:[Ws,_e,g.zs3],multi:!0}];class Vt{static init(){(0,g.VLi)(new Vt)}addToWindow(e){g.dqk.getAngularTestability=(r,a=!0)=>{const c=e.findTestabilityInTree(r,a);if(null==c)throw new Error("Could not find testability for element.");return c},g.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),g.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),g.dqk.frameworkStabilizers||(g.dqk.frameworkStabilizers=[]),g.dqk.frameworkStabilizers.push(r=>{const a=g.dqk.getAllAngularTestabilities();let c=a.length,f=!1;const y=function(w){f=f||w,c--,0==c&&r(f)};a.forEach(function(w){w.whenStable(y)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const a=e.getTestability(t);return null!=a?a:r?L().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let Wd=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const As=new g.OlP("EventManagerPlugins");let wo=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(a=>a.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,a){return this._findPluginFor(r).addEventListener(t,r,a)}addGlobalEventListener(t,r,a){return this._findPluginFor(r).addGlobalEventListener(t,r,a)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const a=this._plugins;for(let c=0;c<a.length;c++){const f=a[c];if(f.supports(t))return this._eventNameToPlugin.set(t,f),f}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(As),g.LFG(g.R0b))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();class Io{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const a=L().getGlobalEventTarget(this._doc,e);if(!a)throw new Error(`Unsupported event target ${a} for event ${t}`);return this.addEventListener(a,t,r)}}let la=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(a=>{this._stylesSet.has(a)||(this._stylesSet.add(a),r.add(a))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),Ss=(()=>{class n extends la{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,a){t.forEach(c=>{const f=this._doc.createElement("style");f.textContent=c,a.push(r.appendChild(f))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(sl),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,a)=>{this._addStylesToHost(t,a,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(sl))}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(_e))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();function sl(n){L().remove(n)}const Ee={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Bt=/%COMP%/g;function Zs(n,e,t){for(let r=0;r<e.length;r++){let a=e[r];Array.isArray(a)?Zs(n,a,t):(a=a.replace(Bt,n),t.push(a))}return t}function Kd(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let ha=(()=>{class n{constructor(t,r,a){this.eventManager=t,this.sharedStylesHost=r,this.appId=a,this.rendererByCompId=new Map,this.defaultRenderer=new as(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case g.ifc.Emulated:{let a=this.rendererByCompId.get(r.id);return a||(a=new Ks(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,a)),a.applyToHost(t),a}case 1:case g.ifc.ShadowDom:return new $i(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const a=Zs(r.id,r.styles,[]);this.sharedStylesHost.addStyles(a),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(wo),g.LFG(Ss),g.LFG(g.AFp))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();class as{constructor(e){this.eventManager=e,this.data=Object.create(null)}destroy(){}createElement(e,t){return t?document.createElementNS(Ee[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,a){if(a){t=a+":"+t;const c=Ee[a];c?e.setAttributeNS(c,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const a=Ee[r];a?e.removeAttributeNS(a,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,a){a&(g.JOm.DashCase|g.JOm.Important)?e.style.setProperty(t,r,a&g.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&g.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Kd(r)):this.eventManager.addEventListener(e,t,Kd(r))}}class Ks extends as{constructor(e,t,r,a){super(e),this.component=r;const c=Zs(a+"-"+r.id,r.styles,[]);t.addStyles(c),this.contentAttr="_ngcontent-%COMP%".replace(Bt,a+"-"+r.id),this.hostAttr=function(n){return"_nghost-%COMP%".replace(Bt,n)}(a+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class $i extends as{constructor(e,t,r,a){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const c=Zs(a.id,a.styles,[]);for(let f=0;f<c.length;f++){const y=document.createElement("style");y.textContent=c[f],this.shadowRoot.appendChild(y)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let ol=(()=>{class n extends Io{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,a){return t.addEventListener(r,a,!1),()=>this.removeEventListener(t,r,a)}removeEventListener(t,r,a){return t.removeEventListener(r,a)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(_e))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const To=["alt","control","meta","shift"],ga={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ul={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Vr={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let ai=(()=>{class n extends Io{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,a){const c=n.parseEventName(r),f=n.eventCallback(c.fullKey,a,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>L().onAndCancel(t,c.domEventName,f))}static parseEventName(t){const r=t.toLowerCase().split("."),a=r.shift();if(0===r.length||"keydown"!==a&&"keyup"!==a)return null;const c=n._normalizeKey(r.pop());let f="";if(To.forEach(w=>{const D=r.indexOf(w);D>-1&&(r.splice(D,1),f+=w+".")}),f+=c,0!=r.length||0===c.length)return null;const y={};return y.domEventName=a,y.fullKey=f,y}static getEventFullKey(t){let r="",a=function(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&ul.hasOwnProperty(e)&&(e=ul[e]))}return ga[e]||e}(t);return a=a.toLowerCase()," "===a?a="space":"."===a&&(a="dot"),To.forEach(c=>{c!=a&&Vr[c](t)&&(r+=c+".")}),r+=a,r}static eventCallback(t,r,a){return c=>{n.getEventFullKey(c)===t&&a.runGuarded(()=>r(c))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(_e))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const ll=(0,g.eFA)(g._c5,"browser",[{provide:g.Lbi,useValue:"browser"},{provide:g.g9A,useValue:function(){ca.makeCurrent(),Vt.init()},multi:!0},{provide:_e,useFactory:function(){return(0,g.RDi)(document),document},deps:[]}]),ui=[[],{provide:g.zSh,useValue:"root"},{provide:g.qLn,useFactory:function(){return new g.qLn},deps:[]},{provide:As,useClass:ol,multi:!0,deps:[_e,g.R0b,g.Lbi]},{provide:As,useClass:ai,multi:!0,deps:[_e]},[],{provide:ha,useClass:ha,deps:[wo,Ss,g.AFp]},{provide:g.FYo,useExisting:ha},{provide:la,useExisting:Ss},{provide:Ss,useClass:Ss,deps:[_e]},{provide:g.dDg,useClass:g.dDg,deps:[g.R0b]},{provide:wo,useClass:wo,deps:[As,g.R0b]},{provide:ji,useClass:Wd,deps:[]},[]];let ya=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:g.AFp,useValue:t.appId},{provide:Ws,useExisting:g.AFp},qd]}}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(n,12))},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:ui,imports:[$d,g.hGG]}),n})();"undefined"!=typeof window&&window;var mn=F(4402),ft=F(5917),ci=F(9765),So=F(7971);class Dr extends ci.xQ{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return t&&!t.closed&&e.next(this._value),t}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new So.N;return this._value}next(e){super.next(this._value=e)}}var oc=F(4869),Ys=F(9796),li=F(7393);class uu extends li.L{notifyNext(e,t,r,a,c){this.destination.next(t)}notifyError(e,t){this.destination.error(e)}notifyComplete(e){this.destination.complete()}}class rh extends li.L{constructor(e,t,r){super(),this.parent=e,this.outerValue=t,this.outerIndex=r,this.index=0}_next(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)}_error(e){this.parent.notifyError(e,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var xs=F(7444),Ur=F(7574);function ih(n,e,t,r,a=new rh(n,t,r)){if(!a.closed)return e instanceof Ur.y?e.subscribe(a):(0,xs.s)(e)(a)}var xo=F(6693);const sh={};class va{constructor(e){this.resultSelector=e}call(e,t){return t.subscribe(new ac(e,this.resultSelector))}}class ac extends uu{constructor(e,t){super(e),this.resultSelector=t,this.active=0,this.values=[],this.observables=[]}_next(e){this.values.push(sh),this.observables.push(e)}_complete(){const e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(let r=0;r<t;r++)this.add(ih(this,e[r],void 0,r))}}notifyComplete(e){0==(this.active-=1)&&this.destination.complete()}notifyNext(e,t,r){const a=this.values,f=this.toRespond?a[r]===sh?--this.toRespond:this.toRespond:0;a[r]=t,0===f&&(this.resultSelector?this._tryResultSelector(a):this.destination.next(a.slice()))}_tryResultSelector(e){let t;try{t=this.resultSelector.apply(this,e)}catch(r){return void this.destination.error(r)}this.destination.next(t)}}const Qs=(()=>{function n(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return n.prototype=Object.create(Error.prototype),n})();var us=F(3282);function Js(...n){return(0,us.J)(1)((0,ft.of)(...n))}var Rs=F(9193);function ls(n){return new Ur.y(e=>{let t;try{t=n()}catch(a){return void e.error(a)}return(t?(0,mn.D)(t):(0,Rs.c)()).subscribe(e)})}var Ro=F(2441),Nt=F(8002),di=F(5345);function Qn(n,e){return"function"==typeof e?t=>t.pipe(Qn((r,a)=>(0,mn.D)(n(r,a)).pipe((0,Nt.U)((c,f)=>e(r,c,a,f))))):t=>t.lift(new qi(n))}class qi{constructor(e){this.project=e}call(e,t){return t.subscribe(new Rm(e,this.project))}}class Rm extends di.Ds{constructor(e,t){super(e),this.project=t,this.index=0}_next(e){let t;const r=this.index++;try{t=this.project(e,r)}catch(a){return void this.destination.error(a)}this._innerSub(t)}_innerSub(e){const t=this.innerSubscription;t&&t.unsubscribe();const r=new di.IY(this),a=this.destination;a.add(r),this.innerSubscription=(0,di.ft)(e,r),this.innerSubscription!==r&&a.add(this.innerSubscription)}_complete(){const{innerSubscription:e}=this;(!e||e.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(e){this.destination.next(e)}}const np=(()=>{function n(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return n.prototype=Object.create(Error.prototype),n})();function pl(n){return e=>0===n?(0,Rs.c)():e.lift(new rp(n))}class rp{constructor(e){if(this.total=e,this.total<0)throw new np}call(e,t){return t.subscribe(new bn(e,this.total))}}class bn extends li.L{constructor(e,t){super(e),this.total=t,this.count=0}_next(e){const t=this.total,r=++this.count;r<=t&&(this.destination.next(e),r===t&&(this.destination.complete(),this.unsubscribe()))}}function gl(n,e){let t=!1;return arguments.length>=2&&(t=!0),function(a){return a.lift(new Ea(n,e,t))}}class Ea{constructor(e,t,r=!1){this.accumulator=e,this.seed=t,this.hasSeed=r}call(e,t){return t.subscribe(new Om(e,this.accumulator,this.seed,this.hasSeed))}}class Om extends li.L{constructor(e,t,r,a){super(e),this.accumulator=t,this._seed=r,this.hasSeed=a,this.index=0}get seed(){return this._seed}set seed(e){this.hasSeed=!0,this._seed=e}_next(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)}_tryNext(e){const t=this.index++;let r;try{r=this.accumulator(this.seed,e,t)}catch(a){this.destination.error(a)}this.seed=r,this.destination.next(r)}}function Mo(n,e){return function(r){return r.lift(new km(n,e))}}class km{constructor(e,t){this.predicate=e,this.thisArg=t}call(e,t){return t.subscribe(new oh(e,this.predicate,this.thisArg))}}class oh extends li.L{constructor(e,t,r){super(e),this.predicate=t,this.thisArg=r,this.count=0}_next(e){let t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(r){return void this.destination.error(r)}t&&this.destination.next(e)}}function cu(n){return function(t){const r=new ip(n),a=t.lift(r);return r.caught=a}}class ip{constructor(e){this.selector=e}call(e,t){return t.subscribe(new sp(e,this.selector,this.caught))}}class sp extends di.Ds{constructor(e,t,r){super(e),this.selector=t,this.caught=r}error(e){if(!this.isStopped){let t;try{t=this.selector(e,this.caught)}catch(c){return void super.error(c)}this._unsubscribeAndRecycle();const r=new di.IY(this);this.add(r);const a=(0,di.ft)(t,r);a!==r&&this.add(a)}}}var Br=F(9773);function ds(n,e){return(0,Br.zg)(n,e,1)}function lu(n){return function(t){return 0===n?(0,Rs.c)():t.lift(new An(n))}}class An{constructor(e){if(this.total=e,this.total<0)throw new np}call(e,t){return t.subscribe(new ba(e,this.total))}}class ba extends li.L{constructor(e,t){super(e),this.total=t,this.ring=new Array,this.count=0}_next(e){const t=this.ring,r=this.total,a=this.count++;t.length<r?t.push(e):t[a%r]=e}_complete(){const e=this.destination;let t=this.count;if(t>0){const r=this.count>=this.total?this.total:this.count,a=this.ring;for(let c=0;c<r;c++){const f=t++%r;e.next(a[f])}}e.complete()}}function No(n=jr){return e=>e.lift(new cc(n))}class cc{constructor(e){this.errorFactory=e}call(e,t){return t.subscribe(new ml(e,this.errorFactory))}}class ml extends li.L{constructor(e,t){super(e),this.errorFactory=t,this.hasValue=!1}_next(e){this.hasValue=!0,this.destination.next(e)}_complete(){if(this.hasValue)return this.destination.complete();{let e;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)}}}function jr(){return new Qs}function hi(n=null){return e=>e.lift(new yl(n))}class yl{constructor(e){this.defaultValue=e}call(e,t){return t.subscribe(new wa(e,this.defaultValue))}}class wa extends li.L{constructor(e,t){super(e),this.defaultValue=t,this.isEmpty=!0}_next(e){this.isEmpty=!1,this.destination.next(e)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}var Ms=F(4487);function Oo(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Mo((a,c)=>n(a,c,r)):Ms.y,pl(1),t?hi(e):No(()=>new Qs))}var Jn=F(3342),_l=F(1307),op=F(5319);class $n{constructor(e){this.callback=e}call(e,t){return t.subscribe(new du(e,this.callback))}}class du extends li.L{constructor(e,t){super(e),this.add(new op.w(t))}}class On{constructor(e,t){this.id=e,this.url=t}}class vl extends On{constructor(e,t,r="imperative",a=null){super(e,t),this.navigationTrigger=r,this.restoredState=a}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Xs extends On{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class hu extends On{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class ap extends On{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class El extends On{constructor(e,t,r,a){super(e,t),this.urlAfterRedirects=r,this.state=a}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class dc extends On{constructor(e,t,r,a){super(e,t),this.urlAfterRedirects=r,this.state=a}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class I extends On{constructor(e,t,r,a,c){super(e,t),this.urlAfterRedirects=r,this.state=a,this.shouldActivate=c}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class A extends On{constructor(e,t,r,a){super(e,t),this.urlAfterRedirects=r,this.state=a}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class M extends On{constructor(e,t,r,a){super(e,t),this.urlAfterRedirects=r,this.state=a}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class U{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Z{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class re{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class we{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Le{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ct{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class vt{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Ue="primary";class ut{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function kn(n){return new ut(n)}const Xn="ngNavigationCancelingError";function xi(n){const e=Error("NavigationCancelingError: "+n);return e[Xn]=!0,e}function fs(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const a={};for(let c=0;c<r.length;c++){const f=r[c],y=n[c];if(f.startsWith(":"))a[f.substring(1)]=y;else if(f!==y.path)return null}return{consumed:n.slice(0,r.length),posParams:a}}function fi(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let a;for(let c=0;c<t.length;c++)if(a=t[c],!ko(n[a],e[a]))return!1;return!0}function ko(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((a,c)=>r[c]===a)}return n===e}function yr(n){return Array.prototype.concat.apply([],n)}function pi(n){return n.length>0?n[n.length-1]:null}function er(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function ps(n){return(0,g.CqO)(n)?n:(0,g.QGY)(n)?(0,mn.D)(Promise.resolve(n)):(0,ft.of)(n)}const hc={exact:function Pm(n,e,t){if(!Ca(n.segments,e.segments)||!pu(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!Pm(n.children[r],e.children[r],t))return!1;return!0},subset:ch},eo={exact:function(n,e){return fi(n,e)},subset:function(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>ko(n[t],e[t]))},ignored:()=>!0};function fu(n,e,t){return hc[t.paths](n.root,e.root,t.matrixParams)&&eo[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function ch(n,e,t){return bl(n,e,e.segments,t)}function bl(n,e,t,r){if(n.segments.length>t.length){const a=n.segments.slice(0,t.length);return!(!Ca(a,t)||e.hasChildren()||!pu(a,t,r))}if(n.segments.length===t.length){if(!Ca(n.segments,t)||!pu(n.segments,t,r))return!1;for(const a in e.children)if(!n.children[a]||!ch(n.children[a],e.children[a],r))return!1;return!0}{const a=t.slice(0,n.segments.length),c=t.slice(n.segments.length);return!!(Ca(n.segments,a)&&pu(n.segments,a,r)&&n.children[Ue])&&bl(n.children[Ue],e,c,r)}}function pu(n,e,t){return e.every((r,a)=>eo[t](n[a].parameters,r.parameters))}class gu{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=kn(this.queryParams)),this._queryParamMap}toString(){return Cv.serialize(this)}}class jt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,er(t,(r,a)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return wl(this)}}class Wi{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=kn(this.parameters)),this._parameterMap}toString(){return Dv(this)}}function Ca(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class lh{}class cp{parse(e){const t=new Sv(e);return new gu(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Il(e.root,!0)}`,r=function(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(a=>`${Po(t)}=${Po(a)}`).join("&"):`${Po(t)}=${Po(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);var n;return`${t}${r}${"string"==typeof e.fragment?`#${n=e.fragment,encodeURI(n)}`:""}`}}const Cv=new cp;function wl(n){return n.segments.map(e=>Dv(e)).join("/")}function Il(n,e){if(!n.hasChildren())return wl(n);if(e){const t=n.children[Ue]?Il(n.children[Ue],!1):"",r=[];return er(n.children,(a,c)=>{c!==Ue&&r.push(`${c}:${Il(a,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function(n,e){let t=[];return er(n.children,(r,a)=>{a===Ue&&(t=t.concat(e(r,a)))}),er(n.children,(r,a)=>{a!==Ue&&(t=t.concat(e(r,a)))}),t}(n,(r,a)=>a===Ue?[Il(n.children[Ue],!1)]:[`${a}:${Il(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Ue]?`${wl(n)}/${t[0]}`:`${wl(n)}/(${t.join("//")})`}}function lp(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Po(n){return lp(n).replace(/%3B/gi,";")}function Da(n){return lp(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function dh(n){return decodeURIComponent(n)}function hh(n){return dh(n.replace(/\+/g,"%20"))}function Dv(n){return`${Da(n.path)}${function(n){return Object.keys(n).map(e=>`;${Da(e)}=${Da(n[e])}`).join("")}(n.parameters)}`}const Lm=/^[^\/()?;=#]+/;function Ta(n){const e=n.match(Lm);return e?e[0]:""}const Vm=/^[^=?&#]+/,Tv=/^[^?&#]+/;class Sv{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new jt([],{}):new jt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Ue]=new jt(e,t)),r}parseSegment(){const e=Ta(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new Wi(dh(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Ta(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const a=Ta(this.remaining);a&&(r=a,this.capture(r))}e[dh(t)]=dh(r)}parseQueryParam(e){const t=function(n){const e=n.match(Vm);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const f=function(n){const e=n.match(Tv);return e?e[0]:""}(this.remaining);f&&(r=f,this.capture(r))}const a=hh(t),c=hh(r);if(e.hasOwnProperty(a)){let f=e[a];Array.isArray(f)||(f=[f],e[a]=f),f.push(c)}else e[a]=c}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Ta(this.remaining),a=this.remaining[r.length];if("/"!==a&&")"!==a&&";"!==a)throw new Error(`Cannot parse url '${this.url}'`);let c;r.indexOf(":")>-1?(c=r.substr(0,r.indexOf(":")),this.capture(c),this.capture(":")):e&&(c=Ue);const f=this.parseChildren();t[c]=1===Object.keys(f).length?f[Ue]:new jt([],f),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class Um{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=hp(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=hp(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Ns(e,this._root);return t.length<2?[]:t[t.length-2].children.map(a=>a.value).filter(a=>a!==e)}pathFromRoot(e){return Ns(e,this._root).map(t=>t.value)}}function hp(n,e){if(n===e.value)return e;for(const t of e.children){const r=hp(n,t);if(r)return r}return null}function Ns(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Ns(n,t);if(r.length)return r.unshift(e),r}return[]}class Hr{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function fc(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Bm extends Um{constructor(e,t){super(e),this.snapshot=t,pp(this,e)}toString(){return this.snapshot.toString()}}function jm(n,e){const t=function(n,e){const f=new gh([],{},{},"",{},Ue,e,null,n.root,-1,{});return new $m("",new Hr(f,[]))}(n,e),r=new Dr([new Wi("",{})]),a=new Dr({}),c=new Dr({}),f=new Dr({}),y=new Dr(""),w=new pc(r,a,f,y,c,Ue,e,t.root);return w.snapshot=t.root,new Bm(new Hr(w,[]),t)}class pc{constructor(e,t,r,a,c,f,y,w){this.url=e,this.params=t,this.queryParams=r,this.fragment=a,this.data=c,this.outlet=f,this.component=y,this._futureSnapshot=w}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Nt.U)(e=>kn(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Nt.U)(e=>kn(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function fp(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const a=t[r],c=t[r-1];if(a.routeConfig&&""===a.routeConfig.path)r--;else{if(c.component)break;r--}}return function(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class gh{constructor(e,t,r,a,c,f,y,w,D,R,O){this.url=e,this.params=t,this.queryParams=r,this.fragment=a,this.data=c,this.outlet=f,this.component=y,this.routeConfig=w,this._urlSegment=D,this._lastPathIndex=R,this._resolve=O}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=kn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=kn(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class $m extends Um{constructor(e,t){super(t),this.url=e,pp(this,t)}toString(){return mh(this._root)}}function pp(n,e){e.value._routerState=n,e.children.forEach(t=>pp(n,t))}function mh(n){const e=n.children.length>0?` { ${n.children.map(mh).join(", ")} } `:"";return`${n.value}${e}`}function Gm(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,fi(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),fi(e.params,t.params)||n.params.next(t.params),function(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!fi(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),fi(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Cl(n,e){const t=fi(n.params,e.params)&&function(n,e){return Ca(n,e)&&n.every((t,r)=>fi(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Cl(n.parent,e.parent))}function gc(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const a=function(n,e,t){return e.children.map(r=>{for(const a of t.children)if(n.shouldReuseRoute(r.value,a.value.snapshot))return gc(n,r,a);return gc(n,r)})}(n,e,t);return new Hr(r,a)}{if(n.shouldAttach(e.value)){const c=n.retrieve(e.value);if(null!==c){const f=c.route;return Os(e,f),f}}const r=function(n){return new pc(new Dr(n.url),new Dr(n.params),new Dr(n.queryParams),new Dr(n.fragment),new Dr(n.data),n.outlet,n.component,n)}(e.value),a=e.children.map(c=>gc(n,c));return new Hr(r,a)}}function Os(n,e){if(n.value.routeConfig!==e.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(n.children.length!==e.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");e.value._futureSnapshot=n.value;for(let t=0;t<n.children.length;++t)Os(n.children[t],e.children[t])}function mc(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function yh(n){return"object"==typeof n&&null!=n&&n.outlets}function Wm(n,e,t,r,a){let c={};return r&&er(r,(f,y)=>{c[y]=Array.isArray(f)?f.map(w=>`${w}`):`${f}`}),new gu(t.root===n?e:Rv(t.root,n,e),c,a)}function Rv(n,e,t){const r={};return er(n.children,(a,c)=>{r[c]=a===e?t:Rv(a,e,t)}),new jt(n.segments,r)}class _h{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&mc(r[0]))throw new Error("Root segment cannot have matrix parameters");const a=r.find(yh);if(a&&a!==pi(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class yc{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function zm(n,e,t){if(n||(n=new jt([],{})),0===n.segments.length&&n.hasChildren())return vh(n,e,t);const r=function(n,e,t){let r=0,a=e;const c={match:!1,pathIndex:0,commandIndex:0};for(;a<n.segments.length;){if(r>=t.length)return c;const f=n.segments[a],y=t[r];if(yh(y))break;const w=`${y}`,D=r<t.length-1?t[r+1]:null;if(a>0&&void 0===w)break;if(w&&D&&"object"==typeof D&&void 0===D.outlets){if(!vp(w,D,f))return c;r+=2}else{if(!vp(w,{},f))return c;r++}a++}return{match:!0,pathIndex:a,commandIndex:r}}(n,e,t),a=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const c=new jt(n.segments.slice(0,r.pathIndex),{});return c.children[Ue]=new jt(n.segments.slice(r.pathIndex),n.children),vh(c,0,a)}return r.match&&0===a.length?new jt(n.segments,{}):r.match&&!n.hasChildren()?_p(n,e,t):r.match?vh(n,0,a):_p(n,e,t)}function vh(n,e,t){if(0===t.length)return new jt(n.segments,{});{const r=function(n){return yh(n[0])?n[0].outlets:{[Ue]:n}}(t),a={};return er(r,(c,f)=>{"string"==typeof c&&(c=[c]),null!==c&&(a[f]=zm(n.children[f],e,c))}),er(n.children,(c,f)=>{void 0===r[f]&&(a[f]=c)}),new jt(n.segments,a)}}function _p(n,e,t){const r=n.segments.slice(0,e);let a=0;for(;a<t.length;){const c=t[a];if(yh(c)){const w=Eh(c.outlets);return new jt(r,w)}if(0===a&&mc(t[0])){r.push(new Wi(n.segments[e].path,Tl(t[0]))),a++;continue}const f=yh(c)?c.outlets[Ue]:`${c}`,y=a<t.length-1?t[a+1]:null;f&&y&&mc(y)?(r.push(new Wi(f,Tl(y))),a+=2):(r.push(new Wi(f,{})),a++)}return new jt(r,{})}function Eh(n){const e={};return er(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=_p(new jt([],{}),0,t))}),e}function Tl(n){const e={};return er(n,(t,r)=>e[r]=`${t}`),e}function vp(n,e,t){return n==t.path&&fi(e,t.parameters)}class Mv{constructor(e,t,r,a){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=a}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Gm(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const a=fc(t);e.children.forEach(c=>{const f=c.value.outlet;this.deactivateRoutes(c,a[f],r),delete a[f]}),er(a,(c,f)=>{this.deactivateRouteAndItsChildren(c,r)})}deactivateRoutes(e,t,r){const a=e.value,c=t?t.value:null;if(a===c)if(a.component){const f=r.getContext(a.outlet);f&&this.deactivateChildRoutes(e,t,f.children)}else this.deactivateChildRoutes(e,t,r);else c&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet);if(r&&r.outlet){const a=r.outlet.detach(),c=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:a,route:e,contexts:c})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),a=r&&e.value.component?r.children:t,c=fc(e);for(const f of Object.keys(c))this.deactivateRouteAndItsChildren(c[f],a);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const a=fc(t);e.children.forEach(c=>{this.activateRoutes(c,a[c.value.outlet],r),this.forwardEvent(new ct(c.value.snapshot))}),e.children.length&&this.forwardEvent(new we(e.value.snapshot))}activateRoutes(e,t,r){const a=e.value,c=t?t.value:null;if(Gm(a),a===c)if(a.component){const f=r.getOrCreateContext(a.outlet);this.activateChildRoutes(e,t,f.children)}else this.activateChildRoutes(e,t,r);else if(a.component){const f=r.getOrCreateContext(a.outlet);if(this.routeReuseStrategy.shouldAttach(a.snapshot)){const y=this.routeReuseStrategy.retrieve(a.snapshot);this.routeReuseStrategy.store(a.snapshot,null),f.children.onOutletReAttached(y.contexts),f.attachRef=y.componentRef,f.route=y.route.value,f.outlet&&f.outlet.attach(y.componentRef,y.route.value),Sn(y.route)}else{const y=function(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(a.snapshot),w=y?y.module.componentFactoryResolver:null;f.attachRef=null,f.route=a,f.resolver=w,f.outlet&&f.outlet.activateWith(a,w),this.activateChildRoutes(e,null,f.children)}}else this.activateChildRoutes(e,null,r)}}function Sn(n){Gm(n.value),n.children.forEach(Sn)}class bp{constructor(e,t){this.routes=e,this.module=t}}function to(n){return"function"==typeof n}function vu(n){return n instanceof gu}const bh=Symbol("INITIAL_VALUE");function _c(){return Qn(n=>function(...n){let e,t;return(0,oc.K)(n[n.length-1])&&(t=n.pop()),"function"==typeof n[n.length-1]&&(e=n.pop()),1===n.length&&(0,Ys.k)(n[0])&&(n=n[0]),(0,xo.n)(n,t).lift(new va(e))}(n.map(e=>e.pipe(pl(1),function(...n){const e=n[n.length-1];return(0,oc.K)(e)?(n.pop(),t=>Js(n,t,e)):t=>Js(n,t)}(bh)))).pipe(gl((e,t)=>{let r=!1;return t.reduce((a,c,f)=>a!==bh?a:(c===bh&&(r=!0),r||!1!==c&&f!==t.length-1&&!vu(c)?a:c),e)},bh),Mo(e=>e!==bh),(0,Nt.U)(e=>vu(e)?e:!0===e),pl(1)))}let Sa=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=g.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&g._UZ(0,"router-outlet")},directives:function(){return[uy]},encapsulation:2}),n})();function $r(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];Ip(r,Sl(e,r))}}function Ip(n,e){n.children&&$r(n.children,e)}function Sl(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function wh(n){const e=n.children&&n.children.map(wh),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Ue&&(t.component=Sa),t}function un(n){return n.outlet||Ue}function vc(n,e){const t=n.filter(r=>un(r)===e);return t.push(...n.filter(r=>un(r)!==e)),t}const xl={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function Ih(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},xl):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const c=(e.matcher||fs)(t,n,e);if(!c)return Object.assign({},xl);const f={};er(c.posParams,(w,D)=>{f[D]=w.path});const y=c.consumed.length>0?Object.assign(Object.assign({},f),c.consumed[c.consumed.length-1].parameters):f;return{matched:!0,consumedSegments:c.consumed,lastChild:c.consumed.length,parameters:y,positionalParamSegments:null!==(r=c.posParams)&&void 0!==r?r:{}}}function Ch(n,e,t,r,a="corrected"){if(t.length>0&&function(n,e,t){return t.some(r=>bc(n,e,r)&&un(r)!==Ue)}(n,t,r)){const f=new jt(e,function(n,e,t,r){const a={};a[Ue]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const c of t)if(""===c.path&&un(c)!==Ue){const f=new jt([],{});f._sourceSegment=n,f._segmentIndexShift=e.length,a[un(c)]=f}return a}(n,e,r,new jt(t,n.children)));return f._sourceSegment=n,f._segmentIndexShift=e.length,{segmentGroup:f,slicedSegments:[]}}if(0===t.length&&function(n,e,t){return t.some(r=>bc(n,e,r))}(n,t,r)){const f=new jt(n.segments,function(n,e,t,r,a,c){const f={};for(const y of r)if(bc(n,t,y)&&!a[un(y)]){const w=new jt([],{});w._sourceSegment=n,w._segmentIndexShift="legacy"===c?n.segments.length:e.length,f[un(y)]=w}return Object.assign(Object.assign({},a),f)}(n,e,t,r,n.children,a));return f._sourceSegment=n,f._segmentIndexShift=e.length,{segmentGroup:f,slicedSegments:t}}const c=new jt(n.segments,n.children);return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:t}}function bc(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function Qm(n,e,t,r){return!!(un(n)===r||r!==Ue&&bc(e,t,n))&&("**"===n.path||Ih(e,n,t).matched)}function Jm(n,e,t){return 0===e.length&&!n.children[t]}class Rl{constructor(e){this.segmentGroup=e||null}}class Cp{constructor(e){this.urlTree=e}}function Eu(n){return new Ur.y(e=>e.error(new Rl(n)))}function Ml(n){return new Ur.y(e=>e.error(new Cp(n)))}function Dp(n){return new Ur.y(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`)))}class wc{constructor(e,t,r,a,c){this.configLoader=t,this.urlSerializer=r,this.urlTree=a,this.config=c,this.allowRedirects=!0,this.ngModule=e.get(g.h0i)}apply(){const e=Ch(this.urlTree.root,[],[],this.config).segmentGroup,t=new jt(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,Ue).pipe((0,Nt.U)(c=>this.createUrlTree(gi(c),this.urlTree.queryParams,this.urlTree.fragment))).pipe(cu(c=>{if(c instanceof Cp)return this.allowRedirects=!1,this.match(c.urlTree);throw c instanceof Rl?this.noMatchError(c):c}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Ue).pipe((0,Nt.U)(a=>this.createUrlTree(gi(a),e.queryParams,e.fragment))).pipe(cu(a=>{throw a instanceof Rl?this.noMatchError(a):a}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const a=e.segments.length>0?new jt([],{[Ue]:e}):e;return new gu(a,t,r)}expandSegmentGroup(e,t,r,a){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,Nt.U)(c=>new jt([],c))):this.expandSegment(e,r,t,r.segments,a,!0)}expandChildren(e,t,r){const a=[];for(const c of Object.keys(r.children))"primary"===c?a.unshift(c):a.push(c);return(0,mn.D)(a).pipe(ds(c=>{const f=r.children[c],y=vc(t,c);return this.expandSegmentGroup(e,y,f,c).pipe((0,Nt.U)(w=>({segment:w,outlet:c})))}),gl((c,f)=>(c[f.outlet]=f.segment,c),{}),function(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Mo((a,c)=>n(a,c,r)):Ms.y,lu(1),t?hi(e):No(()=>new Qs))}())}expandSegment(e,t,r,a,c,f){return(0,mn.D)(r).pipe(ds(y=>this.expandSegmentAgainstRoute(e,t,r,y,a,c,f).pipe(cu(D=>{if(D instanceof Rl)return(0,ft.of)(null);throw D}))),Oo(y=>!!y),cu((y,w)=>{if(y instanceof Qs||"EmptyError"===y.name){if(Jm(t,a,c))return(0,ft.of)(new jt([],{}));throw new Rl(t)}throw y}))}expandSegmentAgainstRoute(e,t,r,a,c,f,y){return Qm(a,t,c,f)?void 0===a.redirectTo?this.matchSegmentAgainstRoute(e,t,a,c,f):y&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,a,c,f):Eu(t):Eu(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,a,c,f){return"**"===a.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,a,f):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,a,c,f)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,a){const c=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Ml(c):this.lineralizeSegments(r,c).pipe((0,Br.zg)(f=>{const y=new jt(f,{});return this.expandSegment(e,y,t,f,a,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,a,c,f){const{matched:y,consumedSegments:w,lastChild:D,positionalParamSegments:R}=Ih(t,a,c);if(!y)return Eu(t);const O=this.applyRedirectCommands(w,a.redirectTo,R);return a.redirectTo.startsWith("/")?Ml(O):this.lineralizeSegments(a,O).pipe((0,Br.zg)(G=>this.expandSegment(e,t,r,G.concat(c.slice(D)),f,!1)))}matchSegmentAgainstRoute(e,t,r,a,c){if("**"===r.path)return r.loadChildren?(r._loadedConfig?(0,ft.of)(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,Nt.U)(G=>(r._loadedConfig=G,new jt(a,{})))):(0,ft.of)(new jt(a,{}));const{matched:f,consumedSegments:y,lastChild:w}=Ih(t,r,a);if(!f)return Eu(t);const D=a.slice(w);return this.getChildConfig(e,r,a).pipe((0,Br.zg)(O=>{const G=O.module,q=O.routes,{segmentGroup:te,slicedSegments:Re}=Ch(t,y,D,q),Fe=new jt(te.segments,te.children);if(0===Re.length&&Fe.hasChildren())return this.expandChildren(G,q,Fe).pipe((0,Nt.U)(Ft=>new jt(y,Ft)));if(0===q.length&&0===Re.length)return(0,ft.of)(new jt(y,{}));const ot=un(r)===c;return this.expandSegment(G,Fe,q,Re,ot?Ue:c,!0).pipe((0,Nt.U)(Pt=>new jt(y.concat(Pt.segments),Pt.children)))}))}getChildConfig(e,t,r){return t.children?(0,ft.of)(new bp(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?(0,ft.of)(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,Br.zg)(a=>{return a?this.configLoader.load(e.injector,t).pipe((0,Nt.U)(c=>(t._loadedConfig=c,c))):(n=t,new Ur.y(e=>e.error(xi(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))));var n})):(0,ft.of)(new bp([],e))}runCanLoadGuards(e,t,r){const a=t.canLoad;if(!a||0===a.length)return(0,ft.of)(!0);const c=a.map(f=>{const y=e.get(f);let w;if((n=y)&&to(n.canLoad))w=y.canLoad(t,r);else{if(!to(y))throw new Error("Invalid CanLoad guard");w=y(t,r)}var n;return ps(w)});return(0,ft.of)(c).pipe(_c(),(0,Jn.b)(f=>{if(!vu(f))return;const y=xi(`Redirecting to "${this.urlSerializer.serialize(f)}"`);throw y.url=f,y}),(0,Nt.U)(f=>!0===f))}lineralizeSegments(e,t){let r=[],a=t.root;for(;;){if(r=r.concat(a.segments),0===a.numberOfChildren)return(0,ft.of)(r);if(a.numberOfChildren>1||!a.children[Ue])return Dp(e.redirectTo);a=a.children[Ue]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,a){const c=this.createSegmentGroup(e,t.root,r,a);return new gu(c,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return er(e,(a,c)=>{if("string"==typeof a&&a.startsWith(":")){const y=a.substring(1);r[c]=t[y]}else r[c]=a}),r}createSegmentGroup(e,t,r,a){const c=this.createSegments(e,t.segments,r,a);let f={};return er(t.children,(y,w)=>{f[w]=this.createSegmentGroup(e,y,r,a)}),new jt(c,f)}createSegments(e,t,r,a){return t.map(c=>c.path.startsWith(":")?this.findPosParam(e,c,a):this.findOrReturn(c,r))}findPosParam(e,t,r){const a=r[t.path.substring(1)];if(!a)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return a}findOrReturn(e,t){let r=0;for(const a of t){if(a.path===e.path)return t.splice(r),a;r++}return e}}function gi(n){const e={};for(const r of Object.keys(n.children)){const c=gi(n.children[r]);(c.segments.length>0||c.hasChildren())&&(e[r]=c)}return function(n){if(1===n.numberOfChildren&&n.children[Ue]){const e=n.children[Ue];return new jt(n.segments.concat(e.segments),e.children)}return n}(new jt(n.segments,e))}class Tp{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Dh{constructor(e,t){this.component=e,this.route=t}}function Ap(n,e,t){const r=n._root;return Gr(r,e?e._root:null,t,[r.value])}function Th(n,e,t){const r=function(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function Gr(n,e,t,r,a={canDeactivateChecks:[],canActivateChecks:[]}){const c=fc(e);return n.children.forEach(f=>{(function(n,e,t,r,a={canDeactivateChecks:[],canActivateChecks:[]}){const c=n.value,f=e?e.value:null,y=t?t.getContext(n.value.outlet):null;if(f&&c.routeConfig===f.routeConfig){const w=function(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Ca(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Ca(n.url,e.url)||!fi(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Cl(n,e)||!fi(n.queryParams,e.queryParams);default:return!Cl(n,e)}}(f,c,c.routeConfig.runGuardsAndResolvers);w?a.canActivateChecks.push(new Tp(r)):(c.data=f.data,c._resolvedData=f._resolvedData),Gr(n,e,c.component?y?y.children:null:t,r,a),w&&y&&y.outlet&&y.outlet.isActivated&&a.canDeactivateChecks.push(new Dh(y.outlet.component,f))}else f&&Ol(e,y,a),a.canActivateChecks.push(new Tp(r)),Gr(n,null,c.component?y?y.children:null:t,r,a)})(f,c[f.value.outlet],t,r.concat([f.value]),a),delete c[f.value.outlet]}),er(c,(f,y)=>Ol(f,t.getContext(y),a)),a}function Ol(n,e,t){const r=fc(n),a=n.value;er(r,(c,f)=>{Ol(c,a.component?e?e.children.getContext(f):null:e,t)}),t.canDeactivateChecks.push(new Dh(a.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,a))}class Ah{}function ny(n){return new Ur.y(e=>e.error(n))}class gw{constructor(e,t,r,a,c,f){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=a,this.paramsInheritanceStrategy=c,this.relativeLinkResolution=f}recognize(){const e=Ch(this.urlTree.root,[],[],this.config.filter(f=>void 0===f.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Ue);if(null===t)return null;const r=new gh([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Ue,this.rootComponentType,null,this.urlTree.root,-1,{}),a=new Hr(r,t),c=new $m(this.url,a);return this.inheritParamsAndData(c._root),c}inheritParamsAndData(e){const t=e.value,r=fp(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(a=>this.inheritParamsAndData(a))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const c of Object.keys(t.children)){const f=t.children[c],y=vc(e,c),w=this.processSegmentGroup(y,f,c);if(null===w)return null;r.push(...w)}const a=ry(r);return a.sort((e,t)=>e.value.outlet===Ue?-1:t.value.outlet===Ue?1:e.value.outlet.localeCompare(t.value.outlet)),a}processSegment(e,t,r,a){for(const c of e){const f=this.processSegmentAgainstRoute(c,t,r,a);if(null!==f)return f}return Jm(t,r,a)?[]:null}processSegmentAgainstRoute(e,t,r,a){if(e.redirectTo||!Qm(e,t,r,a))return null;let c,f=[],y=[];if("**"===e.path){const q=r.length>0?pi(r).parameters:{};c=new gh(r,q,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,p(e),un(e),e.component,e,_(t),h(t)+r.length,E(e))}else{const q=Ih(t,e,r);if(!q.matched)return null;f=q.consumedSegments,y=r.slice(q.lastChild),c=new gh(f,q.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,p(e),un(e),e.component,e,_(t),h(t)+f.length,E(e))}const w=(n=e).children?n.children:n.loadChildren?n._loadedConfig.routes:[],{segmentGroup:D,slicedSegments:R}=Ch(t,f,y,w.filter(q=>void 0===q.redirectTo),this.relativeLinkResolution);var n;if(0===R.length&&D.hasChildren()){const q=this.processChildren(w,D);return null===q?null:[new Hr(c,q)]}if(0===w.length&&0===R.length)return[new Hr(c,[])];const O=un(e)===a,G=this.processSegment(w,D,R,O?Ue:a);return null===G?null:[new Hr(c,G)]}}function kp(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function ry(n){const e=[],t=new Set;for(const r of n){if(!kp(r)){e.push(r);continue}const a=e.find(c=>r.value.routeConfig===c.value.routeConfig);void 0!==a?(a.children.push(...r.children),t.add(a)):e.push(r)}for(const r of t){const a=ry(r.children);e.push(new Hr(r.value,a))}return e.filter(r=>!t.has(r))}function _(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function h(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function p(n){return n.data||{}}function E(n){return n.resolve||{}}function Ie(n){return Qn(e=>{const t=n(e);return t?(0,mn.D)(t).pipe((0,Nt.U)(()=>e)):(0,ft.of)(e)})}class Gt extends class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const tr=new g.OlP("ROUTES");class Lo{constructor(e,t,r,a){this.loader=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=a}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const a=this.loadModuleFactory(t.loadChildren).pipe((0,Nt.U)(c=>{this.onLoadEndListener&&this.onLoadEndListener(t);const f=c.create(e);return new bp(yr(f.injector.get(tr,void 0,g.XFs.Self|g.XFs.Optional)).map(wh),f)}),cu(c=>{throw t._loader$=void 0,c}));return t._loader$=new Ro.c(a,()=>new ci.xQ).pipe((0,_l.x)()),t._loader$}loadModuleFactory(e){return"string"==typeof e?(0,mn.D)(this.loader.load(e)):ps(e()).pipe((0,Br.zg)(t=>t instanceof g.YKP?(0,ft.of)(t):(0,mn.D)(this.compiler.compileModuleAsync(t))))}}class Sh{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new xa,this.attachRef=null}}class xa{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new Sh,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}class Pp{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function kl(n){throw n}function Fp(n,e,t){return e.parse("/")}function Pl(n,e){return(0,ft.of)(null)}const Lp={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},sy={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let qr=(()=>{class n{constructor(t,r,a,c,f,y,w,D){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=a,this.location=c,this.config=D,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new ci.xQ,this.errorHandler=kl,this.malformedUriErrorHandler=Fp,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Pl,afterPreactivation:Pl},this.urlHandlingStrategy=new Pp,this.routeReuseStrategy=new Gt,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=f.get(g.h0i),this.console=f.get(g.c2e);const G=f.get(g.R0b);this.isNgZoneEnabled=G instanceof g.R0b&&g.R0b.isInAngularZone(),this.resetConfig(D),this.currentUrlTree=new gu(new jt([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Lo(y,w,q=>this.triggerEvent(new U(q)),q=>this.triggerEvent(new Z(q))),this.routerState=jm(this.currentUrlTree,this.rootComponentType),this.transitions=new Dr({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Mo(a=>0!==a.id),(0,Nt.U)(a=>Object.assign(Object.assign({},a),{extractedUrl:this.urlHandlingStrategy.extract(a.rawUrl)})),Qn(a=>{let c=!1,f=!1;return(0,ft.of)(a).pipe((0,Jn.b)(y=>{this.currentNavigation={id:y.id,initialUrl:y.currentRawUrl,extractedUrl:y.extractedUrl,trigger:y.source,extras:y.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Qn(y=>{const w=this.browserUrlTree.toString(),D=!this.navigated||y.extractedUrl.toString()!==w||w!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||D)&&this.urlHandlingStrategy.shouldProcessUrl(y.rawUrl))return ro(y.source)&&(this.browserUrlTree=y.extractedUrl),(0,ft.of)(y).pipe(Qn(O=>{const G=this.transitions.getValue();return r.next(new vl(O.id,this.serializeUrl(O.extractedUrl),O.source,O.restoredState)),G!==this.transitions.getValue()?Rs.E:Promise.resolve(O)}),function(n,e,t,r){return Qn(a=>function(n,e,t,r,a){return new wc(n,e,t,r,a).apply()}(n,e,t,a.extractedUrl,r).pipe((0,Nt.U)(c=>Object.assign(Object.assign({},a),{urlAfterRedirects:c}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Jn.b)(O=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:O.urlAfterRedirects})}),function(n,e,t,r,a){return(0,Br.zg)(c=>function(n,e,t,r,a="emptyOnly",c="legacy"){try{const f=new gw(n,e,t,r,a,c).recognize();return null===f?ny(new Ah):(0,ft.of)(f)}catch(f){return ny(f)}}(n,e,c.urlAfterRedirects,t(c.urlAfterRedirects),r,a).pipe((0,Nt.U)(f=>Object.assign(Object.assign({},c),{targetSnapshot:f}))))}(this.rootComponentType,this.config,O=>this.serializeUrl(O),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Jn.b)(O=>{"eager"===this.urlUpdateStrategy&&(O.extras.skipLocationChange||this.setBrowserUrl(O.urlAfterRedirects,O),this.browserUrlTree=O.urlAfterRedirects);const G=new El(O.id,this.serializeUrl(O.extractedUrl),this.serializeUrl(O.urlAfterRedirects),O.targetSnapshot);r.next(G)}));if(D&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:G,extractedUrl:q,source:te,restoredState:Re,extras:Fe}=y,ot=new vl(G,this.serializeUrl(q),te,Re);r.next(ot);const Ct=jm(q,this.rootComponentType).snapshot;return(0,ft.of)(Object.assign(Object.assign({},y),{targetSnapshot:Ct,urlAfterRedirects:q,extras:Object.assign(Object.assign({},Fe),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=y.rawUrl,this.browserUrlTree=y.urlAfterRedirects,y.resolve(null),Rs.E}),Ie(y=>{const{targetSnapshot:w,id:D,extractedUrl:R,rawUrl:O,extras:{skipLocationChange:G,replaceUrl:q}}=y;return this.hooks.beforePreactivation(w,{navigationId:D,appliedUrlTree:R,rawUrlTree:O,skipLocationChange:!!G,replaceUrl:!!q})}),(0,Jn.b)(y=>{const w=new dc(y.id,this.serializeUrl(y.extractedUrl),this.serializeUrl(y.urlAfterRedirects),y.targetSnapshot);this.triggerEvent(w)}),(0,Nt.U)(y=>Object.assign(Object.assign({},y),{guards:Ap(y.targetSnapshot,y.currentSnapshot,this.rootContexts)})),function(n,e){return(0,Br.zg)(t=>{const{targetSnapshot:r,currentSnapshot:a,guards:{canActivateChecks:c,canDeactivateChecks:f}}=t;return 0===f.length&&0===c.length?(0,ft.of)(Object.assign(Object.assign({},t),{guardsResult:!0})):function(n,e,t,r){return(0,mn.D)(n).pipe((0,Br.zg)(a=>function(n,e,t,r,a){const c=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!c||0===c.length)return(0,ft.of)(!0);const f=c.map(y=>{const w=Th(y,e,a);let D;if(function(n){return n&&to(n.canDeactivate)}(w))D=ps(w.canDeactivate(n,e,t,r));else{if(!to(w))throw new Error("Invalid CanDeactivate guard");D=ps(w(n,e,t,r))}return D.pipe(Oo())});return(0,ft.of)(f).pipe(_c())}(a.component,a.route,t,e,r)),Oo(a=>!0!==a,!0))}(f,r,a,n).pipe((0,Br.zg)(y=>y&&function(n){return"boolean"==typeof n}(y)?function(n,e,t,r){return(0,mn.D)(e).pipe(ds(a=>Js(function(n,e){return null!==n&&e&&e(new re(n)),(0,ft.of)(!0)}(a.route.parent,r),function(n,e){return null!==n&&e&&e(new Le(n)),(0,ft.of)(!0)}(a.route,r),function(n,e,t){const r=e[e.length-1],c=e.slice(0,e.length-1).reverse().map(f=>function(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(f)).filter(f=>null!==f).map(f=>ls(()=>{const y=f.guards.map(w=>{const D=Th(w,f.node,t);let R;if(function(n){return n&&to(n.canActivateChild)}(D))R=ps(D.canActivateChild(r,n));else{if(!to(D))throw new Error("Invalid CanActivateChild guard");R=ps(D(r,n))}return R.pipe(Oo())});return(0,ft.of)(y).pipe(_c())}));return(0,ft.of)(c).pipe(_c())}(n,a.path,t),function(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return(0,ft.of)(!0);const a=r.map(c=>ls(()=>{const f=Th(c,e,t);let y;if(function(n){return n&&to(n.canActivate)}(f))y=ps(f.canActivate(e,n));else{if(!to(f))throw new Error("Invalid CanActivate guard");y=ps(f(e,n))}return y.pipe(Oo())}));return(0,ft.of)(a).pipe(_c())}(n,a.route,t))),Oo(a=>!0!==a,!0))}(r,c,n,e):(0,ft.of)(y)),(0,Nt.U)(y=>Object.assign(Object.assign({},t),{guardsResult:y})))})}(this.ngModule.injector,y=>this.triggerEvent(y)),(0,Jn.b)(y=>{if(vu(y.guardsResult)){const D=xi(`Redirecting to "${this.serializeUrl(y.guardsResult)}"`);throw D.url=y.guardsResult,D}const w=new I(y.id,this.serializeUrl(y.extractedUrl),this.serializeUrl(y.urlAfterRedirects),y.targetSnapshot,!!y.guardsResult);this.triggerEvent(w)}),Mo(y=>!!y.guardsResult||(this.restoreHistory(y),this.cancelNavigationTransition(y,""),!1)),Ie(y=>{if(y.guards.canActivateChecks.length)return(0,ft.of)(y).pipe((0,Jn.b)(w=>{const D=new A(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);this.triggerEvent(D)}),Qn(w=>{let D=!1;return(0,ft.of)(w).pipe(function(n,e){return(0,Br.zg)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:a}}=t;if(!a.length)return(0,ft.of)(t);let c=0;return(0,mn.D)(a).pipe(ds(f=>function(n,e,t,r){return function(n,e,t,r){const a=Object.keys(n);if(0===a.length)return(0,ft.of)({});const c={};return(0,mn.D)(a).pipe((0,Br.zg)(f=>function(n,e,t,r){const a=Th(n,e,r);return ps(a.resolve?a.resolve(e,t):a(e,t))}(n[f],e,t,r).pipe((0,Jn.b)(y=>{c[f]=y}))),lu(1),(0,Br.zg)(()=>Object.keys(c).length===a.length?(0,ft.of)(c):Rs.E))}(n._resolve,n,e,r).pipe((0,Nt.U)(c=>(n._resolvedData=c,n.data=Object.assign(Object.assign({},n.data),fp(n,t).resolve),null)))}(f.route,r,n,e)),(0,Jn.b)(()=>c++),lu(1),(0,Br.zg)(f=>c===a.length?(0,ft.of)(t):Rs.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Jn.b)({next:()=>D=!0,complete:()=>{D||(this.restoreHistory(w),this.cancelNavigationTransition(w,"At least one route resolver didn't emit any value."))}}))}),(0,Jn.b)(w=>{const D=new M(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);this.triggerEvent(D)}))}),Ie(y=>{const{targetSnapshot:w,id:D,extractedUrl:R,rawUrl:O,extras:{skipLocationChange:G,replaceUrl:q}}=y;return this.hooks.afterPreactivation(w,{navigationId:D,appliedUrlTree:R,rawUrlTree:O,skipLocationChange:!!G,replaceUrl:!!q})}),(0,Nt.U)(y=>{const w=function(n,e,t){const r=gc(n,e._root,t?t._root:void 0);return new Bm(r,e)}(this.routeReuseStrategy,y.targetSnapshot,y.currentRouterState);return Object.assign(Object.assign({},y),{targetRouterState:w})}),(0,Jn.b)(y=>{this.currentUrlTree=y.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(y.urlAfterRedirects,y.rawUrl),this.routerState=y.targetRouterState,"deferred"===this.urlUpdateStrategy&&(y.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,y),this.browserUrlTree=y.urlAfterRedirects)}),((n,e,t)=>(0,Nt.U)(r=>(new Mv(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,y=>this.triggerEvent(y)),(0,Jn.b)({next(){c=!0},complete(){c=!0}}),function(n){return e=>e.lift(new $n(n))}(()=>{var y;if(!c&&!f){const w=`Navigation ID ${a.id} is not equal to the current navigation id ${this.navigationId}`;"replace"===this.canceledNavigationResolution?(this.restoreHistory(a),this.cancelNavigationTransition(a,w)):this.cancelNavigationTransition(a,w)}(null===(y=this.currentNavigation)||void 0===y?void 0:y.id)===a.id&&(this.currentNavigation=null)}),cu(y=>{if(f=!0,function(n){return n&&n[Xn]}(y)){const w=vu(y.url);w||(this.navigated=!0,this.restoreHistory(a,!0));const D=new hu(a.id,this.serializeUrl(a.extractedUrl),y.message);r.next(D),w?setTimeout(()=>{const R=this.urlHandlingStrategy.merge(y.url,this.rawUrlTree),O={skipLocationChange:a.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||ro(a.source)};this.scheduleNavigation(R,"imperative",null,O,{resolve:a.resolve,reject:a.reject,promise:a.promise})},0):a.resolve(!1)}else{this.restoreHistory(a,!0);const w=new ap(a.id,this.serializeUrl(a.extractedUrl),y);r.next(w);try{a.resolve(this.errorHandler(y))}catch(D){a.reject(D)}}return Rs.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r=this.extractLocationChangeInfoFromEvent(t);this.shouldScheduleNavigation(this.lastLocationChangeInfo,r)&&setTimeout(()=>{const{source:a,state:c,urlTree:f}=r,y={replaceUrl:!0};if(c){const w=Object.assign({},c);delete w.navigationId,delete w.\u0275routerPageId,0!==Object.keys(w).length&&(y.state=w)}this.scheduleNavigation(f,a,c,y)},0),this.lastLocationChangeInfo=r}))}extractLocationChangeInfoFromEvent(t){var r;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(r=t.state)||void 0===r?void 0:r.navigationId)?t.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(t,r){if(!t)return!0;const a=r.urlTree.toString()===t.urlTree.toString();return r.transitionId!==t.transitionId||!a||!("hashchange"===r.source&&"popstate"===t.source||"popstate"===r.source&&"hashchange"===t.source)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){$r(t),this.config=t.map(wh),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:a,queryParams:c,fragment:f,queryParamsHandling:y,preserveFragment:w}=r,D=a||this.routerState.root,R=w?this.currentUrlTree.fragment:f;let O=null;switch(y){case"merge":O=Object.assign(Object.assign({},this.currentUrlTree.queryParams),c);break;case"preserve":O=this.currentUrlTree.queryParams;break;default:O=c||null}return null!==O&&(O=this.removeEmptyProps(O)),function(n,e,t,r,a){if(0===t.length)return Wm(e.root,e.root,e,r,a);const c=function(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new _h(!0,0,n);let e=0,t=!1;const r=n.reduce((a,c,f)=>{if("object"==typeof c&&null!=c){if(c.outlets){const y={};return er(c.outlets,(w,D)=>{y[D]="string"==typeof w?w.split("/"):w}),[...a,{outlets:y}]}if(c.segmentPath)return[...a,c.segmentPath]}return"string"!=typeof c?[...a,c]:0===f?(c.split("/").forEach((y,w)=>{0==w&&"."===y||(0==w&&""===y?t=!0:".."===y?e++:""!=y&&a.push(y))}),a):[...a,c]},[]);return new _h(t,e,r)}(t);if(c.toRoot())return Wm(e.root,new jt([],{}),e,r,a);const f=function(n,e,t){if(n.isAbsolute)return new yc(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const c=t.snapshot._urlSegment;return new yc(c,c===e.root,0)}const r=mc(n.commands[0])?0:1;return function(n,e,t){let r=n,a=e,c=t;for(;c>a;){if(c-=a,r=r.parent,!r)throw new Error("Invalid number of '../'");a=r.segments.length}return new yc(r,!1,a-c)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(c,e,n),y=f.processChildren?vh(f.segmentGroup,f.index,c.commands):zm(f.segmentGroup,f.index,c.commands);return Wm(f.segmentGroup,y,e,r,a)}(D,this.currentUrlTree,t,O,null!=R?R:null)}navigateByUrl(t,r={skipLocationChange:!1}){const a=vu(t)?t:this.parseUrl(t),c=this.urlHandlingStrategy.merge(a,this.rawUrlTree);return this.scheduleNavigation(c,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(a){r=this.malformedUriErrorHandler(a,this.urlSerializer,t)}return r}isActive(t,r){let a;if(a=!0===r?Object.assign({},Lp):!1===r?Object.assign({},sy):r,vu(t))return fu(this.currentUrlTree,t,a);const c=this.parseUrl(t);return fu(this.currentUrlTree,c,a)}removeEmptyProps(t){return Object.keys(t).reduce((r,a)=>{const c=t[a];return null!=c&&(r[a]=c),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Xs(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,a,c,f){var y,w;if(this.disposed)return Promise.resolve(!1);const D=this.getTransition(),R=ro(r)&&D&&!ro(D.source),q=(this.lastSuccessfulId===D.id||this.currentNavigation?D.rawUrl:D.urlAfterRedirects).toString()===t.toString();if(R&&q)return Promise.resolve(!0);let te,Re,Fe;f?(te=f.resolve,Re=f.reject,Fe=f.promise):Fe=new Promise((Pt,Ft)=>{te=Pt,Re=Ft});const ot=++this.navigationId;let Ct;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(a=this.location.getState()),Ct=a&&a.\u0275routerPageId?a.\u0275routerPageId:c.replaceUrl||c.skipLocationChange?null!==(y=this.browserPageId)&&void 0!==y?y:0:(null!==(w=this.browserPageId)&&void 0!==w?w:0)+1):Ct=0,this.setTransition({id:ot,targetPageId:Ct,source:r,restoredState:a,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:c,resolve:te,reject:Re,promise:Fe,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Fe.catch(Pt=>Promise.reject(Pt))}setBrowserUrl(t,r){const a=this.urlSerializer.serialize(t),c=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(a)||r.extras.replaceUrl?this.location.replaceState(a,"",c):this.location.go(a,"",c)}restoreHistory(t,r=!1){var a,c;if("computed"===this.canceledNavigationResolution){const f=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(a=this.currentNavigation)||void 0===a?void 0:a.finalUrl)||0===f?this.currentUrlTree===(null===(c=this.currentNavigation)||void 0===c?void 0:c.finalUrl)&&0===f&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(f)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const a=new hu(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(a),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(g.DyG),g.LFG(lh),g.LFG(xa),g.LFG(at),g.LFG(g.zs3),g.LFG(g.v3s),g.LFG(g.Sil),g.LFG(void 0))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();function ro(n){return"imperative"!==n}let bu=(()=>{class n{constructor(t,r,a){this.router=t,this.route=r,this.locationStrategy=a,this.commands=[],this.onChanges=new ci.xQ,this.subscription=t.events.subscribe(c=>{c instanceof Xs&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,a,c,f){if(0!==t||r||a||c||f||"string"==typeof this.target&&"_self"!=this.target)return!0;const y={skipLocationChange:Rh(this.skipLocationChange),replaceUrl:Rh(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,y),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Rh(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(qr),g.Y36(pc),g.Y36(he))},n.\u0275dir=g.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&g.NdJ("click",function(c){return r.onClick(c.button,c.ctrlKey,c.shiftKey,c.altKey,c.metaKey)}),2&t&&(g.Ikx("href",r.href,g.LSH),g.uIk("target",r.target))},inputs:{routerLink:"routerLink",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[g.TTD]}),n})();function Rh(n){return""===n||!!n}let uy=(()=>{class n{constructor(t,r,a,c,f){this.parentContexts=t,this.location=r,this.resolver=a,this.changeDetector=f,this.activated=null,this._activatedRoute=null,this.activateEvents=new g.vpe,this.deactivateEvents=new g.vpe,this.name=c||Ue,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const f=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),y=this.parentContexts.getOrCreateContext(this.name).children,w=new mw(t,y,this.location.injector);this.activated=this.location.createComponent(f,this.location.length,w),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(xa),g.Y36(g.s_b),g.Y36(g._Vd),g.$8M("name"),g.Y36(g.sBO))},n.\u0275dir=g.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),n})();class mw{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===pc?this.route:e===xa?this.childContexts:this.parent.get(e,t)}}class Uv{}class jv{preload(e,t){return(0,ft.of)(null)}}let Vp=(()=>{class n{constructor(t,r,a,c,f){this.router=t,this.injector=c,this.preloadingStrategy=f,this.loader=new Lo(r,a,D=>t.triggerEvent(new U(D)),D=>t.triggerEvent(new Z(D)))}setUpPreloading(){this.subscription=this.router.events.pipe(Mo(t=>t instanceof Xs),ds(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(g.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const a=[];for(const c of r)if(c.loadChildren&&!c.canLoad&&c._loadedConfig){const f=c._loadedConfig;a.push(this.processRoutes(f.module,f.routes))}else c.loadChildren&&!c.canLoad?a.push(this.preloadConfig(t,c)):c.children&&a.push(this.processRoutes(t,c.children));return(0,mn.D)(a).pipe((0,us.J)(),(0,Nt.U)(c=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?(0,ft.of)(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,Br.zg)(c=>(r._loadedConfig=c,this.processRoutes(c.module,c.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(qr),g.LFG(g.v3s),g.LFG(g.Sil),g.LFG(g.zs3),g.LFG(Uv))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),Mh=(()=>{class n{constructor(t,r,a={}){this.router=t,this.viewportScroller=r,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration=a.scrollPositionRestoration||"disabled",a.anchorScrolling=a.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof vl?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Xs&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof vt&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new vt(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(qr),g.LFG(Ja),g.LFG(void 0))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const wu=new g.OlP("ROUTER_CONFIGURATION"),Hv=new g.OlP("ROUTER_FORROOT_GUARD"),Up=[at,{provide:lh,useClass:cp},{provide:qr,useFactory:function(n,e,t,r,a,c,f,y={},w,D){const R=new qr(null,n,e,t,r,a,c,yr(f));return w&&(R.urlHandlingStrategy=w),D&&(R.routeReuseStrategy=D),function(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy)}(y,R),y.enableTracing&&R.events.subscribe(O=>{var G,q;null===(G=console.group)||void 0===G||G.call(console,`Router Event: ${O.constructor.name}`),console.log(O.toString()),console.log(O),null===(q=console.groupEnd)||void 0===q||q.call(console)}),R},deps:[lh,xa,at,g.zs3,g.v3s,g.Sil,tr,wu,[class{},new g.FiY],[class{},new g.FiY]]},xa,{provide:pc,useFactory:function(n){return n.routerState.root},deps:[qr]},{provide:g.v3s,useClass:g.EAV},Vp,jv,class{preload(e,t){return t().pipe(cu(()=>(0,ft.of)(null)))}},{provide:wu,useValue:{enableTracing:!1}}];function FT(){return new g.PXZ("Router",qr)}let Gv=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[Up,cy(t),{provide:Hv,useFactory:yw,deps:[[qr,new g.FiY,new g.tp0]]},{provide:wu,useValue:r||{}},{provide:he,useFactory:VT,deps:[ce,[new g.tBr(Me),new g.FiY],wu]},{provide:Mh,useFactory:LT,deps:[qr,Ja,wu]},{provide:Uv,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:jv},{provide:g.PXZ,multi:!0,useFactory:FT},[qv,{provide:g.ip1,multi:!0,useFactory:Ew,deps:[qv]},{provide:bw,useFactory:UT,deps:[qv]},{provide:g.tb,multi:!0,useExisting:bw}]]}}static forChild(t){return{ngModule:n,providers:[cy(t)]}}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Hv,8),g.LFG(qr,8))},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({}),n})();function LT(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new Mh(n,e,t)}function VT(n,e,t={}){return t.useHash?new Ze(n,e):new De(n,e)}function yw(n){return"guarded"}function cy(n){return[{provide:g.deG,multi:!0,useValue:n},{provide:tr,multi:!0,useValue:n}]}let qv=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new ci.xQ}appInitializer(){return this.injector.get(P,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const a=new Promise(y=>r=y),c=this.injector.get(qr),f=this.injector.get(wu);return"disabled"===f.initialNavigation?(c.setUpLocationChangeListener(),r(!0)):"enabled"===f.initialNavigation||"enabledBlocking"===f.initialNavigation?(c.hooks.afterPreactivation=()=>this.initNavigation?(0,ft.of)(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),c.initialNavigation()):r(!0),a})}bootstrapListener(t){const r=this.injector.get(wu),a=this.injector.get(Vp),c=this.injector.get(Mh),f=this.injector.get(qr),y=this.injector.get(g.z2F);t===y.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&f.initialNavigation(),a.setUpPreloading(),c.init(),f.resetRootComponentType(y.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(g.zs3))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();function Ew(n){return n.appInitializer.bind(n)}function UT(n){return n.bootstrapListener.bind(n)}const bw=new g.OlP("Router Initializer");let ww=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-home"]],decls:14,vars:0,consts:[[1,"navbar","navbar-expand-lg","navbar-dark","bg-primary"],[1,"container-fluid"],["href","#",1,"navbar-brand"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarSupportedContent","aria-controls","navbarSupportedContent","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarSupportedContent",1,"collapse","navbar-collapse"],[1,"navbar-nav","me-auto","mb-2","mb-lg-0"],[1,"nav-item"],["aria-current","page","href","#",1,"nav-link","active"],["href","#",1,"nav-link","active"]],template:function(t,r){1&t&&(g.TgZ(0,"nav",0),g.TgZ(1,"div",1),g.TgZ(2,"a",2),g._uU(3,"Navbar"),g.qZA(),g.TgZ(4,"button",3),g._UZ(5,"span",4),g.qZA(),g.TgZ(6,"div",5),g.TgZ(7,"ul",6),g.TgZ(8,"li",7),g.TgZ(9,"a",8),g._uU(10,"Home"),g.qZA(),g.qZA(),g.TgZ(11,"li",7),g.TgZ(12,"a",9),g._uU(13,"Photo"),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA())},styles:[""]}),n})();F(8241);var it,BT=F(3394),ge=F(8239),Fl=F(8026),Bp=F(3910),Cc=F(5422),nn=F(3854),jT="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},lt={},ly=ly||{},wt=jT||self;function ms(){}function jp(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Hp(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Uo="closure_uid_"+(1e9*Math.random()>>>0),zv=0;function Iw(n,e,t){return n.call.apply(n.bind,arguments)}function Zv(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var a=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(a,r),n.apply(e,a)}}return function(){return n.apply(e,arguments)}}function zi(n,e,t){return(zi=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Iw:Zv).apply(null,arguments)}function $p(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Mi(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(r,a,c){for(var f=Array(arguments.length-2),y=2;y<arguments.length;y++)f[y-2]=arguments[y];return e.prototype[a].apply(r,f)}}function Ni(){this.s=this.s,this.o=this.o}var hy={};Ni.prototype.s=!1,Ni.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function(n){return Object.prototype.hasOwnProperty.call(n,Uo)&&n[Uo]||(n[Uo]=++zv)}(this);delete hy[n]}},Ni.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const fy=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function Cw(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function Dw(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(jp(r)){const a=n.length||0,c=r.length||0;n.length=a+c;for(let f=0;f<c;f++)n[a+f]=r[f]}else n.push(r)}}function mi(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}mi.prototype.h=function(){this.defaultPrevented=!0};var zR=function(){if(!wt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{wt.addEventListener("test",ms,e),wt.removeEventListener("test",ms,e)}catch(t){}return n}();function py(n){return/^[\s\xa0]*$/.test(n)}var HT=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function gy(n,e){return n<e?-1:n>e?1:0}function Gp(){var n=wt.navigator;return n&&(n=n.userAgent)?n:""}function Ra(n){return-1!=Gp().indexOf(n)}function qp(n){return qp[" "](n),n}qp[" "]=ms;var Kv,n,KR=Ra("Opera"),Wp=Ra("Trident")||Ra("MSIE"),$T=Ra("Edge"),Tw=$T||Wp,GT=Ra("Gecko")&&!(-1!=Gp().toLowerCase().indexOf("webkit")&&!Ra("Edge"))&&!(Ra("Trident")||Ra("MSIE"))&&!Ra("Edge"),YR=-1!=Gp().toLowerCase().indexOf("webkit")&&!Ra("Edge");function qT(){var n=wt.document;return n?n.documentMode:void 0}e:{var Aw="",Sw=(n=Gp(),GT?/rv:([^\);]+)(\)|;)/.exec(n):$T?/Edge\/([\d\.]+)/.exec(n):Wp?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):YR?/WebKit\/(\S+)/.exec(n):KR?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Sw&&(Aw=Sw?Sw[1]:""),Wp){var Ma=qT();if(null!=Ma&&Ma>parseFloat(Aw)){Kv=String(Ma);break e}}Kv=Aw}var Yv={};function WT(){return e=Yv,Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=function(){let n=0;const e=HT(String(Kv)).split("."),t=HT("9").split("."),r=Math.max(e.length,t.length);for(let f=0;0==n&&f<r;f++){var a=e[f]||"",c=t[f]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],c=/(\d*)(\D*)(.*)/.exec(c)||["","","",""],0==a[0].length&&0==c[0].length)break;n=gy(0==a[1].length?0:parseInt(a[1],10),0==c[1].length?0:parseInt(c[1],10))||gy(0==a[2].length,0==c[2].length)||gy(a[2],c[2]),a=a[3],c=c[3]}while(0==n)}return 0<=n}();var e}var xw=wt.document&&Wp&&(qT()||parseInt(Kv,10))||void 0;function Ll(n,e){if(mi.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(GT){e:{try{qp(e.nodeName);var a=!0;break e}catch(c){}a=!1}a||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:zT[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Ll.X.h.call(this)}}Mi(Ll,mi);var zT={2:"touch",3:"pen",4:"mouse"};Ll.prototype.h=function(){Ll.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var io="closure_listenable_"+(1e6*Math.random()|0),Rw=0;function ZT(n,e,t,r,a){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ha=a,this.key=++Rw,this.ba=this.ea=!1}function Qv(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function zp(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function Mw(n){const e={};for(const t in n)e[t]=n[t];return e}const Jv="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Nw(n,e){let t,r;for(let a=1;a<arguments.length;a++){for(t in r=arguments[a],r)n[t]=r[t];for(let c=0;c<Jv.length;c++)t=Jv[c],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function _y(n){this.src=n,this.g={},this.h=0}function Vl(n,e){var t=e.type;if(t in n.g){var c,r=n.g[t],a=fy(r,e);(c=0<=a)&&Array.prototype.splice.call(r,a,1),c&&(Qv(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Dc(n,e,t,r){for(var a=0;a<n.length;++a){var c=n[a];if(!c.ba&&c.listener==e&&c.capture==!!t&&c.ha==r)return a}return-1}_y.prototype.add=function(n,e,t,r,a){var c=n.toString();(n=this.g[c])||(n=this.g[c]=[],this.h++);var f=Dc(n,e,r,a);return-1<f?(e=n[f],t||(e.ea=!1)):((e=new ZT(e,this.src,c,!!r,a)).ea=t,n.push(e)),e};var Zp="closure_lm_"+(1e6*Math.random()|0),Tc={};function Nh(n,e,t,r,a){if(r&&r.once)return Xv(n,e,t,r,a);if(Array.isArray(e)){for(var c=0;c<e.length;c++)Nh(n,e[c],t,r,a);return null}return t=Ey(t),n&&n[io]?n.N(e,t,Hp(r)?!!r.capture:!!r,a):Ul(n,e,t,!1,r,a)}function Ul(n,e,t,r,a,c){if(!e)throw Error("Invalid event type");var f=Hp(a)?!!a.capture:!!a,y=Oh(n);if(y||(n[Zp]=y=new _y(n)),(t=y.add(e,t,r,f,c)).proxy)return t;if(r=function(){const e=Ow;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)zR||(a=f),void 0===a&&(a=!1),n.addEventListener(e.toString(),r,a);else if(n.attachEvent)n.attachEvent(vy(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function Xv(n,e,t,r,a){if(Array.isArray(e)){for(var c=0;c<e.length;c++)Xv(n,e[c],t,r,a);return null}return t=Ey(t),n&&n[io]?n.O(e,t,Hp(r)?!!r.capture:!!r,a):Ul(n,e,t,!0,r,a)}function eE(n,e,t,r,a){if(Array.isArray(e))for(var c=0;c<e.length;c++)eE(n,e[c],t,r,a);else r=Hp(r)?!!r.capture:!!r,t=Ey(t),n&&n[io]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Dc(c=n.g[e],t,r,a))&&(Qv(c[t]),Array.prototype.splice.call(c,t,1),0==c.length&&(delete n.g[e],n.h--))):n&&(n=Oh(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Dc(e,t,r,a)),(t=-1<n?e[n]:null)&&Kp(t))}function Kp(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[io])Vl(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(vy(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Oh(e))?(Vl(t,n),0==t.h&&(t.src=null,e[Zp]=null)):Qv(n)}}}function vy(n){return n in Tc?Tc[n]:Tc[n]="on"+n}function Ow(n,e){if(n.ba)n=!0;else{e=new Ll(e,this);var t=n.listener,r=n.ha||n.src;n.ea&&Kp(n),n=t.call(r,e)}return n}function Oh(n){return(n=n[Zp])instanceof _y?n:null}var tE="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ey(n){return"function"==typeof n?n:(n[tE]||(n[tE]=function(e){return n.handleEvent(e)}),n[tE])}function yi(){Ni.call(this),this.i=new _y(this),this.P=this,this.I=null}function Wr(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new mi(e,n);else if(e instanceof mi)e.target=e.target||n;else{var a=e;Nw(e=new mi(r,n),a)}if(a=!0,t)for(var c=t.length-1;0<=c;c--){var f=e.g=t[c];a=Yp(f,r,!0,e)&&a}if(a=Yp(f=e.g=n,r,!0,e)&&a,a=Yp(f,r,!1,e)&&a,t)for(c=0;c<t.length;c++)a=Yp(f=e.g=t[c],r,!1,e)&&a}function Yp(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var a=!0,c=0;c<e.length;++c){var f=e[c];if(f&&!f.ba&&f.capture==t){var y=f.listener,w=f.ha||f.src;f.ea&&Vl(n.i,f),a=!1!==y.call(w,r)&&a}}return a&&!r.defaultPrevented}Mi(yi,Ni),yi.prototype[io]=!0,yi.prototype.removeEventListener=function(n,e,t,r){eE(this,n,e,t,r)},yi.prototype.M=function(){if(yi.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Qv(t[r]);delete n.g[e],n.h--}}this.I=null},yi.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},yi.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var nE=wt.JSON.stringify;function kw(){var n=JT;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Lw,Pw=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new ks,n=>n.reset());class ks{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function QT(n){wt.setTimeout(()=>{throw n},0)}function Fw(n,e){Lw||function(){var n=wt.Promise.resolve(void 0);Lw=function(){n.then(XT)}}(),by||(Lw(),by=!0),JT.add(n,e)}var by=!1,JT=new class{constructor(){this.h=this.g=null}add(e,t){const r=Pw.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function XT(){for(var n;n=kw();){try{n.h.call(n.g)}catch(t){QT(t)}var e=Pw;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}by=!1}function kh(n,e){yi.call(this),this.h=n||1,this.g=e||wt,this.j=zi(this.lb,this),this.l=Date.now()}function wy(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function rE(n,e,t){if("function"==typeof n)t&&(n=zi(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=zi(n.handleEvent,n)}return 2147483647<Number(e)?-1:wt.setTimeout(n,e||0)}function Vw(n){n.g=rE(()=>{n.g=null,n.i&&(n.i=!1,Vw(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Mi(kh,yi),(it=kh.prototype).ca=!1,it.R=null,it.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Wr(this,"tick"),this.ca&&(wy(this),this.start()))}},it.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},it.M=function(){kh.X.M.call(this),wy(this),delete this.g};class eA extends Ni{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Vw(this)}M(){super.M(),this.g&&(wt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ph(n){Ni.call(this),this.h=n,this.g={}}Mi(Ph,Ni);var Uw=[];function iE(n,e,t,r){Array.isArray(t)||(t&&(Uw[0]=t.toString()),t=Uw);for(var a=0;a<t.length;a++){var c=Nh(e,t[a],r||n.handleEvent,!1,n.h||n);if(!c)break;n.g[c.key]=c}}function Bw(n){zp(n.g,function(e,t){this.g.hasOwnProperty(t)&&Kp(e)},n),n.g={}}function Iy(){this.g=!0}function Fh(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var a=r[1];if(Array.isArray(a)&&!(1>a.length)){var c=a[0];if("noop"!=c&&"stop"!=c&&"close"!=c)for(var f=1;f<a.length;f++)a[f]=""}}}return nE(t)}catch(y){return e}}(n,t)+(r?" "+r:"")})}Ph.prototype.M=function(){Ph.X.M.call(this),Bw(this)},Ph.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Iy.prototype.Aa=function(){this.g=!1},Iy.prototype.info=function(){};var Bl={},$w=null;function oE(){return $w=$w||new yi}function aE(n){mi.call(this,Bl.Pa,n)}function Qp(n){const e=oE();Wr(e,new aE(e,n))}function Gw(n,e){mi.call(this,Bl.STAT_EVENT,n),this.stat=e}function Zi(n){const e=oE();Wr(e,new Gw(e,n))}function Cy(n,e){mi.call(this,Bl.Qa,n),this.size=e}function Jp(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return wt.setTimeout(function(){n()},e)}Bl.Pa="serverreachability",Mi(aE,mi),Bl.STAT_EVENT="statevent",Mi(Gw,mi),Bl.Qa="timingevent",Mi(Cy,mi);var Dy={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},Xp={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function eg(){}function Ty(){}eg.prototype.h=null;var cE,jl={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function Ay(){mi.call(this,"d")}function uE(){mi.call(this,"c")}function Lh(){}function Sy(n,e,t,r){this.l=n,this.j=e,this.m=t,this.U=r||1,this.S=new Ph(this),this.O=zw,this.T=new kh(n=Tw?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new Ww}function Ww(){this.i=null,this.g="",this.h=!1}Mi(Ay,mi),Mi(uE,mi),Mi(Lh,eg),Lh.prototype.g=function(){return new XMLHttpRequest},Lh.prototype.i=function(){return{}},cE=new Lh;var zw=45e3,xy={},tg={};function Ry(n,e,t){n.K=1,n.v=ig(jo(e)),n.s=t,n.P=!0,lE(n,null)}function lE(n,e){n.F=Date.now(),rg(n),n.A=jo(n.v);var t=n.A,r=n.U;Array.isArray(r)||(r=[String(r)]),aA(t.i,"t",r),n.C=0,t=n.l.H,n.h=new Ww,n.g=jh(n.l,t?e:null,!n.s),0<n.N&&(n.L=new eA(zi(n.La,n,n.g),n.N)),iE(n.S,n.g,"readystatechange",n.ib),e=n.H?Mw(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),Qp(1),function(n,e,t,r,a,c){n.info(function(){if(n.g)if(c)for(var f="",y=c.split("&"),w=0;w<y.length;w++){var D=y[w].split("=");if(1<D.length){var R=D[0];D=D[1];var O=R.split("_");f=2<=O.length&&"type"==O[1]?f+(R+"=")+D+"&":f+(R+"=redacted&")}}else f=null;else f=c;return"XMLHTTP REQ ("+r+") [attempt "+a+"]: "+e+"\n"+t+"\n"+f})}(n.j,n.u,n.A,n.m,n.U,n.s)}function Oa(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function ng(n,e,t){let a,r=!0;for(;!n.I&&n.C<t.length;){if(a=tA(n,t),a==tg){4==e&&(n.o=4,Zi(14),r=!1),Fh(n.j,n.m,null,"[Incomplete Response]");break}if(a==xy){n.o=4,Zi(15),Fh(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Fh(n.j,n.m,a,null),Hl(n,a)}Oa(n)&&a!=tg&&a!=xy&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Zi(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),TE(e),e.K=!0,Zi(11))):(Fh(n.j,n.m,t,"[Invalid Chunked Response]"),Bo(n),Vh(n))}function tA(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?tg:(t=Number(e.substring(t,r)),isNaN(t)?xy:(r+=1)+t>e.length?tg:(e=e.substr(r,t),n.C=r+t,e))}function rg(n){n.V=Date.now()+n.O,nA(n,n.O)}function nA(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Jp(zi(n.gb,n),e)}function Iu(n){n.B&&(wt.clearTimeout(n.B),n.B=null)}function Vh(n){0==n.l.G||n.I||uI(n.l,n)}function Bo(n){Iu(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,wy(n.T),Bw(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function Hl(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||ky(t.h,n)))if(!n.J&&ky(t.h,n)&&3==t.G){try{var r=t.Fa.g.parse(e)}catch(D){r=null}if(Array.isArray(r)&&3==r.length){var a=r;if(0==a[0])e:if(t.u)t.Ba=a[1],0<t.Ba-t.T&&37500>a[2]&&t.L&&0==t.A&&!t.v&&(t.v=Jp(zi(t.cb,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;jy(t),pg(t)}DE(t),Zi(18)}if(1>=mE(t.h)&&t.ja){try{t.ja()}catch(D){}t.ja=void 0}}else oo(t,11)}else if((n.J||t.g==n)&&jy(t),!py(e))for(a=t.Fa.g.parse(e),e=0;e<a.length;e++){let D=a[e];if(t.T=D[0],D=D[1],2==t.G)if("c"==D[0]){t.I=D[1],t.ka=D[2];const R=D[3];null!=R&&(t.ma=R,t.j.info("VER="+t.ma));const O=D[4];null!=O&&(t.Ca=O,t.j.info("SVER="+t.Ca));const G=D[5];null!=G&&"number"==typeof G&&0<G&&(t.J=r=1.5*G,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const q=n.g;if(q){const te=q.g?q.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(te){var c=r.h;c.g||-1==te.indexOf("spdy")&&-1==te.indexOf("quic")&&-1==te.indexOf("h2")||(c.j=c.l,c.g=new Set,c.h&&(Py(c,c.h),c.h=null))}if(r.D){const Re=q.g?q.g.getResponseHeader("X-HTTP-Session-Id"):null;Re&&(r.za=Re,cn(r.F,r.D,Re))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var f=n;if((r=t).sa=ao(r,r.H?r.ka:null,r.V),f.J){yE(r.h,f);var y=f,w=r.J;w&&y.setTimeout(w),y.B&&(Iu(y),rg(y)),r.g=f}else oI(r);0<t.i.length&&CE(t)}else"stop"!=D[0]&&"close"!=D[0]||oo(t,7);else 3==t.G&&("stop"==D[0]||"close"==D[0]?"stop"==D[0]?oo(t,7):Vy(t):"noop"!=D[0]&&t.l&&t.l.wa(D),t.A=0)}Qp(4)}catch(D){}}function hE(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(jp(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if("undefined"!=typeof Map&&n instanceof Map)return Array.from(n.keys());if(!("undefined"!=typeof Set&&n instanceof Set)){if(jp(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function(n){if(n.W&&"function"==typeof n.W)return n.W();if("undefined"!=typeof Map&&n instanceof Map||"undefined"!=typeof Set&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(jp(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),a=r.length,c=0;c<a;c++)e.call(void 0,r[c],t&&t[c],n)}(it=Sy.prototype).setTimeout=function(n){this.O=n},it.ib=function(n){n=n.target;const e=this.L;e&&3==Ac(n)?e.l():this.La(n)},it.La=function(n){try{if(n==this.g)e:{const R=Ac(this.g);var e=this.g.Ea();const O=this.g.aa();if(!(3>R)&&(3!=R||Tw||this.g&&(this.h.h||this.g.fa()||so(this.g)))){this.I||4!=R||7==e||Qp(8==e||0>=O?3:2),Iu(this);var t=this.g.aa();this.Y=t;t:if(Oa(this)){var r=so(this.g);n="";var a=r.length,c=4==Ac(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Bo(this),Vh(this);var f="";break t}this.h.i=new wt.TextDecoder}for(e=0;e<a;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:c&&e==a-1});r.splice(0,a),this.h.g+=n,this.C=0,f=this.h.g}else f=this.g.fa();if(this.i=200==t,function(n,e,t,r,a,c,f){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+a+"]: "+e+"\n"+t+"\n"+c+" "+f})}(this.j,this.u,this.A,this.m,this.U,R,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var y,w=this.g;if((y=w.g?w.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!py(y)){var D=y;break t}}D=null}if(!(t=D)){this.i=!1,this.o=3,Zi(12),Bo(this),Vh(this);break e}Fh(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Hl(this,t)}this.P?(ng(this,R,f),Tw&&this.i&&3==R&&(iE(this.S,this.T,"tick",this.hb),this.T.start())):(Fh(this.j,this.m,f,null),Hl(this,f)),4==R&&Bo(this),this.i&&!this.I&&(4==R?uI(this.l,this):(this.i=!1,rg(this)))}else 400==t&&0<f.indexOf("Unknown SID")?(this.o=3,Zi(12)):(this.o=0,Zi(13)),Bo(this),Vh(this)}}}catch(R){}},it.hb=function(){if(this.g){var n=Ac(this.g),e=this.g.fa();this.C<e.length&&(Iu(this),ng(this,n,e),this.i&&4!=n&&rg(this))}},it.cancel=function(){this.I=!0,Bo(this)},it.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Qp(3),Zi(17)),Bo(this),this.o=2,Vh(this)):nA(this,this.V-n)};var Zw=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function $l(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof $l){this.h=void 0!==e?e:n.h,My(this,n.j),this.s=n.s,this.g=n.g,Ny(this,n.m),this.l=n.l,e=n.i;var t=new ag;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),fE(this,t),this.o=n.o}else n&&(t=String(n).match(Zw))?(this.h=!!e,My(this,t[1]||"",!0),this.s=sg(t[2]||""),this.g=sg(t[3]||"",!0),Ny(this,t[4]),this.l=sg(t[5]||"",!0),fE(this,t[6]||"",!0),this.o=sg(t[7]||"")):(this.h=!!e,this.i=new ag(null,this.h))}function jo(n){return new $l(n)}function My(n,e,t){n.j=t?sg(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Ny(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function fE(n,e,t){e instanceof ag?(n.i=e,function(n,e){e&&!n.j&&(Cu(n),n.i=null,n.g.forEach(function(t,r){var a=r.toLowerCase();r!=a&&(xn(this,r),aA(this,a,t))},n)),n.j=e}(n.i,n.h)):(t||(e=og(e,oA)),n.i=new ag(e,n.h))}function cn(n,e,t){n.i.set(e,t)}function ig(n){return cn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function sg(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function og(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,Uh),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function Uh(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}$l.prototype.toString=function(){var n=[],e=this.j;e&&n.push(og(e,Yw,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(og(e,Yw,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(og(t,"/"==t.charAt(0)?sA:iA,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",og(t,JR)),n.join("")};var Yw=/[#\/\?@]/g,iA=/[#\?:]/g,sA=/[#\?]/g,oA=/[#\?@]/g,JR=/#/g;function ag(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Cu(n){n.g||(n.g=new Map,n.h=0,n.i&&function(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),a=null;if(0<=r){var c=n[t].substring(0,r);a=n[t].substring(r+1)}else c=n[t];e(c,a?decodeURIComponent(a.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function xn(n,e){Cu(n),e=ys(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function Oy(n,e){return Cu(n),e=ys(n,e),n.g.has(e)}function aA(n,e,t){xn(n,e),0<t.length&&(n.i=null,n.g.set(ys(n,e),Cw(t)),n.h+=t.length)}function ys(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function uA(n){this.l=n||cA,n=wt.PerformanceNavigationTiming?0<(n=wt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(wt.g&&wt.g.Ga&&wt.g.Ga()&&wt.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(it=ag.prototype).add=function(n,e){Cu(this),this.i=null,n=ys(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},it.forEach=function(n,e){Cu(this),this.g.forEach(function(t,r){t.forEach(function(a){n.call(e,a,r,this)},this)},this)},it.oa=function(){Cu(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const a=n[r];for(let c=0;c<a.length;c++)t.push(e[r])}return t},it.W=function(n){Cu(this);let e=[];if("string"==typeof n)Oy(this,n)&&(e=e.concat(this.g.get(ys(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},it.set=function(n,e){return Cu(this),this.i=null,Oy(this,n=ys(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},it.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},it.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const c=encodeURIComponent(String(r)),f=this.W(r);for(r=0;r<f.length;r++){var a=c;""!==f[r]&&(a+="="+encodeURIComponent(String(f[r]))),n.push(a)}}return this.i=n.join("&")};var cA=10;function Qw(n){return!!n.h||!!n.g&&n.g.size>=n.j}function mE(n){return n.h?1:n.g?n.g.size:0}function ky(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Py(n,e){n.g?n.g.add(e):n.h=e}function yE(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function Jw(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return Cw(n.i)}function _E(){}function ug(){this.g=new _E}function vE(n,e,t){const r=t||"";try{hE(n,function(a,c){let f=a;Hp(a)&&(f=nE(a)),e.push(r+c+"="+encodeURIComponent(f))})}catch(a){throw e.push(r+"type="+encodeURIComponent("_badmap")),a}}function cg(n,e,t,r,a){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,a(r)}catch(c){}}function Bh(n){this.l=n.ac||null,this.j=n.jb||!1}function lg(n,e){yi.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=EE,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}uA.prototype.cancel=function(){if(this.i=Jw(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},_E.prototype.stringify=function(n){return wt.JSON.stringify(n,void 0)},_E.prototype.parse=function(n){return wt.JSON.parse(n,void 0)},Mi(Bh,eg),Bh.prototype.g=function(){return new lg(this.l,this.j)},Bh.prototype.i=function(n){return function(){return n}}({}),Mi(lg,yi);var EE=0;function eI(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function dg(n){n.readyState=4,n.l=null,n.j=null,n.A=null,hg(n)}function hg(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(it=lg.prototype).open=function(n,e){if(this.readyState!=EE)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,hg(this)},it.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||wt).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},it.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,dg(this)),this.readyState=EE},it.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,hg(this)),this.g&&(this.readyState=3,hg(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(void 0!==wt.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;eI(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},it.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?dg(this):hg(this),3==this.readyState&&eI(this)}},it.Va=function(n){this.g&&(this.response=this.responseText=n,dg(this))},it.Ua=function(n){this.g&&(this.response=n,dg(this))},it.ga=function(){this.g&&dg(this)},it.setRequestHeader=function(n,e){this.v.append(n,e)},it.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},it.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(lg.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var tI=wt.JSON.parse;function cr(n){yi.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=bE,this.K=this.L=!1}Mi(cr,yi);var bE="",lA=/^https?$/i,dA=["POST","PUT"];function hA(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,Fy(n),fg(n)}function Fy(n){n.D||(n.D=!0,Wr(n,"complete"),Wr(n,"error"))}function nI(n){if(n.h&&void 0!==ly&&(!n.C[1]||4!=Ac(n)||2!=n.aa()))if(n.v&&4==Ac(n))rE(n.Ha,0,n);else if(Wr(n,"readystatechange"),4==Ac(n)){n.h=!1;try{const y=n.aa();e:switch(y){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===y){var a=String(n.H).match(Zw)[1]||null;if(!a&&wt.self&&wt.self.location){var c=wt.self.location.protocol;a=c.substr(0,c.length-1)}r=!lA.test(a?a.toLowerCase():"")}t=r}if(t)Wr(n,"complete"),Wr(n,"success");else{n.m=6;try{var f=2<Ac(n)?n.g.statusText:""}catch(w){f=""}n.j=f+" ["+n.aa()+"]",Fy(n)}}finally{fg(n)}}}function fg(n,e){if(n.g){wE(n);const t=n.g,r=n.C[0]?ms:null;n.g=null,n.C=null,e||Wr(n,"ready");try{t.onreadystatechange=r}catch(a){}}}function wE(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(wt.clearTimeout(n.A),n.A=null)}function Ac(n){return n.g?n.g.readyState:0}function so(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case bE:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function fA(n){let e="";return zp(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function rI(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=fA(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):cn(n,e,t))}function Ly(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function IE(n){this.Ca=0,this.i=[],this.j=new Iy,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=Ly("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=Ly("baseRetryDelayMs",5e3,n),this.bb=Ly("retryDelaySeedMs",1e4,n),this.$a=Ly("forwardChannelMaxRetries",2,n),this.ta=Ly("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new uA(n&&n.concurrentRequestLimit),this.Fa=new ug,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function Vy(n){if(iI(n),3==n.G){var e=n.U++,t=jo(n.F);cn(t,"SID",n.I),cn(t,"RID",e),cn(t,"TYPE","terminate"),gg(n,t),(e=new Sy(n,n.j,e,void 0)).K=2,e.v=ig(jo(t)),t=!1,wt.navigator&&wt.navigator.sendBeacon&&(t=wt.navigator.sendBeacon(e.v.toString(),"")),!t&&wt.Image&&((new Image).src=e.v,t=!0),t||(e.g=jh(e.l,null),e.g.da(e.v)),e.F=Date.now(),rg(e)}AE(n)}function pg(n){n.g&&(TE(n),n.g.cancel(),n.g=null)}function iI(n){pg(n),n.u&&(wt.clearTimeout(n.u),n.u=null),jy(n),n.h.cancel(),n.m&&("number"==typeof n.m&&wt.clearTimeout(n.m),n.m=null)}function CE(n){Qw(n.h)||n.m||(n.m=!0,Fw(n.Ja,n),n.C=0)}function Uy(n,e){var t;t=e?e.m:n.U++;const r=jo(n.F);cn(r,"SID",n.I),cn(r,"RID",t),cn(r,"AID",n.T),gg(n,r),n.o&&n.s&&rI(r,n.o,n.s),t=new Sy(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=By(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),Py(n.h,t),Ry(t,r,e)}function gg(n,e){n.ia&&zp(n.ia,function(t,r){cn(e,r,t)}),n.l&&hE({},function(t,r){cn(e,r,t)})}function By(n,e,t){t=Math.min(n.i.length,t);var r=n.l?zi(n.l.Ra,n.l,n):null;e:{var a=n.i;let c=-1;for(;;){const f=["count="+t];-1==c?0<t?(c=a[0].h,f.push("ofs="+c)):c=0:f.push("ofs="+c);let y=!0;for(let w=0;w<t;w++){let D=a[w].h;const R=a[w].g;if(D-=c,0>D)c=Math.max(0,a[w].h-100),y=!1;else try{vE(R,f,"req"+D+"_")}catch(O){r&&r(R)}}if(y){r=f.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,r}function oI(n){n.g||n.u||(n.Z=1,Fw(n.Ia,n),n.A=0)}function DE(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=Jp(zi(n.Ia,n),mg(n,n.A)),n.A++,0))}function TE(n){null!=n.B&&(wt.clearTimeout(n.B),n.B=null)}function aI(n){n.g=new Sy(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=jo(n.sa);cn(e,"RID","rpc"),cn(e,"SID",n.I),cn(e,"CI",n.L?"0":"1"),cn(e,"AID",n.T),cn(e,"TYPE","xmlhttp"),gg(n,e),n.o&&n.s&&rI(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=ig(jo(e)),t.s=null,t.P=!0,lE(t,n)}function jy(n){null!=n.v&&(wt.clearTimeout(n.v),n.v=null)}function uI(n,e){var t=null;if(n.g==e){jy(n),TE(n),n.g=null;var r=2}else{if(!ky(n.h,e))return;t=e.D,yE(n.h,e),r=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var a=n.C;Wr(r=oE(),new Cy(r,t,e,a)),CE(n)}else oI(n);else if(3==(a=e.o)||0==a&&0<n.pa||!(1==r&&function(n,e){return!(mE(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=Jp(zi(n.Ja,n,e),mg(n,n.C)),n.C++,0)))}(n,e)||2==r&&DE(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),a){case 1:oo(n,5);break;case 4:oo(n,10);break;case 3:oo(n,6);break;default:oo(n,2)}}function mg(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function oo(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=zi(n.kb,n);t||(t=new $l("//www.google.com/images/cleardot.gif"),wt.location&&"http"==wt.location.protocol||My(t,"https"),ig(t)),function(n,e){const t=new Iy;if(wt.Image){const r=new Image;r.onload=$p(cg,t,r,"TestLoadImage: loaded",!0,e),r.onerror=$p(cg,t,r,"TestLoadImage: error",!1,e),r.onabort=$p(cg,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=$p(cg,t,r,"TestLoadImage: timeout",!1,e),wt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Zi(2);n.G=0,n.l&&n.l.va(e),AE(n),iI(n)}function AE(n){if(n.G=0,n.la=[],n.l){const e=Jw(n.h);(0!=e.length||0!=n.i.length)&&(Dw(n.la,e),Dw(n.la,n.i),n.h.i.length=0,Cw(n.i),n.i.length=0),n.l.ua()}}function ao(n,e,t){var r=t instanceof $l?jo(t):new $l(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),Ny(r,r.m);else{var a=wt.location;r=a.protocol,e=e?e+"."+a.hostname:a.hostname,a=+a.port;var c=new $l(null,void 0);r&&My(c,r),e&&(c.g=e),a&&Ny(c,a),t&&(c.l=t),r=c}return e=n.za,(t=n.D)&&e&&cn(r,t,e),cn(r,"VER",n.ma),gg(n,r),r}function jh(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new cr(t&&n.Da&&!n.ra?new Bh({jb:!0}):n.ra)).Ka(n.H),e}function cI(){}function Hy(){if(Wp&&!(10<=Number(xw)))throw Error("Environmental error: no available transport.")}function Ki(n,e){yi.call(this),this.g=new IE(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!py(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!py(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new lr(this)}function Ho(n){Ay.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function Hh(){uE.call(this),this.status=1}function lr(n){this.g=n}(it=cr.prototype).Ka=function(n){this.L=n},it.da=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():cE.g(),this.C=function(n){return n.h||(n.h=n.i())}(this.u?this.u:cE),this.g.onreadystatechange=zi(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(c){return void hA(this,c)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var a in r)t.set(a,r[a]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const c of r.keys())t.set(c,r.get(c))}r=Array.from(t.keys()).find(c=>"content-type"==c.toLowerCase()),a=wt.FormData&&n instanceof wt.FormData,!(0<=fy(dA,e))||r||a||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[c,f]of t)this.g.setRequestHeader(c,f);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{wE(this),0<this.B&&((this.K=function(n){return Wp&&WT()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=zi(this.qa,this)):this.A=rE(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(c){hA(this,c)}},it.qa=function(){void 0!==ly&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Wr(this,"timeout"),this.abort(8))},it.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Wr(this,"complete"),Wr(this,"abort"),fg(this))},it.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),fg(this,!0)),cr.X.M.call(this)},it.Ha=function(){this.s||(this.F||this.v||this.l?nI(this):this.fb())},it.fb=function(){nI(this)},it.aa=function(){try{return 2<Ac(this)?this.g.status:-1}catch(n){return-1}},it.fa=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},it.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),tI(e)}},it.Ea=function(){return this.m},it.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(it=IE.prototype).ma=8,it.G=1,it.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const a=new Sy(this,this.j,n,void 0);let c=this.s;if(this.S&&(c?(c=Mw(c),Nw(c,this.S)):c=this.S),null!==this.o||this.N||(a.H=c,c=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=By(this,a,e),cn(t=jo(this.F),"RID",n),cn(t,"CVER",22),this.D&&cn(t,"X-HTTP-Session-Id",this.D),gg(this,t),c&&(this.N?e="headers="+encodeURIComponent(String(fA(c)))+"&"+e:this.o&&rI(t,this.o,c)),Py(this.h,a),this.Ya&&cn(t,"TYPE","init"),this.O?(cn(t,"$req",e),cn(t,"SID","null"),a.Z=!0,Ry(a,t,null)):Ry(a,t,e),this.G=2}}else 3==this.G&&(n?Uy(this,n):0==this.i.length||Qw(this.h)||Uy(this))},it.Ia=function(){if(this.u=null,aI(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=Jp(zi(this.eb,this),n)}},it.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Zi(10),pg(this),aI(this))},it.cb=function(){null!=this.v&&(this.v=null,pg(this),DE(this),Zi(19))},it.kb=function(n){n?(this.j.info("Successfully pinged google.com"),Zi(2)):(this.j.info("Failed to ping google.com"),Zi(1))},(it=cI.prototype).xa=function(){},it.wa=function(){},it.va=function(){},it.ua=function(){},it.Ra=function(){},Hy.prototype.g=function(n,e){return new Ki(n,e)},Mi(Ki,yi),Ki.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;Zi(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=ao(n,null,n.V),CE(n)},Ki.prototype.close=function(){Vy(this.g)},Ki.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=nE(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&CE(e)},Ki.prototype.M=function(){this.g.l=null,delete this.j,Vy(this.g),delete this.g,Ki.X.M.call(this)},Mi(Ho,Ay),Mi(Hh,uE),Mi(lr,cI),lr.prototype.xa=function(){Wr(this.g,"a")},lr.prototype.wa=function(n){Wr(this.g,new Ho(n))},lr.prototype.va=function(n){Wr(this.g,new Hh(n))},lr.prototype.ua=function(){Wr(this.g,"b")},Hy.prototype.createWebChannel=Hy.prototype.g,Ki.prototype.send=Ki.prototype.u,Ki.prototype.open=Ki.prototype.m,Ki.prototype.close=Ki.prototype.close,Dy.NO_ERROR=0,Dy.TIMEOUT=8,Dy.HTTP_ERROR=6,Xp.COMPLETE="complete",Ty.EventType=jl,jl.OPEN="a",jl.CLOSE="b",jl.ERROR="c",jl.MESSAGE="d",yi.prototype.listen=yi.prototype.N,cr.prototype.listenOnce=cr.prototype.O,cr.prototype.getLastError=cr.prototype.Oa,cr.prototype.getLastErrorCode=cr.prototype.Ea,cr.prototype.getStatus=cr.prototype.aa,cr.prototype.getResponseJson=cr.prototype.Sa,cr.prototype.getResponseText=cr.prototype.fa,cr.prototype.send=cr.prototype.da,cr.prototype.setWithCredentials=cr.prototype.Ka;var Gl=lt.createWebChannelTransport=function(){return new Hy},$y=lt.getStatEventTarget=function(){return oE()},_s=lt.ErrorCode=Dy,SE=lt.EventType=Xp,$h=lt.Event=Bl,ql=lt.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},Gh=lt.FetchXmlHttpFactory=Bh,Du=lt.WebChannel=Ty,qh=lt.XhrIo=cr;const Wl="@firebase/firestore";class Gn{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Gn.UNAUTHENTICATED=new Gn(null),Gn.GOOGLE_CREDENTIALS=new Gn("google-credentials-uid"),Gn.FIRST_PARTY=new Gn("first-party-uid"),Gn.MOCK_USER=new Gn("mock-user");let $o="9.12.1";const Ps=new Cc.Yd("@firebase/firestore");function Gy(){return Ps.logLevel}function Ne(n,...e){if(Ps.logLevel<=Cc.in.DEBUG){const t=e.map(qy);Ps.debug(`Firestore (${$o}): ${n}`,...t)}}function nr(n,...e){if(Ps.logLevel<=Cc.in.ERROR){const t=e.map(qy);Ps.error(`Firestore (${$o}): ${n}`,...t)}}function Sc(n,...e){if(Ps.logLevel<=Cc.in.WARN){const t=e.map(qy);Ps.warn(`Firestore (${$o}): ${n}`,...t)}}function qy(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function Je(n="Unexpected state"){const e=`FIRESTORE (${$o}) INTERNAL ASSERTION FAILED: `+n;throw nr(e),new Error(e)}function pt(n,e){n||Je()}function $e(n,e){return n}const de={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ce extends nn.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Tr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class xE{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class pA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Gn.UNAUTHENTICATED))}shutdown(){}}class eM{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class gA{constructor(e){this.t=e,this.currentUser=Gn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let a=this.i;const c=D=>this.i!==a?(a=this.i,t(D)):Promise.resolve();let f=new Tr;this.o=()=>{this.i++,this.currentUser=this.u(),f.resolve(),f=new Tr,e.enqueueRetryable(()=>c(this.currentUser))};const y=()=>{const D=f;e.enqueueRetryable((0,ge.Z)(function*(){yield D.promise,yield c(r.currentUser)}))},w=D=>{Ne("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=D,this.auth.addAuthTokenListener(this.o),y()};this.t.onInit(D=>w(D)),setTimeout(()=>{if(!this.auth){const D=this.t.getImmediate({optional:!0});D?w(D):(Ne("FirebaseAuthCredentialsProvider","Auth not yet detected"),f.resolve(),f=new Tr)}},0),y()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Ne("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(pt("string"==typeof r.accessToken),new xE(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return pt(null===e||"string"==typeof e),new Gn(e)}}class hI{constructor(e,t,r,a){this.h=e,this.l=t,this.m=r,this.g=a,this.type="FirstParty",this.user=Gn.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(pt(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class mA{constructor(e,t,r,a){this.h=e,this.l=t,this.m=r,this.g=a}getToken(){return Promise.resolve(new hI(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(Gn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class RE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class yA{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=c=>{null!=c.error&&Ne("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const f=c.token!==this.A;return this.A=c.token,Ne("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?t(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable(()=>r(c))};const a=c=>{Ne("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.appCheck.addTokenListener(this.o)};this.T.onInit(c=>a(c)),setTimeout(()=>{if(!this.appCheck){const c=this.T.getImmediate({optional:!0});c?a(c):Ne("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(pt("string"==typeof t.token),this.A=t.token,new RE(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function nM(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class fI{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const a=nM(40);for(let c=0;c<a.length;++c)r.length<20&&a[c]<t&&(r+=e.charAt(a[c]%e.length))}return r}}function Rt(n,e){return n<e?-1:n>e?1:0}function yg(n,e,t){return n.length===e.length&&n.every((r,a)=>t(r,e[a]))}function _A(n){return n+"\0"}class qn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ce(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ce(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ce(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ce(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return qn.fromMillis(Date.now())}static fromDate(e){return qn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new qn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Rt(this.nanoseconds,e.nanoseconds):Rt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class mt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new mt(e)}static min(){return new mt(new qn(0,0))}static max(){return new mt(new qn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Wy{constructor(e,t,r){void 0===t?t=0:t>e.length&&Je(),void 0===r?r=e.length-t:r>e.length-t&&Je(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Wy.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Wy?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let a=0;a<r;a++){const c=e.get(a),f=t.get(a);if(c<f)return-1;if(c>f)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Jt extends Wy{construct(e,t,r){return new Jt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ce(de.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(a=>a.length>0))}return new Jt(t)}static emptyPath(){return new Jt([])}}const vA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Fn extends Wy{construct(e,t,r){return new Fn(e,t,r)}static isValidIdentifier(e){return vA.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Fn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Fn(["__name__"])}static fromServerFormat(e){const t=[];let r="",a=0;const c=()=>{if(0===r.length)throw new Ce(de.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let f=!1;for(;a<e.length;){const y=e[a];if("\\"===y){if(a+1===e.length)throw new Ce(de.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const w=e[a+1];if("\\"!==w&&"."!==w&&"`"!==w)throw new Ce(de.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=w,a+=2}else"`"===y?(f=!f,a++):"."!==y||f?(r+=y,a++):(c(),a++)}if(c(),f)throw new Ce(de.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Fn(t)}static emptyPath(){return new Fn([])}}class Ve{constructor(e){this.path=e}static fromPath(e){return new Ve(Jt.fromString(e))}static fromName(e){return new Ve(Jt.fromString(e).popFirst(5))}static empty(){return new Ve(Jt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Jt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Jt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ve(new Jt(e.slice()))}}class zy{constructor(e,t,r,a){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=a}}function pI(n){return n.fields.find(e=>2===e.kind)}function Wh(n){return n.fields.filter(e=>2!==e.kind)}zy.UNKNOWN_ID=-1;class Zy{constructor(e,t){this.fieldPath=e,this.kind=t}}class Ky{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Ky(0,Fs.min())}}function mI(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,a=mt.fromTimestamp(1e9===r?new qn(t+1,0):new qn(t,r));return new Fs(a,Ve.empty(),e)}function zl(n){return new Fs(n.readTime,n.key,-1)}class Fs{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Fs(mt.min(),Ve.empty(),-1)}static max(){return new Fs(mt.max(),Ve.empty(),-1)}}function Yy(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ve.comparator(n.documentKey,e.documentKey),0!==t?t:Rt(n.largestBatchId,e.largestBatchId))}const yI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ME{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Go(n){return NE.apply(this,arguments)}function NE(){return NE=(0,ge.Z)(function*(n){if(n.code!==de.FAILED_PRECONDITION||n.message!==yI)throw n;Ne("LocalStore","Unexpectedly lost primary lease")}),NE.apply(this,arguments)}class se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Je(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new se((r,a)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(r,a)},this.catchCallback=c=>{this.wrapFailure(t,c).next(r,a)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof se?t:se.resolve(t)}catch(t){return se.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):se.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):se.reject(t)}static resolve(e){return new se((t,r)=>{t(e)})}static reject(e){return new se((t,r)=>{r(e)})}static waitFor(e){return new se((t,r)=>{let a=0,c=0,f=!1;e.forEach(y=>{++a,y.next(()=>{++c,f&&c===a&&t()},w=>r(w))}),f=!0,c===a&&t()})}static or(e){let t=se.resolve(!1);for(const r of e)t=t.next(a=>a?se.resolve(a):r());return t}static forEach(e,t){const r=[];return e.forEach((a,c)=>{r.push(t.call(this,a,c))}),this.waitFor(r)}static mapArray(e,t){return new se((r,a)=>{const c=e.length,f=new Array(c);let y=0;for(let w=0;w<c;w++){const D=w;t(e[D]).next(R=>{f[D]=R,++y,y===c&&r(f)},R=>a(R))}})}static doWhile(e,t){return new se((r,a)=>{const c=()=>{!0===e()?t().next(()=>{c()},a):r()};c()})}}class Qy{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new Tr,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new _g(e,t.error)):this.P.resolve()},this.transaction.onerror=r=>{const a=Jy(r.target.error);this.P.reject(new _g(e,a))}}static open(e,t,r,a){try{return new Qy(t,e.transaction(a,r))}catch(c){throw new _g(t,c)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(Ne("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new _I(t)}}class qo{constructor(e,t,r){this.name=e,this.version=t,this.S=r,12.2===qo.D((0,nn.z$)())&&nr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ne("SimpleDb","Removing database:",e),Zl(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,nn.hl)())return!1;if(qo.N())return!0;const e=(0,nn.z$)(),t=qo.D(e),r=0<t&&t<10,a=qo.k(e),c=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||c)}static N(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}F(e){var t=this;return(0,ge.Z)(function*(){return t.db||(Ne("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,a)=>{const c=indexedDB.open(t.name,t.version);c.onsuccess=f=>{r(f.target.result)},c.onblocked=()=>{a(new _g(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},c.onerror=f=>{const y=f.target.error;a("VersionError"===y.name?new Ce(de.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===y.name?new Ce(de.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+y):new _g(e,y))},c.onupgradeneeded=f=>{Ne("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',f.oldVersion),t.S.$(f.target.result,c.transaction,f.oldVersion,t.version).next(()=>{Ne("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,a){var c=this;return(0,ge.Z)(function*(){const f="readonly"===t;let y=0;for(;;){++y;try{c.db=yield c.F(e);const w=Qy.open(c.db,e,f?"readonly":"readwrite",r),D=a(w).next(R=>(w.V(),R)).catch(R=>(w.abort(R),se.reject(R))).toPromise();return D.catch(()=>{}),yield w.v,D}catch(w){const D=w,R="FirebaseError"!==D.name&&y<3;if(Ne("SimpleDb","Transaction failed with error:",D.message,"Retrying:",R),c.close(),!R)return Promise.reject(D)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class EA{constructor(e){this.U=e,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(e){this.U=e}done(){this.q=!0}j(e){this.K=e}delete(){return Zl(this.U.delete())}}class _g extends Ce{constructor(e,t){super(de.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function xc(n){return"IndexedDbTransactionError"===n.name}class _I{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Ne("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Ne("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Zl(r)}add(e){return Ne("SimpleDb","ADD",this.store.name,e,e),Zl(this.store.add(e))}get(e){return Zl(this.store.get(e)).next(t=>(void 0===t&&(t=null),Ne("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Ne("SimpleDb","DELETE",this.store.name,e),Zl(this.store.delete(e))}count(){return Ne("SimpleDb","COUNT",this.store.name),Zl(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const a=this.cursor(r),c=[];return this.H(a,(f,y)=>{c.push(y)}).next(()=>c)}{const a=this.store.getAll(r.range);return new se((c,f)=>{a.onerror=y=>{f(y.target.error)},a.onsuccess=y=>{c(y.target.result)}})}}J(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new se((a,c)=>{r.onerror=f=>{c(f.target.error)},r.onsuccess=f=>{a(f.target.result)}})}Y(e,t){Ne("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const a=this.cursor(r);return this.H(a,(c,f,y)=>y.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const a=this.cursor(r);return this.H(a,t)}tt(e){const t=this.cursor({});return new se((r,a)=>{t.onerror=c=>{const f=Jy(c.target.error);a(f)},t.onsuccess=c=>{const f=c.target.result;f?e(f.primaryKey,f.value).next(y=>{y?f.continue():r()}):r()}})}H(e,t){const r=[];return new se((a,c)=>{e.onerror=f=>{c(f.target.error)},e.onsuccess=f=>{const y=f.target.result;if(!y)return void a();const w=new EA(y),D=t(y.primaryKey,y.value,w);if(D instanceof se){const R=D.catch(O=>(w.done(),se.reject(O)));r.push(R)}w.isDone?a():null===w.G?y.continue():y.continue(w.G)}}).next(()=>se.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Zl(n){return new se((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const a=Jy(r.target.error);t(a)}})}let OE=!1;function Jy(n){const e=qo.D((0,nn.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Ce("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return OE||(OE=!0,setTimeout(()=>{throw r},0)),r}}return n}class kE{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;Ne("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,ge.Z)(function*(){t.task=null;try{Ne("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(r){xc(r)?Ne("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield Go(r)}yield t.nt(6e4)}))}}class iM{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,ge.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.it(r,e))})()}it(e,t){const r=new Set;let a=t,c=!0;return se.doWhile(()=>!0===c&&a>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(f=>{if(null!==f&&!r.has(f))return Ne("IndexBackiller",`Processing collection: ${f}`),this.rt(e,f,a).next(y=>{a-=y,r.add(f)});c=!1})).next(()=>t-a)}rt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(a=>this.localStore.localDocuments.getNextDocuments(e,t,a,r).next(c=>{const f=c.changes;return this.localStore.indexManager.updateIndexEntries(e,f).next(()=>this.ot(a,c)).next(y=>(Ne("IndexBackiller",`Updating offset: ${y}`),this.localStore.indexManager.updateCollectionGroup(e,t,y))).next(()=>f.size)}))}ot(e,t){let r=e;return t.changes.forEach((a,c)=>{const f=zl(c);Yy(f,r)>0&&(r=f)}),new Fs(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Oi{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ut(r),this.ct=r=>t.writeSequenceNumber(r))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}function vI(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function zh(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Zh(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}Oi.at=-1;class rr{constructor(e,t){this.comparator=e,this.root=t||Ar.EMPTY}insert(e,t){return new rr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ar.BLACK,null,null))}remove(e){return new rr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ar.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const a=this.comparator(e,r.key);if(0===a)return t+r.left.size;a<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Kh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Kh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Kh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Kh(this.root,e,this.comparator,!0)}}class Kh{constructor(e,t,r,a){this.isReverse=a,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=t?r(e.key,t):1,t&&a&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(0===c){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ar{constructor(e,t,r,a,c){this.key=e,this.value=t,this.color=null!=r?r:Ar.RED,this.left=null!=a?a:Ar.EMPTY,this.right=null!=c?c:Ar.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,a,c){return new Ar(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=a?a:this.left,null!=c?c:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let a=this;const c=r(e,a.key);return a=c<0?a.copy(null,null,null,a.left.insert(e,t,r),null):0===c?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,r)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Ar.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),0===t(e,a.key)){if(a.right.isEmpty())return Ar.EMPTY;r=a.right.min(),a=a.copy(r.key,r.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ar.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ar.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Je();const e=this.left.check();if(e!==this.right.check())throw Je();return e+(this.isRed()?0:1)}}Ar.EMPTY=null,Ar.RED=!0,Ar.BLACK=!1,Ar.EMPTY=new class{constructor(){this.size=0}get key(){throw Je()}get value(){throw Je()}get color(){throw Je()}get left(){throw Je()}get right(){throw Je()}copy(n,e,t,r,a){return this}insert(n,e,t){return new Ar(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ln{constructor(e){this.comparator=e,this.data=new rr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const a=r.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Xy(this.data.getIterator())}getIteratorFrom(e){return new Xy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof ln)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,c=r.getNext().key;if(0!==this.comparator(a,c))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new ln(this.comparator);return t.data=e,t}}class Xy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Rc(n){return n.hasNext()?n.getNext():void 0}class vs{constructor(e){this.fields=e,e.sort(Fn.comparator)}static empty(){return new vs([])}unionWith(e){let t=new ln(Fn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new vs(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return yg(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Sr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Sr(t)}static fromUint8Array(e){const t=function(r){let a="";for(let c=0;c<r.length;++c)a+=String.fromCharCode(r[c]);return a}(e);return new Sr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Rt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Sr.EMPTY_BYTE_STRING=new Sr("");const EI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Tu(n){if(pt(!!n),"string"==typeof n){let e=0;const t=EI.exec(n);if(pt(!!t),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ir(n.seconds),nanos:ir(n.nanos)}}function ir(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Mc(n){return"string"==typeof n?Sr.fromBase64String(n):Sr.fromUint8Array(n)}function vg(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function PE(n){const e=n.mapValue.fields.__previous_value__;return vg(e)?PE(e):e}function Kl(n){const e=Tu(n.mapValue.fields.__local_write_time__.timestampValue);return new qn(e.seconds,e.nanos)}class FE{constructor(e,t,r,a,c,f,y,w){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=a,this.ssl=c,this.forceLongPolling=f,this.autoDetectLongPolling=y,this.useFetchStreams=w}}class Au{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Au("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Au&&e.projectId===this.projectId&&e.database===this.database}}function Eg(n){return null==n}function Yh(n){return 0===n&&1/n==-1/0}function LE(n){return"number"==typeof n&&Number.isInteger(n)&&!Yh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const ka={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},bg={nullValue:"NULL_VALUE"};function Yl(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?vg(n)?4:bI(n)?9007199254740991:10:Je()}function Pa(n,e){if(n===e)return!0;const t=Yl(n);if(t!==Yl(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Kl(n).isEqual(Kl(e));case 3:return function(r,a){if("string"==typeof r.timestampValue&&"string"==typeof a.timestampValue&&r.timestampValue.length===a.timestampValue.length)return r.timestampValue===a.timestampValue;const c=Tu(r.timestampValue),f=Tu(a.timestampValue);return c.seconds===f.seconds&&c.nanos===f.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return a=e,Mc(n.bytesValue).isEqual(Mc(a.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,a){return ir(r.geoPointValue.latitude)===ir(a.geoPointValue.latitude)&&ir(r.geoPointValue.longitude)===ir(a.geoPointValue.longitude)}(n,e);case 2:return function(r,a){if("integerValue"in r&&"integerValue"in a)return ir(r.integerValue)===ir(a.integerValue);if("doubleValue"in r&&"doubleValue"in a){const c=ir(r.doubleValue),f=ir(a.doubleValue);return c===f?Yh(c)===Yh(f):isNaN(c)&&isNaN(f)}return!1}(n,e);case 9:return yg(n.arrayValue.values||[],e.arrayValue.values||[],Pa);case 10:return function(r,a){const c=r.mapValue.fields||{},f=a.mapValue.fields||{};if(vI(c)!==vI(f))return!1;for(const y in c)if(c.hasOwnProperty(y)&&(void 0===f[y]||!Pa(c[y],f[y])))return!1;return!0}(n,e);default:return Je()}var a}function wg(n,e){return void 0!==(n.values||[]).find(t=>Pa(t,e))}function Su(n,e){if(n===e)return 0;const t=Yl(n),r=Yl(e);if(t!==r)return Rt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Rt(n.booleanValue,e.booleanValue);case 2:return function(a,c){const f=ir(a.integerValue||a.doubleValue),y=ir(c.integerValue||c.doubleValue);return f<y?-1:f>y?1:f===y?0:isNaN(f)?isNaN(y)?0:-1:1}(n,e);case 3:return e_(n.timestampValue,e.timestampValue);case 4:return e_(Kl(n),Kl(e));case 5:return Rt(n.stringValue,e.stringValue);case 6:return function(a,c){const f=Mc(a),y=Mc(c);return f.compareTo(y)}(n.bytesValue,e.bytesValue);case 7:return function(a,c){const f=a.split("/"),y=c.split("/");for(let w=0;w<f.length&&w<y.length;w++){const D=Rt(f[w],y[w]);if(0!==D)return D}return Rt(f.length,y.length)}(n.referenceValue,e.referenceValue);case 8:return function(a,c){const f=Rt(ir(a.latitude),ir(c.latitude));return 0!==f?f:Rt(ir(a.longitude),ir(c.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(a,c){const f=a.values||[],y=c.values||[];for(let w=0;w<f.length&&w<y.length;++w){const D=Su(f[w],y[w]);if(D)return D}return Rt(f.length,y.length)}(n.arrayValue,e.arrayValue);case 10:return function(a,c){if(a===ka.mapValue&&c===ka.mapValue)return 0;if(a===ka.mapValue)return 1;if(c===ka.mapValue)return-1;const f=a.fields||{},y=Object.keys(f),w=c.fields||{},D=Object.keys(w);y.sort(),D.sort();for(let R=0;R<y.length&&R<D.length;++R){const O=Rt(y[R],D[R]);if(0!==O)return O;const G=Su(f[y[R]],w[D[R]]);if(0!==G)return G}return Rt(y.length,D.length)}(n.mapValue,e.mapValue);default:throw Je()}}function e_(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Rt(n,e);const t=Tu(n),r=Tu(e),a=Rt(t.seconds,r.seconds);return 0!==a?a:Rt(t.nanos,r.nanos)}function Ql(n){return t_(n)}function t_(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const a=Tu(r);return`time(${a.seconds},${a.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Mc(n.bytesValue).toBase64():"referenceValue"in n?Ve.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let a="[",c=!0;for(const f of r.values||[])c?c=!1:a+=",",a+=t_(f);return a+"]"}(n.arrayValue):"mapValue"in n?function(r){const a=Object.keys(r.fields||{}).sort();let c="{",f=!0;for(const y of a)f?f=!1:c+=",",c+=`${y}:${t_(r.fields[y])}`;return c+"}"}(n.mapValue):Je();var e}function Nc(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function n_(n){return!!n&&"integerValue"in n}function Qh(n){return!!n&&"arrayValue"in n}function VE(n){return!!n&&"nullValue"in n}function UE(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Ig(n){return!!n&&"mapValue"in n}function r_(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return zh(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=r_(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=r_(n.arrayValue.values[t]);return e}return Object.assign({},n)}function bI(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function bA(n){return"nullValue"in n?bg:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Nc(Au.empty(),Ve.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:Je()}function wI(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Nc(Au.empty(),Ve.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?ka:Je()}function II(n,e){const t=Su(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function vr(n,e){const t=Su(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class zr{constructor(e){this.value=e}static empty(){return new zr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Ig(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=r_(t)}setAll(e){let t=Fn.emptyPath(),r={},a=[];e.forEach((f,y)=>{if(!t.isImmediateParentOf(y)){const w=this.getFieldsMap(t);this.applyChanges(w,r,a),r={},a=[],t=y.popLast()}f?r[y.lastSegment()]=r_(f):a.push(y.lastSegment())});const c=this.getFieldsMap(t);this.applyChanges(c,r,a)}delete(e){const t=this.field(e.popLast());Ig(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Pa(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let a=t.mapValue.fields[e.get(r)];Ig(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,r){zh(t,(a,c)=>e[a]=c);for(const a of r)delete e[a]}clone(){return new zr(r_(this.value))}}function CI(n){const e=[];return zh(n.fields,(t,r)=>{const a=new Fn([t]);if(Ig(r)){const c=CI(r.mapValue).fields;if(0===c.length)e.push(a);else for(const f of c)e.push(a.child(f))}else e.push(a)}),new vs(e)}class wn{constructor(e,t,r,a,c,f){this.key=e,this.documentType=t,this.version=r,this.readTime=a,this.data=c,this.documentState=f}static newInvalidDocument(e){return new wn(e,0,mt.min(),mt.min(),zr.empty(),0)}static newFoundDocument(e,t,r){return new wn(e,1,t,mt.min(),r,0)}static newNoDocument(e,t){return new wn(e,2,t,mt.min(),zr.empty(),0)}static newUnknownDocument(e,t){return new wn(e,3,t,mt.min(),zr.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=zr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=zr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=mt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof wn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new wn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class DI{constructor(e,t=null,r=[],a=[],c=null,f=null,y=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=a,this.limit=c,this.startAt=f,this.endAt=y,this.ht=null}}function TI(n,e=null,t=[],r=[],a=null,c=null,f=null){return new DI(n,e,t,r,a,c,f)}function Oc(n){const e=$e(n);if(null===e.ht){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(a=r).field.canonicalString()+a.op.toString()+Ql(a.value);var a}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(a=r).field.canonicalString()+a.dir;var a}).join(","),Eg(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Ql(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Ql(r)).join(",")),e.ht=t}return e.ht}function Fa(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let a=0;a<n.orderBy.length;a++)if(!RI(n.orderBy[a],e.orderBy[a]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let a=0;a<n.filters.length;a++)if((t=n.filters[a]).op!==(r=e.filters[a]).op||!t.field.isEqual(r.field)||!Pa(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!NI(n.startAt,e.startAt)&&NI(n.endAt,e.endAt)}function i_(n){return Ve.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function s_(n,e){return n.filters.filter(t=>t instanceof Zr&&t.field.isEqual(e))}function BE(n,e,t){let r=bg,a=!0;for(const c of s_(n,e)){let f=bg,y=!0;switch(c.op){case"<":case"<=":f=bA(c.value);break;case"==":case"in":case">=":f=c.value;break;case">":f=c.value,y=!1;break;case"!=":case"not-in":f=bg}II({value:r,inclusive:a},{value:f,inclusive:y})<0&&(r=f,a=y)}if(null!==t)for(let c=0;c<n.orderBy.length;++c)if(n.orderBy[c].field.isEqual(e)){const f=t.position[c];II({value:r,inclusive:a},{value:f,inclusive:t.inclusive})<0&&(r=f,a=t.inclusive);break}return{value:r,inclusive:a}}function SI(n,e,t){let r=ka,a=!0;for(const c of s_(n,e)){let f=ka,y=!0;switch(c.op){case">=":case">":f=wI(c.value),y=!1;break;case"==":case"in":case"<=":f=c.value;break;case"<":f=c.value,y=!1;break;case"!=":case"not-in":f=ka}vr({value:r,inclusive:a},{value:f,inclusive:y})>0&&(r=f,a=y)}if(null!==t)for(let c=0;c<n.orderBy.length;++c)if(n.orderBy[c].field.isEqual(e)){const f=t.position[c];vr({value:r,inclusive:a},{value:f,inclusive:t.inclusive})>0&&(r=f,a=t.inclusive);break}return{value:r,inclusive:a}}class Zr extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,r):new oM(e,t,r):"array-contains"===t?new wA(e,r):"in"===t?new IA(e,r):"not-in"===t?new La(e,r):"array-contains-any"===t?new zo(e,r):new Zr(e,t,r)}static lt(e,t,r){return"in"===t?new xI(e,r):new jE(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft(Su(t,this.value)):null!==t&&Yl(this.value)===Yl(t)&&this.ft(Su(t,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Je()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class oM extends Zr{constructor(e,t,r){super(e,t,r),this.key=Ve.fromName(r.referenceValue)}matches(e){const t=Ve.comparator(e.key,this.key);return this.ft(t)}}class xI extends Zr{constructor(e,t){super(e,"in",t),this.keys=Wo(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class jE extends Zr{constructor(e,t){super(e,"not-in",t),this.keys=Wo(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Wo(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Ve.fromName(r.referenceValue))}class wA extends Zr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Qh(t)&&wg(t.arrayValue,this.value)}}class IA extends Zr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&wg(this.value.arrayValue,t)}}class La extends Zr{constructor(e,t){super(e,"not-in",t)}matches(e){if(wg(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!wg(this.value.arrayValue,t)}}class zo extends Zr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Qh(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>wg(this.value.arrayValue,r))}}class Kr{constructor(e,t){this.position=e,this.inclusive=t}}class Jl{constructor(e,t="asc"){this.field=e,this.dir=t}}function RI(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function MI(n,e,t){let r=0;for(let a=0;a<n.position.length;a++){const c=e[a],f=n.position[a];if(r=c.field.isKeyField()?Ve.comparator(Ve.fromName(f.referenceValue),t.key):Su(f,t.data.field(c.field)),"desc"===c.dir&&(r*=-1),0!==r)break}return r}function NI(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Pa(n.position[t],e.position[t]))return!1;return!0}class xu{constructor(e,t=null,r=[],a=[],c=null,f="F",y=null,w=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=a,this.limit=c,this.limitType=f,this.startAt=y,this.endAt=w,this._t=null,this.wt=null}}function OI(n,e,t,r,a,c,f,y){return new xu(n,e,t,r,a,c,f,y)}function kc(n){return new xu(n)}function Jh(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function HE(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function o_(n){for(const e of n.filters)if(e.dt())return e.field;return null}function $E(n){return null!==n.collectionGroup}function Xl(n){const e=$e(n);if(null===e._t){e._t=[];const t=o_(e),r=HE(e);if(null!==t&&null===r)t.isKeyField()||e._t.push(new Jl(t)),e._t.push(new Jl(Fn.keyField(),"asc"));else{let a=!1;for(const c of e.explicitOrderBy)e._t.push(c),c.field.isKeyField()&&(a=!0);if(!a){const c=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new Jl(Fn.keyField(),c))}}}return e._t}function ki(n){const e=$e(n);if(!e.wt)if("F"===e.limitType)e.wt=TI(e.path,e.collectionGroup,Xl(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const c of Xl(e))t.push(new Jl(c.field,"desc"===c.dir?"asc":"desc"));const r=e.endAt?new Kr(e.endAt.position,e.endAt.inclusive):null,a=e.startAt?new Kr(e.startAt.position,e.startAt.inclusive):null;e.wt=TI(e.path,e.collectionGroup,t,e.filters,e.limit,r,a)}return e.wt}function ed(n,e,t){return new xu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Cg(n,e){return Fa(ki(n),ki(e))&&n.limitType===e.limitType}function GE(n){return`${Oc(ki(n))}|lt:${n.limitType}`}function a_(n){return`Query(target=${function(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${Ql(r.value)}`;var r}).join(", ")}]`),Eg(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>Ql(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>Ql(t)).join(",")),`Target(${e})`}(ki(n))}; limitType=${n.limitType})`}function Dg(n,e){return e.isFoundDocument()&&function(t,r){const a=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(a):Ve.isDocumentKey(t.path)?t.path.isEqual(a):t.path.isImmediateParentOf(a)}(n,e)&&function(t,r){for(const a of t.explicitOrderBy)if(!a.field.isKeyField()&&null===r.data.field(a.field))return!1;return!0}(n,e)&&function(t,r){for(const a of t.filters)if(!a.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(a,c,f){const y=MI(a,c,f);return a.inclusive?y<=0:y<0}(t.startAt,Xl(t),r)||t.endAt&&!function(a,c,f){const y=MI(a,c,f);return a.inclusive?y>=0:y>0}(t.endAt,Xl(t),r)));var t,r}function Tg(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function qE(n){return(e,t)=>{let r=!1;for(const a of Xl(n)){const c=kI(a,e,t);if(0!==c)return c;r=r||a.field.isKeyField()}return 0}}function kI(n,e,t){const r=n.field.isKeyField()?Ve.comparator(e.key,t.key):function(a,c,f){const y=c.data.field(a),w=f.data.field(a);return null!==y&&null!==w?Su(y,w):Je()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Je()}}function WE(n,e){if(n.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Yh(e)?"-0":e}}function zE(n){return{integerValue:""+n}}function ZE(n,e){return LE(e)?zE(e):WE(n,e)}class Ag{constructor(){this._=void 0}}function PI(n,e,t){return n instanceof Xh?function(r,a){const c={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return a&&(c.fields.__previous_value__=a),{mapValue:c}}(t,e):n instanceof td?VI(n,e):n instanceof nd?UI(n,e):function(r,a){const c=LI(r,a),f=BI(c)+BI(r.yt);return n_(c)&&n_(r.yt)?zE(f):WE(r.It,f)}(n,e)}function FI(n,e,t){return n instanceof td?VI(n,e):n instanceof nd?UI(n,e):t}function LI(n,e){return n instanceof ef?n_(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Xh extends Ag{}class td extends Ag{constructor(e){super(),this.elements=e}}function VI(n,e){const t=jI(e);for(const r of n.elements)t.some(a=>Pa(a,r))||t.push(r);return{arrayValue:{values:t}}}class nd extends Ag{constructor(e){super(),this.elements=e}}function UI(n,e){let t=jI(e);for(const r of n.elements)t=t.filter(a=>!Pa(a,r));return{arrayValue:{values:t}}}class ef extends Ag{constructor(e,t){super(),this.It=e,this.yt=t}}function BI(n){return ir(n.integerValue||n.doubleValue)}function jI(n){return Qh(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Sg{constructor(e,t){this.field=e,this.transform=t}}class DA{constructor(e,t){this.version=e,this.transformResults=t}}class Ln{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ln}static exists(e){return new Ln(void 0,e)}static updateTime(e){return new Ln(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function u_(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class c_{}function HI(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new id(n.key,Ln.none()):new rd(n.key,n.data,Ln.none());{const t=n.data,r=zr.empty();let a=new ln(Fn.comparator);for(let c of e.fields)if(!a.has(c)){let f=t.field(c);null===f&&c.length>1&&(c=c.popLast(),f=t.field(c)),null===f?r.delete(c):r.set(c,f),a=a.add(c)}return new Va(n.key,r,new vs(a.toArray()),Ln.none())}}function TA(n,e,t){n instanceof rd?function(r,a,c){const f=r.value.clone(),y=QE(r.fieldTransforms,a,c.transformResults);f.setAll(y),a.convertToFoundDocument(c.version,f).setHasCommittedMutations()}(n,e,t):n instanceof Va?function(r,a,c){if(!u_(r.precondition,a))return void a.convertToUnknownDocument(c.version);const f=QE(r.fieldTransforms,a,c.transformResults),y=a.data;y.setAll(YE(r)),y.setAll(f),a.convertToFoundDocument(c.version,y).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function xg(n,e,t,r){return n instanceof rd?function(a,c,f,y){if(!u_(a.precondition,c))return f;const w=a.value.clone(),D=JE(a.fieldTransforms,y,c);return w.setAll(D),c.convertToFoundDocument(c.version,w).setHasLocalMutations(),null}(n,e,t,r):n instanceof Va?function(a,c,f,y){if(!u_(a.precondition,c))return f;const w=JE(a.fieldTransforms,y,c),D=c.data;return D.setAll(YE(a)),D.setAll(w),c.convertToFoundDocument(c.version,D).setHasLocalMutations(),null===f?null:f.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(R=>R.field))}(n,e,t,r):(f=t,u_(n.precondition,c=e)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):f);var c,f}function $I(n,e){let t=null;for(const r of n.fieldTransforms){const a=e.data.field(r.field),c=LI(r.transform,a||null);null!=c&&(null===t&&(t=zr.empty()),t.set(r.field,c))}return t||null}function KE(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&yg(t,r,(a,c)=>function(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof td&&r instanceof td||t instanceof nd&&r instanceof nd?yg(t.elements,r.elements,Pa):t instanceof ef&&r instanceof ef?Pa(t.yt,r.yt):t instanceof Xh&&r instanceof Xh);var t,r}(a,c))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class rd extends c_{constructor(e,t,r,a=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Va extends c_{constructor(e,t,r,a,c=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=a,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function YE(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function QE(n,e,t){const r=new Map;pt(n.length===t.length);for(let a=0;a<t.length;a++){const c=n[a],f=c.transform,y=e.data.field(c.field);r.set(c.field,FI(f,y,t[a]))}return r}function JE(n,e,t){const r=new Map;for(const a of n){const c=a.transform,f=t.data.field(a.field);r.set(a.field,PI(c,f,e))}return r}class id extends c_{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class l_ extends c_{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class XE{constructor(e){this.count=e}}var dr,Ht;function GI(n){switch(n){default:return Je();case de.CANCELLED:case de.UNKNOWN:case de.DEADLINE_EXCEEDED:case de.RESOURCE_EXHAUSTED:case de.INTERNAL:case de.UNAVAILABLE:case de.UNAUTHENTICATED:return!1;case de.INVALID_ARGUMENT:case de.NOT_FOUND:case de.ALREADY_EXISTS:case de.PERMISSION_DENIED:case de.FAILED_PRECONDITION:case de.ABORTED:case de.OUT_OF_RANGE:case de.UNIMPLEMENTED:case de.DATA_LOSS:return!0}}function qI(n){if(void 0===n)return nr("GRPC error has no .code"),de.UNKNOWN;switch(n){case dr.OK:return de.OK;case dr.CANCELLED:return de.CANCELLED;case dr.UNKNOWN:return de.UNKNOWN;case dr.DEADLINE_EXCEEDED:return de.DEADLINE_EXCEEDED;case dr.RESOURCE_EXHAUSTED:return de.RESOURCE_EXHAUSTED;case dr.INTERNAL:return de.INTERNAL;case dr.UNAVAILABLE:return de.UNAVAILABLE;case dr.UNAUTHENTICATED:return de.UNAUTHENTICATED;case dr.INVALID_ARGUMENT:return de.INVALID_ARGUMENT;case dr.NOT_FOUND:return de.NOT_FOUND;case dr.ALREADY_EXISTS:return de.ALREADY_EXISTS;case dr.PERMISSION_DENIED:return de.PERMISSION_DENIED;case dr.FAILED_PRECONDITION:return de.FAILED_PRECONDITION;case dr.ABORTED:return de.ABORTED;case dr.OUT_OF_RANGE:return de.OUT_OF_RANGE;case dr.UNIMPLEMENTED:return de.UNIMPLEMENTED;case dr.DATA_LOSS:return de.DATA_LOSS;default:return Je()}}(Ht=dr||(dr={}))[Ht.OK=0]="OK",Ht[Ht.CANCELLED=1]="CANCELLED",Ht[Ht.UNKNOWN=2]="UNKNOWN",Ht[Ht.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ht[Ht.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ht[Ht.NOT_FOUND=5]="NOT_FOUND",Ht[Ht.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ht[Ht.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ht[Ht.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ht[Ht.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ht[Ht.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ht[Ht.ABORTED=10]="ABORTED",Ht[Ht.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ht[Ht.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ht[Ht.INTERNAL=13]="INTERNAL",Ht[Ht.UNAVAILABLE=14]="UNAVAILABLE",Ht[Ht.DATA_LOSS=15]="DATA_LOSS";class Ls{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[a,c]of r)if(this.equalsFn(a,e))return c}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),a=this.inner[r];if(void 0===a)return this.inner[r]=[[e,t]],void this.innerSize++;for(let c=0;c<a.length;c++)if(this.equalsFn(a[c][0],e))return void(a[c]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],e))return 1===r.length?delete this.inner[t]:r.splice(a,1),this.innerSize--,!0;return!1}forEach(e){zh(this.inner,(t,r)=>{for(const[a,c]of r)e(a,c)})}isEmpty(){return Zh(this.inner)}size(){return this.innerSize}}const aM=new rr(Ve.comparator);function Pi(){return aM}const AA=new rr(Ve.comparator);function tf(...n){let e=AA;for(const t of n)e=e.insert(t.key,t);return e}function eb(n){let e=AA;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Ru(){return Rg()}function dt(){return Rg()}function Rg(){return new Ls(n=>n.toString(),(n,e)=>n.isEqual(e))}const SA=new rr(Ve.comparator),xA=new ln(Ve.comparator);function Ot(...n){let e=xA;for(const t of n)e=e.add(t);return e}const RA=new ln(Rt);function sd(){return RA}class Pc{constructor(e,t,r,a,c){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=a,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const a=new Map;return a.set(e,In.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Pc(mt.min(),a,sd(),Pi(),Ot())}}class In{constructor(e,t,r,a,c){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=a,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new In(r,t,Ot(),Ot(),Ot())}}class tb{constructor(e,t,r,a){this.Tt=e,this.removedTargetIds=t,this.key=r,this.Et=a}}class nb{constructor(e,t){this.targetId=e,this.At=t}}class d_{constructor(e,t,r=Sr.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=a}}class WI{constructor(){this.Rt=0,this.bt=ib(),this.Pt=Sr.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=Ot(),t=Ot(),r=Ot();return this.bt.forEach((a,c)=>{switch(c){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:r=r.add(a);break;default:Je()}}),new In(this.Pt,this.vt,e,t,r)}Nt(){this.Vt=!1,this.bt=ib()}kt(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}Ot(e){this.Vt=!0,this.bt=this.bt.remove(e)}Mt(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class zI{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=Pi(),this.qt=rb(),this.Kt=new ln(Rt)}Gt(e){for(const t of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(t,e.Et):this.jt(t,e.key,e.Et);for(const t of e.removedTargetIds)this.jt(t,e.key,e.Et)}Wt(e){this.forEachTarget(e,t=>{const r=this.zt(t);switch(e.state){case 0:this.Ht(t)&&r.Ct(e.resumeToken);break;case 1:r.Ft(),r.St||r.Nt(),r.Ct(e.resumeToken);break;case 2:r.Ft(),r.St||this.removeTarget(t);break;case 3:this.Ht(t)&&(r.$t(),r.Ct(e.resumeToken));break;case 4:this.Ht(t)&&(this.Jt(t),r.Ct(e.resumeToken));break;default:Je()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((r,a)=>{this.Ht(a)&&t(a)})}Yt(e){const t=e.targetId,r=e.At.count,a=this.Xt(t);if(a){const c=a.target;if(i_(c))if(0===r){const f=new Ve(c.path);this.jt(t,f,wn.newNoDocument(f,mt.min()))}else pt(1===r);else this.Zt(t)!==r&&(this.Jt(t),this.Kt=this.Kt.add(t))}}te(e){const t=new Map;this.Lt.forEach((c,f)=>{const y=this.Xt(f);if(y){if(c.current&&i_(y.target)){const w=new Ve(y.target.path);null!==this.Ut.get(w)||this.ee(f,w)||this.jt(f,w,wn.newNoDocument(w,e))}c.Dt&&(t.set(f,c.xt()),c.Nt())}});let r=Ot();this.qt.forEach((c,f)=>{let y=!0;f.forEachWhile(w=>{const D=this.Xt(w);return!D||2===D.purpose||(y=!1,!1)}),y&&(r=r.add(c))}),this.Ut.forEach((c,f)=>f.setReadTime(e));const a=new Pc(e,t,this.Kt,this.Ut,r);return this.Ut=Pi(),this.qt=rb(),this.Kt=new ln(Rt),a}Qt(e,t){if(!this.Ht(e))return;const r=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,r),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}jt(e,t,r){if(!this.Ht(e))return;const a=this.zt(e);this.ee(e,t)?a.kt(t,1):a.Ot(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),r&&(this.Ut=this.Ut.insert(t,r))}removeTarget(e){this.Lt.delete(e)}Zt(e){const t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Mt(e){this.zt(e).Mt()}zt(e){let t=this.Lt.get(e);return t||(t=new WI,this.Lt.set(e,t)),t}ne(e){let t=this.qt.get(e);return t||(t=new ln(Rt),this.qt=this.qt.insert(e,t)),t}Ht(e){const t=null!==this.Xt(e);return t||Ne("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new WI),this.Bt.getRemoteKeysForTarget(e).forEach(t=>{this.jt(e,t,null)})}ee(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}function rb(){return new rr(Ve.comparator)}function ib(){return new rr(Ve.comparator)}const ZI={asc:"ASCENDING",desc:"DESCENDING"},MA={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class NA{constructor(e,t){this.databaseId=e,this.gt=t}}function Mg(n,e){return n.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function nf(n,e){return n.gt?e.toBase64():e.toUint8Array()}function OA(n,e){return Mg(n,e.toTimestamp())}function Yr(n){return pt(!!n),mt.fromTimestamp(function(e){const t=Tu(e);return new qn(t.seconds,t.nanos)}(n))}function sb(n,e){return(t=n,new Jt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Ng(n){const e=Jt.fromString(n);return pt(af(e)),e}function rf(n,e){return sb(n.databaseId,e.path)}function Zo(n,e){const t=Ng(e);if(t.get(1)!==n.databaseId.projectId)throw new Ce(de.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ce(de.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ve(sf(t))}function h_(n,e){return sb(n.databaseId,e)}function KI(n){const e=Ng(n);return 4===e.length?Jt.emptyPath():sf(e)}function Mu(n){return new Jt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function sf(n){return pt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function YI(n,e,t){return{name:rf(n,e),fields:t.value.mapValue.fields}}function QI(n,e,t){const r=Zo(n,e.name),a=Yr(e.updateTime),c=new zr({mapValue:{fields:e.fields}}),f=wn.newFoundDocument(r,a,c);return t&&f.setHasCommittedMutations(),t?f.setHasCommittedMutations():f}function of(n,e){let t;if(e instanceof rd)t={update:YI(n,e.key,e.value)};else if(e instanceof id)t={delete:rf(n,e.key)};else if(e instanceof Va)t={update:YI(n,e.key,e.data),updateMask:eC(e.fieldMask)};else{if(!(e instanceof l_))return Je();t={verify:rf(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(a,c){const f=c.transform;if(f instanceof Xh)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof td)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof nd)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof ef)return{fieldPath:c.field.canonicalString(),increment:f.yt};throw Je()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(a=e.precondition).updateTime?{updateTime:OA(n,a.updateTime)}:void 0!==a.exists?{exists:a.exists}:Je()),t;var a}function f_(n,e){const t=e.currentDocument?void 0!==(a=e.currentDocument).updateTime?Ln.updateTime(Yr(a.updateTime)):void 0!==a.exists?Ln.exists(a.exists):Ln.none():Ln.none(),r=e.updateTransforms?e.updateTransforms.map(a=>function(c,f){let y=null;"setToServerValue"in f?(pt("REQUEST_TIME"===f.setToServerValue),y=new Xh):"appendMissingElements"in f?y=new td(f.appendMissingElements.values||[]):"removeAllFromArray"in f?y=new nd(f.removeAllFromArray.values||[]):"increment"in f?y=new ef(c,f.increment):Je();const w=Fn.fromServerFormat(f.fieldPath);return new Sg(w,y)}(n,a)):[];var a;if(e.update){const a=Zo(n,e.update.name),c=new zr({mapValue:{fields:e.update.fields}});if(e.updateMask){const f=new vs((e.updateMask.fieldPaths||[]).map(D=>Fn.fromServerFormat(D)));return new Va(a,c,f,t,r)}return new rd(a,c,t,r)}if(e.delete){const a=Zo(n,e.delete);return new id(a,t)}if(e.verify){const a=Zo(n,e.verify);return new l_(a,t)}return Je()}function ob(n,e){return{documents:[h_(n,e.path)]}}function ab(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=h_(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=h_(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const a=function(w){if(0===w.length)return;const D=w.map(R=>function(O){if("=="===O.op){if(UE(O.value))return{unaryFilter:{field:od(O.field),op:"IS_NAN"}};if(VE(O.value))return{unaryFilter:{field:od(O.field),op:"IS_NULL"}}}else if("!="===O.op){if(UE(O.value))return{unaryFilter:{field:od(O.field),op:"IS_NOT_NAN"}};if(VE(O.value))return{unaryFilter:{field:od(O.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:od(O.field),op:lM(O.op),value:O.value}}}(R));return 1===D.length?D[0]:{compositeFilter:{op:"AND",filters:D}}}(e.filters);a&&(t.structuredQuery.where=a);const c=function(w){if(0!==w.length)return w.map(D=>{return{field:od((R=D).field),direction:cM(R.dir)};var R})}(e.orderBy);c&&(t.structuredQuery.orderBy=c);const f=(D=e.limit,n.gt||Eg(D)?D:{value:D});var D,y,w;return null!==f&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt={before:(y=e.startAt).inclusive,values:y.position}),e.endAt&&(t.structuredQuery.endAt={before:!(w=e.endAt).inclusive,values:w.position}),t}function XI(n){let e=KI(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let a=null;if(r>0){pt(1===r);const R=t.from[0];R.allDescendants?a=R.collectionId:e=e.child(R.collectionId)}let c=[];t.where&&(c=FA(t.where));let f=[];t.orderBy&&(f=t.orderBy.map(R=>{return new Jl(Nu((O=R).field),function(G){switch(G){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(O.direction));var O}));let y=null;t.limit&&(y=function(R){let O;return O="object"==typeof R?R.value:R,Eg(O)?null:O}(t.limit));let w=null;var R;t.startAt&&(w=new Kr((R=t.startAt).values||[],!!R.before));let D=null;return t.endAt&&(D=function(R){return new Kr(R.values||[],!R.before)}(t.endAt)),OI(e,a,f,c,y,"F",w,D)}function FA(n){return n?void 0!==n.unaryFilter?[VA(n)]:void 0!==n.fieldFilter?[LA(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>FA(e)).reduce((e,t)=>e.concat(t)):Je():[]}function cM(n){return ZI[n]}function lM(n){return MA[n]}function od(n){return{fieldPath:n.canonicalString()}}function Nu(n){return Fn.fromServerFormat(n.fieldPath)}function LA(n){return Zr.create(Nu(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Je()}}(n.fieldFilter.op),n.fieldFilter.value)}function VA(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Nu(n.unaryFilter.field);return Zr.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Nu(n.unaryFilter.field);return Zr.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Nu(n.unaryFilter.field);return Zr.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Nu(n.unaryFilter.field);return Zr.create(a,"!=",{nullValue:"NULL_VALUE"});default:return Je()}}function eC(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function af(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Yi(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=tC(e)),e=UA(n.get(t),e);return tC(e)}function UA(n,e){let t=e;const r=n.length;for(let a=0;a<r;a++){const c=n.charAt(a);switch(c){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=c}}return t}function tC(n){return n+"\x01\x01"}function Ua(n){const e=n.length;if(pt(e>=2),2===e)return pt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Jt.emptyPath();const t=e-2,r=[];let a="";for(let c=0;c<e;){const f=n.indexOf("\x01",c);switch((f<0||f>t)&&Je(),n.charAt(f+1)){case"\x01":const y=n.substring(c,f);let w;0===a.length?w=y:(a+=y,w=a,a=""),r.push(w);break;case"\x10":a+=n.substring(c,f),a+="\0";break;case"\x11":a+=n.substring(c,f+1);break;default:Je()}c=f+2}return new Jt(r)}const nC=["userId","batchId"];function Og(n,e){return[n,Yi(e)]}function rC(n,e,t){return[n,Yi(e),t]}const BA={},uf=["prefixPath","collectionGroup","readTime","documentId"],jA=["prefixPath","collectionGroup","documentId"],iC=["collectionGroup","readTime","prefixPath","documentId"],HA=["canonicalId","targetId"],sC=["targetId","path"],$A=["path","targetId"],oC=["collectionId","parent"],GA=["indexId","uid"],ub=["uid","sequenceNumber"],qA=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],aC=["indexId","uid","orderedDocumentKey"],uC=["userId","collectionPath","documentId"],WA=["userId","collectionPath","largestBatchId"],zA=["userId","collectionGroup","largestBatchId"],cC=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],cb=[...cC,"documentOverlays"],lC=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],lb=lC,ZA=[...lb,"indexConfiguration","indexState","indexEntries"];class db extends ME{constructor(e,t){super(),this.ie=e,this.currentSequenceNumber=t}}function Qr(n,e){const t=$e(n);return qo.M(t.ie,e)}class hb{constructor(e,t,r,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=a}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const c=this.mutations[a];c.key.isEqual(e.key)&&TA(c,e,r[a])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=xg(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=xg(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=dt();return this.mutations.forEach(a=>{const c=e.get(a.key),f=c.overlayedDocument;let y=this.applyToLocalView(f,c.mutatedFields);y=t.has(a.key)?null:y;const w=HI(f,y);null!==w&&r.set(a.key,w),f.isValidDocument()||f.convertToNoDocument(mt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ot())}isEqual(e){return this.batchId===e.batchId&&yg(this.mutations,e.mutations,(t,r)=>KE(t,r))&&yg(this.baseMutations,e.baseMutations,(t,r)=>KE(t,r))}}class fb{constructor(e,t,r,a){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=a}static from(e,t,r){pt(e.mutations.length===r.length);let a=SA;const c=e.mutations;for(let f=0;f<c.length;f++)a=a.insert(c[f].key,r[f].version);return new fb(e,t,r,a)}}class pb{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Fc{constructor(e,t,r,a,c=mt.min(),f=mt.min(),y=Sr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=a,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=y}withSequenceNumber(e){return new Fc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Fc(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Fc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class dC{constructor(e){this.re=e}}function gb(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:p_(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:rf(a=n.re,(c=e).key),fields:c.data.value.mapValue.fields,updateTime:Mg(a,c.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:ad(e.version)};else{if(!e.isUnknownDocument())return Je();r.unknownDocument={path:t.path.toArray(),version:ad(e.version)}}var a,c;return r}function p_(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function ad(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Lc(n){const e=new qn(n.seconds,n.nanoseconds);return mt.fromTimestamp(e)}function ud(n,e){const t=(e.baseMutations||[]).map(c=>f_(n.re,c));for(let c=0;c<e.mutations.length-1;++c){const f=e.mutations[c];c+1<e.mutations.length&&void 0!==e.mutations[c+1].transform&&(f.updateTransforms=e.mutations[c+1].transform.fieldTransforms,e.mutations.splice(c+1,1),++c)}const r=e.mutations.map(c=>f_(n.re,c)),a=qn.fromMillis(e.localWriteTimeMs);return new hb(e.batchId,a,t,r)}function kg(n){const e=Lc(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Lc(n.lastLimboFreeSnapshotVersion):mt.min();let r;var a;return void 0!==n.query.documents?(pt(1===(a=n.query).documents.length),r=ki(kc(KI(a.documents[0])))):r=ki(XI(n.query)),new Fc(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Sr.fromBase64String(n.resumeToken))}function fC(n,e){const t=ad(e.snapshotVersion),r=ad(e.lastLimboFreeSnapshotVersion);let a;a=i_(e.target)?ob(n.re,e.target):ab(n.re,e.target);const c=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Oc(e.target),readTime:t,resumeToken:c,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:a}}function Pg(n){const e=XI({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?ed(e,e.limit,"L"):e}function Fg(n,e){return new pb(e.largestBatchId,f_(n.re,e.overlayMutation))}function mb(n,e){const t=e.path.lastSegment();return[n,Yi(e.path.popLast()),t]}function g_(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:ad(r.readTime),documentKey:Yi(r.documentKey.path),largestBatchId:r.largestBatchId}}class KA{getBundleMetadata(e,t){return pC(e).get(t).next(r=>{if(r)return{id:(a=r).bundleId,createTime:Lc(a.createTime),version:a.version};var a})}saveBundleMetadata(e,t){return pC(e).put({bundleId:(r=t).id,createTime:ad(Yr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return m_(e).get(t).next(r=>{if(r)return{name:(a=r).name,query:Pg(a.bundledQuery),readTime:Lc(a.readTime)};var a})}saveNamedQuery(e,t){return m_(e).put({name:(r=t).name,readTime:ad(Yr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function pC(n){return Qr(n,"bundles")}function m_(n){return Qr(n,"namedQueries")}class y_{constructor(e,t){this.It=e,this.userId=t}static oe(e,t){return new y_(e,t.uid||"")}getOverlay(e,t){return cf(e).get(mb(this.userId,t)).next(r=>r?Fg(this.It,r):null)}getOverlays(e,t){const r=Ru();return se.forEach(t,a=>this.getOverlay(e,a).next(c=>{null!==c&&r.set(a,c)})).next(()=>r)}saveOverlays(e,t,r){const a=[];return r.forEach((c,f)=>{const y=new pb(t,f);a.push(this.ue(e,y))}),se.waitFor(a)}removeOverlaysForBatchId(e,t,r){const a=new Set;t.forEach(f=>a.add(Yi(f.getCollectionPath())));const c=[];return a.forEach(f=>{const y=IDBKeyRange.bound([this.userId,f,r],[this.userId,f,r+1],!1,!0);c.push(cf(e).Y("collectionPathOverlayIndex",y))}),se.waitFor(c)}getOverlaysForCollection(e,t,r){const a=Ru(),c=Yi(t),f=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,Number.POSITIVE_INFINITY],!0);return cf(e).W("collectionPathOverlayIndex",f).next(y=>{for(const w of y){const D=Fg(this.It,w);a.set(D.getKey(),D)}return a})}getOverlaysForCollectionGroup(e,t,r,a){const c=Ru();let f;const y=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return cf(e).Z({index:"collectionGroupOverlayIndex",range:y},(w,D,R)=>{const O=Fg(this.It,D);c.size()<a||O.largestBatchId===f?(c.set(O.getKey(),O),f=O.largestBatchId):R.done()}).next(()=>c)}ue(e,t){return cf(e).put(function(r,a,c){const[f,y,w]=mb(a,c.mutation.key);return{userId:a,collectionPath:y,documentId:w,collectionGroup:c.mutation.key.getCollectionGroup(),largestBatchId:c.largestBatchId,overlayMutation:of(r.re,c.mutation)}}(this.It,this.userId,t))}}function cf(n){return Qr(n,"documentOverlays")}class cd{constructor(){}ce(e,t){this.ae(e,t),t.he()}ae(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe(ir(e.integerValue));else if("doubleValue"in e){const r=ir(e.doubleValue);isNaN(r)?this.le(t,13):(this.le(t,15),Yh(r)?t.fe(0):t.fe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.le(t,20),"string"==typeof r?t.de(r):(t.de(`${r.seconds||""}`),t.fe(r.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me(Mc(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.le(t,45),t.fe(r.latitude||0),t.fe(r.longitude||0)}else"mapValue"in e?bI(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):Je()}_e(e,t){this.le(t,25),this.Ie(e,t)}Ie(e,t){t.de(e)}ye(e,t){const r=e.fields||{};this.le(t,55);for(const a of Object.keys(r))this._e(a,t),this.ae(r[a],t)}pe(e,t){const r=e.values||[];this.le(t,50);for(const a of r)this.ae(a,t)}ge(e,t){this.le(t,37),Ve.fromName(e).path.forEach(r=>{this.le(t,60),this.Ie(r,t)})}le(e,t){e.fe(t)}we(e){e.fe(2)}}function gC(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function yb(n){const e=64-function(t){let r=0;for(let a=0;a<8;++a){const c=gC(255&t[a]);if(r+=c,8!==c)break}return r}(n);return Math.ceil(e/8)}cd.Te=new cd;class mC{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ae(r.value),r=t.next();this.Re()}be(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Pe(r.value),r=t.next();this.ve()}Ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const a=t.codePointAt(0);this.Ae(240|a>>>18),this.Ae(128|63&a>>>12),this.Ae(128|63&a>>>6),this.Ae(128|63&a)}}this.Re()}Se(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Pe(r);else if(r<2048)this.Pe(960|r>>>6),this.Pe(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Pe(480|r>>>12),this.Pe(128|63&r>>>6),this.Pe(128|63&r);else{const a=t.codePointAt(0);this.Pe(240|a>>>18),this.Pe(128|63&a>>>12),this.Pe(128|63&a>>>6),this.Pe(128|63&a)}}this.ve()}De(e){const t=this.Ce(e),r=yb(t);this.xe(1+r),this.buffer[this.position++]=255&r;for(let a=t.length-r;a<t.length;++a)this.buffer[this.position++]=255&t[a]}Ne(e){const t=this.Ce(e),r=yb(t);this.xe(1+r),this.buffer[this.position++]=~(255&r);for(let a=t.length-r;a<t.length;++a)this.buffer[this.position++]=~(255&t[a])}ke(){this.Oe(255),this.Oe(255)}Me(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Ce(e){const t=function(a){const c=new DataView(new ArrayBuffer(8));return c.setFloat64(0,a,!1),new Uint8Array(c.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let a=1;a<t.length;++a)t[a]^=r?255:0;return t}Ae(e){const t=255&e;0===t?(this.Oe(0),this.Oe(255)):255===t?(this.Oe(255),this.Oe(0)):this.Oe(t)}Pe(e){const t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}Re(){this.Oe(0),this.Oe(1)}ve(){this.Fe(0),this.Fe(1)}Oe(e){this.xe(1),this.buffer[this.position++]=e}Fe(e){this.xe(1),this.buffer[this.position++]=~e}xe(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const a=new Uint8Array(r);a.set(this.buffer),this.buffer=a}}class dM{constructor(e){this.Be=e}me(e){this.Be.Ee(e)}de(e){this.Be.Ve(e)}fe(e){this.Be.De(e)}he(){this.Be.ke()}}class YA{constructor(e){this.Be=e}me(e){this.Be.be(e)}de(e){this.Be.Se(e)}fe(e){this.Be.Ne(e)}he(){this.Be.Me()}}class Ba{constructor(){this.Be=new mC,this.Le=new dM(this.Be),this.Ue=new YA(this.Be)}seed(e){this.Be.seed(e)}qe(e){return 0===e?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class lf{constructor(e,t,r,a){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=a}Ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new lf(this.indexId,this.documentKey,this.arrayValue,r)}}function Ou(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=Lg(n.arrayValue,e.arrayValue),0!==t?t:(t=Lg(n.directionalValue,e.directionalValue),0!==t?t:Ve.comparator(n.documentKey,e.documentKey)))}function Lg(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class QA{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ge=e.orderBy,this.Qe=[];for(const t of e.filters){const r=t;r.dt()?this.je=r:this.Qe.push(r)}}We(e){const t=pI(e);if(void 0!==t&&!this.ze(t))return!1;const r=Wh(e);let a=0,c=0;for(;a<r.length&&this.ze(r[a]);++a);if(a===r.length)return!0;if(void 0!==this.je){const f=r[a];if(!this.He(this.je,f)||!this.Je(this.Ge[c++],f))return!1;++a}for(;a<r.length;++a){const f=r[a];if(c>=this.Ge.length||!this.Je(this.Ge[c++],f))return!1}return!0}ze(e){for(const t of this.Qe)if(this.He(t,e))return!0;return!1}He(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Je(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class df{constructor(){this.Ye=new _b}addToCollectionParentIndex(e,t){return this.Ye.add(t),se.resolve()}getCollectionParents(e,t){return se.resolve(this.Ye.getEntries(t))}addFieldIndex(e,t){return se.resolve()}deleteFieldIndex(e,t){return se.resolve()}getDocumentsMatchingTarget(e,t){return se.resolve(null)}getIndexType(e,t){return se.resolve(0)}getFieldIndexes(e,t){return se.resolve([])}getNextCollectionGroupToUpdate(e){return se.resolve(null)}getMinOffset(e,t){return se.resolve(Fs.min())}getMinOffsetFromCollectionGroup(e,t){return se.resolve(Fs.min())}updateCollectionGroup(e,t,r){return se.resolve()}updateIndexEntries(e,t){return se.resolve()}}class _b{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t]||new ln(Jt.comparator),c=!a.has(r);return this.index[t]=a.add(r),c}has(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t];return a&&a.has(r)}getEntries(e){return(this.index[e]||new ln(Jt.comparator)).toArray()}}const vb=new Uint8Array(0);class JA{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new _b,this.Ze=new Ls(r=>Oc(r),(r,a)=>Fa(r,a)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const r=t.lastSegment(),a=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const c={collectionId:r,parent:Yi(a)};return Ko(e).put(c)}return se.resolve()}getCollectionParents(e,t){const r=[],a=IDBKeyRange.bound([t,""],[_A(t),""],!1,!0);return Ko(e).W(a).next(c=>{for(const f of c){if(f.collectionId!==t)break;r.push(Ua(f.parent))}return r})}addFieldIndex(e,t){const r=Eb(e),a={indexId:(f=t).indexId,collectionGroup:f.collectionGroup,fields:f.fields.map(y=>[y.fieldPath.canonicalString(),y.kind])};var f;delete a.indexId;const c=r.add(a);if(t.indexState){const f=Vc(e);return c.next(y=>{f.put(g_(y,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return c.next()}deleteFieldIndex(e,t){const r=Eb(e),a=Vc(e),c=hf(e);return r.delete(t.indexId).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>c.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=hf(e);let a=!0;const c=new Map;return se.forEach(this.tn(t),f=>this.en(e,f).next(y=>{a&&(a=!!y),c.set(f,y)})).next(()=>{if(a){let f=Ot();const y=[];return se.forEach(c,(w,D)=>{var R;Ne("IndexedDbIndexManager",`Using index ${R=w,`id=${R.indexId}|cg=${R.collectionGroup}|f=${R.fields.map(Pt=>`${Pt.fieldPath}:${Pt.kind}`).join(",")}`} to execute ${Oc(t)}`);const O=function(Pt,Ft){const Wt=pI(Ft);if(void 0===Wt)return null;for(const Zt of s_(Pt,Wt.fieldPath))switch(Zt.op){case"array-contains-any":return Zt.value.arrayValue.values||[];case"array-contains":return[Zt.value]}return null}(D,w),G=function(Pt,Ft){const Wt=new Map;for(const Zt of Wh(Ft))for(const ts of s_(Pt,Zt.fieldPath))switch(ts.op){case"==":case"in":Wt.set(Zt.fieldPath.canonicalString(),ts.value);break;case"not-in":case"!=":return Wt.set(Zt.fieldPath.canonicalString(),ts.value),Array.from(Wt.values())}return null}(D,w),q=function(Pt,Ft){const Wt=[];let Zt=!0;for(const ts of Wh(Ft)){const hw=0===ts.kind?BE(Pt,ts.fieldPath,Pt.startAt):SI(Pt,ts.fieldPath,Pt.startAt);Wt.push(hw.value),Zt&&(Zt=hw.inclusive)}return new Kr(Wt,Zt)}(D,w),te=function(Pt,Ft){const Wt=[];let Zt=!0;for(const ts of Wh(Ft)){const hw=0===ts.kind?SI(Pt,ts.fieldPath,Pt.endAt):BE(Pt,ts.fieldPath,Pt.endAt);Wt.push(hw.value),Zt&&(Zt=hw.inclusive)}return new Kr(Wt,Zt)}(D,w),Re=this.nn(w,D,q),Fe=this.nn(w,D,te),ot=this.sn(w,D,G),Ct=this.rn(w.indexId,O,Re,q.inclusive,Fe,te.inclusive,ot);return se.forEach(Ct,Pt=>r.J(Pt,t.limit).next(Ft=>{Ft.forEach(Wt=>{const Zt=Ve.fromSegments(Wt.documentKey);f.has(Zt)||(f=f.add(Zt),y.push(Zt))})}))}).next(()=>y)}return se.resolve(null)})}tn(e){let t=this.Ze.get(e);return t||(t=[e],this.Ze.set(e,t),t)}rn(e,t,r,a,c,f,y){const w=(null!=t?t.length:1)*Math.max(r.length,c.length),D=w/(null!=t?t.length:1),R=[];for(let O=0;O<w;++O){const G=t?this.on(t[O/D]):vb,q=this.un(e,G,r[O%D],a),te=this.cn(e,G,c[O%D],f),Re=y.map(Fe=>this.un(e,G,Fe,!0));R.push(...this.createRange(q,te,Re))}return R}un(e,t,r,a){const c=new lf(e,Ve.empty(),t,r);return a?c:c.Ke()}cn(e,t,r,a){const c=new lf(e,Ve.empty(),t,r);return a?c.Ke():c}en(e,t){const r=new QA(t),a=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,a).next(c=>{let f=null;for(const y of c)r.We(y)&&(!f||y.fields.length>f.fields.length)&&(f=y);return f})}getIndexType(e,t){let r=2;return se.forEach(this.tn(t),a=>this.en(e,a).next(c=>{c?0!==r&&c.fields.length<function(f){let y=new ln(Fn.comparator),w=!1;for(const D of f.filters){const R=D;R.field.isKeyField()||("array-contains"===R.op||"array-contains-any"===R.op?w=!0:y=y.add(R.field))}for(const D of f.orderBy)D.field.isKeyField()||(y=y.add(D.field));return y.size+(w?1:0)}(a)&&(r=1):r=0})).next(()=>r)}an(e,t){const r=new Ba;for(const a of Wh(e)){const c=t.data.field(a.fieldPath);if(null==c)return null;const f=r.qe(a.kind);cd.Te.ce(c,f)}return r.$e()}on(e){const t=new Ba;return cd.Te.ce(e,t.qe(0)),t.$e()}hn(e,t){const r=new Ba;return cd.Te.ce(Nc(this.databaseId,t),r.qe(function(a){const c=Wh(a);return 0===c.length?0:c[c.length-1].kind}(e))),r.$e()}sn(e,t,r){if(null===r)return[];let a=[];a.push(new Ba);let c=0;for(const f of Wh(e)){const y=r[c++];for(const w of a)if(this.ln(t,f.fieldPath)&&Qh(y))a=this.fn(a,f,y);else{const D=w.qe(f.kind);cd.Te.ce(y,D)}}return this.dn(a)}nn(e,t,r){return this.sn(e,t,r.position)}dn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].$e();return t}fn(e,t,r){const a=[...e],c=[];for(const f of r.arrayValue.values||[])for(const y of a){const w=new Ba;w.seed(y.$e()),cd.Te.ce(f,w.qe(t.kind)),c.push(w)}return c}ln(e,t){return!!e.filters.find(r=>r instanceof Zr&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=Eb(e),a=Vc(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(c=>{const f=[];return se.forEach(c,y=>a.get([y.indexId,this.uid]).next(w=>{f.push(function(D,R){const O=R?new Ky(R.sequenceNumber,new Fs(Lc(R.readTime),new Ve(Ua(R.documentKey)),R.largestBatchId)):Ky.empty(),G=D.fields.map(([q,te])=>new Zy(Fn.fromServerFormat(q),te));return new zy(D.indexId,D.collectionGroup,G,O)}(y,w))})).next(()=>f)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,a)=>{const c=r.indexState.sequenceNumber-a.indexState.sequenceNumber;return 0!==c?c:Rt(r.collectionGroup,a.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const a=Eb(e),c=Vc(e);return this._n(e).next(f=>a.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(y=>se.forEach(y,w=>c.put(g_(w.indexId,this.user,f,r)))))}updateIndexEntries(e,t){const r=new Map;return se.forEach(t,(a,c)=>{const f=r.get(a.collectionGroup);return(f?se.resolve(f):this.getFieldIndexes(e,a.collectionGroup)).next(y=>(r.set(a.collectionGroup,y),se.forEach(y,w=>this.wn(e,a,w).next(D=>{const R=this.mn(c,w);return D.isEqual(R)?se.resolve():this.gn(e,c,w,D,R)}))))})}yn(e,t,r,a){return hf(e).put({indexId:a.indexId,uid:this.uid,arrayValue:a.arrayValue,directionalValue:a.directionalValue,orderedDocumentKey:this.hn(r,t.key),documentKey:t.key.path.toArray()})}pn(e,t,r,a){return hf(e).delete([a.indexId,this.uid,a.arrayValue,a.directionalValue,this.hn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const a=hf(e);let c=new ln(Ou);return a.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.hn(r,t)])},(f,y)=>{c=c.add(new lf(r.indexId,t,y.arrayValue,y.directionalValue))}).next(()=>c)}mn(e,t){let r=new ln(Ou);const a=this.an(t,e);if(null==a)return r;const c=pI(t);if(null!=c){const f=e.data.field(c.fieldPath);if(Qh(f))for(const y of f.arrayValue.values||[])r=r.add(new lf(t.indexId,e.key,this.on(y),a))}else r=r.add(new lf(t.indexId,e.key,vb,a));return r}gn(e,t,r,a,c){Ne("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const f=[];return function(y,w,D,R,O){const G=y.getIterator(),q=w.getIterator();let te=Rc(G),Re=Rc(q);for(;te||Re;){let Fe=!1,ot=!1;if(te&&Re){const Ct=D(te,Re);Ct<0?ot=!0:Ct>0&&(Fe=!0)}else null!=te?ot=!0:Fe=!0;Fe?(R(Re),Re=Rc(q)):ot?(O(te),te=Rc(G)):(te=Rc(G),Re=Rc(q))}}(a,c,Ou,y=>{f.push(this.yn(e,t,r,y))},y=>{f.push(this.pn(e,t,r,y))}),se.waitFor(f)}_n(e){let t=1;return Vc(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,a,c)=>{c.done(),t=a.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((f,y)=>Ou(f,y)).filter((f,y,w)=>!y||0!==Ou(f,w[y-1]));const a=[];a.push(e);for(const f of r){const y=Ou(f,e),w=Ou(f,t);if(0===y)a[0]=e.Ke();else if(y>0&&w<0)a.push(f),a.push(f.Ke());else if(w>0)break}a.push(t);const c=[];for(let f=0;f<a.length;f+=2)c.push(IDBKeyRange.bound([a[f].indexId,this.uid,a[f].arrayValue,a[f].directionalValue,vb,[]],[a[f+1].indexId,this.uid,a[f+1].arrayValue,a[f+1].directionalValue,vb,[]]));return c}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(yC)}getMinOffset(e,t){return se.mapArray(this.tn(t),r=>this.en(e,r).next(a=>a||Je())).next(yC)}}function Ko(n){return Qr(n,"collectionParents")}function hf(n){return Qr(n,"indexEntries")}function Eb(n){return Qr(n,"indexConfiguration")}function Vc(n){return Qr(n,"indexState")}function yC(n){pt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const a=n[r].indexState.offset;Yy(a,e)<0&&(e=a),t<a.largestBatchId&&(t=a.largestBatchId)}return new Fs(e.readTime,e.documentKey,t)}const _C={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Vs{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Vs(e,Vs.DEFAULT_COLLECTION_PERCENTILE,Vs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function vC(n,e,t){const r=n.store("mutations"),a=n.store("documentMutations"),c=[],f=IDBKeyRange.only(t.batchId);let y=0;const w=r.Z({range:f},(R,O,G)=>(y++,G.delete()));c.push(w.next(()=>{pt(1===y)}));const D=[];for(const R of t.mutations){const O=rC(e,R.key.path,t.batchId);c.push(a.delete(O)),D.push(R.key)}return se.waitFor(c).next(()=>D)}function __(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Je();e=n.noDocument}return JSON.stringify(e).length}Vs.DEFAULT_COLLECTION_PERCENTILE=10,Vs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Vs.DEFAULT=new Vs(41943040,Vs.DEFAULT_COLLECTION_PERCENTILE,Vs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Vs.DISABLED=new Vs(-1,0,0);class v_{constructor(e,t,r,a){this.userId=e,this.It=t,this.indexManager=r,this.referenceDelegate=a,this.In={}}static oe(e,t,r,a){pt(""!==e.uid);const c=e.isAuthenticated()?e.uid:"";return new v_(c,t,r,a)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ku(e).Z({index:"userMutationsIndex",range:r},(a,c,f)=>{t=!1,f.done()}).next(()=>t)}addMutationBatch(e,t,r,a){const c=Uc(e),f=ku(e);return f.add({}).next(y=>{pt("number"==typeof y);const w=new hb(y,t,r,a),D=function(G,q,te){const Re=te.baseMutations.map(ot=>of(G.re,ot)),Fe=te.mutations.map(ot=>of(G.re,ot));return{userId:q,batchId:te.batchId,localWriteTimeMs:te.localWriteTime.toMillis(),baseMutations:Re,mutations:Fe}}(this.It,this.userId,w),R=[];let O=new ln((G,q)=>Rt(G.canonicalString(),q.canonicalString()));for(const G of a){const q=rC(this.userId,G.key.path,y);O=O.add(G.key.path.popLast()),R.push(f.put(D)),R.push(c.put(q,BA))}return O.forEach(G=>{R.push(this.indexManager.addToCollectionParentIndex(e,G))}),e.addOnCommittedListener(()=>{this.In[y]=w.keys()}),se.waitFor(R).next(()=>w)})}lookupMutationBatch(e,t){return ku(e).get(t).next(r=>r?(pt(r.userId===this.userId),ud(this.It,r)):null)}Tn(e,t){return this.In[t]?se.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const a=r.keys();return this.In[t]=a,a}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,a=IDBKeyRange.lowerBound([this.userId,r]);let c=null;return ku(e).Z({index:"userMutationsIndex",range:a},(f,y,w)=>{y.userId===this.userId&&(pt(y.batchId>=r),c=ud(this.It,y)),w.done()}).next(()=>c)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return ku(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(a,c,f)=>{r=c.batchId,f.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ku(e).W("userMutationsIndex",t).next(r=>r.map(a=>ud(this.It,a)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Og(this.userId,t.path),a=IDBKeyRange.lowerBound(r),c=[];return Uc(e).Z({range:a},(f,y,w)=>{const[D,R,O]=f,G=Ua(R);if(D===this.userId&&t.path.isEqual(G))return ku(e).get(O).next(q=>{if(!q)throw Je();pt(q.userId===this.userId),c.push(ud(this.It,q))});w.done()}).next(()=>c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new ln(Rt);const a=[];return t.forEach(c=>{const f=Og(this.userId,c.path),y=IDBKeyRange.lowerBound(f),w=Uc(e).Z({range:y},(D,R,O)=>{const[G,q,te]=D,Re=Ua(q);G===this.userId&&c.path.isEqual(Re)?r=r.add(te):O.done()});a.push(w)}),se.waitFor(a).next(()=>this.En(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,a=r.length+1,c=Og(this.userId,r),f=IDBKeyRange.lowerBound(c);let y=new ln(Rt);return Uc(e).Z({range:f},(w,D,R)=>{const[O,G,q]=w,te=Ua(G);O===this.userId&&r.isPrefixOf(te)?te.length===a&&(y=y.add(q)):R.done()}).next(()=>this.En(e,y))}En(e,t){const r=[],a=[];return t.forEach(c=>{a.push(ku(e).get(c).next(f=>{if(null===f)throw Je();pt(f.userId===this.userId),r.push(ud(this.It,f))}))}),se.waitFor(a).next(()=>r)}removeMutationBatch(e,t){return vC(e.ie,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),se.forEach(r,a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return se.resolve();const r=IDBKeyRange.lowerBound([this.userId]),a=[];return Uc(e).Z({range:r},(c,f,y)=>{if(c[0]===this.userId){const w=Ua(c[1]);a.push(w)}else y.done()}).next(()=>{pt(0===a.length)})})}containsKey(e,t){return E_(e,this.userId,t)}Rn(e){return bb(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function E_(n,e,t){const r=Og(e,t.path),a=r[1],c=IDBKeyRange.lowerBound(r);let f=!1;return Uc(n).Z({range:c,X:!0},(y,w,D)=>{const[R,O,G]=y;R===e&&O===a&&(f=!0),D.done()}).next(()=>f)}function ku(n){return Qr(n,"mutations")}function Uc(n){return Qr(n,"documentMutations")}function bb(n){return Qr(n,"mutationQueues")}class ld{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new ld(0)}static vn(){return new ld(-1)}}class hM{constructor(e,t){this.referenceDelegate=e,this.It=t}allocateTargetId(e){return this.Vn(e).next(t=>{const r=new ld(t.highestTargetId);return t.highestTargetId=r.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>mt.fromTimestamp(new qn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Vn(e).next(a=>(a.highestListenSequenceNumber=t,r&&(a.lastRemoteSnapshotVersion=r.toTimestamp()),t>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=t),this.Sn(e,a)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(r=>(r.targetCount+=1,this.Cn(t,r),this.Sn(e,r))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>ff(e).delete(t.targetId)).next(()=>this.Vn(e)).next(r=>(pt(r.targetCount>0),r.targetCount-=1,this.Sn(e,r)))}removeTargets(e,t,r){let a=0;const c=[];return ff(e).Z((f,y)=>{const w=kg(y);w.sequenceNumber<=t&&null===r.get(w.targetId)&&(a++,c.push(this.removeTargetData(e,w)))}).next(()=>se.waitFor(c)).next(()=>a)}forEachTarget(e,t){return ff(e).Z((r,a)=>{const c=kg(a);t(c)})}Vn(e){return EC(e).get("targetGlobalKey").next(t=>(pt(null!==t),t))}Sn(e,t){return EC(e).put("targetGlobalKey",t)}Dn(e,t){return ff(e).put(fC(this.It,t))}Cn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Oc(t),a=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let c=null;return ff(e).Z({range:a,index:"queryTargetsIndex"},(f,y,w)=>{const D=kg(y);Fa(t,D.target)&&(c=D,w.done())}).next(()=>c)}addMatchingKeys(e,t,r){const a=[],c=Bc(e);return t.forEach(f=>{const y=Yi(f.path);a.push(c.put({targetId:r,path:y})),a.push(this.referenceDelegate.addReference(e,r,f))}),se.waitFor(a)}removeMatchingKeys(e,t,r){const a=Bc(e);return se.forEach(t,c=>{const f=Yi(c.path);return se.waitFor([a.delete([r,f]),this.referenceDelegate.removeReference(e,r,c)])})}removeMatchingKeysForTargetId(e,t){const r=Bc(e),a=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(a)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),a=Bc(e);let c=Ot();return a.Z({range:r,X:!0},(f,y,w)=>{const D=Ua(f[1]),R=new Ve(D);c=c.add(R)}).next(()=>c)}containsKey(e,t){const r=Yi(t.path),a=IDBKeyRange.bound([r],[_A(r)],!1,!0);let c=0;return Bc(e).Z({index:"documentTargetsIndex",X:!0,range:a},([f,y],w,D)=>{0!==f&&(c++,D.done())}).next(()=>c>0)}se(e,t){return ff(e).get(t).next(r=>r?kg(r):null)}}function ff(n){return Qr(n,"targets")}function EC(n){return Qr(n,"targetGlobal")}function Bc(n){return Qr(n,"targetDocuments")}function wb([n,e],[t,r]){const a=Rt(n,t);return 0===a?Rt(e,r):a}class bC{constructor(e){this.xn=e,this.buffer=new ln(wb),this.Nn=0}kn(){return++this.Nn}On(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();wb(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class wC{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var t=this;Ne("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,ge.Z)(function*(){t.Mn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){xc(r)?Ne("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Go(r)}yield t.Fn(3e5)}))}}class XA{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return se.resolve(Oi.at);const r=new bC(t);return this.$n.forEachTarget(e,a=>r.On(a.sequenceNumber)).next(()=>this.$n.Ln(e,a=>r.On(a))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.$n.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ne("LruGarbageCollector","Garbage collection skipped; disabled"),se.resolve(_C)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ne("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),_C):this.Un(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}Un(e,t){let r,a,c,f,y,w,D;const R=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(O=>(O>this.params.maximumSequenceNumbersToCollect?(Ne("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${O}`),a=this.params.maximumSequenceNumbersToCollect):a=O,f=Date.now(),this.nthSequenceNumber(e,a))).next(O=>(r=O,y=Date.now(),this.removeTargets(e,r,t))).next(O=>(c=O,w=Date.now(),this.removeOrphanedDocuments(e,r))).next(O=>(D=Date.now(),Gy()<=Cc.in.DEBUG&&Ne("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${f-R}ms\n\tDetermined least recently used ${a} in `+(y-f)+`ms\n\tRemoved ${c} targets in `+(w-y)+`ms\n\tRemoved ${O} documents in `+(D-w)+`ms\nTotal Duration: ${D-R}ms`),se.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:c,documentsRemoved:O})))}}class eS{constructor(e,t){this.db=e,this.garbageCollector=new XA(this,t)}Bn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(a=>r+a))}qn(e){let t=0;return this.Ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(r,a)=>t(a))}addReference(e,t,r){return Vg(e,r)}removeReference(e,t,r){return Vg(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Vg(e,t)}Gn(e,t){return function(r,a){let c=!1;return bb(r).tt(f=>E_(r,f,a).next(y=>(y&&(c=!0),se.resolve(!y)))).next(()=>c)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let c=0;return this.Kn(e,(f,y)=>{if(y<=t){const w=this.Gn(e,f).next(D=>{if(!D)return c++,r.getEntry(e,f).next(()=>(r.removeEntry(f,mt.min()),Bc(e).delete([0,Yi(f.path)])))});a.push(w)}}).next(()=>se.waitFor(a)).next(()=>r.apply(e)).next(()=>c)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Vg(e,t)}Kn(e,t){const r=Bc(e);let a,c=Oi.at;return r.Z({index:"documentTargetsIndex"},([f,y],{path:w,sequenceNumber:D})=>{0===f?(c!==Oi.at&&t(new Ve(Ua(a)),c),c=D,a=w):c=Oi.at}).next(()=>{c!==Oi.at&&t(new Ve(Ua(a)),c)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Vg(n,e){return Bc(n).put((r=n.currentSequenceNumber,{targetId:0,path:Yi(e.path),sequenceNumber:r}));var r}class Ug{constructor(){this.changes=new Ls(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,wn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?se.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class tS{constructor(e){this.It=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Yo(e).put(r)}removeEntry(e,t,r){return Yo(e).delete(function(a,c){const f=a.path.toArray();return[f.slice(0,f.length-2),f[f.length-2],p_(c),f[f.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Qn(e,r)))}getEntry(e,t){let r=wn.newInvalidDocument(t);return Yo(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(jg(t))},(a,c)=>{r=this.jn(t,c)}).next(()=>r)}Wn(e,t){let r={size:0,document:wn.newInvalidDocument(t)};return Yo(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(jg(t))},(a,c)=>{r={document:this.jn(t,c),size:__(c)}}).next(()=>r)}getEntries(e,t){let r=Pi();return this.zn(e,t,(a,c)=>{const f=this.jn(a,c);r=r.insert(a,f)}).next(()=>r)}Hn(e,t){let r=Pi(),a=new rr(Ve.comparator);return this.zn(e,t,(c,f)=>{const y=this.jn(c,f);r=r.insert(c,y),a=a.insert(c,__(f))}).next(()=>({documents:r,Jn:a}))}zn(e,t,r){if(t.isEmpty())return se.resolve();let a=new ln(nS);t.forEach(w=>a=a.add(w));const c=IDBKeyRange.bound(jg(a.first()),jg(a.last())),f=a.getIterator();let y=f.getNext();return Yo(e).Z({index:"documentKeyIndex",range:c},(w,D,R)=>{const O=Ve.fromSegments([...D.prefixPath,D.collectionGroup,D.documentId]);for(;y&&nS(y,O)<0;)r(y,null),y=f.getNext();y&&y.isEqual(O)&&(r(y,D),y=f.hasNext()?f.getNext():null),y?R.j(jg(y)):R.done()}).next(()=>{for(;y;)r(y,null),y=f.hasNext()?f.getNext():null})}getAllFromCollection(e,t,r){const a=[t.popLast().toArray(),t.lastSegment(),p_(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Yo(e).W(IDBKeyRange.bound(a,c,!0)).next(f=>{let y=Pi();for(const w of f){const D=this.jn(Ve.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);y=y.insert(D.key,D)}return y})}getAllFromCollectionGroup(e,t,r,a){let c=Pi();const f=IC(t,r),y=IC(t,Fs.max());return Yo(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(f,y,!0)},(w,D,R)=>{const O=this.jn(Ve.fromSegments(D.prefixPath.concat(D.collectionGroup,D.documentId)),D);c=c.insert(O.key,O),c.size===a&&R.done()}).next(()=>c)}newChangeBuffer(e){return new b_(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Bg(e).get("remoteDocumentGlobalKey").next(t=>(pt(!!t),t))}Qn(e,t){return Bg(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const r=function(n,e){let t;if(e.document)t=QI(n.re,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Ve.fromSegments(e.noDocument.path),a=Lc(e.noDocument.readTime);t=wn.newNoDocument(r,a),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Je();{const r=Ve.fromSegments(e.unknownDocument.path),a=Lc(e.unknownDocument.version);t=wn.newUnknownDocument(r,a)}}return e.readTime&&t.setReadTime(function(r){const a=new qn(r[0],r[1]);return mt.fromTimestamp(a)}(e.readTime)),t}(this.It,t);if(!r.isNoDocument()||!r.version.isEqual(mt.min()))return r}return wn.newInvalidDocument(e)}}function Ib(n){return new tS(n)}class b_ extends Ug{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new Ls(r=>r.toString(),(r,a)=>r.isEqual(a))}applyChanges(e){const t=[];let r=0,a=new ln((c,f)=>Rt(c.canonicalString(),f.canonicalString()));return this.changes.forEach((c,f)=>{const y=this.Xn.get(c);if(t.push(this.Yn.removeEntry(e,c,y.readTime)),f.isValidDocument()){const w=gb(this.Yn.It,f);a=a.add(c.path.popLast()),r+=__(w)-y.size,t.push(this.Yn.addEntry(e,c,w))}else if(r-=y.size,this.trackRemovals){const w=gb(this.Yn.It,f.convertToNoDocument(mt.min()));t.push(this.Yn.addEntry(e,c,w))}}),a.forEach(c=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,c))}),t.push(this.Yn.updateMetadata(e,r)),se.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(r=>(this.Xn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:r,Jn:a})=>(a.forEach((c,f)=>{this.Xn.set(c,{size:f,readTime:r.get(c).readTime})}),r))}}function Bg(n){return Qr(n,"remoteDocumentGlobal")}function Yo(n){return Qr(n,"remoteDocumentsV14")}function jg(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function IC(n,e){const t=e.documentKey.path.toArray();return[n,p_(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function nS(n,e){const t=n.path.toArray(),r=e.path.toArray();let a=0;for(let c=0;c<t.length-2&&c<r.length-2;++c)if(a=Rt(t[c],r[c]),a)return a;return a=Rt(t.length,r.length),a||(a=Rt(t[t.length-2],r[r.length-2]),a||Rt(t[t.length-1],r[r.length-1]))}class rS{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class CC{constructor(e,t,r,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=a}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(a=>(r=a,this.getBaseDocument(e,t,r))).next(a=>(null!==r&&xg(r.mutation,a,vs.empty(),qn.now()),a))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Ot()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Ot()){const a=Ru();return this.populateOverlays(e,a,t).next(()=>this.computeViews(e,t,a,r).next(c=>{let f=tf();return c.forEach((y,w)=>{f=f.insert(y,w.overlayedDocument)}),f}))}getOverlayedDocuments(e,t){const r=Ru();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Ot()))}populateOverlays(e,t,r){const a=[];return r.forEach(c=>{t.has(c)||a.push(c)}),this.documentOverlayCache.getOverlays(e,a).next(c=>{c.forEach((f,y)=>{t.set(f,y)})})}computeViews(e,t,r,a){let c=Pi();const f=Rg(),y=Rg();return t.forEach((w,D)=>{const R=r.get(D.key);a.has(D.key)&&(void 0===R||R.mutation instanceof Va)?c=c.insert(D.key,D):void 0!==R&&(f.set(D.key,R.mutation.getFieldMask()),xg(R.mutation,D,R.mutation.getFieldMask(),qn.now()))}),this.recalculateAndSaveOverlays(e,c).next(w=>(w.forEach((D,R)=>f.set(D,R)),t.forEach((D,R)=>{var O;return y.set(D,new rS(R,null!==(O=f.get(D))&&void 0!==O?O:null))}),y))}recalculateAndSaveOverlays(e,t){const r=Rg();let a=new rr((f,y)=>f-y),c=Ot();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(f=>{for(const y of f)y.keys().forEach(w=>{const D=t.get(w);if(null===D)return;let R=r.get(w)||vs.empty();R=y.applyToLocalView(D,R),r.set(w,R);const O=(a.get(y.batchId)||Ot()).add(w);a=a.insert(y.batchId,O)})}).next(()=>{const f=[],y=a.getReverseIterator();for(;y.hasNext();){const w=y.getNext(),D=w.key,R=w.value,O=dt();R.forEach(G=>{if(!c.has(G)){const q=HI(t.get(G),r.get(G));null!==q&&O.set(G,q),c=c.add(G)}}),f.push(this.documentOverlayCache.saveOverlays(e,D,O))}return se.waitFor(f)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return Ve.isDocumentKey((a=t).path)&&null===a.collectionGroup&&0===a.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):$E(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var a}getNextDocuments(e,t,r,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,a).next(c=>{const f=a-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,a-c.size):se.resolve(Ru());let y=-1,w=c;return f.next(D=>se.forEach(D,(R,O)=>(y<O.largestBatchId&&(y=O.largestBatchId),c.get(R)?se.resolve():this.getBaseDocument(e,R,O).next(G=>{w=w.insert(R,G)}))).next(()=>this.populateOverlays(e,D,c)).next(()=>this.computeViews(e,w,D,Ot())).next(R=>({batchId:y,changes:eb(R)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ve(t)).next(r=>{let a=tf();return r.isFoundDocument()&&(a=a.insert(r.key,r)),a})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const a=t.collectionGroup;let c=tf();return this.indexManager.getCollectionParents(e,a).next(f=>se.forEach(f,y=>{const w=(D=t,R=y.child(a),new xu(R,null,D.explicitOrderBy.slice(),D.filters.slice(),D.limit,D.limitType,D.startAt,D.endAt));var D,R;return this.getDocumentsMatchingCollectionQuery(e,w,r).next(D=>{D.forEach((R,O)=>{c=c.insert(R,O)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,t,r){let a;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(c=>(a=c,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(c=>{c.forEach((y,w)=>{const D=w.getKey();null===a.get(D)&&(a=a.insert(D,wn.newInvalidDocument(D)))});let f=tf();return a.forEach((y,w)=>{const D=c.get(y);void 0!==D&&xg(D.mutation,w,vs.empty(),qn.now()),Dg(t,w)&&(f=f.insert(y,w))}),f})}getBaseDocument(e,t,r){return null===r||1===r.mutation.type?this.remoteDocumentCache.getEntry(e,t):se.resolve(wn.newInvalidDocument(t))}}class iS{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return se.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var r;return this.Zn.set(t.id,{id:(r=t).id,version:r.version,createTime:Yr(r.createTime)}),se.resolve()}getNamedQuery(e,t){return se.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(r=t).name,query:Pg(r.bundledQuery),readTime:Yr(r.readTime)}),se.resolve();var r}}class sS{constructor(){this.overlays=new rr(Ve.comparator),this.es=new Map}getOverlay(e,t){return se.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Ru();return se.forEach(t,a=>this.getOverlay(e,a).next(c=>{null!==c&&r.set(a,c)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((a,c)=>{this.ue(e,t,c)}),se.resolve()}removeOverlaysForBatchId(e,t,r){const a=this.es.get(r);return void 0!==a&&(a.forEach(c=>this.overlays=this.overlays.remove(c)),this.es.delete(r)),se.resolve()}getOverlaysForCollection(e,t,r){const a=Ru(),c=t.length+1,f=new Ve(t.child("")),y=this.overlays.getIteratorFrom(f);for(;y.hasNext();){const w=y.getNext().value,D=w.getKey();if(!t.isPrefixOf(D.path))break;D.path.length===c&&w.largestBatchId>r&&a.set(w.getKey(),w)}return se.resolve(a)}getOverlaysForCollectionGroup(e,t,r,a){let c=new rr((D,R)=>D-R);const f=this.overlays.getIterator();for(;f.hasNext();){const D=f.getNext().value;if(D.getKey().getCollectionGroup()===t&&D.largestBatchId>r){let R=c.get(D.largestBatchId);null===R&&(R=Ru(),c=c.insert(D.largestBatchId,R)),R.set(D.getKey(),D)}}const y=Ru(),w=c.getIterator();for(;w.hasNext()&&(w.getNext().value.forEach((D,R)=>y.set(D,R)),!(y.size()>=a)););return se.resolve(y)}ue(e,t,r){const a=this.overlays.get(r.key);if(null!==a){const f=this.es.get(a.largestBatchId).delete(r.key);this.es.set(a.largestBatchId,f)}this.overlays=this.overlays.insert(r.key,new pb(t,r));let c=this.es.get(t);void 0===c&&(c=Ot(),this.es.set(t,c)),this.es.set(t,c.add(r.key))}}class Cb{constructor(){this.ns=new ln(Jr.ss),this.rs=new ln(Jr.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const r=new Jr(e,t);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.cs(new Jr(e,t))}hs(e,t){e.forEach(r=>this.removeReference(r,t))}ls(e){const t=new Ve(new Jt([])),r=new Jr(t,e),a=new Jr(t,e+1),c=[];return this.rs.forEachInRange([r,a],f=>{this.cs(f),c.push(f.key)}),c}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new Ve(new Jt([])),r=new Jr(t,e),a=new Jr(t,e+1);let c=Ot();return this.rs.forEachInRange([r,a],f=>{c=c.add(f.key)}),c}containsKey(e){const t=new Jr(e,0),r=this.ns.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Jr{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return Ve.comparator(e.key,t.key)||Rt(e._s,t._s)}static os(e,t){return Rt(e._s,t._s)||Ve.comparator(e.key,t.key)}}class oS{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new ln(Jr.ss)}checkEmpty(e){return se.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,a){const c=this.ws;this.ws++;const f=new hb(c,t,r,a);this.mutationQueue.push(f);for(const y of a)this.gs=this.gs.add(new Jr(y.key,c)),this.indexManager.addToCollectionParentIndex(e,y.key.path.popLast());return se.resolve(f)}lookupMutationBatch(e,t){return se.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const a=this.ps(t+1),c=a<0?0:a;return se.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return se.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Jr(t,0),a=new Jr(t,Number.POSITIVE_INFINITY),c=[];return this.gs.forEachInRange([r,a],f=>{const y=this.ys(f._s);c.push(y)}),se.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new ln(Rt);return t.forEach(a=>{const c=new Jr(a,0),f=new Jr(a,Number.POSITIVE_INFINITY);this.gs.forEachInRange([c,f],y=>{r=r.add(y._s)})}),se.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,a=r.length+1;let c=r;Ve.isDocumentKey(c)||(c=c.child(""));const f=new Jr(new Ve(c),0);let y=new ln(Rt);return this.gs.forEachWhile(w=>{const D=w.key.path;return!!r.isPrefixOf(D)&&(D.length===a&&(y=y.add(w._s)),!0)},f),se.resolve(this.Is(y))}Is(e){const t=[];return e.forEach(r=>{const a=this.ys(r);null!==a&&t.push(a)}),t}removeMutationBatch(e,t){pt(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let r=this.gs;return se.forEach(t.mutations,a=>{const c=new Jr(a.key,t.batchId);return r=r.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,t){const r=new Jr(t,0),a=this.gs.firstAfterOrEqual(r);return se.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return se.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class aS{constructor(e){this.Es=e,this.docs=new rr(Ve.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,a=this.docs.get(r),c=a?a.size:0,f=this.Es(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:f}),this.size+=f-c,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return se.resolve(r?r.document.mutableCopy():wn.newInvalidDocument(t))}getEntries(e,t){let r=Pi();return t.forEach(a=>{const c=this.docs.get(a);r=r.insert(a,c?c.document.mutableCopy():wn.newInvalidDocument(a))}),se.resolve(r)}getAllFromCollection(e,t,r){let a=Pi();const c=new Ve(t.child("")),f=this.docs.getIteratorFrom(c);for(;f.hasNext();){const{key:y,value:{document:w}}=f.getNext();if(!t.isPrefixOf(y.path))break;y.path.length>t.length+1||Yy(zl(w),r)<=0||(a=a.insert(w.key,w.mutableCopy()))}return se.resolve(a)}getAllFromCollectionGroup(e,t,r,a){Je()}As(e,t){return se.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new uS(this)}getSize(e){return se.resolve(this.size)}}class uS extends Ug{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((r,a)=>{a.isValidDocument()?t.push(this.Yn.addEntry(e,a)):this.Yn.removeEntry(r)}),se.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class fM{constructor(e){this.persistence=e,this.Rs=new Ls(t=>Oc(t),Fa),this.lastRemoteSnapshotVersion=mt.min(),this.highestTargetId=0,this.bs=0,this.Ps=new Cb,this.targetCount=0,this.vs=ld.Pn()}forEachTarget(e,t){return this.Rs.forEach((r,a)=>t(a)),se.resolve()}getLastRemoteSnapshotVersion(e){return se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return se.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),se.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.bs&&(this.bs=t),se.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new ld(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,se.resolve()}updateTargetData(e,t){return this.Dn(t),se.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,se.resolve()}removeTargets(e,t,r){let a=0;const c=[];return this.Rs.forEach((f,y)=>{y.sequenceNumber<=t&&null===r.get(y.targetId)&&(this.Rs.delete(f),c.push(this.removeMatchingKeysForTargetId(e,y.targetId)),a++)}),se.waitFor(c).next(()=>a)}getTargetCount(e){return se.resolve(this.targetCount)}getTargetData(e,t){const r=this.Rs.get(t)||null;return se.resolve(r)}addMatchingKeys(e,t,r){return this.Ps.us(t,r),se.resolve()}removeMatchingKeys(e,t,r){this.Ps.hs(t,r);const a=this.persistence.referenceDelegate,c=[];return a&&t.forEach(f=>{c.push(a.markPotentiallyOrphaned(e,f))}),se.waitFor(c)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),se.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ps.ds(t);return se.resolve(r)}containsKey(e,t){return se.resolve(this.Ps.containsKey(t))}}class DC{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new Oi(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new fM(this),this.indexManager=new df,this.remoteDocumentCache=new aS(r=>this.referenceDelegate.xs(r)),this.It=new dC(t),this.Ns=new iS(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new sS,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Vs[e.toKey()];return r||(r=new oS(t,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,r){Ne("MemoryPersistence","Starting transaction:",e);const a=new Hg(this.Ss.next());return this.referenceDelegate.ks(),r(a).next(c=>this.referenceDelegate.Os(a).next(()=>c)).toPromise().then(c=>(a.raiseOnCommittedEvent(),c))}Ms(e,t){return se.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,t)))}}class Hg extends ME{constructor(e){super(),this.currentSequenceNumber=e}}class w_{constructor(e){this.persistence=e,this.Fs=new Cb,this.$s=null}static Bs(e){return new w_(e)}get Ls(){if(this.$s)return this.$s;throw Je()}addReference(e,t,r){return this.Fs.addReference(r,t),this.Ls.delete(r.toString()),se.resolve()}removeReference(e,t,r){return this.Fs.removeReference(r,t),this.Ls.add(r.toString()),se.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),se.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(a=>this.Ls.add(a.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(a=>{a.forEach(c=>this.Ls.add(c.toString()))}).next(()=>r.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return se.forEach(this.Ls,r=>{const a=Ve.fromPath(r);return this.Us(e,a).next(c=>{c||t.removeEntry(a,mt.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.Us(e,t).next(r=>{r?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}Us(e,t){return se.or([()=>se.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class cS{constructor(e){this.It=e}$(e,t,r,a){const c=new Qy("createOrUpgrade",t);var y;r<1&&a>=1&&(e.createObjectStore("owner"),(y=e).createObjectStore("mutationQueues",{keyPath:"userId"}),y.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",nC,{unique:!0}),y.createObjectStore("documentMutations"),TC(e),function(y){y.createObjectStore("remoteDocuments")}(e));let f=se.resolve();return r<3&&a>=3&&(0!==r&&(function(y){y.deleteObjectStore("targetDocuments"),y.deleteObjectStore("targets"),y.deleteObjectStore("targetGlobal")}(e),TC(e)),f=f.next(()=>function(y){const w=y.store("targetGlobal"),D={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:mt.min().toTimestamp(),targetCount:0};return w.put("targetGlobalKey",D)}(c))),r<4&&a>=4&&(0!==r&&(f=f.next(()=>function(y,w){return w.store("mutations").W().next(D=>{y.deleteObjectStore("mutations"),y.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",nC,{unique:!0});const R=w.store("mutations"),O=D.map(G=>R.put(G));return se.waitFor(O)})}(e,c))),f=f.next(()=>{!function(y){y.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&a>=5&&(f=f.next(()=>this.qs(c))),r<6&&a>=6&&(f=f.next(()=>(function(y){y.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(c)))),r<7&&a>=7&&(f=f.next(()=>this.Gs(c))),r<8&&a>=8&&(f=f.next(()=>this.Qs(e,c))),r<9&&a>=9&&(f=f.next(()=>{!function(y){y.objectStoreNames.contains("remoteDocumentChanges")&&y.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&a>=10&&(f=f.next(()=>this.js(c))),r<11&&a>=11&&(f=f.next(()=>{(function(y){y.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(y){y.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&a>=12&&(f=f.next(()=>{!function(y){const w=y.createObjectStore("documentOverlays",{keyPath:uC});w.createIndex("collectionPathOverlayIndex",WA,{unique:!1}),w.createIndex("collectionGroupOverlayIndex",zA,{unique:!1})}(e)})),r<13&&a>=13&&(f=f.next(()=>function(y){const w=y.createObjectStore("remoteDocumentsV14",{keyPath:uf});w.createIndex("documentKeyIndex",jA),w.createIndex("collectionGroupIndex",iC)}(e)).next(()=>this.Ws(e,c)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&a>=14&&(f=f.next(()=>this.zs(e,c))),r<15&&a>=15&&(f=f.next(()=>function(y){y.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),y.createObjectStore("indexState",{keyPath:GA}).createIndex("sequenceNumberIndex",ub,{unique:!1}),y.createObjectStore("indexEntries",{keyPath:qA}).createIndex("documentKeyIndex",aC,{unique:!1})}(e))),f}Ks(e){let t=0;return e.store("remoteDocuments").Z((r,a)=>{t+=__(a)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}qs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(a=>se.forEach(a,c=>{const f=IDBKeyRange.bound([c.userId,-1],[c.userId,c.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",f).next(y=>se.forEach(y,w=>{pt(w.userId===c.userId);const D=ud(this.It,w);return vC(e,c.userId,D).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(a=>{const c=[];return r.Z((f,y)=>{const w=new Jt(f),D=[0,Yi(w)];c.push(t.get(D).next(R=>R?se.resolve():t.put({targetId:0,path:Yi(w),sequenceNumber:a.highestListenSequenceNumber})))}).next(()=>se.waitFor(c))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:oC});const r=t.store("collectionParents"),a=new _b,c=f=>{if(a.add(f)){const y=f.lastSegment(),w=f.popLast();return r.put({collectionId:y,parent:Yi(w)})}};return t.store("remoteDocuments").Z({X:!0},(f,y)=>{const w=new Jt(f);return c(w.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([f,y,w],D)=>{const R=Ua(y);return c(R.popLast())}))}js(e){const t=e.store("targets");return t.Z((r,a)=>{const c=kg(a),f=fC(this.It,c);return t.put(f)})}Ws(e,t){const r=t.store("remoteDocuments"),a=[];return r.Z((c,f)=>{const y=t.store("remoteDocumentsV14"),w=(D=f,D.document?new Ve(Jt.fromString(D.document.name).popFirst(5)):D.noDocument?Ve.fromSegments(D.noDocument.path):D.unknownDocument?Ve.fromSegments(D.unknownDocument.path):Je()).path.toArray();var D;const R={prefixPath:w.slice(0,w.length-2),collectionGroup:w[w.length-2],documentId:w[w.length-1],readTime:f.readTime||[0,0],unknownDocument:f.unknownDocument,noDocument:f.noDocument,document:f.document,hasCommittedMutations:!!f.hasCommittedMutations};a.push(y.put(R))}).next(()=>se.waitFor(a))}zs(e,t){const r=t.store("mutations"),a=Ib(this.It),c=new DC(w_.Bs,this.It.re);return r.W().next(f=>{const y=new Map;return f.forEach(w=>{var D;let R=null!==(D=y.get(w.userId))&&void 0!==D?D:Ot();ud(this.It,w).keys().forEach(O=>R=R.add(O)),y.set(w.userId,R)}),se.forEach(y,(w,D)=>{const R=new Gn(D),O=y_.oe(this.It,R),G=c.getIndexManager(R),q=v_.oe(R,this.It,G,c.referenceDelegate);return new CC(a,q,O,G).recalculateAndSaveOverlaysForDocumentKeys(new db(t,Oi.at),w).next()})})}}function TC(n){n.createObjectStore("targetDocuments",{keyPath:sC}).createIndex("documentTargetsIndex",$A,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",HA,{unique:!0}),n.createObjectStore("targetGlobal")}const pf="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Pu{constructor(e,t,r,a,c,f,y,w,D,R,O=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Hs=c,this.window=f,this.document=y,this.Js=D,this.Ys=R,this.Xs=O,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=G=>Promise.resolve(),!Pu.C())throw new Ce(de.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new eS(this,a),this.ii=t+"main",this.It=new dC(w),this.ri=new qo(this.ii,this.Xs,new cS(this.It)),this.Cs=new hM(this.referenceDelegate,this.It),this.remoteDocumentCache=Ib(this.It),this.Ns=new KA,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===R&&nr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ce(de.FAILED_PRECONDITION,pf);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new Oi(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var r=(0,ge.Z)(function*(a){if(t.started)return e(a)});return function(a){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,ge.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,ge.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>I_(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(xc(e))return Ne("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ne("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return gf(e).get("owner").next(t=>se.resolve(this.mi(t)))}gi(e){return I_(e).delete(this.clientId)}yi(){var e=this;return(0,ge.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const a=Qr(r,"clientMetadata");return a.W().next(c=>{const f=e.Ii(c,18e5),y=c.filter(w=>-1===f.indexOf(w));return se.forEach(y,w=>a.delete(w.clientId)).next(()=>y)})}).catch(()=>[]);if(e.oi)for(const r of t)e.oi.removeItem(e.Ti(r.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?se.resolve(!0):gf(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new Ce(de.FAILED_PRECONDITION,pf);return!1}}return!(!this.networkEnabled||!this.inForeground)||I_(e).W().next(r=>void 0===this.Ii(r,5e3).find(a=>{if(this.clientId!==a.clientId){const f=!this.inForeground&&a.inForeground,y=this.networkEnabled===a.networkEnabled;if(!this.networkEnabled&&a.networkEnabled||f&&y)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Ne("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ge.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new db(t,Oi.at);return e._i(r).next(()=>e.gi(r))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(r=>this.pi(r.updateTimeMs,t)&&!this.Ei(r.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>I_(e).W().next(t=>this.Ii(t,18e5).map(r=>r.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return v_.oe(e,this.It,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new JA(e,this.It.re.databaseId)}getDocumentOverlayCache(e){return y_.oe(this.It,e)}getBundleCache(){return this.Ns}runTransaction(e,t,r){Ne("IndexedDbPersistence","Starting transaction:",e);const a="readonly"===t?"readonly":"readwrite",c=15===(f=this.Xs)?ZA:14===f?lb:13===f?lC:12===f?cb:11===f?cC:void Je();var f;let y;return this.ri.runTransaction(e,a,c,w=>(y=new db(w,this.Ss?this.Ss.next():Oi.at),"readwrite-primary"===t?this.fi(y).next(D=>!!D||this.di(y)).next(D=>{if(!D)throw nr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new Ce(de.FAILED_PRECONDITION,yI);return r(y)}).next(D=>this.wi(y).next(()=>D)):this.Vi(y).next(()=>r(y)))).then(w=>(y.raiseOnCommittedEvent(),w))}Vi(e){return gf(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ce(de.FAILED_PRECONDITION,pf)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return gf(e).put("owner",t)}static C(){return qo.C()}_i(e){const t=gf(e);return t.get("owner").next(r=>this.mi(r)?(Ne("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):se.resolve())}pi(e,t){const r=Date.now();return!(e<r-t||e>r&&(nr(`Detected an update time that is in the future: ${e} > ${r}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,nn.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const r=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return Ne("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return nr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){nr("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch(e){}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function gf(n){return Qr(n,"owner")}function I_(n){return Qr(n,"clientMetadata")}function AC(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class Db{constructor(e,t,r,a){this.targetId=e,this.fromCache=t,this.Si=r,this.Di=a}static Ci(e,t){let r=Ot(),a=Ot();for(const c of t.docChanges)switch(c.type){case 0:r=r.add(c.doc.key);break;case 1:a=a.add(c.doc.key)}return new Db(e,t.fromCache,r,a)}}class $g{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,r,a){return this.ki(e,t).next(c=>c||this.Oi(e,t,a,r)).next(c=>c||this.Mi(e,t))}ki(e,t){if(Jh(t))return se.resolve(null);let r=ki(t);return this.indexManager.getIndexType(e,r).next(a=>0===a?null:(null!==t.limit&&1===a&&(t=ed(t,null,"F"),r=ki(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(c=>{const f=Ot(...c);return this.Ni.getDocuments(e,f).next(y=>this.indexManager.getMinOffset(e,r).next(w=>{const D=this.Fi(t,y);return this.$i(t,D,f,w.readTime)?this.ki(e,ed(t,null,"F")):this.Bi(e,D,t,w)}))})))}Oi(e,t,r,a){return Jh(t)||a.isEqual(mt.min())?this.Mi(e,t):this.Ni.getDocuments(e,r).next(c=>{const f=this.Fi(t,c);return this.$i(t,f,r,a)?this.Mi(e,t):(Gy()<=Cc.in.DEBUG&&Ne("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),a_(t)),this.Bi(e,f,t,mI(a,-1)))})}Fi(e,t){let r=new ln(qE(e));return t.forEach((a,c)=>{Dg(e,c)&&(r=r.add(c))}),r}$i(e,t,r,a){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const c="F"===e.limitType?t.last():t.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(a)>0)}Mi(e,t){return Gy()<=Cc.in.DEBUG&&Ne("QueryEngine","Using full collection scan to execute query:",a_(t)),this.Ni.getDocumentsMatchingQuery(e,t,Fs.min())}Bi(e,t,r,a){return this.Ni.getDocumentsMatchingQuery(e,r,a).next(c=>(t.forEach(f=>{c=c.insert(f.key,f)}),c))}}class lS{constructor(e,t,r,a){this.persistence=e,this.Li=t,this.It=a,this.Ui=new rr(Rt),this.qi=new Ls(c=>Oc(c),Fa),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new CC(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ui))}}function SC(n,e,t,r){return new lS(n,e,t,r)}function Tb(n,e){return C_.apply(this,arguments)}function C_(){return C_=(0,ge.Z)(function*(n,e){const t=$e(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let a;return t.mutationQueue.getAllMutationBatches(r).next(c=>(a=c,t.Qi(e),t.mutationQueue.getAllMutationBatches(r))).next(c=>{const f=[],y=[];let w=Ot();for(const D of a){f.push(D.batchId);for(const R of D.mutations)w=w.add(R.key)}for(const D of c){y.push(D.batchId);for(const R of D.mutations)w=w.add(R.key)}return t.localDocuments.getDocuments(r,w).next(D=>({ji:D,removedBatchIds:f,addedBatchIds:y}))})})}),C_.apply(this,arguments)}function Ab(n,e){const t=$e(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const a=e.batch.keys(),c=t.Gi.newChangeBuffer({trackRemovals:!0});return function(f,y,w,D){const R=w.batch,O=R.keys();let G=se.resolve();return O.forEach(q=>{G=G.next(()=>D.getEntry(y,q)).next(te=>{const Re=w.docVersions.get(q);pt(null!==Re),te.version.compareTo(Re)<0&&(R.applyToRemoteDocument(te,w),te.isValidDocument()&&(te.setReadTime(w.commitVersion),D.addEntry(te)))})}),G.next(()=>f.mutationQueue.removeMutationBatch(y,R))}(t,r,e,c).next(()=>c.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,a,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(f){let y=Ot();for(let w=0;w<f.mutationResults.length;++w)f.mutationResults[w].transformResults.length>0&&(y=y.add(f.batch.mutations[w].key));return y}(e))).next(()=>t.localDocuments.getDocuments(r,a))})}function Sb(n){const e=$e(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function xC(n,e){const t=$e(n),r=e.snapshotVersion;let a=t.Ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",c=>{const f=t.Gi.newChangeBuffer({trackRemovals:!0});a=t.Ui;const y=[];e.targetChanges.forEach((R,O)=>{const G=a.get(O);if(!G)return;y.push(t.Cs.removeMatchingKeys(c,R.removedDocuments,O).next(()=>t.Cs.addMatchingKeys(c,R.addedDocuments,O)));let q=G.withSequenceNumber(c.currentSequenceNumber);var te,Re,Fe;e.targetMismatches.has(O)?q=q.withResumeToken(Sr.EMPTY_BYTE_STRING,mt.min()).withLastLimboFreeSnapshotVersion(mt.min()):R.resumeToken.approximateByteSize()>0&&(q=q.withResumeToken(R.resumeToken,r)),a=a.insert(O,q),Re=q,Fe=R,(0===(te=G).resumeToken.approximateByteSize()||Re.snapshotVersion.toMicroseconds()-te.snapshotVersion.toMicroseconds()>=3e8||Fe.addedDocuments.size+Fe.modifiedDocuments.size+Fe.removedDocuments.size>0)&&y.push(t.Cs.updateTargetData(c,q))});let w=Pi(),D=Ot();if(e.documentUpdates.forEach(R=>{e.resolvedLimboDocuments.has(R)&&y.push(t.persistence.referenceDelegate.updateLimboDocument(c,R))}),y.push(RC(c,f,e.documentUpdates).next(R=>{w=R.Wi,D=R.zi})),!r.isEqual(mt.min())){const R=t.Cs.getLastRemoteSnapshotVersion(c).next(O=>t.Cs.setTargetsMetadata(c,c.currentSequenceNumber,r));y.push(R)}return se.waitFor(y).next(()=>f.apply(c)).next(()=>t.localDocuments.getLocalViewOfDocuments(c,w,D)).next(()=>w)}).then(c=>(t.Ui=a,c))}function RC(n,e,t){let r=Ot(),a=Ot();return t.forEach(c=>r=r.add(c)),e.getEntries(n,r).next(c=>{let f=Pi();return t.forEach((y,w)=>{const D=c.get(y);w.isFoundDocument()!==D.isFoundDocument()&&(a=a.add(y)),w.isNoDocument()&&w.version.isEqual(mt.min())?(e.removeEntry(y,w.readTime),f=f.insert(y,w)):!D.isValidDocument()||w.version.compareTo(D.version)>0||0===w.version.compareTo(D.version)&&D.hasPendingWrites?(e.addEntry(w),f=f.insert(y,w)):Ne("LocalStore","Ignoring outdated watch update for ",y,". Current version:",D.version," Watch version:",w.version)}),{Wi:f,zi:a}})}function dS(n,e){const t=$e(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function dd(n,e){const t=$e(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let a;return t.Cs.getTargetData(r,e).next(c=>c?(a=c,se.resolve(a)):t.Cs.allocateTargetId(r).next(f=>(a=new Fc(e,f,0,r.currentSequenceNumber),t.Cs.addTargetData(r,a).next(()=>a))))}).then(r=>{const a=t.Ui.get(r.targetId);return(null===a||r.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Ui=t.Ui.insert(r.targetId,r),t.qi.set(e,r.targetId)),r})}function mf(n,e,t){return D_.apply(this,arguments)}function D_(){return D_=(0,ge.Z)(function*(n,e,t){const r=$e(n),a=r.Ui.get(e),c=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",c,f=>r.persistence.referenceDelegate.removeTarget(f,a)))}catch(f){if(!xc(f))throw f;Ne("LocalStore",`Failed to update sequence numbers for target ${e}: ${f}`)}r.Ui=r.Ui.remove(e),r.qi.delete(a.target)}),D_.apply(this,arguments)}function hd(n,e,t){const r=$e(n);let a=mt.min(),c=Ot();return r.persistence.runTransaction("Execute query","readonly",f=>function(y,w,D){const R=$e(y),O=R.qi.get(D);return void 0!==O?se.resolve(R.Ui.get(O)):R.Cs.getTargetData(w,D)}(r,f,ki(e)).next(y=>{if(y)return a=y.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(f,y.targetId).next(w=>{c=w})}).next(()=>r.Li.getDocumentsMatchingQuery(f,e,t?a:mt.min(),t?c:Ot())).next(y=>(yf(r,Tg(e),y),{documents:y,Hi:c})))}function Gg(n,e){const t=$e(n),r=$e(t.Cs),a=t.Ui.get(e);return a?Promise.resolve(a.target):t.persistence.runTransaction("Get target data","readonly",c=>r.se(c,e).next(f=>f?f.target:null))}function hS(n,e){const t=$e(n),r=t.Ki.get(e)||mt.min();return t.persistence.runTransaction("Get new document changes","readonly",a=>t.Gi.getAllFromCollectionGroup(a,e,mI(r,-1),Number.MAX_SAFE_INTEGER)).then(a=>(yf(t,e,a),a))}function yf(n,e,t){let r=n.Ki.get(e)||mt.min();t.forEach((a,c)=>{c.readTime.compareTo(r)>0&&(r=c.readTime)}),n.Ki.set(e,r)}function ja(){return ja=(0,ge.Z)(function*(n,e,t,r){const a=$e(n);let c=Ot(),f=Pi();for(const D of t){const R=e.Ji(D.metadata.name);D.document&&(c=c.add(R));const O=e.Yi(D);O.setReadTime(e.Xi(D.metadata.readTime)),f=f.insert(R,O)}const y=a.Gi.newChangeBuffer({trackRemovals:!0}),w=yield dd(a,(D=r,ki(kc(Jt.fromString(`__bundle__/docs/${D}`)))));var D;return a.persistence.runTransaction("Apply bundle documents","readwrite",D=>RC(D,y,f).next(R=>(y.apply(D),R)).next(R=>a.Cs.removeMatchingKeysForTargetId(D,w.targetId).next(()=>a.Cs.addMatchingKeys(D,c,w.targetId)).next(()=>a.localDocuments.getLocalViewOfDocuments(D,R.Wi,R.zi)).next(()=>R.Wi)))}),ja.apply(this,arguments)}function _f(n,e){return fd.apply(this,arguments)}function fd(){return fd=(0,ge.Z)(function*(n,e,t=Ot()){const r=yield dd(n,ki(Pg(e.bundledQuery))),a=$e(n);return a.persistence.runTransaction("Save named query","readwrite",c=>{const f=Yr(e.readTime);if(r.snapshotVersion.compareTo(f)>=0)return a.Ns.saveNamedQuery(c,e);const y=r.withResumeToken(Sr.EMPTY_BYTE_STRING,f);return a.Ui=a.Ui.insert(y.targetId,y),a.Cs.updateTargetData(c,y).next(()=>a.Cs.removeMatchingKeysForTargetId(c,r.targetId)).next(()=>a.Cs.addMatchingKeys(c,t,r.targetId)).next(()=>a.Ns.saveNamedQuery(c,e))})}),fd.apply(this,arguments)}function fS(n,e){return`firestore_clients_${n}_${e}`}function Mt(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Es(n,e){return`firestore_targets_${n}_${e}`}class vf{constructor(e,t,r,a){this.user=e,this.batchId=t,this.state=r,this.error=a}static Zi(e,t,r){const a=JSON.parse(r);let c,f="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return f&&a.error&&(f="string"==typeof a.error.message&&"string"==typeof a.error.code,f&&(c=new Ce(a.error.code,a.error.message))),f?new vf(e,t,a.state,c):(nr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Qo{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Zi(e,t){const r=JSON.parse(t);let a,c="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return c&&r.error&&(c="string"==typeof r.error.message&&"string"==typeof r.error.code,c&&(a=new Ce(r.error.code,r.error.message))),c?new Qo(e,r.state,a):(nr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class xb{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const r=JSON.parse(t);let a="object"==typeof r&&r.activeTargetIds instanceof Array,c=sd();for(let f=0;a&&f<r.activeTargetIds.length;++f)a=LE(r.activeTargetIds[f]),c=c.add(r.activeTargetIds[f]);return a?new xb(e,c):(nr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class T_{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new T_(t.clientId,t.onlineState):(nr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class A_{constructor(){this.activeTargetIds=sd()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class MC{constructor(e,t,r,a,c){this.window=e,this.Hs=t,this.persistenceKey=r,this.sr=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new rr(Rt),this.started=!1,this.cr=[];const f=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=c,this.ar=fS(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new A_),this.lr=new RegExp(`^firestore_clients_${f}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${f}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${f}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(y){return`firestore_bundle_loaded_v2_${y}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ge.Z)(function*(){const t=yield e.syncEngine.vi();for(const a of t){if(a===e.sr)continue;const c=e.getItem(fS(e.persistenceKey,a));if(c){const f=xb.Zi(a,c);f&&(e.ur=e.ur.insert(f.clientId,f))}}e.gr();const r=e.storage.getItem(e.wr);if(r){const a=e.yr(r);a&&e.pr(a)}for(const a of e.cr)e.rr(a);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((r,a)=>{a.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,r){this.Tr(e,t,r),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(Es(this.persistenceKey,e));if(r){const a=Qo.Zi(e,r);a&&(t=a.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Es(this.persistenceKey,e))}updateQueryState(e,t,r){this.Rr(e,t,r)}handleUserChange(e,t,r){t.forEach(a=>{this.Er(a)}),this.currentUser=e,r.forEach(a=>{this.addPendingMutation(a)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ne("SharedClientState","READ",e,t),t}setItem(e,t){Ne("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ne("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Ne("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ar)return void nr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,ge.Z)(function*(){if(t.started){if(null!==r.key)if(t.lr.test(r.key)){if(null==r.newValue){const a=t.vr(r.key);return t.Vr(a,null)}{const a=t.Sr(r.key,r.newValue);if(a)return t.Vr(a.clientId,a)}}else if(t.dr.test(r.key)){if(null!==r.newValue){const a=t.Dr(r.key,r.newValue);if(a)return t.Cr(a)}}else if(t._r.test(r.key)){if(null!==r.newValue){const a=t.Nr(r.key,r.newValue);if(a)return t.kr(a)}}else if(r.key===t.wr){if(null!==r.newValue){const a=t.yr(r.newValue);if(a)return t.pr(a)}}else if(r.key===t.hr){const a=function(c){let f=Oi.at;if(null!=c)try{const y=JSON.parse(c);pt("number"==typeof y),f=y}catch(y){nr("SharedClientState","Failed to read sequence number from WebStorage",y)}return f}(r.newValue);a!==Oi.at&&t.sequenceNumberHandler(a)}else if(r.key===t.mr){const a=t.Or(r.newValue);yield Promise.all(a.map(c=>t.syncEngine.Mr(c)))}}else t.cr.push(r)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,r){const a=new vf(this.currentUser,e,t,r),c=Mt(this.persistenceKey,this.currentUser,e);this.setItem(c,a.tr())}Er(e){const t=Mt(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,r){const a=Es(this.persistenceKey,e),c=new Qo(e,t,r);this.setItem(a,c.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const r=this.vr(e);return xb.Zi(r,t)}Dr(e,t){const r=this.dr.exec(e),a=Number(r[1]);return vf.Zi(new Gn(void 0!==r[2]?r[2]:null),a,t)}Nr(e,t){const r=this._r.exec(e),a=Number(r[1]);return Qo.Zi(a,t)}yr(e){return T_.Zi(e)}Or(e){return JSON.parse(e)}Cr(e){var t=this;return(0,ge.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);Ne("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const r=t?this.ur.insert(e,t):this.ur.remove(e),a=this.Ir(this.ur),c=this.Ir(r),f=[],y=[];return c.forEach(w=>{a.has(w)||f.push(w)}),a.forEach(w=>{c.has(w)||y.push(w)}),this.syncEngine.Br(f,y).then(()=>{this.ur=r})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=sd();return e.forEach((r,a)=>{t=t.unionWith(a.activeTargetIds)}),t}}class NC{constructor(){this.Lr=new A_,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,t,r){this.Ur[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new A_,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class pS{qr(e){}shutdown(){}}class Us{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){Ne("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){Ne("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const Wn={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Jo{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class OC extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,r,a,c){const f=this.ho(e,t);Ne("RestConnection","Sending: ",f,r);const y={};return this.lo(y,a,c),this.fo(e,f,y,r).then(w=>(Ne("RestConnection","Received: ",w),w),w=>{throw Sc("RestConnection",`${e} failed with error: `,w,"url: ",f,"request:",r),w})}_o(e,t,r,a,c,f){return this.ao(e,t,r,a,c)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+$o,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((a,c)=>e[c]=a),r&&r.headers.forEach((a,c)=>e[c]=a)}ho(e,t){return`${this.oo}/v1/${t}:${Wn[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,a){return new Promise((c,f)=>{const y=new qh;y.setWithCredentials(!0),y.listenOnce(SE.COMPLETE,()=>{try{switch(y.getLastErrorCode()){case _s.NO_ERROR:const D=y.getResponseJson();Ne("Connection","XHR received:",JSON.stringify(D)),c(D);break;case _s.TIMEOUT:Ne("Connection",'RPC "'+e+'" timed out'),f(new Ce(de.DEADLINE_EXCEEDED,"Request time out"));break;case _s.HTTP_ERROR:const R=y.getStatus();if(Ne("Connection",'RPC "'+e+'" failed with status:',R,"response text:",y.getResponseText()),R>0){const O=y.getResponseJson().error;if(O&&O.status&&O.message){const G=function(q){const te=q.toLowerCase().replace(/_/g,"-");return Object.values(de).indexOf(te)>=0?te:de.UNKNOWN}(O.status);f(new Ce(G,O.message))}else f(new Ce(de.UNKNOWN,"Server responded with status "+y.getStatus()))}else f(new Ce(de.UNAVAILABLE,"Connection failed."));break;default:Je()}}finally{Ne("Connection",'RPC "'+e+'" completed.')}});const w=JSON.stringify(a);y.send(t,"POST",w,r,15)})}wo(e,t,r){const a=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=Gl(),f=$y(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(y.xmlHttpFactory=new Gh({})),this.lo(y.initMessageHeaders,t,r),y.encodeInitMessageHeaders=!0;const w=a.join("");Ne("Connection","Creating WebChannel: "+w,y);const D=c.createWebChannel(w,y);let R=!1,O=!1;const G=new Jo({Hr:te=>{O?Ne("Connection","Not sending because WebChannel is closed:",te):(R||(Ne("Connection","Opening WebChannel transport."),D.open(),R=!0),Ne("Connection","WebChannel sending:",te),D.send(te))},Jr:()=>D.close()}),q=(te,Re,Fe)=>{te.listen(Re,ot=>{try{Fe(ot)}catch(Ct){setTimeout(()=>{throw Ct},0)}})};return q(D,Du.EventType.OPEN,()=>{O||Ne("Connection","WebChannel transport opened.")}),q(D,Du.EventType.CLOSE,()=>{O||(O=!0,Ne("Connection","WebChannel transport closed"),G.io())}),q(D,Du.EventType.ERROR,te=>{O||(O=!0,Sc("Connection","WebChannel transport errored:",te),G.io(new Ce(de.UNAVAILABLE,"The operation could not be completed")))}),q(D,Du.EventType.MESSAGE,te=>{var Re;if(!O){const Fe=te.data[0];pt(!!Fe);const ot=Fe,Ct=ot.error||(null===(Re=ot[0])||void 0===Re?void 0:Re.error);if(Ct){Ne("Connection","WebChannel received error:",Ct);const Pt=Ct.status;let Ft=function(Zt){const ts=dr[Zt];if(void 0!==ts)return qI(ts)}(Pt),Wt=Ct.message;void 0===Ft&&(Ft=de.INTERNAL,Wt="Unknown error status: "+Pt+" with message "+Ct.message),O=!0,G.io(new Ce(Ft,Wt)),D.close()}else Ne("Connection","WebChannel received:",Fe),G.ro(Fe)}}),q(f,$h.STAT_EVENT,te=>{te.stat===ql.PROXY?Ne("Connection","Detected buffering proxy"):te.stat===ql.NOPROXY&&Ne("Connection","Detected no buffering proxy")}),setTimeout(()=>{G.so()},0),G}}function kC(){return"undefined"!=typeof window?window:null}function qg(){return"undefined"!=typeof document?document:null}function pd(n){return new NA(n,!0)}class jc{constructor(e,t,r=1e3,a=1.5,c=6e4){this.Hs=e,this.timerId=t,this.mo=r,this.yo=a,this.po=c,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),a=Math.max(0,t-r);a>0&&Ne("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,a,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class Ef{constructor(e,t,r,a,c,f,y,w){this.Hs=e,this.vo=r,this.Vo=a,this.So=c,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=y,this.listener=w,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new jc(e,t)}ko(){return 1===this.state||5===this.state||this.Oo()}Oo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Mo()}stop(){var e=this;return(0,ge.Z)(function*(){e.ko()&&(yield e.close(0))})()}Fo(){this.state=0,this.No.reset()}$o(){this.Oo()&&null===this.Co&&(this.Co=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.Bo()))}Lo(e){this.Uo(),this.stream.send(e)}Bo(){var e=this;return(0,ge.Z)(function*(){if(e.Oo())return e.close(0)})()}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}qo(){this.xo&&(this.xo.cancel(),this.xo=null)}close(e,t){var r=this;return(0,ge.Z)(function*(){r.Uo(),r.qo(),r.No.cancel(),r.Do++,4!==e?r.No.reset():t&&t.code===de.RESOURCE_EXHAUSTED?(nr(t.toString()),nr("Using maximum backoff delay to prevent overloading the backend."),r.No.Ao()):t&&t.code===de.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Ko(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(t)})()}Ko(){}auth(){this.state=1;const e=this.Go(this.Do),t=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,a])=>{this.Do===t&&this.Qo(r,a)},r=>{e(()=>{const a=new Ce(de.UNKNOWN,"Fetching auth token failed: "+r.message);return this.jo(a)})})}Qo(e,t){const r=this.Go(this.Do);this.stream=this.Wo(e,t),this.stream.Yr(()=>{r(()=>(this.state=2,this.xo=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.Oo()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(a=>{r(()=>this.jo(a))}),this.stream.onMessage(a=>{r(()=>this.onMessage(a))})}Mo(){var e=this;this.state=5,this.No.Ro((0,ge.Z)(function*(){e.state=0,e.start()}))}jo(e){return Ne("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Go(e){return t=>{this.Hs.enqueueAndForget(()=>this.Do===e?t():(Ne("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class gS extends Ef{constructor(e,t,r,a,c,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,a,f),this.It=c}Wo(e,t){return this.So.wo("Listen",e,t)}onMessage(e){this.No.reset();const t=function(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(w=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===w?1:"REMOVE"===w?2:"CURRENT"===w?3:"RESET"===w?4:Je(),a=e.targetChange.targetIds||[],c=function(w,D){return w.gt?(pt(void 0===D||"string"==typeof D),Sr.fromBase64String(D||"")):(pt(void 0===D||D instanceof Uint8Array),Sr.fromUint8Array(D||new Uint8Array))}(n,e.targetChange.resumeToken),f=e.targetChange.cause,y=f&&function(w){const D=void 0===w.code?de.UNKNOWN:qI(w.code);return new Ce(D,w.message||"")}(f);t=new d_(r,a,c,y||null)}else if("documentChange"in e){const r=e.documentChange,a=Zo(n,r.document.name),c=Yr(r.document.updateTime),f=new zr({mapValue:{fields:r.document.fields}}),y=wn.newFoundDocument(a,c,f);t=new tb(r.targetIds||[],r.removedTargetIds||[],y.key,y)}else if("documentDelete"in e){const r=e.documentDelete,a=Zo(n,r.document),c=r.readTime?Yr(r.readTime):mt.min(),f=wn.newNoDocument(a,c);t=new tb([],r.removedTargetIds||[],f.key,f)}else if("documentRemove"in e){const r=e.documentRemove,a=Zo(n,r.document);t=new tb([],r.removedTargetIds||[],a,null)}else{if(!("filter"in e))return Je();{const r=e.filter,c=new XE(r.count||0);t=new nb(r.targetId,c)}}var w;return t}(this.It,e),r=function(a){if(!("targetChange"in a))return mt.min();const c=a.targetChange;return c.targetIds&&c.targetIds.length?mt.min():c.readTime?Yr(c.readTime):mt.min()}(e);return this.listener.zo(t,r)}Ho(e){const t={};t.database=Mu(this.It),t.addTarget=function(a,c){let f;const y=c.target;return f=i_(y)?{documents:ob(a,y)}:{query:ab(a,y)},f.targetId=c.targetId,c.resumeToken.approximateByteSize()>0?f.resumeToken=nf(a,c.resumeToken):c.snapshotVersion.compareTo(mt.min())>0&&(f.readTime=Mg(a,c.snapshotVersion.toTimestamp())),f}(this.It,e);const r=function(n,e){const t=function(r,a){switch(a){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Je()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Lo(t)}Jo(e){const t={};t.database=Mu(this.It),t.removeTarget=e,this.Lo(t)}}class gd extends Ef{constructor(e,t,r,a,c,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,a,f),this.It=c,this.Yo=!1}get Xo(){return this.Yo}start(){this.Yo=!1,this.lastStreamToken=void 0,super.start()}Ko(){this.Yo&&this.Zo([])}Wo(e,t){return this.So.wo("Write",e,t)}onMessage(e){if(pt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Yo){this.No.reset();const t=function(n,e){return n&&n.length>0?(pt(void 0!==e),n.map(t=>function(r,a){let c=Yr(r.updateTime?r.updateTime:a);return c.isEqual(mt.min())&&(c=Yr(a)),new DA(c,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Yr(e.commitTime);return this.listener.tu(r,t)}return pt(!e.writeResults||0===e.writeResults.length),this.Yo=!0,this.listener.eu()}nu(){const e={};e.database=Mu(this.It),this.Lo(e)}Zo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>of(this.It,r))};this.Lo(t)}}class mS extends class{}{constructor(e,t,r,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.So=r,this.It=a,this.su=!1}iu(){if(this.su)throw new Ce(de.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,r){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.So.ao(e,t,r,a,c)).catch(a=>{throw"FirebaseError"===a.name?(a.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ce(de.UNKNOWN,a.toString())})}_o(e,t,r,a){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,f])=>this.So._o(e,t,r,c,f,a)).catch(c=>{throw"FirebaseError"===c.name?(c.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Ce(de.UNKNOWN,c.toString())})}terminate(){this.su=!0}}class zg{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}cu(){0===this.ru&&(this.au("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ou=null,this.hu("Backend didn't respond within 10 seconds."),this.au("Offline"),Promise.resolve())))}lu(e){"Online"===this.state?this.au("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.au("Offline")))}set(e){this.fu(),this.ru=0,"Online"===e&&(this.uu=!1),this.au(e)}au(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}hu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.uu?(nr(t),this.uu=!1):Ne("OnlineStateTracker",t)}fu(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}class Rb{constructor(e,t,r,a,c){var f=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=c,this.gu.qr(y=>{r.enqueueAndForget((0,ge.Z)(function*(){var w;Xo(f)&&(Ne("RemoteStore","Restarting streams for network reachability change."),yield(w=(0,ge.Z)(function*(D){const R=$e(D);R.wu.add(4),yield wf(R),R.yu.set("Unknown"),R.wu.delete(4),yield bf(R)}),function(D){return w.apply(this,arguments)})(f))}))}),this.yu=new zg(r,a)}}function bf(n){return Hc.apply(this,arguments)}function Hc(){return Hc=(0,ge.Z)(function*(n){if(Xo(n))for(const e of n.mu)yield e(!0)}),Hc.apply(this,arguments)}function wf(n){return If.apply(this,arguments)}function If(){return If=(0,ge.Z)(function*(n){for(const e of n.mu)yield e(!1)}),If.apply(this,arguments)}function Zg(n,e){const t=$e(n);t._u.has(e.targetId)||(t._u.set(e.targetId,e),Yg(t)?Mb(t):Tf(t).Oo()&&S_(t,e))}function Cf(n,e){const t=$e(n),r=Tf(t);t._u.delete(e),r.Oo()&&Kg(t,e),0===t._u.size&&(r.Oo()?r.$o():Xo(t)&&t.yu.set("Unknown"))}function S_(n,e){n.pu.Mt(e.targetId),Tf(n).Ho(e)}function Kg(n,e){n.pu.Mt(e),Tf(n).Jo(e)}function Mb(n){n.pu=new zI({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),se:e=>n._u.get(e)||null}),Tf(n).start(),n.yu.cu()}function Yg(n){return Xo(n)&&!Tf(n).ko()&&n._u.size>0}function Xo(n){return 0===$e(n).wu.size}function yS(n){n.pu=void 0}function pM(n){return It.apply(this,arguments)}function It(){return It=(0,ge.Z)(function*(n){n._u.forEach((e,t)=>{S_(n,e)})}),It.apply(this,arguments)}function gM(n,e){return md.apply(this,arguments)}function md(){return md=(0,ge.Z)(function*(n,e){yS(n),Yg(n)?(n.yu.lu(e),Mb(n)):n.yu.set("Unknown")}),md.apply(this,arguments)}function _S(n,e,t){return Nb.apply(this,arguments)}function Nb(){return Nb=(0,ge.Z)(function*(n,e,t){if(n.yu.set("Online"),e instanceof d_&&2===e.state&&e.cause)try{yield(r=(0,ge.Z)(function*(a,c){const f=c.cause;for(const y of c.targetIds)a._u.has(y)&&(yield a.remoteSyncer.rejectListen(y,f),a._u.delete(y),a.pu.removeTarget(y))}),function(a,c){return r.apply(this,arguments)})(n,e)}catch(r){Ne("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield x_(n,r)}else if(e instanceof tb?n.pu.Gt(e):e instanceof nb?n.pu.Yt(e):n.pu.Wt(e),!t.isEqual(mt.min()))try{const r=yield Sb(n.localStore);t.compareTo(r)>=0&&(yield function(a,c){const f=a.pu.te(c);return f.targetChanges.forEach((y,w)=>{if(y.resumeToken.approximateByteSize()>0){const D=a._u.get(w);D&&a._u.set(w,D.withResumeToken(y.resumeToken,c))}}),f.targetMismatches.forEach(y=>{const w=a._u.get(y);if(!w)return;a._u.set(y,w.withResumeToken(Sr.EMPTY_BYTE_STRING,w.snapshotVersion)),Kg(a,y);const D=new Fc(w.target,y,1,w.sequenceNumber);S_(a,D)}),a.remoteSyncer.applyRemoteEvent(f)}(n,t))}catch(r){Ne("RemoteStore","Failed to raise snapshot:",r),yield x_(n,r)}var r}),Nb.apply(this,arguments)}function x_(n,e,t){return FC.apply(this,arguments)}function FC(){return FC=(0,ge.Z)(function*(n,e,t){if(!xc(e))throw e;n.wu.add(1),yield wf(n),n.yu.set("Offline"),t||(t=()=>Sb(n.localStore)),n.asyncQueue.enqueueRetryable((0,ge.Z)(function*(){Ne("RemoteStore","Retrying IndexedDB access"),yield t(),n.wu.delete(1),yield bf(n)}))}),FC.apply(this,arguments)}function vS(n,e){return e().catch(t=>x_(n,t,e))}function Df(n){return Xr.apply(this,arguments)}function Xr(){return Xr=(0,ge.Z)(function*(n){const e=$e(n),t=$c(e);let r=e.du.length>0?e.du[e.du.length-1].batchId:-1;for(;ES(e);)try{const a=yield dS(e.localStore,r);if(null===a){0===e.du.length&&t.$o();break}r=a.batchId,bS(e,a)}catch(a){yield x_(e,a)}R_(e)&&LC(e)}),Xr.apply(this,arguments)}function ES(n){return Xo(n)&&n.du.length<10}function bS(n,e){n.du.push(e);const t=$c(n);t.Oo()&&t.Xo&&t.Zo(e.mutations)}function R_(n){return Xo(n)&&!$c(n).ko()&&n.du.length>0}function LC(n){$c(n).start()}function wS(n){return Ob.apply(this,arguments)}function Ob(){return Ob=(0,ge.Z)(function*(n){$c(n).nu()}),Ob.apply(this,arguments)}function IS(n){return kb.apply(this,arguments)}function kb(){return kb=(0,ge.Z)(function*(n){const e=$c(n);for(const t of n.du)e.Zo(t.mutations)}),kb.apply(this,arguments)}function CS(n,e,t){return Qg.apply(this,arguments)}function Qg(){return Qg=(0,ge.Z)(function*(n,e,t){const r=n.du.shift(),a=fb.from(r,e,t);yield vS(n,()=>n.remoteSyncer.applySuccessfulWrite(a)),yield Df(n)}),Qg.apply(this,arguments)}function DS(n,e){return Pb.apply(this,arguments)}function Pb(){return Pb=(0,ge.Z)(function*(n,e){var t;e&&$c(n).Xo&&(yield(t=(0,ge.Z)(function*(r,a){if(GI(c=a.code)&&c!==de.ABORTED){const f=r.du.shift();$c(r).Fo(),yield vS(r,()=>r.remoteSyncer.rejectFailedWrite(f.batchId,a)),yield Df(r)}var c}),function(r,a){return t.apply(this,arguments)})(n,e)),R_(n)&&LC(n)}),Pb.apply(this,arguments)}function Fb(n,e){return Jg.apply(this,arguments)}function Jg(){return Jg=(0,ge.Z)(function*(n,e){const t=$e(n);t.asyncQueue.verifyOperationInProgress(),Ne("RemoteStore","RemoteStore received new credentials");const r=Xo(t);t.wu.add(3),yield wf(t),r&&t.yu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.wu.delete(3),yield bf(t)}),Jg.apply(this,arguments)}function Lb(n,e){return VC.apply(this,arguments)}function VC(){return VC=(0,ge.Z)(function*(n,e){const t=$e(n);e?(t.wu.delete(2),yield bf(t)):e||(t.wu.add(2),yield wf(t),t.yu.set("Unknown"))}),VC.apply(this,arguments)}function Tf(n){return n.Iu||(n.Iu=function(e,t,r){const a=$e(e);return a.iu(),new gS(t,a.So,a.authCredentials,a.appCheckCredentials,a.It,r)}(n.datastore,n.asyncQueue,{Yr:pM.bind(null,n),Zr:gM.bind(null,n),zo:_S.bind(null,n)}),n.mu.push(function(){var e=(0,ge.Z)(function*(t){t?(n.Iu.Fo(),Yg(n)?Mb(n):n.yu.set("Unknown")):(yield n.Iu.stop(),yS(n))});return function(t){return e.apply(this,arguments)}}())),n.Iu}function $c(n){return n.Tu||(n.Tu=function(e,t,r){const a=$e(e);return a.iu(),new gd(t,a.So,a.authCredentials,a.appCheckCredentials,a.It,r)}(n.datastore,n.asyncQueue,{Yr:wS.bind(null,n),Zr:DS.bind(null,n),eu:IS.bind(null,n),tu:CS.bind(null,n)}),n.mu.push(function(){var e=(0,ge.Z)(function*(t){t?(n.Tu.Fo(),yield Df(n)):(yield n.Tu.stop(),n.du.length>0&&(Ne("RemoteStore",`Stopping write stream with ${n.du.length} pending writes`),n.du=[]))});return function(t){return e.apply(this,arguments)}}())),n.Tu}class Vb{constructor(e,t,r,a,c){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=a,this.removalCallback=c,this.deferred=new Tr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(f=>{})}static createAndSchedule(e,t,r,a,c){const f=Date.now()+r,y=new Vb(e,t,f,a,c);return y.start(r),y}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ce(de.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Af(n,e){if(nr("AsyncQueue",`${e}: ${n}`),xc(n))return new Ce(de.UNAVAILABLE,`${e}: ${n}`);throw n}class Sf{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ve.comparator(t.key,r.key):(t,r)=>Ve.comparator(t.key,r.key),this.keyedMap=tf(),this.sortedSet=new rr(this.comparator)}static emptySet(e){return new Sf(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Sf)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,c=r.getNext().key;if(!a.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Sf;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class UC{constructor(){this.Eu=new rr(Ve.comparator)}track(e){const t=e.doc.key,r=this.Eu.get(t);r?0!==e.type&&3===r.type?this.Eu=this.Eu.insert(t,e):3===e.type&&1!==r.type?this.Eu=this.Eu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Eu=this.Eu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Eu=this.Eu.remove(t):1===e.type&&2===r.type?this.Eu=this.Eu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):Je():this.Eu=this.Eu.insert(t,e)}Au(){const e=[];return this.Eu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Ha{constructor(e,t,r,a,c,f,y,w,D){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=a,this.mutatedKeys=c,this.fromCache=f,this.syncStateChanged=y,this.excludesMetadataChanges=w,this.hasCachedResults=D}static fromInitialDocuments(e,t,r,a,c){const f=[];return t.forEach(y=>{f.push({type:0,doc:y})}),new Ha(e,t,Sf.emptySet(t),f,r,a,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Cg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==r[a].type||!t[a].doc.isEqual(r[a].doc))return!1;return!0}}class TS{constructor(){this.Ru=void 0,this.listeners=[]}}class AS{constructor(){this.queries=new Ls(e=>GE(e),Cg),this.onlineState="Unknown",this.bu=new Set}}function M_(n,e){return yd.apply(this,arguments)}function yd(){return yd=(0,ge.Z)(function*(n,e){const t=$e(n),r=e.query;let a=!1,c=t.queries.get(r);if(c||(a=!0,c=new TS),a)try{c.Ru=yield t.onListen(r)}catch(f){const y=Af(f,`Initialization of query '${a_(e.query)}' failed`);return void e.onError(y)}t.queries.set(r,c),c.listeners.push(e),e.Pu(t.onlineState),c.Ru&&e.vu(c.Ru)&&Ub(t)}),yd.apply(this,arguments)}function BC(n,e){return N_.apply(this,arguments)}function N_(){return N_=(0,ge.Z)(function*(n,e){const t=$e(n),r=e.query;let a=!1;const c=t.queries.get(r);if(c){const f=c.listeners.indexOf(e);f>=0&&(c.listeners.splice(f,1),a=0===c.listeners.length)}if(a)return t.queries.delete(r),t.onUnlisten(r)}),N_.apply(this,arguments)}function SS(n,e){const t=$e(n);let r=!1;for(const a of e){const f=t.queries.get(a.query);if(f){for(const y of f.listeners)y.vu(a)&&(r=!0);f.Ru=a}}r&&Ub(t)}function xS(n,e,t){const r=$e(n),a=r.queries.get(e);if(a)for(const c of a.listeners)c.onError(t);r.queries.delete(e)}function Ub(n){n.bu.forEach(e=>{e.next()})}class Bb{constructor(e,t,r){this.query=e,this.Vu=t,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=r||{}}vu(e){if(!this.options.includeMetadataChanges){const r=[];for(const a of e.docChanges)3!==a.type&&r.push(a);e=new Ha(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Su?this.Cu(e)&&(this.Vu.next(e),t=!0):this.xu(e,this.onlineState)&&(this.Nu(e),t=!0),this.Du=e,t}onError(e){this.Vu.error(e)}Pu(e){this.onlineState=e;let t=!1;return this.Du&&!this.Su&&this.xu(this.Du,e)&&(this.Nu(this.Du),t=!0),t}xu(e,t){return!e.fromCache||(!this.options.ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Cu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Du&&this.Du.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Nu(e){e=Ha.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Su=!0,this.Vu.next(e)}}class RS{constructor(e,t){this.payload=e,this.byteLength=t}Ou(){return"metadata"in this.payload}}class jb{constructor(e){this.It=e}Ji(e){return Zo(this.It,e)}Yi(e){return e.metadata.exists?QI(this.It,e.document,!1):wn.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return Yr(e)}}class MS{constructor(e,t,r){this.Mu=e,this.localStore=t,this.It=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=jC(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=Jt.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new jb(this.It);for(const a of e)if(a.metadata.queries){const c=r.Ji(a.metadata.name);for(const f of a.metadata.queries){const y=(t.get(f)||Ot()).add(c);t.set(f,y)}}return t}complete(){var e=this;return(0,ge.Z)(function*(){const t=yield function(n,e,t,r){return ja.apply(this,arguments)}(e.localStore,new jb(e.It),e.documents,e.Mu.id),r=e.$u(e.documents);for(const a of e.queries)yield _f(e.localStore,a,r.get(a.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function jC(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class NS{constructor(e){this.key=e}}class OS{constructor(e){this.key=e}}class kS{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=Ot(),this.mutatedKeys=Ot(),this.Gu=qE(e),this.Qu=new Sf(this.Gu)}get ju(){return this.Uu}Wu(e,t){const r=t?t.zu:new UC,a=t?t.Qu:this.Qu;let c=t?t.mutatedKeys:this.mutatedKeys,f=a,y=!1;const w="F"===this.query.limitType&&a.size===this.query.limit?a.last():null,D="L"===this.query.limitType&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((R,O)=>{const G=a.get(R),q=Dg(this.query,O)?O:null,te=!!G&&this.mutatedKeys.has(G.key),Re=!!q&&(q.hasLocalMutations||this.mutatedKeys.has(q.key)&&q.hasCommittedMutations);let Fe=!1;G&&q?G.data.isEqual(q.data)?te!==Re&&(r.track({type:3,doc:q}),Fe=!0):this.Hu(G,q)||(r.track({type:2,doc:q}),Fe=!0,(w&&this.Gu(q,w)>0||D&&this.Gu(q,D)<0)&&(y=!0)):!G&&q?(r.track({type:0,doc:q}),Fe=!0):G&&!q&&(r.track({type:1,doc:G}),Fe=!0,(w||D)&&(y=!0)),Fe&&(q?(f=f.add(q),c=Re?c.add(R):c.delete(R)):(f=f.delete(R),c=c.delete(R)))}),null!==this.query.limit)for(;f.size>this.query.limit;){const R="F"===this.query.limitType?f.last():f.first();f=f.delete(R.key),c=c.delete(R.key),r.track({type:1,doc:R})}return{Qu:f,zu:r,$i:y,mutatedKeys:c}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const a=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const c=e.zu.Au();c.sort((D,R)=>function(O,G){const q=te=>{switch(te){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Je()}};return q(O)-q(G)}(D.type,R.type)||this.Gu(D.doc,R.doc)),this.Ju(r);const f=t?this.Yu():[],y=0===this.Ku.size&&this.current?1:0,w=y!==this.qu;return this.qu=y,0!==c.length||w?{snapshot:new Ha(this.query,e.Qu,a,c,e.mutatedKeys,0===y,w,!1,!!r&&r.resumeToken.approximateByteSize()>0),Xu:f}:{Xu:f}}Pu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new UC,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=Ot(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new OS(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new NS(r))}),t}tc(e){this.Uu=e.Hi,this.Ku=Ot();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return Ha.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}class Hb{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class PS{constructor(e){this.key=e,this.nc=!1}}class FS{constructor(e,t,r,a,c,f){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=a,this.currentUser=c,this.maxConcurrentLimboResolutions=f,this.sc={},this.ic=new Ls(y=>GE(y),Cg),this.rc=new Map,this.oc=new Set,this.uc=new rr(Ve.comparator),this.cc=new Map,this.ac=new Cb,this.hc={},this.lc=new Map,this.fc=ld.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function LS(n,e){return $b.apply(this,arguments)}function $b(){return $b=(0,ge.Z)(function*(n,e){const t=B_(n);let r,a;const c=t.ic.get(e);if(c)r=c.targetId,t.sharedClientState.addLocalQueryTarget(r),a=c.view.ec();else{const f=yield dd(t.localStore,ki(e));t.isPrimaryClient&&Zg(t.remoteStore,f);const y=t.sharedClientState.addLocalQueryTarget(f.targetId);r=f.targetId,a=yield Gb(t,e,r,"current"===y,f.resumeToken)}return a}),$b.apply(this,arguments)}function Gb(n,e,t,r,a){return qb.apply(this,arguments)}function qb(){return qb=(0,ge.Z)(function*(n,e,t,r,a){n._c=(O,G,q)=>{return(te=(0,ge.Z)(function*(Re,Fe,ot,Ct){let Pt=Fe.view.Wu(ot);Pt.$i&&(Pt=yield hd(Re.localStore,Fe.query,!1).then(({documents:Zt})=>Fe.view.Wu(Zt,Pt)));const Ft=Ct&&Ct.targetChanges.get(Fe.targetId),Wt=Fe.view.applyChanges(Pt,Re.isPrimaryClient,Ft);return Qb(Re,Fe.targetId,Wt.Xu),Wt.snapshot}),function(Re,Fe,ot,Ct){return te.apply(this,arguments)})(n,O,G,q);var te};const c=yield hd(n.localStore,e,!0),f=new kS(e,c.Hi),y=f.Wu(c.documents),w=In.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,a),D=f.applyChanges(y,n.isPrimaryClient,w);Qb(n,t,D.Xu);const R=new Hb(e,t,f);return n.ic.set(e,R),n.rc.has(t)?n.rc.get(t).push(e):n.rc.set(t,[e]),D.snapshot}),qb.apply(this,arguments)}function HC(n,e){return Xg.apply(this,arguments)}function Xg(){return Xg=(0,ge.Z)(function*(n,e){const t=$e(n),r=t.ic.get(e),a=t.rc.get(r.targetId);if(a.length>1)return t.rc.set(r.targetId,a.filter(c=>!Cg(c,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield mf(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),Cf(t.remoteStore,r.targetId),em(t,r.targetId)}).catch(Go))):(em(t,r.targetId),yield mf(t.localStore,r.targetId,!0))}),Xg.apply(this,arguments)}function Gc(){return Gc=(0,ge.Z)(function*(n,e,t){const r=j_(n);try{const a=yield function(c,f){const y=$e(c),w=qn.now(),D=f.reduce((G,q)=>G.add(q.key),Ot());let R,O;return y.persistence.runTransaction("Locally write mutations","readwrite",G=>{let q=Pi(),te=Ot();return y.Gi.getEntries(G,D).next(Re=>{q=Re,q.forEach((Fe,ot)=>{ot.isValidDocument()||(te=te.add(Fe))})}).next(()=>y.localDocuments.getOverlayedDocuments(G,q)).next(Re=>{R=Re;const Fe=[];for(const ot of f){const Ct=$I(ot,R.get(ot.key).overlayedDocument);null!=Ct&&Fe.push(new Va(ot.key,Ct,CI(Ct.value.mapValue),Ln.exists(!0)))}return y.mutationQueue.addMutationBatch(G,w,Fe,f)}).next(Re=>{O=Re;const Fe=Re.applyToLocalDocumentSet(R,te);return y.documentOverlayCache.saveOverlays(G,Re.batchId,Fe)})}).then(()=>({batchId:O.batchId,changes:eb(R)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(a.batchId),function(c,f,y){let w=c.hc[c.currentUser.toKey()];w||(w=new rr(Rt)),w=w.insert(f,y),c.hc[c.currentUser.toKey()]=w}(r,a.batchId,t),yield $a(r,a.changes),yield Df(r.remoteStore)}catch(a){const c=Af(a,"Failed to persist write");t.reject(c)}}),Gc.apply(this,arguments)}function _i(n,e){return O_.apply(this,arguments)}function O_(){return O_=(0,ge.Z)(function*(n,e){const t=$e(n);try{const r=yield xC(t.localStore,e);e.targetChanges.forEach((a,c)=>{const f=t.cc.get(c);f&&(pt(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?f.nc=!0:a.modifiedDocuments.size>0?pt(f.nc):a.removedDocuments.size>0&&(pt(f.nc),f.nc=!1))}),yield $a(t,r,e)}catch(r){yield Go(r)}}),O_.apply(this,arguments)}function uo(n,e,t){const r=$e(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const a=[];r.ic.forEach((c,f)=>{const y=f.view.Pu(e);y.snapshot&&a.push(y.snapshot)}),function(c,f){const y=$e(c);y.onlineState=f;let w=!1;y.queries.forEach((D,R)=>{for(const O of R.listeners)O.Pu(f)&&(w=!0)}),w&&Ub(y)}(r.eventManager,e),a.length&&r.sc.zo(a),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Wb(n,e,t){return zb.apply(this,arguments)}function zb(){return zb=(0,ge.Z)(function*(n,e,t){const r=$e(n);r.sharedClientState.updateQueryState(e,"rejected",t);const a=r.cc.get(e),c=a&&a.key;if(c){let f=new rr(Ve.comparator);f=f.insert(c,wn.newNoDocument(c,mt.min()));const y=Ot().add(c),w=new Pc(mt.min(),new Map,new ln(Rt),f,y);yield _i(r,w),r.uc=r.uc.remove(c),r.cc.delete(e),WC(r)}else yield mf(r.localStore,e,!1).then(()=>em(r,e,t)).catch(Go)}),zb.apply(this,arguments)}function $C(n,e){return k_.apply(this,arguments)}function k_(){return k_=(0,ge.Z)(function*(n,e){const t=$e(n),r=e.batch.batchId;try{const a=yield Ab(t.localStore,e);Yb(t,r,null),P_(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield $a(t,a)}catch(a){yield Go(a)}}),k_.apply(this,arguments)}function GC(n,e,t){return Zb.apply(this,arguments)}function Zb(){return Zb=(0,ge.Z)(function*(n,e,t){const r=$e(n);try{const a=yield function(c,f){const y=$e(c);return y.persistence.runTransaction("Reject batch","readwrite-primary",w=>{let D;return y.mutationQueue.lookupMutationBatch(w,f).next(R=>(pt(null!==R),D=R.keys(),y.mutationQueue.removeMutationBatch(w,R))).next(()=>y.mutationQueue.performConsistencyCheck(w)).next(()=>y.documentOverlayCache.removeOverlaysForBatchId(w,D,f)).next(()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(w,D)).next(()=>y.localDocuments.getDocuments(w,D))})}(r.localStore,e);Yb(r,e,t),P_(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield $a(r,a)}catch(a){yield Go(a)}}),Zb.apply(this,arguments)}function Kb(){return Kb=(0,ge.Z)(function*(n,e){const t=$e(n);Xo(t.remoteStore)||Ne("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(c){const f=$e(c);return f.persistence.runTransaction("Get highest unacknowledged batch id","readonly",y=>f.mutationQueue.getHighestUnacknowledgedBatchId(y))}(t.localStore);if(-1===r)return void e.resolve();const a=t.lc.get(r)||[];a.push(e),t.lc.set(r,a)}catch(r){const a=Af(r,"Initialization of waitForPendingWrites() operation failed");e.reject(a)}}),Kb.apply(this,arguments)}function P_(n,e){(n.lc.get(e)||[]).forEach(t=>{t.resolve()}),n.lc.delete(e)}function Yb(n,e,t){const r=$e(n);let a=r.hc[r.currentUser.toKey()];if(a){const c=a.get(e);c&&(t?c.reject(t):c.resolve(),a=a.remove(e)),r.hc[r.currentUser.toKey()]=a}}function em(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.rc.get(e))n.ic.delete(r),t&&n.sc.wc(r,t);n.rc.delete(e),n.isPrimaryClient&&n.ac.ls(e).forEach(r=>{n.ac.containsKey(r)||qC(n,r)})}function qC(n,e){n.oc.delete(e.path.canonicalString());const t=n.uc.get(e);null!==t&&(Cf(n.remoteStore,t),n.uc=n.uc.remove(e),n.cc.delete(t),WC(n))}function Qb(n,e,t){for(const r of t)r instanceof NS?(n.ac.addReference(r.key,e),xf(n,r)):r instanceof OS?(Ne("SyncEngine","Document no longer in limbo: "+r.key),n.ac.removeReference(r.key,e),n.ac.containsKey(r.key)||qC(n,r.key)):Je()}function xf(n,e){const t=e.key,r=t.path.canonicalString();n.uc.get(t)||n.oc.has(r)||(Ne("SyncEngine","New document in limbo: "+t),n.oc.add(r),WC(n))}function WC(n){for(;n.oc.size>0&&n.uc.size<n.maxConcurrentLimboResolutions;){const e=n.oc.values().next().value;n.oc.delete(e);const t=new Ve(Jt.fromString(e)),r=n.fc.next();n.cc.set(r,new PS(t)),n.uc=n.uc.insert(t,r),Zg(n.remoteStore,new Fc(ki(kc(t.path)),r,2,Oi.at))}}function $a(n,e,t){return Jb.apply(this,arguments)}function Jb(){return Jb=(0,ge.Z)(function*(n,e,t){const r=$e(n),a=[],c=[],f=[];var y;r.ic.isEmpty()||(r.ic.forEach((y,w)=>{f.push(r._c(w,e,t).then(D=>{if((D||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(w.targetId,(null==D?void 0:D.fromCache)?"not-current":"current"),D){a.push(D);const R=Db.Ci(w.targetId,D);c.push(R)}}))}),yield Promise.all(f),r.sc.zo(a),yield(y=(0,ge.Z)(function*(w,D){const R=$e(w);try{yield R.persistence.runTransaction("notifyLocalViewChanges","readwrite",O=>se.forEach(D,G=>se.forEach(G.Si,q=>R.persistence.referenceDelegate.addReference(O,G.targetId,q)).next(()=>se.forEach(G.Di,q=>R.persistence.referenceDelegate.removeReference(O,G.targetId,q)))))}catch(O){if(!xc(O))throw O;Ne("LocalStore","Failed to update sequence numbers: "+O)}for(const O of D){const G=O.targetId;if(!O.fromCache){const q=R.Ui.get(G),Re=q.withLastLimboFreeSnapshotVersion(q.snapshotVersion);R.Ui=R.Ui.insert(G,Re)}}}),function(w,D){return y.apply(this,arguments)})(r.localStore,c))}),Jb.apply(this,arguments)}function mM(n,e){return F_.apply(this,arguments)}function F_(){return F_=(0,ge.Z)(function*(n,e){const t=$e(n);if(!t.currentUser.isEqual(e)){Ne("SyncEngine","User change. New user:",e.toKey());const r=yield Tb(t.localStore,e);t.currentUser=e,(a=t).lc.forEach(f=>{f.forEach(y=>{y.reject(new Ce(de.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),a.lc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield $a(t,r.ji)}var a}),F_.apply(this,arguments)}function BS(n,e){const t=$e(n),r=t.cc.get(e);if(r&&r.nc)return Ot().add(r.key);{let a=Ot();const c=t.rc.get(e);if(!c)return a;for(const f of c){const y=t.ic.get(f);a=a.unionWith(y.view.ju)}return a}}function Xb(n,e){return L_.apply(this,arguments)}function L_(){return L_=(0,ge.Z)(function*(n,e){const t=$e(n),r=yield hd(t.localStore,e.query,!0),a=e.view.tc(r);return t.isPrimaryClient&&Qb(t,e.targetId,a.Xu),a}),L_.apply(this,arguments)}function jS(n,e){return e0.apply(this,arguments)}function e0(){return e0=(0,ge.Z)(function*(n,e){const t=$e(n);return hS(t.localStore,e).then(r=>$a(t,r))}),e0.apply(this,arguments)}function HS(n,e,t,r){return t0.apply(this,arguments)}function t0(){return t0=(0,ge.Z)(function*(n,e,t,r){const a=$e(n),c=yield function(f,y){const w=$e(f),D=$e(w.mutationQueue);return w.persistence.runTransaction("Lookup mutation documents","readonly",R=>D.Tn(R,y).next(O=>O?w.localDocuments.getDocuments(R,O):se.resolve(null)))}(a.localStore,e);var y;null!==c?("pending"===t?yield Df(a.remoteStore):"acknowledged"===t||"rejected"===t?(Yb(a,e,r||null),P_(a,e),y=e,$e($e(a.localStore).mutationQueue).An(y)):Je(),yield $a(a,c)):Ne("SyncEngine","Cannot apply mutation batch with id: "+e)}),t0.apply(this,arguments)}function n0(){return n0=(0,ge.Z)(function*(n,e){const t=$e(n);if(B_(t),j_(t),!0===e&&!0!==t.dc){const r=t.sharedClientState.getAllActiveQueryTargets(),a=yield zC(t,r.toArray());t.dc=!0,yield Lb(t.remoteStore,!0);for(const c of a)Zg(t.remoteStore,c)}else if(!1===e&&!1!==t.dc){const r=[];let a=Promise.resolve();t.rc.forEach((c,f)=>{t.sharedClientState.isLocalQueryTarget(f)?r.push(f):a=a.then(()=>(em(t,f),mf(t.localStore,f,!0))),Cf(t.remoteStore,f)}),yield a,yield zC(t,r),function(c){const f=$e(c);f.cc.forEach((y,w)=>{Cf(f.remoteStore,w)}),f.ac.fs(),f.cc=new Map,f.uc=new rr(Ve.comparator)}(t),t.dc=!1,yield Lb(t.remoteStore,!1)}}),n0.apply(this,arguments)}function zC(n,e,t){return r0.apply(this,arguments)}function r0(){return r0=(0,ge.Z)(function*(n,e,t){const r=$e(n),a=[],c=[];for(const f of e){let y;const w=r.rc.get(f);if(w&&0!==w.length){y=yield dd(r.localStore,ki(w[0]));for(const D of w){const R=r.ic.get(D),O=yield Xb(r,R);O.snapshot&&c.push(O.snapshot)}}else{const D=yield Gg(r.localStore,f);y=yield dd(r.localStore,D),yield Gb(r,ZC(D),f,!1,y.resumeToken)}a.push(y)}return r.sc.zo(c),a}),r0.apply(this,arguments)}function ZC(n){return OI(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function tm(n){const e=$e(n);return $e($e(e.localStore).persistence).vi()}function KC(n,e,t,r){return V_.apply(this,arguments)}function V_(){return V_=(0,ge.Z)(function*(n,e,t,r){const a=$e(n);if(a.dc)return void Ne("SyncEngine","Ignoring unexpected query state notification.");const c=a.rc.get(e);if(c&&c.length>0)switch(t){case"current":case"not-current":{const f=yield hS(a.localStore,Tg(c[0])),y=Pc.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Sr.EMPTY_BYTE_STRING);yield $a(a,f,y);break}case"rejected":yield mf(a.localStore,e,!0),em(a,e,r);break;default:Je()}}),V_.apply(this,arguments)}function YC(n,e,t){return U_.apply(this,arguments)}function U_(){return U_=(0,ge.Z)(function*(n,e,t){const r=B_(n);if(r.dc){for(const a of e){if(r.rc.has(a)){Ne("SyncEngine","Adding an already active target "+a);continue}const c=yield Gg(r.localStore,a),f=yield dd(r.localStore,c);yield Gb(r,ZC(c),f.targetId,!1,f.resumeToken),Zg(r.remoteStore,f)}for(const a of t)r.rc.has(a)&&(yield mf(r.localStore,a,!1).then(()=>{Cf(r.remoteStore,a),em(r,a)}).catch(Go))}}),U_.apply(this,arguments)}function B_(n){const e=$e(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=_i.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=BS.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Wb.bind(null,e),e.sc.zo=SS.bind(null,e.eventManager),e.sc.wc=xS.bind(null,e.eventManager),e}function j_(n){const e=$e(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=$C.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=GC.bind(null,e),e}class s0{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ge.Z)(function*(){t.It=pd(e.databaseInfo.databaseId),t.sharedClientState=t.gc(e),t.persistence=t.yc(e),yield t.persistence.start(),t.localStore=t.Ic(e),t.gcScheduler=t.Tc(e,t.localStore),t.indexBackfillerScheduler=t.Ec(e,t.localStore)})()}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return SC(this.persistence,new $g,e.initialUser,this.It)}yc(e){return new DC(w_.Bs,this.It)}gc(e){return new NC}terminate(){var e=this;return(0,ge.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class QC extends s0{constructor(e,t,r){super(),this.Ac=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,ge.Z)(function*(){yield t().call(r,e),yield r.Ac.initialize(r,e),yield j_(r.Ac.syncEngine),yield Df(r.Ac.remoteStore),yield r.persistence.li(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return SC(this.persistence,new $g,e.initialUser,this.It)}Tc(e,t){return new wC(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ec(e,t){const r=new iM(t,this.persistence);return new kE(e.asyncQueue,r)}yc(e){const t=AC(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Vs.withCacheSize(this.cacheSizeBytes):Vs.DEFAULT;return new Pu(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,kC(),qg(),this.It,this.sharedClientState,!!this.forceOwnership)}gc(e){return new NC}}class qS extends QC{constructor(e,t){super(e,t,!1),this.Ac=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,ge.Z)(function*(){yield t().call(r,e);const a=r.Ac.syncEngine;r.sharedClientState instanceof MC&&(r.sharedClientState.syncEngine={Fr:HS.bind(null,a),$r:KC.bind(null,a),Br:YC.bind(null,a),vi:tm.bind(null,a),Mr:jS.bind(null,a)},yield r.sharedClientState.start()),yield r.persistence.li(function(){var c=(0,ge.Z)(function*(f){yield function(n,e){return n0.apply(this,arguments)}(r.Ac.syncEngine,f),r.gcScheduler&&(f&&!r.gcScheduler.started?r.gcScheduler.start():f||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(f&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():f||r.indexBackfillerScheduler.stop())});return function(f){return c.apply(this,arguments)}}())})()}gc(e){const t=kC();if(!MC.C(t))throw new Ce(de.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=AC(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new MC(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class o0{initialize(e,t){var r=this;return(0,ge.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=a=>uo(r.syncEngine,a,1),r.remoteStore.remoteSyncer.handleCredentialChange=mM.bind(null,r.syncEngine),yield Lb(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new AS}createDatastore(e){const t=pd(e.databaseInfo.databaseId),r=new OC(e.databaseInfo);return new mS(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,a=e.asyncQueue,c=y=>uo(this.syncEngine,y,0),f=Us.C()?new Us:new pS,new Rb(t,r,a,c,f);var t,r,a,c,f}createSyncEngine(e,t){return function(r,a,c,f,y,w,D){const R=new FS(r,a,c,f,y,w);return D&&(R.dc=!0),R}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ge.Z)(function*(t){const r=$e(t);Ne("RemoteStore","RemoteStore shutting down."),r.wu.add(5),yield wf(r),r.gu.shutdown(),r.yu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function a0(n,e,t){if(!t)throw new Ce(de.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Rf(n,e,t,r){if(!0===e&&!0===r)throw new Ce(de.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Mf(n){if(!Ve.isDocumentKey(n))throw new Ce(de.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function JC(n){if(Ve.isDocumentKey(n))throw new Ce(de.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Nf(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":Je()}function kt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ce(de.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Nf(n);throw new Ce(de.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function XC(n,e){if(e<=0)throw new Ce(de.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}const nm=new Map;class eD{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Ce(de.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ce(de.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,Rf("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class rm{constructor(e,t,r,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new eD({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ce(de.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ce(de.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new eD(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new pA;switch(t.type){case"gapi":return new mA(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Ce(de.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=nm.get(e);t&&(Ne("ComponentProvider","Removing Datastore"),nm.delete(e),t.terminate())}(this),Promise.resolve()}}class yn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ea(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new yn(this.firestore,e,this._key)}}class ei{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ei(this.firestore,e,this._query)}}class ea extends ei{constructor(e,t,r){super(e,t,kc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new yn(this.firestore,null,new Ve(e))}withConverter(e){return new ea(this.firestore,e,this._path)}}function H_(n,e,...t){if(n=(0,nn.m9)(n),a0("collection","path",e),n instanceof rm){const r=Jt.fromString(e,...t);return JC(r),new ea(n,null,r)}{if(!(n instanceof yn||n instanceof ea))throw new Ce(de.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Jt.fromString(e,...t));return JC(r),new ea(n.firestore,null,r)}}function $_(n,e,...t){if(n=(0,nn.m9)(n),1===arguments.length&&(e=fI.R()),a0("doc","path",e),n instanceof rm){const r=Jt.fromString(e,...t);return Mf(r),new yn(n,null,new Ve(r))}{if(!(n instanceof yn||n instanceof ea))throw new Ce(de.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Jt.fromString(e,...t));return Mf(r),new yn(n.firestore,n instanceof ea?n.converter:null,new Ve(r))}}function tD(n,e){return n=(0,nn.m9)(n),e=(0,nn.m9)(e),(n instanceof yn||n instanceof ea)&&(e instanceof yn||e instanceof ea)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function c0(n,e){return n=(0,nn.m9)(n),e=(0,nn.m9)(e),n instanceof ei&&e instanceof ei&&n.firestore===e.firestore&&Cg(n._query,e._query)&&n.converter===e.converter}function nD(n,e=10240){let t=0;return{read:()=>(0,ge.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,ge.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class im{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):nr("Uncaught Error in snapshot listener:",e)}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class l0{constructor(e,t){this.Pc=e,this.It=t,this.metadata=new Tr,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(r=>{r&&r.Ou()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Pc.cancel()}getMetadata(){var e=this;return(0,ge.Z)(function*(){return e.metadata.promise})()}mc(){var e=this;return(0,ge.Z)(function*(){return yield e.getMetadata(),e.Vc()})()}Vc(){var e=this;return(0,ge.Z)(function*(){const t=yield e.Sc();if(null===t)return null;const r=e.vc.decode(t),a=Number(r);isNaN(a)&&e.Dc(`length string (${r}) is not valid number`);const c=yield e.Cc(a);return new RS(JSON.parse(c),t.length+a)})()}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Sc(){var e=this;return(0,ge.Z)(function*(){for(;e.xc()<0&&!(yield e.Nc()););if(0===e.buffer.length)return null;const t=e.xc();t<0&&e.Dc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Cc(e){var t=this;return(0,ge.Z)(function*(){for(;t.buffer.length<e;)(yield t.Nc())&&t.Dc("Reached the end of bundle when more is expected.");const r=t.vc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}Nc(){var e=this;return(0,ge.Z)(function*(){const t=yield e.Pc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class iD{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ge.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Ce(de.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(a=(0,ge.Z)(function*(c,f){const y=$e(c),w=Mu(y.It)+"/documents",D={documents:f.map(q=>rf(y.It,q))},R=yield y._o("BatchGetDocuments",w,D,f.length),O=new Map;R.forEach(q=>{const te=function(n,e){return"found"in e?function(t,r){pt(!!r.found);const a=Zo(t,r.found.name),c=Yr(r.found.updateTime),f=new zr({mapValue:{fields:r.found.fields}});return wn.newFoundDocument(a,c,f)}(n,e):"missing"in e?function(t,r){pt(!!r.missing),pt(!!r.readTime);const a=Zo(t,r.missing),c=Yr(r.readTime);return wn.newNoDocument(a,c)}(n,e):Je()}(y.It,q);O.set(te.key.toString(),te)});const G=[];return f.forEach(q=>{const te=O.get(q.toString());pt(!!te),G.push(te)}),G}),function(c,f){return a.apply(this,arguments)})(t.datastore,e);var a;return r.forEach(a=>t.recordVersion(a)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new id(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ge.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,a)=>{const c=Ve.fromPath(a);e.mutations.push(new l_(c,e.precondition(c)))}),yield(r=(0,ge.Z)(function*(a,c){const f=$e(a),y=Mu(f.It)+"/documents",w={writes:c.map(D=>of(f.It,D))};yield f.ao("Commit",y,w)}),function(a,c){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Je();t=mt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Ce(de.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(mt.min())?Ln.exists(!1):Ln.updateTime(t):Ln.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(mt.min()))throw new Ce(de.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ln.updateTime(t)}return Ln.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class KS{constructor(e,t,r,a,c){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=a,this.deferred=c,this.kc=r.maxAttempts,this.No=new jc(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var e=this;this.No.Ro((0,ge.Z)(function*(){const t=new iD(e.datastore),r=e.Mc(t);r&&r.then(a=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(a)}).catch(c=>{e.Fc(c)}))}).catch(a=>{e.Fc(a)})}))}Mc(e){try{const t=this.updateFunction(e);return!Eg(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!GI(t)}return!1}}class sD{constructor(e,t,r,a){var c=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=a,this.user=Gn.UNAUTHENTICATED,this.clientId=fI.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var f=(0,ge.Z)(function*(y){Ne("FirestoreClient","Received user=",y.uid),yield c.authCredentialListener(y),c.user=y});return function(y){return f.apply(this,arguments)}}()),this.appCheckCredentials.start(r,f=>(Ne("FirestoreClient","Received new app check token=",f),this.appCheckCredentialListener(f,this.user)))}getConfiguration(){var e=this;return(0,ge.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ce(de.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Tr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ge.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const a=Af(r,"Failed to shutdown persistence");t.reject(a)}})),t.promise}}function d0(n,e){return h0.apply(this,arguments)}function h0(){return h0=(0,ge.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Ne("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var a=(0,ge.Z)(function*(c){r.isEqual(c)||(yield Tb(e.localStore,c),r=c)});return function(c){return a.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),h0.apply(this,arguments)}function f0(n,e){return p0.apply(this,arguments)}function p0(){return p0=(0,ge.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield oD(n);Ne("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(a=>Fb(e.remoteStore,a)),n.setAppCheckTokenChangeListener((a,c)=>Fb(e.remoteStore,c)),n.onlineComponents=e}),p0.apply(this,arguments)}function oD(n){return vi.apply(this,arguments)}function vi(){return vi=(0,ge.Z)(function*(n){return n.offlineComponents||(Ne("FirestoreClient","Using default OfflineComponentProvider"),yield d0(n,new s0)),n.offlineComponents}),vi.apply(this,arguments)}function Fu(n){return g0.apply(this,arguments)}function g0(){return g0=(0,ge.Z)(function*(n){return n.onlineComponents||(Ne("FirestoreClient","Using default OnlineComponentProvider"),yield f0(n,new o0)),n.onlineComponents}),g0.apply(this,arguments)}function aD(n){return oD(n).then(e=>e.persistence)}function m0(n){return oD(n).then(e=>e.localStore)}function _d(n){return Fu(n).then(e=>e.remoteStore)}function y0(n){return Fu(n).then(e=>e.syncEngine)}function Of(n){return q_.apply(this,arguments)}function q_(){return q_=(0,ge.Z)(function*(n){const e=yield Fu(n),t=e.eventManager;return t.onListen=LS.bind(null,e.syncEngine),t.onUnlisten=HC.bind(null,e.syncEngine),t}),q_.apply(this,arguments)}function v0(n,e,t={}){const r=new Tr;return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return function(a,c,f,y,w){const D=new im({next:O=>{c.enqueueAndForget(()=>BC(a,R));const G=O.docs.has(f);!G&&O.fromCache?w.reject(new Ce(de.UNAVAILABLE,"Failed to get document because the client is offline.")):G&&O.fromCache&&y&&"server"===y.source?w.reject(new Ce(de.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):w.resolve(O)},error:O=>w.reject(O)}),R=new Bb(kc(f.path),D,{includeMetadataChanges:!0,ku:!0});return M_(a,R)}(yield Of(n),n.asyncQueue,e,t,r)})),r.promise}function sm(n,e,t={}){const r=new Tr;return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return function(a,c,f,y,w){const D=new im({next:O=>{c.enqueueAndForget(()=>BC(a,R)),O.fromCache&&"server"===y.source?w.reject(new Ce(de.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):w.resolve(O)},error:O=>w.reject(O)}),R=new Bb(f,D,{includeMetadataChanges:!0,ku:!0});return M_(a,R)}(yield Of(n),n.asyncQueue,e,t,r)})),r.promise}class JS{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.Uc=!1,this.qc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.No=new jc(this,"async_queue_retry"),this.Wc=()=>{const t=qg();t&&Ne("AsyncQueue","Visibility state changed to "+t.visibilityState),this.No.Po()};const e=qg();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.Uc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.Uc){this.Uc=!0,this.Qc=e||!1;const t=qg();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.Uc)return new Promise(()=>{});const t=new Tr;return this.Hc(()=>this.Uc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,ge.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.No.reset()}catch(t){if(!xc(t))throw t;Ne("AsyncQueue","Operation failed with retryable error: "+t)}e.Lc.length>0&&e.No.Ro(()=>e.Jc())}})()}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(r=>{throw this.Kc=r,this.Gc=!1,nr("INTERNAL UNHANDLED ERROR: ",function(c){let f=c.message||"";return c.stack&&(f=c.stack.includes(c.message)?c.stack:c.message+"\n"+c.stack),f}(r)),r}).then(r=>(this.Gc=!1,r))));return this.Bc=t,t}enqueueAfterDelay(e,t,r){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const a=Vb.createAndSchedule(this,e,t,r,c=>this.Yc(c));return this.qc.push(a),a}zc(){this.Kc&&Je()}verifyOperationInProgress(){}Xc(){var e=this;return(0,ge.Z)(function*(){let t;do{t=e.Bc,yield t}while(t!==e.Bc)})()}Zc(e){for(const t of this.qc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.qc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.qc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.qc.indexOf(e);this.qc.splice(t,1)}}function W_(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const a of["next","error","complete"])if(a in r&&"function"==typeof r[a])return!0;return!1}(n)}class z_{constructor(){this._progressObserver={},this._taskCompletionResolver=new Tr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Rn extends rm{constructor(e,t,r,a){super(e,t,r,a),this.type="firestore",this._queue=new JS,this._persistenceKey=(null==a?void 0:a.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||fD(this),this._firestoreClient.terminate()}}function hr(n){return n._firestoreClient||fD(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function fD(n){var e;const t=n._freezeSettings(),r=(c=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new FE(n._databaseId,c,n._persistenceKey,(y=t).host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,y.useFetchStreams));var c,y;n._firestoreClient=new sD(n._authCredentials,n._appCheckCredentials,n._queue,r)}function b0(n,e,t){const r=new Tr;return n.asyncQueue.enqueue((0,ge.Z)(function*(){try{yield d0(n,t),yield f0(n,e),r.resolve()}catch(a){const c=a;if(!("FirebaseError"===(f=c).name?f.code===de.FAILED_PRECONDITION||f.code===de.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&f instanceof DOMException)||22===f.code||20===f.code||11===f.code))throw c;Sc("Error enabling offline persistence. Falling back to persistence disabled: "+c),r.reject(c)}var f})).then(()=>r.promise)}function w0(n){if(n._initialized||n._terminated)throw new Ce(de.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class ta{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ta(Sr.fromBase64String(e))}catch(t){throw new Ce(de.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ta(Sr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Ga{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Ce(de.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Fn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class vd{constructor(e){this._methodName=e}}class Z_{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ce(de.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ce(de.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Rt(this._lat,e._lat)||Rt(this._long,e._long)}}const rx=/^__.*__$/;class vD{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Va(e,this.data,this.fieldMask,t,this.fieldTransforms):new rd(e,this.data,t,this.fieldTransforms)}}class ix{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Va(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function sx(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Je()}}class I0{constructor(e,t,r,a,c,f){this.settings=e,this.databaseId=t,this.It=r,this.ignoreUndefinedProperties=a,void 0===c&&this.na(),this.fieldTransforms=c||[],this.fieldMask=f||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new I0(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),a=this.ia({path:r,oa:!1});return a.ua(e),a}ca(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),a=this.ia({path:r,oa:!1});return a.na(),a}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return S0(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(sx(this.sa)&&rx.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class vM{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.It=r||pd(e)}da(e,t,r,a=!1){return new I0({sa:e,methodName:t,fa:r,path:Fn.emptyPath(),oa:!1,la:a},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function kf(n){const e=n._freezeSettings(),t=pd(n._databaseId);return new vM(n._databaseId,!!e.ignoreUndefinedProperties,t)}function C0(n,e,t,r,a,c={}){const f=n.da(c.merge||c.mergeFields?2:0,e,t,a);D0("Data must be an object, but it was:",f,r);const y=ux(r,f);let w,D;if(c.merge)w=new vs(f.fieldMask),D=f.fieldTransforms;else if(c.mergeFields){const R=[];for(const O of c.mergeFields){const G=T0(e,O,t);if(!f.contains(G))throw new Ce(de.INVALID_ARGUMENT,`Field '${G}' is specified in your field mask but missing from your input data.`);CD(R,G)||R.push(G)}w=new vs(R),D=f.fieldTransforms.filter(O=>w.covers(O.field))}else w=null,D=f.fieldTransforms;return new vD(new zr(y),w,D)}class K_ extends vd{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof K_}}function ox(n,e,t){return new I0({sa:3,fa:e.settings.fa,methodName:n._methodName,oa:t},e.databaseId,e.It,e.ignoreUndefinedProperties)}class ED extends vd{_toFieldTransform(e){return new Sg(e.path,new Xh)}isEqual(e){return e instanceof ED}}class EM extends vd{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=ox(this,e,!0),r=this._a.map(c=>Pf(c,t)),a=new td(r);return new Sg(e.path,a)}isEqual(e){return this===e}}class bM extends vd{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=ox(this,e,!0),r=this._a.map(c=>Pf(c,t)),a=new nd(r);return new Sg(e.path,a)}isEqual(e){return this===e}}class wM extends vd{constructor(e,t){super(e),this.wa=t}_toFieldTransform(e){const t=new ef(e.It,ZE(e.It,this.wa));return new Sg(e.path,t)}isEqual(e){return this===e}}function bD(n,e,t,r){const a=n.da(1,e,t);D0("Data must be an object, but it was:",a,r);const c=[],f=zr.empty();zh(r,(w,D)=>{const R=A0(e,w,t);D=(0,nn.m9)(D);const O=a.ca(R);if(D instanceof K_)c.push(R);else{const G=Pf(D,O);null!=G&&(c.push(R),f.set(R,G))}});const y=new vs(c);return new ix(f,y,a.fieldTransforms)}function wD(n,e,t,r,a,c){const f=n.da(1,e,t),y=[T0(e,r,t)],w=[a];if(c.length%2!=0)throw new Ce(de.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let G=0;G<c.length;G+=2)y.push(T0(e,c[G])),w.push(c[G+1]);const D=[],R=zr.empty();for(let G=y.length-1;G>=0;--G)if(!CD(D,y[G])){const q=y[G];let te=w[G];te=(0,nn.m9)(te);const Re=f.ca(q);if(te instanceof K_)D.push(q);else{const Fe=Pf(te,Re);null!=Fe&&(D.push(q),R.set(q,Fe))}}const O=new vs(D);return new ix(R,O,f.fieldTransforms)}function ax(n,e,t,r=!1){return Pf(t,n.da(r?4:3,e))}function Pf(n,e){if(ID(n=(0,nn.m9)(n)))return D0("Unsupported field value:",e,n),ux(n,e);if(n instanceof vd)return function(t,r){if(!sx(r.sa))throw r.ha(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ha(`${t._methodName}() is not currently supported inside arrays`);const a=t._toFieldTransform(r);a&&r.fieldTransforms.push(a)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,r){const a=[];let c=0;for(const f of t){let y=Pf(f,r.aa(c));null==y&&(y={nullValue:"NULL_VALUE"}),a.push(y),c++}return{arrayValue:{values:a}}}(n,e)}return function(t,r){if(null===(t=(0,nn.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return ZE(r.It,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const a=qn.fromDate(t);return{timestampValue:Mg(r.It,a)}}if(t instanceof qn){const a=new qn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Mg(r.It,a)}}if(t instanceof Z_)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof ta)return{bytesValue:nf(r.It,t._byteString)};if(t instanceof yn){const a=r.databaseId,c=t.firestore._databaseId;if(!c.isEqual(a))throw r.ha(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:sb(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ha(`Unsupported field value: ${Nf(t)}`)}(n,e)}function ux(n,e){const t={};return Zh(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):zh(n,(r,a)=>{const c=Pf(a,e.ra(r));null!=c&&(t[r]=c)}),{mapValue:{fields:t}}}function ID(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof qn||n instanceof Z_||n instanceof ta||n instanceof yn||n instanceof vd)}function D0(n,e,t){if(!ID(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=Nf(t);throw e.ha("an object"===r?n+" a custom object":n+" "+r)}var r}function T0(n,e,t){if((e=(0,nn.m9)(e))instanceof Ga)return e._internalPath;if("string"==typeof e)return A0(n,e);throw S0("Field path arguments must be of type string or ",n,!1,void 0,t)}const IM=new RegExp("[~\\*/\\[\\]]");function A0(n,e,t){if(e.search(IM)>=0)throw S0(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ga(...e.split("."))._internalPath}catch(r){throw S0(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function S0(n,e,t,r,a){const c=r&&!r.isEmpty(),f=void 0!==a;let y=`Function ${e}() called with invalid data`;t&&(y+=" (via `toFirestore()`)"),y+=". ";let w="";return(c||f)&&(w+=" (found",c&&(w+=` in field ${r}`),f&&(w+=` in document ${a}`),w+=")"),new Ce(de.INVALID_ARGUMENT,y+n+w)}function CD(n,e){return n.some(t=>t.isEqual(e))}class om{constructor(e,t,r,a,c){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=a,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new yn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new cx(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(x0("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class cx extends om{data(){return super.data()}}function x0(n,e){return"string"==typeof e?A0(n,e):e instanceof Ga?e._internalPath:e._delegate._internalPath}function lx(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Ce(de.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Y_{}function Ed(n,...e){for(const t of e)n=t._apply(n);return n}class dx extends Y_{constructor(e,t,r){super(),this.ma=e,this.ga=t,this.ya=r,this.type="where"}_apply(e){const t=kf(e.firestore),r=function(a,c,f,y,w,D,R){let O;if(w.isKeyField()){if("array-contains"===D||"array-contains-any"===D)throw new Ce(de.INVALID_ARGUMENT,`Invalid Query. You can't perform '${D}' queries on documentId().`);if("in"===D||"not-in"===D){k0(R,D);const q=[];for(const te of R)q.push(am(y,a,te));O={arrayValue:{values:q}}}else O=am(y,a,R)}else"in"!==D&&"not-in"!==D&&"array-contains-any"!==D||k0(R,D),O=ax(f,"where",R,"in"===D||"not-in"===D);const G=Zr.create(w,D,O);return function(q,te){if(te.dt()){const Fe=o_(q);if(null!==Fe&&!Fe.isEqual(te.field))throw new Ce(de.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Fe.toString()}' and '${te.field.toString()}'`);const ot=HE(q);null!==ot&&px(0,te.field,ot)}const Re=function(Fe,ot){for(const Ct of Fe.filters)if(ot.indexOf(Ct.op)>=0)return Ct.op;return null}(q,function(Fe){switch(Fe){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(te.op));if(null!==Re)throw new Ce(de.INVALID_ARGUMENT,Re===te.op?`Invalid query. You cannot use more than one '${te.op.toString()}' filter.`:`Invalid query. You cannot use '${te.op.toString()}' filters with '${Re.toString()}' filters.`)}(a,G),G}(e._query,0,t,e.firestore._databaseId,this.ma,this.ga,this.ya);return new ei(e.firestore,e.converter,function(a,c){const f=a.filters.concat([c]);return new xu(a.path,a.collectionGroup,a.explicitOrderBy.slice(),f,a.limit,a.limitType,a.startAt,a.endAt)}(e._query,r))}}class hx extends Y_{constructor(e,t){super(),this.ma=e,this.pa=t,this.type="orderBy"}_apply(e){const t=function(r,a,c){if(null!==r.startAt)throw new Ce(de.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Ce(de.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const f=new Jl(a,c);return function(y,w){if(null===HE(y)){const D=o_(y);null!==D&&px(0,D,w.field)}}(r,f),f}(e._query,this.ma,this.pa);return new ei(e.firestore,e.converter,function(r,a){const c=r.explicitOrderBy.concat([a]);return new xu(r.path,r.collectionGroup,c,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class bd extends Y_{constructor(e,t,r){super(),this.type=e,this.Ia=t,this.Ta=r}_apply(e){return new ei(e.firestore,e.converter,ed(e._query,this.Ia,this.Ta))}}class TD extends Y_{constructor(e,t,r){super(),this.type=e,this.Ea=t,this.Aa=r}_apply(e){const t=O0(e,this.type,this.Ea,this.Aa);return new ei(e.firestore,e.converter,(a=t,new xu((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,a,r.endAt)));var r,a}}class N0 extends Y_{constructor(e,t,r){super(),this.type=e,this.Ea=t,this.Aa=r}_apply(e){const t=O0(e,this.type,this.Ea,this.Aa);return new ei(e.firestore,e.converter,(a=t,new xu((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,a)));var r,a}}function O0(n,e,t,r){if(t[0]=(0,nn.m9)(t[0]),t[0]instanceof om)return function(a,c,f,y,w){if(!y)throw new Ce(de.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${f}().`);const D=[];for(const R of Xl(a))if(R.field.isKeyField())D.push(Nc(c,y.key));else{const O=y.data.field(R.field);if(vg(O))throw new Ce(de.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+R.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===O){const G=R.field.canonicalString();throw new Ce(de.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${G}' (used as the orderBy) does not exist.`)}D.push(O)}return new Kr(D,w)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const a=kf(n.firestore);return function(c,f,y,w,D,R){const O=c.explicitOrderBy;if(D.length>O.length)throw new Ce(de.INVALID_ARGUMENT,`Too many arguments provided to ${w}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const G=[];for(let q=0;q<D.length;q++){const te=D[q];if(O[q].field.isKeyField()){if("string"!=typeof te)throw new Ce(de.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${w}(), but got a ${typeof te}`);if(!$E(c)&&-1!==te.indexOf("/"))throw new Ce(de.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${w}() must be a plain document ID, but '${te}' contains a slash.`);const Re=c.path.child(Jt.fromString(te));if(!Ve.isDocumentKey(Re))throw new Ce(de.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${w}() must result in a valid document path, but '${Re}' is not because it contains an odd number of segments.`);const Fe=new Ve(Re);G.push(Nc(f,Fe))}else{const Re=ax(y,w,te);G.push(Re)}}return new Kr(G,R)}(n._query,n.firestore._databaseId,a,e,t,r)}}function am(n,e,t){if("string"==typeof(t=(0,nn.m9)(t))){if(""===t)throw new Ce(de.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!$E(e)&&-1!==t.indexOf("/"))throw new Ce(de.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Jt.fromString(t));if(!Ve.isDocumentKey(r))throw new Ce(de.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Nc(n,new Ve(r))}if(t instanceof yn)return Nc(n,t._key);throw new Ce(de.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Nf(t)}.`)}function k0(n,e){if(!Array.isArray(n)||0===n.length)throw new Ce(de.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Ce(de.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function px(n,e,t){if(!t.isEqual(e))throw new Ce(de.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class xD{convertValue(e,t="none"){switch(Yl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ir(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Mc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Je()}}convertObject(e,t){const r={};return zh(e.fields,(a,c)=>{r[a]=this.convertValue(c,t)}),r}convertGeoPoint(e){return new Z_(ir(e.latitude),ir(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=PE(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Kl(e));default:return null}}convertTimestamp(e){const t=Tu(e);return new qn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Jt.fromString(e);pt(af(r));const a=new Au(r.get(1),r.get(3)),c=new Ve(r.popFirst(5));return a.isEqual(t)||nr(`Document ${c} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),c}}function P0(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class gx extends xD{constructor(e){super(),this.firestore=e}convertBytes(e){return new ta(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new yn(this.firestore,null,t)}}class Ff{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class co extends om{constructor(e,t,r,a,c,f){super(e,t,r,a,f),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new um(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(x0("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class um extends co{data(e={}){return super.data(e)}}class wd{constructor(e,t,r,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new Ff(a.hasPendingWrites,a.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new um(this._firestore,this._userDataWriter,r.key,r,new Ff(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ce(de.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,a){if(r._snapshot.oldDocs.isEmpty()){let c=0;return r._snapshot.docChanges.map(f=>({type:"added",doc:new um(r._firestore,r._userDataWriter,f.doc.key,f.doc,new Ff(r._snapshot.mutatedKeys.has(f.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:c++}))}{let c=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(f=>a||3!==f.type).map(f=>{const y=new um(r._firestore,r._userDataWriter,f.doc.key,f.doc,new Ff(r._snapshot.mutatedKeys.has(f.doc.key),r._snapshot.fromCache),r.query.converter);let w=-1,D=-1;return 0!==f.type&&(w=c.indexOf(f.doc.key),c=c.delete(f.doc.key)),1!==f.type&&(c=c.add(f.doc),D=c.indexOf(f.doc.key)),{type:TM(f.type),doc:y,oldIndex:w,newIndex:D}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function TM(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Je()}}function Q_(n,e){return n instanceof co&&e instanceof co?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof wd&&e instanceof wd&&n._firestore===e._firestore&&c0(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Id extends xD{constructor(e){super(),this.firestore=e}convertBytes(e){return new ta(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new yn(this.firestore,null,t)}}function vx(n,e,t){n=kt(n,yn);const r=kt(n.firestore,Rn),a=P0(n.converter,e,t);return Lf(r,[C0(kf(r),"setDoc",n._key,a,null!==n.converter,t).toMutation(n._key,Ln.none())])}function Ex(n,e,t,...r){n=kt(n,yn);const a=kt(n.firestore,Rn),c=kf(a);let f;return f="string"==typeof(e=(0,nn.m9)(e))||e instanceof Ga?wD(c,"updateDoc",n._key,e,t,r):bD(c,"updateDoc",n._key,e),Lf(a,[f.toMutation(n._key,Ln.exists(!0))])}function MD(n,...e){var t,r,a;n=(0,nn.m9)(n);let c={includeMetadataChanges:!1},f=0;"object"!=typeof e[f]||W_(e[f])||(c=e[f],f++);const y={includeMetadataChanges:c.includeMetadataChanges};if(W_(e[f])){const O=e[f];e[f]=null===(t=O.next)||void 0===t?void 0:t.bind(O),e[f+1]=null===(r=O.error)||void 0===r?void 0:r.bind(O),e[f+2]=null===(a=O.complete)||void 0===a?void 0:a.bind(O)}let w,D,R;if(n instanceof yn)D=kt(n.firestore,Rn),R=kc(n._key.path),w={next:O=>{e[f]&&e[f](lm(D,n,O))},error:e[f+1],complete:e[f+2]};else{const O=kt(n,ei);D=kt(O.firestore,Rn),R=O._query;const G=new Id(D);w={next:q=>{e[f]&&e[f](new wd(D,G,O,q))},error:e[f+1],complete:e[f+2]},lx(n._query)}return function(O,G,q,te){const Re=new im(te),Fe=new Bb(G,Re,q);return O.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return M_(yield Of(O),Fe)})),()=>{Re.bc(),O.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return BC(yield Of(O),Fe)}))}}(hr(D),R,y,w)}function Lf(n,e){return function(t,r){const a=new Tr;return t.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return function(n,e,t){return Gc.apply(this,arguments)}(yield y0(t),r,a)})),a.promise}(hr(n),e)}function lm(n,e,t){const r=t.docs.get(e._key),a=new Id(n);return new co(n,a,e._key,r,new Ff(t.hasPendingWrites,t.fromCache),e.converter)}const Ix={maxAttempts:5};class J_{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=kf(e)}set(e,t,r){this._verifyNotCommitted();const a=qc(e,this._firestore),c=P0(a.converter,t,r),f=C0(this._dataReader,"WriteBatch.set",a._key,c,null!==a.converter,r);return this._mutations.push(f.toMutation(a._key,Ln.none())),this}update(e,t,r,...a){this._verifyNotCommitted();const c=qc(e,this._firestore);let f;return f="string"==typeof(t=(0,nn.m9)(t))||t instanceof Ga?wD(this._dataReader,"WriteBatch.update",c._key,t,r,a):bD(this._dataReader,"WriteBatch.update",c._key,t),this._mutations.push(f.toMutation(c._key,Ln.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=qc(e,this._firestore);return this._mutations=this._mutations.concat(new id(t._key,Ln.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ce(de.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function qc(n,e){if((n=(0,nn.m9)(n)).firestore!==e)throw new Ce(de.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Cx extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=kf(e)}get(e){const t=qc(e,this._firestore),r=new gx(this._firestore);return this._transaction.lookup([t._key]).then(a=>{if(!a||1!==a.length)return Je();const c=a[0];if(c.isFoundDocument())return new om(this._firestore,r,c.key,c,t.converter);if(c.isNoDocument())return new om(this._firestore,r,t._key,null,t.converter);throw Je()})}set(e,t,r){const a=qc(e,this._firestore),c=P0(a.converter,t,r),f=C0(this._dataReader,"Transaction.set",a._key,c,null!==a.converter,r);return this._transaction.set(a._key,f),this}update(e,t,r,...a){const c=qc(e,this._firestore);let f;return f="string"==typeof(t=(0,nn.m9)(t))||t instanceof Ga?wD(this._dataReader,"Transaction.update",c._key,t,r,a):bD(this._dataReader,"Transaction.update",c._key,t),this._transaction.update(c._key,f),this}delete(e){const t=qc(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=qc(e,this._firestore),r=new Id(this._firestore);return super.get(e).then(a=>new co(this._firestore,r,t._key,a._document,new Ff(!1,!1),t.converter))}}function dm(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ce("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function VD(){if("undefined"==typeof Uint8Array)throw new Ce("unimplemented","Uint8Arrays are not available in this environment.")}function ho(){if("undefined"==typeof atob)throw new Ce("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){$o=Fl.SDK_VERSION,(0,Fl._registerComponent)(new Bp.wA("firestore",(t,{instanceIdentifier:r,options:a})=>{const c=t.getProvider("app").getImmediate(),f=new Rn(new gA(t.getProvider("auth-internal")),new yA(t.getProvider("app-check-internal")),function(y,w){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new Ce(de.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Au(y.options.projectId,w)}(c,r),c);return a=Object.assign({useFetchStreams:e},a),f._setSettings(a),f},"PUBLIC").setMultipleInstances(!0)),(0,Fl.registerVersion)(Wl,"3.7.1",n),(0,Fl.registerVersion)(Wl,"3.7.1","esm2017")}();class hm{constructor(e){this._delegate=e}static fromBase64String(e){return ho(),new hm(ta.fromBase64String(e))}static fromUint8Array(e){return VD(),new hm(ta.fromUint8Array(e))}toBase64(){return ho(),this._delegate.toBase64()}toUint8Array(){return VD(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function UD(n){return function(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of["next","error","complete"])if(r in t&&"function"==typeof t[r])return!0;return!1}(n)}class NM{enableIndexedDbPersistence(e,t){return function(n,e){w0(n=kt(n,Rn));const t=hr(n),r=n._freezeSettings(),a=new o0;return b0(t,a,new QC(a,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function(n){w0(n=kt(n,Rn));const e=hr(n),t=n._freezeSettings(),r=new o0;return b0(e,r,new qS(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(n){if(n._initialized&&!n._terminated)throw new Ce(de.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Tr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ge.Z)(function*(){try{yield(t=(0,ge.Z)(function*(r){if(!qo.C())return Promise.resolve();const a=r+"main";yield qo.delete(a)}),function(r){return t.apply(this,arguments)})(AC(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class BD{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Au||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Sc("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function(n,e,t,r={}){var a;const c=(n=kt(n,rm))._getSettings();if("firestore.googleapis.com"!==c.host&&c.host!==e&&Sc("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},c),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let f,y;if("string"==typeof r.mockUserToken)f=r.mockUserToken,y=Gn.MOCK_USER;else{f=(0,nn.Sg)(r.mockUserToken,null===(a=n._app)||void 0===a?void 0:a.options.projectId);const w=r.mockUserToken.sub||r.mockUserToken.user_id;if(!w)throw new Ce(de.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new Gn(w)}n._authCredentials=new eM(new xE(f,y))}}(this._delegate,e,t,r)}enableNetwork(){return function(n){return function(n){return n.asyncQueue.enqueue((0,ge.Z)(function*(){const e=yield aD(n),t=yield _d(n);return e.setNetworkEnabled(!0),function(r){const a=$e(r);return a.wu.delete(0),bf(a)}(t)}))}(hr(n=kt(n,Rn)))}(this._delegate)}disableNetwork(){return function(n){return function(n){return n.asyncQueue.enqueue((0,ge.Z)(function*(){const e=yield aD(n),t=yield _d(n);return e.setNetworkEnabled(!1),(r=(0,ge.Z)(function*(a){const c=$e(a);c.wu.add(0),yield wf(c),c.yu.set("Offline")}),function(a){return r.apply(this,arguments)})(t);var r}))}(hr(n=kt(n,Rn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,Rf("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function(n){return function(e){const t=new Tr;return e.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return function(n,e){return Kb.apply(this,arguments)}(yield y0(e),t)})),t.promise}(hr(n=kt(n,Rn)))}(this._delegate)}onSnapshotsInSync(e){return function(n,e){return function(n,e){const t=new im(e);return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return r=yield Of(n),a=t,$e(r).bu.add(a),void a.next();var r,a})),()=>{t.bc(),n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return r=yield Of(n),a=t,void $e(r).bu.delete(a);var r,a}))}}(hr(n=kt(n,Rn)),W_(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Ce("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Cd(this,H_(this._delegate,e))}catch(t){throw Qi(t,"collection()","Firestore.collection()")}}doc(e){try{return new fo(this,$_(this._delegate,e))}catch(t){throw Qi(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Fi(this,function(n,e){if(n=kt(n,rm),a0("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ce(de.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ei(n,null,(t=e,new xu(Jt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Qi(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(n,e,t){n=kt(n,Rn);const r=Object.assign(Object.assign({},Ix),void 0);return function(a){if(a.maxAttempts<1)throw new Ce(de.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(a,c,f){const y=new Tr;return a.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){const w=yield function(n){return Fu(n).then(e=>e.datastore)}(a);new KS(a.asyncQueue,w,f,c,y).run()})),y.promise}(hr(n),a=>e(new Cx(n,a)),r)}(this._delegate,t=>e(new Sx(this,t)))}batch(){return hr(this._delegate),new jD(new J_(this._delegate,e=>Lf(this._delegate,e)))}loadBundle(e){return function(n,e){const t=hr(n=kt(n,Rn)),r=new z_;return function(n,e,t,r){const a=function(c,f){let y;return y="string"==typeof c?(new TextEncoder).encode(c):c,w=function(w,D){if(w instanceof Uint8Array)return nD(w,D);if(w instanceof ArrayBuffer)return nD(new Uint8Array(w),D);if(w instanceof ReadableStream)return w.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(y),new l0(w,f);var w}(t,pd(e));n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){!function(n,e,t){const r=$e(n);var a;(a=(0,ge.Z)(function*(c,f,y){try{const w=yield f.getMetadata();if(yield function(G,q){const te=$e(G),Re=Yr(q.createTime);return te.persistence.runTransaction("hasNewerBundle","readonly",Fe=>te.Ns.getBundleMetadata(Fe,q.id)).then(Fe=>!!Fe&&Fe.createTime.compareTo(Re)>=0)}(c.localStore,w))return yield f.close(),y._completeWith({taskState:"Success",documentsLoaded:(G=w).totalDocuments,bytesLoaded:G.totalBytes,totalDocuments:G.totalDocuments,totalBytes:G.totalBytes}),Promise.resolve(new Set);y._updateProgress(jC(w));const D=new MS(w,c.localStore,f.It);let R=yield f.mc();for(;R;){const G=yield D.Fu(R);G&&y._updateProgress(G),R=yield f.mc()}const O=yield D.complete();return yield $a(c,O.Lu,void 0),yield function(G,q){const te=$e(G);return te.persistence.runTransaction("Save bundle","readwrite",Re=>te.Ns.saveBundleMetadata(Re,q))}(c.localStore,w),y._completeWith(O.progress),Promise.resolve(O.Bu)}catch(w){return Sc("SyncEngine",`Loading bundle failed with ${w}`),y._failWith(w),Promise.resolve(new Set)}var G}),function(c,f,y){return a.apply(this,arguments)})(r,e,t).then(a=>{r.sharedClientState.notifyBundleLoaded(a)})}(yield y0(n),a,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function(n,e){return function(n,e){return n.asyncQueue.enqueue((0,ge.Z)(function*(){return function(t,r){const a=$e(t);return a.persistence.runTransaction("Get named query","readonly",c=>a.Ns.getNamedQuery(c,r))}(yield m0(n),e)}))}(hr(n=kt(n,Rn)),e).then(t=>t?new ei(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Fi(this,t):null)}}class ev extends xD{constructor(e){super(),this.firestore=e}convertBytes(e){return new hm(new ta(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return fo.forKey(t,this.firestore,null)}}class Sx{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new ev(e)}get(e){const t=na(e);return this._delegate.get(t).then(r=>new tv(this._firestore,new co(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const a=na(e);return r?(dm("Transaction.set",r),this._delegate.set(a,t,r)):this._delegate.set(a,t),this}update(e,t,r,...a){const c=na(e);return 2===arguments.length?this._delegate.update(c,t):this._delegate.update(c,t,r,...a),this}delete(e){const t=na(e);return this._delegate.delete(t),this}}class jD{constructor(e){this._delegate=e}set(e,t,r){const a=na(e);return r?(dm("WriteBatch.set",r),this._delegate.set(a,t,r)):this._delegate.set(a,t),this}update(e,t,r,...a){const c=na(e);return 2===arguments.length?this._delegate.update(c,t):this._delegate.update(c,t,r,...a),this}delete(e){const t=na(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Wc{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new um(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Vf(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Wc.INSTANCES;let a=r.get(e);a||(a=new WeakMap,r.set(e,a));let c=a.get(t);return c||(c=new Wc(e,new ev(e),t),a.set(t,c)),c}}Wc.INSTANCES=new WeakMap;class fo{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new ev(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Ce("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new fo(t,new yn(t._delegate,r,new Ve(e)))}static forKey(e,t,r){return new fo(t,new yn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Cd(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Cd(this.firestore,H_(this._delegate,e))}catch(t){throw Qi(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,nn.m9)(e))instanceof yn&&tD(this._delegate,e)}set(e,t){t=dm("DocumentReference.set",t);try{return t?vx(this._delegate,e,t):vx(this._delegate,e)}catch(r){throw Qi(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?Ex(this._delegate,e):Ex(this._delegate,e,t,...r)}catch(a){throw Qi(a,"updateDoc()","DocumentReference.update()")}}delete(){return function(n){return Lf(kt(n.firestore,Rn),[new id(n._key,Ln.none())])}(this._delegate)}onSnapshot(...e){const t=L0(e),r=HD(e,a=>new tv(this.firestore,new co(this.firestore._delegate,this._userDataWriter,a._key,a._document,a.metadata,this._delegate.converter)));return MD(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(n){n=kt(n,yn);const e=kt(n.firestore,Rn),t=hr(e),r=new Id(e);return function(n,e){const t=new Tr;return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return(r=(0,ge.Z)(function*(a,c,f){try{const y=yield function(w,D){const R=$e(w);return R.persistence.runTransaction("read document","readonly",O=>R.localDocuments.getDocument(O,D))}(a,c);y.isFoundDocument()?f.resolve(y):y.isNoDocument()?f.resolve(null):f.reject(new Ce(de.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(y){const w=Af(y,`Failed to get document '${c} from cache`);f.reject(w)}}),function(a,c,f){return r.apply(this,arguments)})(yield m0(n),e,t);var r})),t.promise}(t,n._key).then(a=>new co(e,r,n._key,a,new Ff(null!==a&&a.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function(n){n=kt(n,yn);const e=kt(n.firestore,Rn);return v0(hr(e),n._key,{source:"server"}).then(t=>lm(e,n,t))}(this._delegate):function(n){n=kt(n,yn);const e=kt(n.firestore,Rn);return v0(hr(e),n._key).then(t=>lm(e,n,t))}(this._delegate),t.then(r=>new tv(this.firestore,new co(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new fo(this.firestore,this._delegate.withConverter(e?Wc.getInstance(this.firestore,e):null))}}function Qi(n,e,t){return n.message=n.message.replace(e,t),n}function L0(n){for(const e of n)if("object"==typeof e&&!UD(e))return e;return{}}function HD(n,e){var t,r;let a;return a=UD(n[0])?n[0]:UD(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:c=>{a.next&&a.next(e(c))},error:null===(t=a.error)||void 0===t?void 0:t.bind(a),complete:null===(r=a.complete)||void 0===r?void 0:r.bind(a)}}class tv{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new fo(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Q_(this._delegate,e._delegate)}}class Vf extends tv{data(e){const t=this._delegate.data(e);return function(n,e){n||Je()}(void 0!==t),t}}class Fi{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new ev(e)}where(e,t,r){try{return new Fi(this.firestore,Ed(this._delegate,function(n,e,t){const r=e,a=x0("where",n);return new dx(a,r,t)}(e,t,r)))}catch(a){throw Qi(a,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Fi(this.firestore,Ed(this._delegate,function(n,e="asc"){const t=e,r=x0("orderBy",n);return new hx(r,t)}(e,t)))}catch(r){throw Qi(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Fi(this.firestore,Ed(this._delegate,function(n){return XC("limit",n),new bd("limit",n,"F")}(e)))}catch(t){throw Qi(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Fi(this.firestore,Ed(this._delegate,function(n){return XC("limitToLast",n),new bd("limitToLast",n,"L")}(e)))}catch(t){throw Qi(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Fi(this.firestore,Ed(this._delegate,function(...n){return new TD("startAt",n,!0)}(...e)))}catch(t){throw Qi(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Fi(this.firestore,Ed(this._delegate,function(...n){return new TD("startAfter",n,!1)}(...e)))}catch(t){throw Qi(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Fi(this.firestore,Ed(this._delegate,function(...n){return new N0("endBefore",n,!1)}(...e)))}catch(t){throw Qi(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Fi(this.firestore,Ed(this._delegate,function(...n){return new N0("endAt",n,!0)}(...e)))}catch(t){throw Qi(t,"endAt()","Query.endAt()")}}isEqual(e){return c0(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(n){n=kt(n,ei);const e=kt(n.firestore,Rn),t=hr(e),r=new Id(e);return function(n,e){const t=new Tr;return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return(r=(0,ge.Z)(function*(a,c,f){try{const y=yield hd(a,c,!0),w=new kS(c,y.Hi),D=w.Wu(y.documents),R=w.applyChanges(D,!1);f.resolve(R.snapshot)}catch(y){const w=Af(y,`Failed to execute query '${c} against cache`);f.reject(w)}}),function(a,c,f){return r.apply(this,arguments)})(yield m0(n),e,t);var r})),t.promise}(t,n._query).then(a=>new wd(e,r,n,a))}(this._delegate):"server"===(null==e?void 0:e.source)?function(n){n=kt(n,ei);const e=kt(n.firestore,Rn),t=hr(e),r=new Id(e);return sm(t,n._query,{source:"server"}).then(a=>new wd(e,r,n,a))}(this._delegate):function(n){n=kt(n,ei);const e=kt(n.firestore,Rn),t=hr(e),r=new Id(e);return lx(n._query),sm(t,n._query).then(a=>new wd(e,r,n,a))}(this._delegate),t.then(r=>new V0(this.firestore,new wd(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=L0(e),r=HD(e,a=>new V0(this.firestore,new wd(this.firestore._delegate,this._userDataWriter,this._delegate,a._snapshot)));return MD(this._delegate,t,r)}withConverter(e){return new Fi(this.firestore,this._delegate.withConverter(e?Wc.getInstance(this.firestore,e):null))}}class xx{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Vf(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class V0{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Fi(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Vf(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new xx(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Vf(this._firestore,r))})}isEqual(e){return Q_(this._delegate,e._delegate)}}class Cd extends Fi{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new fo(this.firestore,e):null}doc(e){try{return new fo(this.firestore,void 0===e?$_(this._delegate):$_(this._delegate,e))}catch(t){throw Qi(t,"doc()","CollectionReference.doc()")}}add(e){return function(n,e){const t=kt(n.firestore,Rn),r=$_(n),a=P0(n.converter,e);return Lf(t,[C0(kf(n.firestore),"addDoc",r._key,a,null!==n.converter,{}).toMutation(r._key,Ln.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new fo(this.firestore,t))}isEqual(e){return tD(this._delegate,e._delegate)}withConverter(e){return new Cd(this.firestore,this._delegate.withConverter(e?Wc.getInstance(this.firestore,e):null))}}function na(n){return kt(n,yn)}class fm{constructor(...e){this._delegate=new Ga(...e)}static documentId(){return new fm(Fn.keyField().canonicalString())}isEqual(e){return(e=(0,nn.m9)(e))instanceof Ga&&this._delegate._internalPath.isEqual(e._internalPath)}}class zc{constructor(e){this._delegate=e}static serverTimestamp(){const e=new ED("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new zc(e)}static delete(){const e=new K_("deleteField");return e._methodName="FieldValue.delete",new zc(e)}static arrayUnion(...e){const t=function(...n){return new EM("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new zc(t)}static arrayRemove(...e){const t=function(...n){return new bM("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new zc(t)}static increment(e){const t=function(n){return new wM("increment",n)}(e);return t._methodName="FieldValue.increment",new zc(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Rx={Firestore:BD,GeoPoint:Z_,Timestamp:qn,Blob:hm,Transaction:Sx,WriteBatch:jD,DocumentReference:fo,DocumentSnapshot:tv,Query:Fi,QueryDocumentSnapshot:Vf,QuerySnapshot:V0,CollectionReference:Cd,FieldPath:fm,FieldValue:zc,setLogLevel:function(n){!function(n){Ps.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function(n){(function(n,e){n.INTERNAL.registerComponent(new Bp.wA("firestore-compat",t=>((e,t)=>new BD(e,t,new NM))(t.getProvider("app-compat").getImmediate(),t.getProvider("firestore").getImmediate()),"PUBLIC").setServiceProps(Object.assign({},Rx)))})(n),n.registerVersion("@firebase/firestore-compat","0.2.1")}(BT.Z);var kM=F(6682),nv=F(309),$D=F(7771),GD=F(8858);class Nx extends ci.xQ{constructor(e=Number.POSITIVE_INFINITY,t=Number.POSITIVE_INFINITY,r){super(),this.scheduler=r,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=e<1?1:e,this._windowTime=t<1?1:t,t===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(e){if(!this.isStopped){const t=this._events;t.push(e),t.length>this._bufferSize&&t.shift()}super.next(e)}nextTimeWindow(e){this.isStopped||(this._events.push(new Ox(this._getNow(),e)),this._trimBufferThenGetEvents()),super.next(e)}_subscribe(e){const t=this._infiniteTimeWindow,r=t?this._events:this._trimBufferThenGetEvents(),a=this.scheduler,c=r.length;let f;if(this.closed)throw new So.N;if(this.isStopped||this.hasError?f=op.w.EMPTY:(this.observers.push(e),f=new GD.W(this,e)),a&&e.add(e=new nv.ht(e,a)),t)for(let y=0;y<c&&!e.closed;y++)e.next(r[y]);else for(let y=0;y<c&&!e.closed;y++)e.next(r[y].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),f}_getNow(){return(this.scheduler||$D.c).now()}_trimBufferThenGetEvents(){const e=this._getNow(),t=this._bufferSize,r=this._windowTime,a=this._events,c=a.length;let f=0;for(;f<c&&!(e-a[f].time<r);)f++;return c>t&&(f=Math.max(f,c-t)),f>0&&a.splice(0,f),a}}class Ox{constructor(e,t){this.time=e,this.value=t}}function qD(n,e,t){let r;return r=n&&"object"==typeof n?n:{bufferSize:n,windowTime:e,refCount:!1,scheduler:t},a=>a.lift(function({bufferSize:n=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:t,scheduler:r}){let a,f,c=0,y=!1,w=!1;return function(R){let O;c++,!a||y?(y=!1,a=new Nx(n,e,r),O=a.subscribe(this),f=R.subscribe({next(G){a.next(G)},error(G){y=!0,a.error(G)},complete(){w=!0,f=void 0,a.complete()}}),w&&(f=void 0)):O=a.subscribe(this),this.add(()=>{c--,O.unsubscribe(),O=void 0,f&&!w&&t&&0===c&&(f.unsubscribe(),f=void 0,a=void 0)})}}(r))}function U0(n,e){return e?Qn(()=>n,e):Qn(()=>n)}var WD=F(3101),rv=F(9173),Dd=F(8939);F(2329);const $0=new Map,ti={activated:!1,tokenObservers:[]},UM={initialized:!1,enabled:!1};function ni(n){return $0.get(n)||ti}function po(n,e){$0.set(n,e)}function G0(){return UM}class jx{constructor(e,t,r,a,c){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=a,this.upperBound=c,this.pending=null,this.nextErrorWaitInterval=a,a>c)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,ge.Z)(function*(){t.stop();try{t.pending=new nn.BH,yield function(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new nn.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Ji=new nn.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function JD(n){if(!ni(n).activated)throw Ji.create("use-before-activation",{appName:n.name})}function XD(n,e){return eT.apply(this,arguments)}function eT(){return eT=(0,ge.Z)(function*({url:n,body:e},t){var r,a;const c={"Content-Type":"application/json"},f=t.getImmediate({optional:!0});if(f){const q=yield f.getHeartbeatsHeader();q&&(c["X-Firebase-Client"]=q)}const y={method:"POST",body:JSON.stringify(e),headers:c};let w,D;try{w=yield fetch(n,y)}catch(q){throw Ji.create("fetch-network-error",{originalErrorMessage:null===(r=q)||void 0===r?void 0:r.message})}if(200!==w.status)throw Ji.create("fetch-status-error",{httpStatus:w.status});try{D=yield w.json()}catch(q){throw Ji.create("fetch-parse-error",{originalErrorMessage:null===(a=q)||void 0===a?void 0:a.message})}const R=D.ttl.match(/^([\d.]+)(s)$/);if(!R||!R[2]||isNaN(Number(R[1])))throw Ji.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${D.ttl}`});const O=1e3*Number(R[1]),G=Date.now();return{token:D.token,expireTimeMillis:G+O,issuedAtTimeMillis:G}}),eT.apply(this,arguments)}function Wx(n,e){const{projectId:t,appId:r,apiKey:a}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${a}`,body:{debug_token:e}}}const Xi="firebase-app-check-store";let ov=null;function nT(){return ov||(ov=new Promise((n,e)=>{var t;try{const r=indexedDB.open("firebase-app-check-database",1);r.onsuccess=a=>{n(a.target.result)},r.onerror=a=>{var c;e(Ji.create("storage-open",{originalErrorMessage:null===(c=a.target.error)||void 0===c?void 0:c.message}))},r.onupgradeneeded=a=>{0===a.oldVersion&&a.target.result.createObjectStore(Xi,{keyPath:"compositeKey"})}}catch(r){e(Ji.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}}),ov)}function Td(){return Td=(0,ge.Z)(function*(n,e){const r=(yield nT()).transaction(Xi,"readwrite"),c=r.objectStore(Xi).put({compositeKey:n,value:e});return new Promise((f,y)=>{c.onsuccess=w=>{f()},r.onerror=w=>{var D;y(Ji.create("storage-set",{originalErrorMessage:null===(D=w.target.error)||void 0===D?void 0:D.message}))}})}),Td.apply(this,arguments)}const av=new Cc.Yd("@firebase/app-check");function pm(n,e){return(0,nn.hl)()?function(n,e){return function(n,e){return Td.apply(this,arguments)}(function(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{av.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function aT(){return G0().enabled}function Xx(){return K0.apply(this,arguments)}function K0(){return K0=(0,ge.Z)(function*(){const n=G0();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),K0.apply(this,arguments)}const tR={error:"UNKNOWN_ERROR"};function ra(n){return nn.US.encodeString(JSON.stringify(n),!1)}function Y0(n){return uv.apply(this,arguments)}function uv(){return uv=(0,ge.Z)(function*(n,e=!1){const t=n.app;JD(t);const r=ni(t);let c,a=r.token;if(a&&!Zc(a)&&(po(t,Object.assign(Object.assign({},r),{token:void 0})),a=void 0),!a){const w=yield r.cachedTokenPromise;w&&(Zc(w)?a=w:yield pm(t,void 0))}if(!e&&a&&Zc(a))return{token:a.token};let y,f=!1;if(aT()){r.exchangeTokenPromise||(r.exchangeTokenPromise=XD(Wx(t,yield Xx()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),f=!0);const w=yield r.exchangeTokenPromise;return yield pm(t,w),po(t,Object.assign(Object.assign({},r),{token:w})),{token:w.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),f=!0),a=yield r.exchangeTokenPromise}catch(w){"appCheck/throttled"===w.code?av.warn(w.message):av.error(w),c=w}return a?c?y=Zc(a)?{token:a.token,internalError:c}:dv(c):(y={token:a.token},po(t,Object.assign(Object.assign({},r),{token:a})),yield pm(t,a)):y=dv(c),f&&lv(t,y),y}),uv.apply(this,arguments)}function cv(n,e){const t=ni(n),r=t.tokenObservers.filter(a=>a.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),po(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function J0(n){const{app:e}=n,t=ni(e);let r=t.tokenRefresher;r||(r=function(n){const{app:e}=n;return new jx((0,ge.Z)(function*(){let r;if(r=ni(e).token?yield Y0(n,!0):yield Y0(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=ni(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),po(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function lv(n,e){const t=ni(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(a){}}function Zc(n){return n.expireTimeMillis-Date.now()>0}function dv(n){return{token:ra(tR),error:n}}class hv{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=ni(this.app);for(const t of e)cv(this.app,t.next);return Promise.resolve()}}const Lu="app-check-internal";(0,Fl._registerComponent)(new Bp.wA("app-check",n=>function(n,e){return new hv(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(Lu).initialize()})),(0,Fl._registerComponent)(new Bp.wA(Lu,n=>function(n){return{getToken:e=>Y0(n,e),addTokenListener:e=>function(n,e,t,r){const{app:a}=n,c=ni(a),f={next:t,error:r,type:e};if(po(a,Object.assign(Object.assign({},c),{tokenObservers:[...c.tokenObservers,f]})),c.token&&Zc(c.token)){const y=c.token;Promise.resolve().then(()=>{t({token:y.token}),J0(n)}).catch(()=>{})}c.cachedTokenPromise.then(()=>J0(n))}(n,"INTERNAL",e),removeTokenListener:e=>cv(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Fl.registerVersion)("@firebase/app-check","0.5.15");class gT{constructor(){return(0,rv.vb)("app-check")}}"undefined"!=typeof window&&window;var hR=F(7841);const _T=new g.OlP("angularfire2.auth.use-emulator"),vT=new g.OlP("angularfire2.auth.settings"),ET=new g.OlP("angularfire2.auth.tenant-id"),rw=new g.OlP("angularfire2.auth.langugage-code"),fR=new g.OlP("angularfire2.auth.use-device-language"),pR=new g.OlP("angularfire.auth.persistence");let Vu=(()=>{class n{constructor(t,r,a,c,f,y,w,D,R,O,G,q){const te=new ci.xQ,Re=(0,ft.of)(void 0).pipe((0,nv.QV)(f.outsideAngular),Qn(()=>c.runOutsideAngular(()=>Promise.resolve().then(F.bind(F,8241)))),(0,Nt.U)(()=>(0,Dd.on)(t,c,r)),(0,Nt.U)(Fe=>((n,e,t,r,a,c,f,y)=>(0,Dd.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const w=e.runOutsideAngular(()=>n.auth());if(t&&w.useEmulator(...t),r&&(w.tenantId=r),w.languageCode=a,c&&w.useDeviceLanguage(),f)for(const[D,R]of Object.entries(f))w.settings[D]=R;return y&&w.setPersistence(y),w},[t,r,a,c,f,y]))(Fe,c,y,D,R,O,w,G)),qD({bufferSize:1,refCount:!1}));if(function(n){return"server"===n}(a))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,ft.of)(null);else{Re.pipe(Oo()).subscribe();const ot=Re.pipe(Qn(Ft=>Ft.getRedirectResult().then(Wt=>Wt,()=>null)),rv.iC,qD({bufferSize:1,refCount:!1})),Ct=Re.pipe(Qn(Ft=>new Ur.y(Wt=>({unsubscribe:c.runOutsideAngular(()=>Ft.onAuthStateChanged(Zt=>Wt.next(Zt),Zt=>Wt.error(Zt),()=>Wt.complete()))})))),Pt=Re.pipe(Qn(Ft=>new Ur.y(Wt=>({unsubscribe:c.runOutsideAngular(()=>Ft.onIdTokenChanged(Zt=>Wt.next(Zt),Zt=>Wt.error(Zt),()=>Wt.complete()))}))));this.authState=ot.pipe(U0(Ct),(0,WD.R)(f.outsideAngular),(0,nv.QV)(f.insideAngular)),this.user=ot.pipe(U0(Pt),(0,WD.R)(f.outsideAngular),(0,nv.QV)(f.insideAngular)),this.idToken=this.user.pipe(Qn(Ft=>Ft?(0,mn.D)(Ft.getIdToken()):(0,ft.of)(null))),this.idTokenResult=this.user.pipe(Qn(Ft=>Ft?(0,mn.D)(Ft.getIdTokenResult()):(0,ft.of)(null))),this.credential=(0,kM.T)(ot,te,this.authState.pipe(Mo(Ft=>!Ft))).pipe((0,Nt.U)(Ft=>(null==Ft?void 0:Ft.user)?Ft:null),(0,WD.R)(f.outsideAngular),(0,nv.QV)(f.insideAngular))}return(0,Dd.pX)(this,Re,c,{spy:{apply:(Fe,ot,Ct)=>{(Fe.startsWith("signIn")||Fe.startsWith("createUser"))&&Ct.then(Pt=>te.next(Pt))}}})}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Dd.Dh),g.LFG(Dd.xv,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(rv.HU),g.LFG(_T,8),g.LFG(vT,8),g.LFG(ET,8),g.LFG(rw,8),g.LFG(fR,8),g.LFG(pR,8),g.LFG(gT,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),iw=(()=>{class n{constructor(){hR.Z.registerVersion("angularfire",rv.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[Vu]}),n})(),vv=(()=>{class n{constructor(t,r){this.angularFireAuth=t,this.router=r,this.user=this.angularFireAuth.user,console.log("User ID Token at the constructor of UserService: ",localStorage.getItem("userIdToken")),this.user.subscribe(a=>{console.log("User Info is available",a),this.storeIdToken(a.getIdToken())}),this.angularFireAuth.onAuthStateChanged(a=>{console.log(a?a.email+" is Logged in!":"User is Logged Out")})}storeIdToken(t){t.then(r=>{localStorage.setItem("userIdToken",r),console.log("Id Token is available: ",localStorage.getItem("userIdToken"))})}logInUser(t,r){this.angularFireAuth.signInWithEmailAndPassword(t,r).then(a=>{console.log("log in successfull",a),this.router.navigate(["/home"])},a=>{console.log("error logging in: ",a)})}signUpUser(t,r){this.angularFireAuth.createUserWithEmailAndPassword(t,r).then(a=>{console.log("user sign up successfull",a),this.router.navigate(["/login"])},a=>{console.log("user sign up error")})}logOutUser(){localStorage.clear(),this.angularFireAuth.signOut().then(()=>{console.log("user sign out"),this.router.navigate(["/login"])},t=>{console.log("Error logging out")})}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Vu),g.LFG(qr))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var gR=F(1555);function sw(n,e){return new Ur.y(t=>{const r=n.length;if(0===r)return void t.complete();const a=new Array(r);let c=0,f=0;for(let y=0;y<r;y++){const w=(0,mn.D)(n[y]);let D=!1;t.add(w.subscribe({next:R=>{D||(D=!0,f++),a[y]=R},error:R=>t.error(R),complete:()=>{c++,(c===r||!D)&&(f===r&&t.next(e?e.reduce((R,O,G)=>(R[O]=a[G],R),{}):a),t.complete())}}))}})}let mR=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=a=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.Qsj),g.Y36(g.SBq))},n.\u0275dir=g.lG2({type:n}),n})(),jf=(()=>{class n extends mR{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=g.n5z(n)))(r||n)}}(),n.\u0275dir=g.lG2({type:n,features:[g.qOj]}),n})();const qa=new g.OlP("NgValueAccessor"),XM={provide:qa,useExisting:(0,g.Gpc)(()=>Hf),multi:!0},tN=new g.OlP("CompositionEventMode");let Hf=(()=>{class n extends mR{constructor(t,r,a){super(t,r),this._compositionMode=a,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const n=L()?L().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.Qsj),g.Y36(g.SBq),g.Y36(tN,8))},n.\u0275dir=g.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&g.NdJ("input",function(c){return r._handleInput(c.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(c){return r._compositionEnd(c.target.value)})},features:[g._Bn([XM]),g.qOj]}),n})();const es=new g.OlP("NgValidators"),Sd=new g.OlP("NgAsyncValidators");function N(n){return null!=n}function k(n){const e=(0,g.QGY)(n)?(0,mn.D)(n):n;return(0,g.CqO)(e),e}function H(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function W(n,e){return e.map(t=>t(n))}function Q(n){return n.map(e=>function(n){return!n.validate}(e)?e:t=>e.validate(t))}function ye(n){return null!=n?function(n){if(!n)return null;const e=n.filter(N);return 0==e.length?null:function(t){return H(W(t,e))}}(Q(n)):null}function gt(n){return null!=n?function(n){if(!n)return null;const e=n.filter(N);return 0==e.length?null:function(t){return function(...n){if(1===n.length){const e=n[0];if((0,Ys.k)(e))return sw(e,null);if((0,gR.K)(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return sw(t.map(r=>e[r]),t)}}if("function"==typeof n[n.length-1]){const e=n.pop();return sw(n=1===n.length&&(0,Ys.k)(n[0])?n[0]:n,null).pipe((0,Nt.U)(t=>e(...t)))}return sw(n,null)}(W(t,e).map(k)).pipe((0,Nt.U)(H))}}(Q(n)):null}function qt(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function xd(n){return n?Array.isArray(n)?n:[n]:[]}function Uu(n,e){return Array.isArray(n)?n.includes(e):n===e}function Rd(n,e){const t=xd(e);return xd(n).forEach(a=>{Uu(t,a)||t.push(a)}),t}function Md(n,e){return xd(e).filter(t=>!Uu(n,t))}let Ev=(()=>{class n{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=ye(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=gt(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,r){return!!this.control&&this.control.hasError(t,r)}getError(t,r){return this.control?this.control.getError(t,r):null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=g.lG2({type:n}),n})(),bi=(()=>{class n extends Ev{get formDirective(){return null}get path(){return null}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=g.n5z(n)))(r||n)}}(),n.\u0275dir=g.lG2({type:n,features:[g.qOj]}),n})();class Wa extends Ev{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}let IT=(()=>{class n extends class{constructor(e){this._cd=e}is(e){var t,r,a;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(a=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===a?void 0:a[e])}}{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(Wa,2))},n.\u0275dir=g.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&g.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[g.qOj]}),n})();function ow(n,e){(function(n,e){const t=function(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(qt(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(qt(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const a=()=>n.updateValueAndValidity();AT(e._rawValidators,a),AT(e._rawAsyncValidators,a)})(n,e),e.valueAccessor.writeValue(n.value),function(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&nN(n,e)})}(n,e),function(n,e){const t=(r,a)=>{e.valueAccessor.writeValue(r),a&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&nN(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function AT(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function nN(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function xT(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const aw="VALID",RT="INVALID",wv="PENDING",uw="DISABLED";function DR(n){return(AR(n)?n.validators:n)||null}function sN(n){return Array.isArray(n)?ye(n):n||null}function TR(n,e){return(AR(e)?e.asyncValidators:n)||null}function oN(n){return Array.isArray(n)?gt(n):n||null}function AR(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class SR{constructor(e,t){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=sN(this._rawValidators),this._composedAsyncValidatorFn=oN(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===aw}get invalid(){return this.status===RT}get pending(){return this.status==wv}get disabled(){return this.status===uw}get enabled(){return this.status!==uw}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=sN(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=oN(e)}addValidators(e){this.setValidators(Rd(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Rd(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Md(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Md(e,this._rawAsyncValidators))}hasValidator(e){return Uu(this._rawValidators,e)}hasAsyncValidator(e){return Uu(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=wv,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=uw,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=aw,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===aw||this.status===wv)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?uw:aw}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=wv,this._hasOwnPendingAsyncValidator=!0;const t=k(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(a=>{r=r instanceof xR?r.controls.hasOwnProperty(a)?r.controls[a]:null:r instanceof oO&&r.at(a)||null}),r}(this,e)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new g.vpe,this.statusChanges=new g.vpe}_calculateStatus(){return this._allControlsDisabled()?uw:this.errors?RT:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(wv)?wv:this._anyControlsHaveStatus(RT)?RT:aw}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){AR(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class MT extends SR{constructor(e=null,t,r){super(DR(t),TR(r,t)),this._onChange=[],this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=null,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){xT(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){xT(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class xR extends SR{constructor(e,t,r){super(DR(t),TR(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){this._checkAllValuesPresent(e),Object.keys(e).forEach(r=>{this._throwIfControlMissing(r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,a)=>{r.reset(e[a],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t instanceof MT?t.value:t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[e])throw new Error(`Cannot find form control with name: ${e}.`)}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((a,c)=>{r=t(r,a,c)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(e){this._forEachChild((t,r)=>{if(void 0===e[r])throw new Error(`Must supply a value for form control with name: '${r}'.`)})}}class oO extends SR{constructor(e,t,r){super(DR(t),TR(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){this._checkAllValuesPresent(e),e.forEach((r,a)=>{this._throwIfControlMissing(a),this.at(a).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,a)=>{this.at(a)&&this.at(a).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,a)=>{r.reset(e[a],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e instanceof MT?e.value:e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(e))throw new Error(`Cannot find form control at index ${e}`)}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_checkAllValuesPresent(e){this._forEachChild((t,r)=>{if(void 0===e[r])throw new Error(`Must supply a value for form control at index: ${r}.`)})}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const cO={provide:Wa,useExisting:(0,g.Gpc)(()=>lw)},cN=(()=>Promise.resolve(null))();let lw=(()=>{class n extends Wa{constructor(t,r,a,c){super(),this.control=new MT,this._registered=!1,this.update=new g.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(a),this.valueAccessor=function(n,e){if(!e)return null;let t,r,a;return Array.isArray(e),e.forEach(c=>{c.constructor===Hf?t=c:function(n){return Object.getPrototypeOf(n.constructor)===jf}(c)?r=c:a=c}),a||r||t||null}(0,c)}ngOnChanges(t){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in t&&this._updateDisabled(t),function(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?function(n,e){return[...e.path,n]}(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){ow(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){cN.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1})})}_updateDisabled(t){const r=t.isDisabled.currentValue,a=""===r||r&&"false"!==r;cN.then(()=>{a&&!this.control.disabled?this.control.disable():!a&&this.control.disabled&&this.control.enable()})}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(bi,9),g.Y36(es,10),g.Y36(Sd,10),g.Y36(qa,10))},n.\u0275dir=g.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[g._Bn([cO]),g.qOj,g.TTD]}),n})(),dN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({}),n})(),SN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[[dN]]}),n})(),kO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[SN]}),n})(),xN=(()=>{class n{constructor(t){this.userService=t,this.signInFormVisible=!0}ngOnInit(){}logIn(){this.userService.logInUser(this.email,this.password),this.email="",this.password=""}makeSignInFormVisible(){this.signInFormVisible=!0}makeSignUpFormVisible(){this.signInFormVisible=!1}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(vv))},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-login"]],decls:23,vars:2,consts:[[1,"container-fluid"],[1,"row"],[1,"col-md-6","offset-md-2","mt-3"],[1,"card"],[1,"card-header"],[1,"card-body"],[1,"mb-3"],["for","exampleInputEmail1",1,"form-label"],["type","email","id","exampleInputEmail1","aria-describedby","emailHelp",1,"form-control",3,"ngModel","ngModelChange"],["for","exampleInputPassword1",1,"form-label"],["type","password","id","exampleInputPassword1",1,"form-control",3,"ngModel","ngModelChange"],["type","submit",1,"btn","btn-primary",3,"click"],[1,"mt-3"],["href","registration",1,"link-primary",3,"click"]],template:function(t,r){1&t&&(g.TgZ(0,"div",0),g.TgZ(1,"div",1),g.TgZ(2,"div",2),g.TgZ(3,"div",3),g.TgZ(4,"div",4),g._uU(5,"Welcome"),g.qZA(),g.TgZ(6,"div",5),g.TgZ(7,"div"),g.TgZ(8,"div",6),g.TgZ(9,"label",7),g._uU(10,"Email address"),g.qZA(),g.TgZ(11,"input",8),g.NdJ("ngModelChange",function(c){return r.email=c}),g.qZA(),g.qZA(),g.TgZ(12,"div",6),g.TgZ(13,"label",9),g._uU(14,"Password"),g.qZA(),g.TgZ(15,"input",10),g.NdJ("ngModelChange",function(c){return r.password=c}),g.qZA(),g.qZA(),g.TgZ(16,"button",11),g.NdJ("click",function(){return r.logIn()}),g._uU(17,"Log In"),g.qZA(),g.qZA(),g.TgZ(18,"div",12),g._uU(19," Don't have an account? "),g.TgZ(20,"a",13),g.NdJ("click",function(){return r.makeSignUpFormVisible()}),g._uU(21,"Sign Up"),g.qZA(),g._uU(22," from here. "),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA()),2&t&&(g.xp6(11),g.Q6J("ngModel",r.email),g.xp6(4),g.Q6J("ngModel",r.password))},directives:[Hf,IT,lw],styles:[""]}),n})(),PO=(()=>{class n{constructor(t){this.userService=t}ngOnInit(){}signUp(){this.userService.signUpUser(this.email,this.password),this.email="",this.password=""}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(vv))},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-registration"]],decls:23,vars:2,consts:[[1,"container-fluid"],[1,"row"],[1,"col-md-6","offset-md-2","mt-3"],[1,"card"],[1,"card-header"],[1,"card-body"],[1,"mb-3"],["for","exampleInputEmail1",1,"form-label"],["type","email","id","exampleInputEmail1","aria-describedby","emailHelp",1,"form-control",3,"ngModel","ngModelChange"],["for","exampleInputPassword1",1,"form-label"],["type","password","id","exampleInputPassword1",1,"form-control",3,"ngModel","ngModelChange"],["type","submit",1,"btn","btn-primary",3,"click"],[1,"mt-3"],["href","login",1,"link-primary"]],template:function(t,r){1&t&&(g.TgZ(0,"div",0),g.TgZ(1,"div",1),g.TgZ(2,"div",2),g.TgZ(3,"div",3),g.TgZ(4,"div",4),g._uU(5,"Register In Our Application"),g.qZA(),g.TgZ(6,"div",5),g.TgZ(7,"div"),g.TgZ(8,"div",6),g.TgZ(9,"label",7),g._uU(10,"Email address"),g.qZA(),g.TgZ(11,"input",8),g.NdJ("ngModelChange",function(c){return r.email=c}),g.qZA(),g.qZA(),g.TgZ(12,"div",6),g.TgZ(13,"label",9),g._uU(14,"Password"),g.qZA(),g.TgZ(15,"input",10),g.NdJ("ngModelChange",function(c){return r.password=c}),g.qZA(),g.qZA(),g.TgZ(16,"button",11),g.NdJ("click",function(){return r.signUp()}),g._uU(17,"Submit"),g.qZA(),g.qZA(),g.TgZ(18,"div",12),g._uU(19," Already have an account? "),g.TgZ(20,"a",13),g._uU(21,"Login "),g.qZA(),g._uU(22," from here. "),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA()),2&t&&(g.xp6(11),g.Q6J("ngModel",r.email),g.xp6(4),g.Q6J("ngModel",r.password))},directives:[Hf,IT,lw],styles:[""]}),n})(),FO=(()=>{class n{constructor(){this.title="Profile Page",this.imageURL="https://cdn-icons-png.flaticon.com/512/1250/1250689.png",this.viewCount=0,this.name="default"}ngOnInit(){}incrementCount(){this.viewCount++}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-profile"]],decls:14,vars:5,consts:[["width","300",3,"src"],[3,"click"],["type","text",3,"ngModel","ngModelChange"]],template:function(t,r){1&t&&(g.TgZ(0,"p"),g._uU(1,"profile works!"),g.qZA(),g.TgZ(2,"h1"),g._uU(3),g.qZA(),g._UZ(4,"img",0),g._UZ(5,"br"),g.TgZ(6,"button",1),g.NdJ("click",function(){return r.incrementCount()}),g._uU(7,"Click to increase view count"),g.qZA(),g.TgZ(8,"p"),g._uU(9),g.qZA(),g.TgZ(10,"div"),g.TgZ(11,"input",2),g.NdJ("ngModelChange",function(c){return r.name=c}),g.qZA(),g.TgZ(12,"p"),g._uU(13),g.qZA(),g.qZA()),2&t&&(g.xp6(3),g.Oqu(r.title),g.xp6(1),g.Q6J("src",r.imageURL,g.LSH),g.xp6(5),g.hij("Counter: ",r.viewCount,""),g.xp6(2),g.Q6J("ngModel",r.name),g.xp6(2),g.hij("Hello, ",r.name,""))},directives:[Hf,IT,lw],styles:[""]}),n})();const LO=function(){return["/create"]},VO=function(){return["/album",11]};let UO=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-my-albums"]],decls:7,vars:4,consts:[[1,"float-right",2,"padding-right","35px","padding-top","30px"],[1,"btn","btn-success",3,"routerLink"],[3,"routerLink"]],template:function(t,r){1&t&&(g.TgZ(0,"div",0),g.TgZ(1,"a",1),g._uU(2," Create Album "),g.qZA(),g.qZA(),g._UZ(3,"br"),g._uU(4," All My Albums will be listed here! "),g.TgZ(5,"a",2),g._uU(6," Go to Specific album\n"),g.qZA()),2&t&&(g.xp6(1),g.Q6J("routerLink",g.DdM(2,LO)),g.xp6(4),g.Q6J("routerLink",g.DdM(3,VO)))},directives:[bu],styles:[""]}),n})(),BO=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-create-album"]],decls:1,vars:0,template:function(t,r){1&t&&g._uU(0,"This Page will allow user to create a new album")},styles:[""]}),n})();const jO=function(){return["/upload",11]},HO=function(){return["/photo",11]};let $O=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-album-details"]],decls:9,vars:4,consts:[[1,"float-right",2,"padding-right","35px","padding-top","30px"],[1,"btn","btn-success",3,"routerLink"]],template:function(t,r){1&t&&(g.TgZ(0,"div",0),g.TgZ(1,"a",1),g._uU(2," Upload Photo "),g.qZA(),g.qZA(),g._UZ(3,"br"),g.TgZ(4,"div",0),g.TgZ(5,"a",1),g._uU(6," Photo Details "),g.qZA(),g.qZA(),g._UZ(7,"br"),g._uU(8,"\nDetails of specific album will be shown here!")),2&t&&(g.xp6(1),g.Q6J("routerLink",g.DdM(2,jO)),g.xp6(4),g.Q6J("routerLink",g.DdM(3,HO)))},directives:[bu],styles:[""]}),n})();const GO=function(){return["/album",11]};let qO=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-upload-picture"]],decls:5,vars:2,consts:[[1,"float-right",2,"padding-right","35px","padding-top","30px"],[1,"btn","btn-success",3,"routerLink"]],template:function(t,r){1&t&&(g.TgZ(0,"div",0),g.TgZ(1,"a",1),g._uU(2," Go back to Album "),g.qZA(),g.qZA(),g._UZ(3,"br"),g._uU(4," Will allow user to upload photo from here!")),2&t&&(g.xp6(1),g.Q6J("routerLink",g.DdM(1,GO)))},directives:[bu],styles:[""]}),n})();const WO=function(){return["/upload",11]};let zO=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-photo-details"]],decls:5,vars:2,consts:[[1,"float-right",2,"padding-right","35px","padding-top","30px"],[1,"btn","btn-success",3,"routerLink"]],template:function(t,r){1&t&&(g.TgZ(0,"div",0),g.TgZ(1,"a",1),g._uU(2," Upload Photo "),g.qZA(),g.qZA(),g._UZ(3,"br"),g._uU(4," Where the details of the photo will be shown!")),2&t&&(g.xp6(1),g.Q6J("routerLink",g.DdM(1,WO)))},directives:[bu],styles:[""]}),n})();class RN{}class MN{}class Nd{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const a=t.slice(0,r),c=a.toLowerCase(),f=t.slice(r+1).trim();this.maybeSetNormalizedName(a,c),this.headers.has(c)?this.headers.get(c).push(f):this.headers.set(c,[f])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const a=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(a,r),this.maybeSetNormalizedName(t,a))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Nd?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Nd;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Nd?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const a=("a"===e.op?this.headers.get(t):void 0)||[];a.push(...r),this.headers.set(t,a);break;case"d":const c=e.value;if(c){let f=this.headers.get(t);if(!f)return;f=f.filter(y=>-1===c.indexOf(y)),0===f.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,f)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class ZO{encodeKey(e){return NN(e)}encodeValue(e){return NN(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const YO=/%(\d[a-f0-9])/gi,QO={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function NN(n){return encodeURIComponent(n).replace(YO,(e,t)=>{var r;return null!==(r=QO[t])&&void 0!==r?r:e})}function ON(n){return`${n}`}class $f{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new ZO,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(a=>{const c=a.indexOf("="),[f,y]=-1==c?[e.decodeKey(a),""]:[e.decodeKey(a.slice(0,c)),e.decodeValue(a.slice(c+1))],w=t.get(f)||[];w.push(y),t.set(f,w)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t];this.map.set(t,Array.isArray(r)?r:[r])})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const a=e[r];Array.isArray(a)?a.forEach(c=>{t.push({param:r,value:c,op:"a"})}):t.push({param:r,value:a,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new $f({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(ON(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const a=r.indexOf(ON(e.value));-1!==a&&r.splice(a,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class JO{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}keys(){return this.map.keys()}}function kN(n){return"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer}function PN(n){return"undefined"!=typeof Blob&&n instanceof Blob}function FN(n){return"undefined"!=typeof FormData&&n instanceof FormData}class dw{constructor(e,t,r,a){let c;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||a?(this.body=void 0!==r?r:null,c=a):c=r,c&&(this.reportProgress=!!c.reportProgress,this.withCredentials=!!c.withCredentials,c.responseType&&(this.responseType=c.responseType),c.headers&&(this.headers=c.headers),c.context&&(this.context=c.context),c.params&&(this.params=c.params)),this.headers||(this.headers=new Nd),this.context||(this.context=new JO),this.params){const f=this.params.toString();if(0===f.length)this.urlWithParams=t;else{const y=t.indexOf("?");this.urlWithParams=t+(-1===y?"?":y<t.length-1?"&":"")+f}}else this.params=new $f,this.urlWithParams=t}serializeBody(){return null===this.body?null:kN(this.body)||PN(this.body)||FN(this.body)||function(n){return"undefined"!=typeof URLSearchParams&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof $f?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||FN(this.body)?null:PN(this.body)?this.body.type||null:kN(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof $f?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){var t;const r=e.method||this.method,a=e.url||this.url,c=e.responseType||this.responseType,f=void 0!==e.body?e.body:this.body,y=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,w=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let D=e.headers||this.headers,R=e.params||this.params;const O=null!==(t=e.context)&&void 0!==t?t:this.context;return void 0!==e.setHeaders&&(D=Object.keys(e.setHeaders).reduce((G,q)=>G.set(q,e.setHeaders[q]),D)),e.setParams&&(R=Object.keys(e.setParams).reduce((G,q)=>G.set(q,e.setParams[q]),R)),new dw(r,a,f,{params:R,headers:D,context:O,reportProgress:w,responseType:c,withCredentials:y})}}var ri=(()=>((ri=ri||{})[ri.Sent=0]="Sent",ri[ri.UploadProgress=1]="UploadProgress",ri[ri.ResponseHeader=2]="ResponseHeader",ri[ri.DownloadProgress=3]="DownloadProgress",ri[ri.Response=4]="Response",ri[ri.User=5]="User",ri))();class VR{constructor(e,t=200,r="OK"){this.headers=e.headers||new Nd,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class UR extends VR{constructor(e={}){super(e),this.type=ri.ResponseHeader}clone(e={}){return new UR({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class NT extends VR{constructor(e={}){super(e),this.type=ri.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new NT({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class LN extends VR{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function BR(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let VN=(()=>{class n{constructor(t){this.handler=t}request(t,r,a={}){let c;if(t instanceof dw)c=t;else{let w,D;w=a.headers instanceof Nd?a.headers:new Nd(a.headers),a.params&&(D=a.params instanceof $f?a.params:new $f({fromObject:a.params})),c=new dw(t,r,void 0!==a.body?a.body:null,{headers:w,context:a.context,params:D,reportProgress:a.reportProgress,responseType:a.responseType||"json",withCredentials:a.withCredentials})}const f=(0,ft.of)(c).pipe(ds(w=>this.handler.handle(w)));if(t instanceof dw||"events"===a.observe)return f;const y=f.pipe(Mo(w=>w instanceof NT));switch(a.observe||"body"){case"body":switch(c.responseType){case"arraybuffer":return y.pipe((0,Nt.U)(w=>{if(null!==w.body&&!(w.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return w.body}));case"blob":return y.pipe((0,Nt.U)(w=>{if(null!==w.body&&!(w.body instanceof Blob))throw new Error("Response is not a Blob.");return w.body}));case"text":return y.pipe((0,Nt.U)(w=>{if(null!==w.body&&"string"!=typeof w.body)throw new Error("Response is not a string.");return w.body}));default:return y.pipe((0,Nt.U)(w=>w.body))}case"response":return y;default:throw new Error(`Unreachable: unhandled observe type ${a.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new $f).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,a={}){return this.request("PATCH",t,BR(a,r))}post(t,r,a={}){return this.request("POST",t,BR(a,r))}put(t,r,a={}){return this.request("PUT",t,BR(a,r))}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(RN))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();class UN{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const BN=new g.OlP("HTTP_INTERCEPTORS");let t1=(()=>{class n{intercept(t,r){return r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const n1=/^\)\]\}',?\n/;let jN=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Ur.y(r=>{const a=this.xhrFactory.build();if(a.open(t.method,t.urlWithParams),t.withCredentials&&(a.withCredentials=!0),t.headers.forEach((q,te)=>a.setRequestHeader(q,te.join(","))),t.headers.has("Accept")||a.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const q=t.detectContentTypeHeader();null!==q&&a.setRequestHeader("Content-Type",q)}if(t.responseType){const q=t.responseType.toLowerCase();a.responseType="json"!==q?q:"text"}const c=t.serializeBody();let f=null;const y=()=>{if(null!==f)return f;const q=1223===a.status?204:a.status,te=a.statusText||"OK",Re=new Nd(a.getAllResponseHeaders()),Fe=function(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(a)||t.url;return f=new UR({headers:Re,status:q,statusText:te,url:Fe}),f},w=()=>{let{headers:q,status:te,statusText:Re,url:Fe}=y(),ot=null;204!==te&&(ot=void 0===a.response?a.responseText:a.response),0===te&&(te=ot?200:0);let Ct=te>=200&&te<300;if("json"===t.responseType&&"string"==typeof ot){const Pt=ot;ot=ot.replace(n1,"");try{ot=""!==ot?JSON.parse(ot):null}catch(Ft){ot=Pt,Ct&&(Ct=!1,ot={error:Ft,text:ot})}}Ct?(r.next(new NT({body:ot,headers:q,status:te,statusText:Re,url:Fe||void 0})),r.complete()):r.error(new LN({error:ot,headers:q,status:te,statusText:Re,url:Fe||void 0}))},D=q=>{const{url:te}=y(),Re=new LN({error:q,status:a.status||0,statusText:a.statusText||"Unknown Error",url:te||void 0});r.error(Re)};let R=!1;const O=q=>{R||(r.next(y()),R=!0);let te={type:ri.DownloadProgress,loaded:q.loaded};q.lengthComputable&&(te.total=q.total),"text"===t.responseType&&!!a.responseText&&(te.partialText=a.responseText),r.next(te)},G=q=>{let te={type:ri.UploadProgress,loaded:q.loaded};q.lengthComputable&&(te.total=q.total),r.next(te)};return a.addEventListener("load",w),a.addEventListener("error",D),a.addEventListener("timeout",D),a.addEventListener("abort",D),t.reportProgress&&(a.addEventListener("progress",O),null!==c&&a.upload&&a.upload.addEventListener("progress",G)),a.send(c),r.next({type:ri.Sent}),()=>{a.removeEventListener("error",D),a.removeEventListener("abort",D),a.removeEventListener("load",w),a.removeEventListener("timeout",D),t.reportProgress&&(a.removeEventListener("progress",O),null!==c&&a.upload&&a.upload.removeEventListener("progress",G)),a.readyState!==a.DONE&&a.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ji))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const jR=new g.OlP("XSRF_COOKIE_NAME"),HR=new g.OlP("XSRF_HEADER_NAME");class HN{}let i1=(()=>{class n{constructor(t,r,a){this.doc=t,this.platform=r,this.cookieName=a,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=At(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(_e),g.LFG(g.Lbi),g.LFG(jR))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),$R=(()=>{class n{constructor(t,r){this.tokenService=t,this.headerName=r}intercept(t,r){const a=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||a.startsWith("http://")||a.startsWith("https://"))return r.handle(t);const c=this.tokenService.getToken();return null!==c&&!t.headers.has(this.headerName)&&(t=t.clone({headers:t.headers.set(this.headerName,c)})),r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(HN),g.LFG(HR))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),s1=(()=>{class n{constructor(t,r){this.backend=t,this.injector=r,this.chain=null}handle(t){if(null===this.chain){const r=this.injector.get(BN,[]);this.chain=r.reduceRight((a,c)=>new UN(a,c),this.backend)}return this.chain.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(MN),g.LFG(g.zs3))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),o1=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:$R,useClass:t1}]}}static withOptions(t={}){return{ngModule:n,providers:[t.cookieName?{provide:jR,useValue:t.cookieName}:[],t.headerName?{provide:HR,useValue:t.headerName}:[]]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[$R,{provide:BN,useExisting:$R,multi:!0},{provide:HN,useClass:i1},{provide:jR,useValue:"XSRF-TOKEN"},{provide:HR,useValue:"X-XSRF-TOKEN"}]}),n})(),a1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[VN,{provide:RN,useClass:s1},jN,{provide:MN,useExisting:jN}],imports:[[o1.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),n})(),u1=(()=>{class n{constructor(t){this.http=t}getAllAlbums(){var t=this.getHeaders();return this.http.get("http://54.166.192.54:8080/api/albums",{headers:t})}getOneAlbum(){return this.http.get("http://54.166.192.54:8080/api/album")}getHeaders(){return{idToken:localStorage.getItem("userIdToken")}}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(VN))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const c1=[{path:"",component:xN},{path:"login",component:xN},{path:"registration",component:PO},{path:"home",component:ww},{path:"albums/recent",component:(()=>{class n{constructor(t){this.albumService=t}ngOnInit(){this.albumService.getAllAlbums().subscribe(t=>{console.log("Got all album response: ",t)}),this.albumService.getOneAlbum().subscribe(t=>{console.log("Got album response: ",t)})}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(u1))},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-recent-albums"]],decls:1,vars:0,template:function(t,r){1&t&&g._uU(0,"\nMost recent albums will be listed here!")},styles:[""]}),n})()},{path:"profile/:profileId",component:FO},{path:"albums/me",component:UO},{path:"create",component:BO},{path:"album/:albumId",component:$O},{path:"upload/:albumId",component:qO},{path:"photo/:photoId",component:zO}];let l1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[[Gv.forRoot(c1)],Gv]}),n})();function d1(n,e){if(1&n){const t=g.EpF();g.TgZ(0,"button",10),g.NdJ("click",function(){return g.CHM(t),g.oxw().logout()}),g._uU(1,"Logout"),g.qZA()}}const h1=function(){return["/album/recent"]},f1=function(){return["/profile/me"]},p1=function(){return["/albums/me"]};let g1=(()=>{class n{constructor(t){this.userService=t,this.title="firebase-demo"}signup(){this.userService.signUpUser(this.email,this.password),this.email=this.password=""}login(){this.userService.logInUser(this.email,this.password),this.email=this.password=""}logout(){this.userService.logOutUser()}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(vv))},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-root"]],decls:20,vars:9,consts:[[1,"navbar","navbar-expand-lg","navbar-light","bg-light"],[1,"navbar-brand"],["type","button","data-toggle","collapse","data-target","#navbarSupportedContent","aria-controls","navbarSupportedContent","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarSupportedContent",1,"collapse","navbar-collapse"],[1,"navbar-nav","mr-auto"],[1,"nav-item"],[1,"nav-link",3,"routerLink"],[1,"nav-item","btn-danger",2,"padding-right","30px","padding-top","20px"],[3,"click",4,"ngIf"],[3,"click"]],template:function(t,r){1&t&&(g.TgZ(0,"nav",0),g.TgZ(1,"a",1),g._uU(2,"My Photo Application"),g.qZA(),g.TgZ(3,"button",2),g._UZ(4,"span",3),g.qZA(),g.TgZ(5,"div",4),g.TgZ(6,"ul",5),g.TgZ(7,"li",6),g.TgZ(8,"a",7),g._uU(9,"Home"),g.qZA(),g.qZA(),g.TgZ(10,"li",6),g.TgZ(11,"a",7),g._uU(12,"Profile"),g.qZA(),g.qZA(),g.TgZ(13,"li",6),g.TgZ(14,"a",7),g._uU(15,"Albums"),g.qZA(),g.qZA(),g.TgZ(16,"li",8),g.YNc(17,d1,2,0,"button",9),g.ALo(18,"async"),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g._UZ(19,"router-outlet")),2&t&&(g.xp6(8),g.Q6J("routerLink",g.DdM(6,h1)),g.xp6(3),g.Q6J("routerLink",g.DdM(7,f1)),g.xp6(3),g.Q6J("routerLink",g.DdM(8,p1)),g.xp6(3),g.Q6J("ngIf",g.lcZ(18,4,r.userService.user)))},directives:[bu,Pr,uy],pipes:[$u],styles:[""]}),n})();const $N_firebaseConfig={apiKey:"AIzaSyBVobJ1gh4oXd3zjfa3Jx1yy8k8inJNY30",authDomain:"gmh-myphotoapp.firebaseapp.com",projectId:"gmh-myphotoapp",storageBucket:"gmh-myphotoapp.appspot.com",messagingSenderId:"643008644751",appId:"1:643008644751:web:8c34050f3db9874c3512fa",measurementId:"G-G8C9HRP084"};let m1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n,bootstrap:[g1]}),n.\u0275inj=g.cJS({providers:[vv],imports:[[ya,l1,kO,Dd.hO.initializeApp($N_firebaseConfig),iw,a1]]}),n})();(0,g.G48)(),ll().bootstrapModule(m1).catch(n=>console.error(n))},3394:(We,me,F)=>{"use strict";F.d(me,{Z:()=>be});var g=F(3854),X=F(3910),L=F(8026),ae=F(5422);class ie{constructor(he,Te){this._delegate=he,this.firebase=Te,(0,L._addComponent)(he,new X.wA("app-compat",()=>this,"PUBLIC")),this.container=he.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(he){this._delegate.automaticDataCollectionEnabled=he}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(he=>{this._delegate.checkDestroyed(),he()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,L.deleteApp)(this._delegate)))}_getService(he,Te=L._DEFAULT_ENTRY_NAME){var Me;this._delegate.checkDestroyed();const De=this._delegate.container.getProvider(he);return!De.isInitialized()&&"EXPLICIT"===(null===(Me=De.getComponent())||void 0===Me?void 0:Me.instantiationMode)&&De.initialize(),De.getImmediate({identifier:Te})}_removeServiceInstance(he,Te=L._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(he).clearInstance(Te)}_addComponent(he){(0,L._addComponent)(this._delegate,he)}_addOrOverwriteComponent(he){(0,L._addOrOverwriteComponent)(this._delegate,he)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const _e=new g.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),P=function ee(){const fe=function(fe){const he={},Te={__esModule:!0,initializeApp:function(Et,Pe={}){const ke=L.initializeApp(Et,Pe);if((0,g.r3)(he,ke.name))return he[ke.name];const je=new fe(ke,Te);return he[ke.name]=je,je},app:De,registerVersion:L.registerVersion,setLogLevel:L.setLogLevel,onLog:L.onLog,apps:null,SDK_VERSION:L.SDK_VERSION,INTERNAL:{registerComponent:function(Et){const Pe=Et.name,ke=Pe.replace("-compat","");if(L._registerComponent(Et)&&"PUBLIC"===Et.type){const je=(et=De())=>{if("function"!=typeof et[ke])throw _e.create("invalid-app-argument",{appName:Pe});return et[ke]()};void 0!==Et.serviceProps&&(0,g.ZB)(je,Et.serviceProps),Te[ke]=je,fe.prototype[ke]=function(...et){return this._getService.bind(this,Pe).apply(this,Et.multipleInstances?et:[])}}return"PUBLIC"===Et.type?Te[ke]:null},removeApp:function(Et){delete he[Et]},useAsService:function(Et,Pe){return"serverAuth"===Pe?null:Pe},modularAPIs:L}};function De(Et){if(!(0,g.r3)(he,Et=Et||L._DEFAULT_ENTRY_NAME))throw _e.create("no-app",{appName:Et});return he[Et]}return Te.default=Te,Object.defineProperty(Te,"apps",{get:function(){return Object.keys(he).map(Et=>he[Et])}}),De.App=fe,Te}(ie);return fe.INTERNAL=Object.assign(Object.assign({},fe.INTERNAL),{createFirebaseNamespace:ee,extendNamespace:function(Te){(0,g.ZB)(fe,Te)},createSubscribe:g.ne,ErrorFactory:g.LL,deepExtend:g.ZB}),fe}(),V=new ae.Yd("@firebase/app-compat");if((0,g.jU)()&&void 0!==self.firebase){V.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const fe=self.firebase.SDK_VERSION;fe&&fe.indexOf("LITE")>=0&&V.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const be=P;(0,L.registerVersion)("@firebase/app-compat","0.1.37",undefined)},8026:(We,me,F)=>{"use strict";F.r(me),F.d(me,{FirebaseError:()=>ae.ZR,SDK_VERSION:()=>bs,_DEFAULT_ENTRY_NAME:()=>xr,_addComponent:()=>wi,_addOrOverwriteComponent:()=>js,_apps:()=>sr,_clearComponents:()=>ns,_components:()=>br,_getProvider:()=>$t,_registerComponent:()=>dn,_removeServiceInstance:()=>Rr,deleteApp:()=>wr,getApp:()=>Mr,getApps:()=>Se,initializeApp:()=>Un,onLog:()=>_n,registerVersion:()=>sn,setLogLevel:()=>Hs});var g=F(8239),X=F(3910),L=F(5422),ae=F(3854),ie=F(4359);class ne{constructor(ve){this.container=ve}getPlatformInfoString(){return this.container.getProviders().map(xe=>{if(function(qe){const ve=qe.getComponent();return"VERSION"===(null==ve?void 0:ve.type)}(xe)){const _t=xe.getImmediate();return`${_t.library}/${_t.version}`}return null}).filter(xe=>xe).join(" ")}}const ce="@firebase/app",P=new L.Yd("@firebase/app"),xr="[DEFAULT]",Yc={[ce]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},sr=new Map,br=new Map;function wi(qe,ve){try{qe.container.addComponent(ve)}catch(xe){P.debug(`Component ${ve.name} failed to register with FirebaseApp ${qe.name}`,xe)}}function js(qe,ve){qe.container.addOrOverwriteComponent(ve)}function dn(qe){const ve=qe.name;if(br.has(ve))return P.debug(`There were multiple attempts to register component ${ve}.`),!1;br.set(ve,qe);for(const xe of sr.values())wi(xe,qe);return!0}function $t(qe,ve){const xe=qe.container.getProvider("heartbeat").getImmediate({optional:!0});return xe&&xe.triggerHeartbeat(),qe.container.getProvider(ve)}function Rr(qe,ve,xe=xr){$t(qe,ve).clearInstance(xe)}function ns(){br.clear()}const yt=new ae.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Vn{constructor(ve,xe,_t){this._isDeleted=!1,this._options=Object.assign({},ve),this._config=Object.assign({},xe),this._name=xe.name,this._automaticDataCollectionEnabled=xe.automaticDataCollectionEnabled,this._container=_t,this.container.addComponent(new X.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ve){this.checkDestroyed(),this._automaticDataCollectionEnabled=ve}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(ve){this._isDeleted=ve}checkDestroyed(){if(this.isDeleted)throw yt.create("app-deleted",{appName:this._name})}}const bs="9.12.1";function Un(qe,ve={}){let xe=qe;"object"!=typeof ve&&(ve={name:ve});const _t=Object.assign({name:xr,automaticDataCollectionEnabled:!1},ve),bt=_t.name;if("string"!=typeof bt||!bt)throw yt.create("bad-app-name",{appName:String(bt)});if(xe||(xe=(0,ae.aH)()),!xe)throw yt.create("no-options");const zt=sr.get(bt);if(zt){if((0,ae.vZ)(xe,zt.options)&&(0,ae.vZ)(_t,zt.config))return zt;throw yt.create("duplicate-app",{appName:bt})}const $=new X.H0(bt);for(const z of br.values())$.addComponent(z);const j=new Vn(xe,_t,$);return sr.set(bt,j),j}function Mr(qe=xr){const ve=sr.get(qe);if(!ve&&qe===xr)return Un();if(!ve)throw yt.create("no-app",{appName:qe});return ve}function Se(){return Array.from(sr.values())}function wr(qe){return Cn.apply(this,arguments)}function Cn(){return(Cn=(0,g.Z)(function*(qe){const ve=qe.name;sr.has(ve)&&(sr.delete(ve),yield Promise.all(qe.container.getProviders().map(xe=>xe.delete())),qe.isDeleted=!0)})).apply(this,arguments)}function sn(qe,ve,xe){var _t;let bt=null!==(_t=Yc[qe])&&void 0!==_t?_t:qe;xe&&(bt+=`-${xe}`);const zt=bt.match(/\s|\//),$=ve.match(/\s|\//);if(zt||$){const j=[`Unable to register library "${bt}" with version "${ve}":`];return zt&&j.push(`library name "${bt}" contains illegal characters (whitespace or "/")`),zt&&$&&j.push("and"),$&&j.push(`version name "${ve}" contains illegal characters (whitespace or "/")`),void P.warn(j.join(" "))}dn(new X.wA(`${bt}-version`,()=>({library:bt,version:ve}),"VERSION"))}function _n(qe,ve){if(null!==qe&&"function"!=typeof qe)throw yt.create("invalid-log-argument");(0,L.Am)(qe,ve)}function Hs(qe){(0,L.Ub)(qe)}const Nr="firebase-heartbeat-store";let Or=null;function si(){return Or||(Or=(0,ie.X3)("firebase-heartbeat-database",1,{upgrade:(qe,ve)=>{0===ve&&qe.createObjectStore(Nr)}}).catch(qe=>{throw yt.create("idb-open",{originalErrorMessage:qe.message})})),Or}function nt(){return(nt=(0,g.Z)(function*(qe){var ve;try{return(yield si()).transaction(Nr).objectStore(Nr).get(Ii(qe))}catch(xe){if(xe instanceof ae.ZR)P.warn(xe.message);else{const _t=yt.create("idb-get",{originalErrorMessage:null===(ve=xe)||void 0===ve?void 0:ve.message});P.warn(_t.message)}}})).apply(this,arguments)}function tt(qe,ve){return zn.apply(this,arguments)}function zn(){return(zn=(0,g.Z)(function*(qe,ve){var xe;try{const bt=(yield si()).transaction(Nr,"readwrite");return yield bt.objectStore(Nr).put(ve,Ii(qe)),bt.done}catch(_t){if(_t instanceof ae.ZR)P.warn(_t.message);else{const bt=yt.create("idb-set",{originalErrorMessage:null===(xe=_t)||void 0===xe?void 0:xe.message});P.warn(bt.message)}}})).apply(this,arguments)}function Ii(qe){return`${qe.name}!${qe.options.appId}`}class Kt{constructor(ve){this.container=ve,this._heartbeatsCache=null;const xe=this.container.getProvider("app").getImmediate();this._storage=new za(xe),this._heartbeatsCachePromise=this._storage.read().then(_t=>(this._heartbeatsCache=_t,_t))}triggerHeartbeat(){var ve=this;return(0,g.Z)(function*(){const _t=ve.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),bt=go();if(null===ve._heartbeatsCache&&(ve._heartbeatsCache=yield ve._heartbeatsCachePromise),ve._heartbeatsCache.lastSentHeartbeatDate!==bt&&!ve._heartbeatsCache.heartbeats.some(zt=>zt.date===bt))return ve._heartbeatsCache.heartbeats.push({date:bt,agent:_t}),ve._heartbeatsCache.heartbeats=ve._heartbeatsCache.heartbeats.filter(zt=>{const $=new Date(zt.date).valueOf();return Date.now()-$<=2592e6}),ve._storage.overwrite(ve._heartbeatsCache)})()}getHeartbeatsHeader(){var ve=this;return(0,g.Z)(function*(){if(null===ve._heartbeatsCache&&(yield ve._heartbeatsCachePromise),null===ve._heartbeatsCache||0===ve._heartbeatsCache.heartbeats.length)return"";const xe=go(),{heartbeatsToSend:_t,unsentEntries:bt}=function(qe,ve=1024){const xe=[];let _t=qe.slice();for(const bt of qe){const zt=xe.find($=>$.agent===bt.agent);if(zt){if(zt.dates.push(bt.date),Ye(xe)>ve){zt.dates.pop();break}}else if(xe.push({agent:bt.agent,dates:[bt.date]}),Ye(xe)>ve){xe.pop();break}_t=_t.slice(1)}return{heartbeatsToSend:xe,unsentEntries:_t}}(ve._heartbeatsCache.heartbeats),zt=(0,ae.L)(JSON.stringify({version:2,heartbeats:_t}));return ve._heartbeatsCache.lastSentHeartbeatDate=xe,bt.length>0?(ve._heartbeatsCache.heartbeats=bt,yield ve._storage.overwrite(ve._heartbeatsCache)):(ve._heartbeatsCache.heartbeats=[],ve._storage.overwrite(ve._heartbeatsCache)),zt})()}}function go(){return(new Date).toISOString().substring(0,10)}class za{constructor(ve){this.app=ve,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,g.Z)(function*(){return!!(0,ae.hl)()&&(0,ae.eu)().then(()=>!0).catch(()=>!1)})()}read(){var ve=this;return(0,g.Z)(function*(){return(yield ve._canUseIndexedDBPromise)&&(yield function(qe){return nt.apply(this,arguments)}(ve.app))||{heartbeats:[]}})()}overwrite(ve){var xe=this;return(0,g.Z)(function*(){var _t;if(yield xe._canUseIndexedDBPromise){const zt=yield xe.read();return tt(xe.app,{lastSentHeartbeatDate:null!==(_t=ve.lastSentHeartbeatDate)&&void 0!==_t?_t:zt.lastSentHeartbeatDate,heartbeats:ve.heartbeats})}})()}add(ve){var xe=this;return(0,g.Z)(function*(){var _t;if(yield xe._canUseIndexedDBPromise){const zt=yield xe.read();return tt(xe.app,{lastSentHeartbeatDate:null!==(_t=ve.lastSentHeartbeatDate)&&void 0!==_t?_t:zt.lastSentHeartbeatDate,heartbeats:[...zt.heartbeats,...ve.heartbeats]})}})()}}function Ye(qe){return(0,ae.L)(JSON.stringify({version:2,heartbeats:qe})).length}dn(new X.wA("platform-logger",ve=>new ne(ve),"PRIVATE")),dn(new X.wA("heartbeat",ve=>new Kt(ve),"PRIVATE")),sn(ce,"0.8.2",""),sn(ce,"0.8.2","esm2017"),sn("fire-js","")},3910:(We,me,F)=>{"use strict";F.d(me,{wA:()=>L,H0:()=>ce});var g=F(8239),X=F(3854);class L{constructor(P,V,Y){this.name=P,this.instanceFactory=V,this.type=Y,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(P){return this.instantiationMode=P,this}setMultipleInstances(P){return this.multipleInstances=P,this}setServiceProps(P){return this.serviceProps=P,this}setInstanceCreatedCallback(P){return this.onInstanceCreated=P,this}}const ae="[DEFAULT]";class ie{constructor(P,V){this.name=P,this.container=V,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(P){const V=this.normalizeInstanceIdentifier(P);if(!this.instancesDeferred.has(V)){const Y=new X.BH;if(this.instancesDeferred.set(V,Y),this.isInitialized(V)||this.shouldAutoInitialize())try{const K=this.getOrInitializeService({instanceIdentifier:V});K&&Y.resolve(K)}catch(K){}}return this.instancesDeferred.get(V).promise}getImmediate(P){var V;const Y=this.normalizeInstanceIdentifier(null==P?void 0:P.identifier),K=null!==(V=null==P?void 0:P.optional)&&void 0!==V&&V;if(!this.isInitialized(Y)&&!this.shouldAutoInitialize()){if(K)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Y})}catch(le){if(K)return null;throw le}}getComponent(){return this.component}setComponent(P){if(P.name!==this.name)throw Error(`Mismatching Component ${P.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=P,this.shouldAutoInitialize()){if("EAGER"===P.instantiationMode)try{this.getOrInitializeService({instanceIdentifier:ae})}catch(V){}for(const[V,Y]of this.instancesDeferred.entries()){const K=this.normalizeInstanceIdentifier(V);try{const le=this.getOrInitializeService({instanceIdentifier:K});Y.resolve(le)}catch(le){}}}}clearInstance(P=ae){this.instancesDeferred.delete(P),this.instancesOptions.delete(P),this.instances.delete(P)}delete(){var P=this;return(0,g.Z)(function*(){const V=Array.from(P.instances.values());yield Promise.all([...V.filter(Y=>"INTERNAL"in Y).map(Y=>Y.INTERNAL.delete()),...V.filter(Y=>"_delete"in Y).map(Y=>Y._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(P=ae){return this.instances.has(P)}getOptions(P=ae){return this.instancesOptions.get(P)||{}}initialize(P={}){const{options:V={}}=P,Y=this.normalizeInstanceIdentifier(P.instanceIdentifier);if(this.isInitialized(Y))throw Error(`${this.name}(${Y}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const K=this.getOrInitializeService({instanceIdentifier:Y,options:V});for(const[le,be]of this.instancesDeferred.entries())Y===this.normalizeInstanceIdentifier(le)&&be.resolve(K);return K}onInit(P,V){var Y;const K=this.normalizeInstanceIdentifier(V),le=null!==(Y=this.onInitCallbacks.get(K))&&void 0!==Y?Y:new Set;le.add(P),this.onInitCallbacks.set(K,le);const be=this.instances.get(K);return be&&P(be,K),()=>{le.delete(P)}}invokeOnInitCallbacks(P,V){const Y=this.onInitCallbacks.get(V);if(Y)for(const K of Y)try{K(P,V)}catch(le){}}getOrInitializeService({instanceIdentifier:P,options:V={}}){let Y=this.instances.get(P);if(!Y&&this.component&&(Y=this.component.instanceFactory(this.container,{instanceIdentifier:(ee=P,ee===ae?void 0:ee),options:V}),this.instances.set(P,Y),this.instancesOptions.set(P,V),this.invokeOnInitCallbacks(Y,P),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,P,Y)}catch(K){}var ee;return Y||null}normalizeInstanceIdentifier(P=ae){return this.component?this.component.multipleInstances?P:ae:P}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ce{constructor(P){this.name=P,this.providers=new Map}addComponent(P){const V=this.getProvider(P.name);if(V.isComponentSet())throw new Error(`Component ${P.name} has already been registered with ${this.name}`);V.setComponent(P)}addOrOverwriteComponent(P){this.getProvider(P.name).isComponentSet()&&this.providers.delete(P.name),this.addComponent(P)}getProvider(P){if(this.providers.has(P))return this.providers.get(P);const V=new ie(P,this);return this.providers.set(P,V),V}getProviders(){return Array.from(this.providers.values())}}},5422:(We,me,F)=>{"use strict";F.d(me,{in:()=>X,Yd:()=>_e,Ub:()=>ce,Am:()=>ee});const g=[];var X=(()=>{return(P=X||(X={}))[P.DEBUG=0]="DEBUG",P[P.VERBOSE=1]="VERBOSE",P[P.INFO=2]="INFO",P[P.WARN=3]="WARN",P[P.ERROR=4]="ERROR",P[P.SILENT=5]="SILENT",X;var P})();const L={debug:X.DEBUG,verbose:X.VERBOSE,info:X.INFO,warn:X.WARN,error:X.ERROR,silent:X.SILENT},ae=X.INFO,ie={[X.DEBUG]:"log",[X.VERBOSE]:"log",[X.INFO]:"info",[X.WARN]:"warn",[X.ERROR]:"error"},ne=(P,V,...Y)=>{if(V<P.logLevel)return;const K=(new Date).toISOString(),le=ie[V];if(!le)throw new Error(`Attempted to log a message with an invalid logType (value: ${V})`);console[le](`[${K}]  ${P.name}:`,...Y)};class _e{constructor(V){this.name=V,this._logLevel=ae,this._logHandler=ne,this._userLogHandler=null,g.push(this)}get logLevel(){return this._logLevel}set logLevel(V){if(!(V in X))throw new TypeError(`Invalid value "${V}" assigned to \`logLevel\``);this._logLevel=V}setLogLevel(V){this._logLevel="string"==typeof V?L[V]:V}get logHandler(){return this._logHandler}set logHandler(V){if("function"!=typeof V)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=V}get userLogHandler(){return this._userLogHandler}set userLogHandler(V){this._userLogHandler=V}debug(...V){this._userLogHandler&&this._userLogHandler(this,X.DEBUG,...V),this._logHandler(this,X.DEBUG,...V)}log(...V){this._userLogHandler&&this._userLogHandler(this,X.VERBOSE,...V),this._logHandler(this,X.VERBOSE,...V)}info(...V){this._userLogHandler&&this._userLogHandler(this,X.INFO,...V),this._logHandler(this,X.INFO,...V)}warn(...V){this._userLogHandler&&this._userLogHandler(this,X.WARN,...V),this._logHandler(this,X.WARN,...V)}error(...V){this._userLogHandler&&this._userLogHandler(this,X.ERROR,...V),this._logHandler(this,X.ERROR,...V)}}function ce(P){g.forEach(V=>{V.setLogLevel(P)})}function ee(P,V){for(const Y of g){let K=null;V&&V.level&&(K=L[V.level]),Y.userLogHandler=null===P?null:(le,be,...fe)=>{const he=fe.map(Te=>{if(null==Te)return null;if("string"==typeof Te)return Te;if("number"==typeof Te||"boolean"==typeof Te)return Te.toString();if(Te instanceof Error)return Te.message;try{return JSON.stringify(Te)}catch(Me){return null}}).filter(Te=>Te).join(" ");be>=(null!=K?K:le.logLevel)&&P({level:X[be].toLowerCase(),message:he,args:fe,type:le.name})}}}},4359:(We,me,F)=>{"use strict";F.d(me,{Lj:()=>Ze,X3:()=>De});var g=F(8239);let L,ae;const _e=new WeakMap,ce=new WeakMap,ee=new WeakMap,P=new WeakMap,V=new WeakMap;let le={get(Pe,ke,je){if(Pe instanceof IDBTransaction){if("done"===ke)return ce.get(Pe);if("objectStoreNames"===ke)return Pe.objectStoreNames||ee.get(Pe);if("store"===ke)return je.objectStoreNames[1]?void 0:je.objectStore(je.objectStoreNames[0])}return Te(Pe[ke])},set:(Pe,ke,je)=>(Pe[ke]=je,!0),has:(Pe,ke)=>Pe instanceof IDBTransaction&&("done"===ke||"store"===ke)||ke in Pe};function he(Pe){return"function"==typeof Pe?function(Pe){return Pe!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(ae||(ae=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(Pe)?function(...ke){return Pe.apply(Me(this),ke),Te(_e.get(this))}:function(...ke){return Te(Pe.apply(Me(this),ke))}:function(ke,...je){const et=Pe.call(Me(this),ke,...je);return ee.set(et,ke.sort?ke.sort():[ke]),Te(et)}}(Pe):(Pe instanceof IDBTransaction&&function(Pe){if(ce.has(Pe))return;const ke=new Promise((je,et)=>{const rt=()=>{Pe.removeEventListener("complete",Dt),Pe.removeEventListener("error",Ge),Pe.removeEventListener("abort",Ge)},Dt=()=>{je(),rt()},Ge=()=>{et(Pe.error||new DOMException("AbortError","AbortError")),rt()};Pe.addEventListener("complete",Dt),Pe.addEventListener("error",Ge),Pe.addEventListener("abort",Ge)});ce.set(Pe,ke)}(Pe),((Pe,ke)=>ke.some(je=>Pe instanceof je))(Pe,L||(L=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(Pe,le):Pe)}function Te(Pe){if(Pe instanceof IDBRequest)return function(Pe){const ke=new Promise((je,et)=>{const rt=()=>{Pe.removeEventListener("success",Dt),Pe.removeEventListener("error",Ge)},Dt=()=>{je(Te(Pe.result)),rt()},Ge=()=>{et(Pe.error),rt()};Pe.addEventListener("success",Dt),Pe.addEventListener("error",Ge)});return ke.then(je=>{je instanceof IDBCursor&&_e.set(je,Pe)}).catch(()=>{}),V.set(ke,Pe),ke}(Pe);if(P.has(Pe))return P.get(Pe);const ke=he(Pe);return ke!==Pe&&(P.set(Pe,ke),V.set(ke,Pe)),ke}const Me=Pe=>V.get(Pe);function De(Pe,ke,{blocked:je,upgrade:et,blocking:rt,terminated:Dt}={}){const Ge=indexedDB.open(Pe,ke),Mn=Te(Ge);return et&&Ge.addEventListener("upgradeneeded",ii=>{et(Te(Ge.result),ii.oldVersion,ii.newVersion,Te(Ge.transaction))}),je&&Ge.addEventListener("blocked",()=>je()),Mn.then(ii=>{Dt&&ii.addEventListener("close",()=>Dt()),rt&&ii.addEventListener("versionchange",()=>rt())}).catch(()=>{}),Mn}function Ze(Pe,{blocked:ke}={}){const je=indexedDB.deleteDatabase(Pe);return ke&&je.addEventListener("blocked",()=>ke()),Te(je).then(()=>{})}const at=["get","getKey","getAll","getAllKeys","count"],Be=["put","add","delete","clear"],Lt=new Map;function Et(Pe,ke){if(!(Pe instanceof IDBDatabase)||ke in Pe||"string"!=typeof ke)return;if(Lt.get(ke))return Lt.get(ke);const je=ke.replace(/FromIndex$/,""),et=ke!==je,rt=Be.includes(je);if(!(je in(et?IDBIndex:IDBObjectStore).prototype)||!rt&&!at.includes(je))return;const Dt=function(){var Ge=(0,g.Z)(function*(Mn,...ii){const Li=this.transaction(Mn,rt?"readwrite":"readonly");let xr=Li.store;return et&&(xr=xr.index(ii.shift())),(yield Promise.all([xr[je](...ii),rt&&Li.done]))[0]});return function(ii){return Ge.apply(this,arguments)}}();return Lt.set(ke,Dt),Dt}var Pe;le=zN(WN({},Pe=le),{get:(ke,je,et)=>Et(ke,je)||Pe.get(ke,je,et),has:(ke,je)=>!!Et(ke,je)||Pe.has(ke,je)})},8239:(We,me,F)=>{"use strict";function g(L,ae,ie,ne,_e,ce,ee){try{var P=L[ce](ee),V=P.value}catch(Y){return void ie(Y)}P.done?ae(V):Promise.resolve(V).then(ne,_e)}function X(L){return function(){var ae=this,ie=arguments;return new Promise(function(ne,_e){var ce=L.apply(ae,ie);function ee(V){g(ce,ne,_e,ee,P,"next",V)}function P(V){g(ce,ne,_e,ee,P,"throw",V)}ee(void 0)})}}F.d(me,{Z:()=>X})}},We=>{We(We.s=2088)}]);